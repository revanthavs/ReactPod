(function(){const or=document.createElement("link").relList;if(or&&or.supports&&or.supports("modulepreload"))return;for(const cr of document.querySelectorAll('link[rel="modulepreload"]'))ur(cr);new MutationObserver(cr=>{for(const dr of cr)if(dr.type==="childList")for(const fr of dr.addedNodes)fr.tagName==="LINK"&&fr.rel==="modulepreload"&&ur(fr)}).observe(document,{childList:!0,subtree:!0});function lr(cr){const dr={};return cr.integrity&&(dr.integrity=cr.integrity),cr.referrerPolicy&&(dr.referrerPolicy=cr.referrerPolicy),cr.crossOrigin==="use-credentials"?dr.credentials="include":cr.crossOrigin==="anonymous"?dr.credentials="omit":dr.credentials="same-origin",dr}function ur(cr){if(cr.ep)return;cr.ep=!0;const dr=lr(cr);fetch(cr.href,dr)}})();function getDefaultExportFromCjs(ar){return ar&&ar.__esModule&&Object.prototype.hasOwnProperty.call(ar,"default")?ar.default:ar}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$2=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t$1=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(ar){return ar===null||typeof ar!="object"?null:(ar=z$2&&ar[z$2]||ar["@@iterator"],typeof ar=="function"?ar:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$2={};function E$3(ar,or,lr){this.props=ar,this.context=or,this.refs=D$2,this.updater=lr||B$2}E$3.prototype.isReactComponent={};E$3.prototype.setState=function(ar,or){if(typeof ar!="object"&&typeof ar!="function"&&ar!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ar,or,"setState")};E$3.prototype.forceUpdate=function(ar){this.updater.enqueueForceUpdate(this,ar,"forceUpdate")};function F$1(){}F$1.prototype=E$3.prototype;function G$2(ar,or,lr){this.props=ar,this.context=or,this.refs=D$2,this.updater=lr||B$2}var H$2=G$2.prototype=new F$1;H$2.constructor=G$2;C$2(H$2,E$3.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$2(ar,or,lr){var ur,cr={},dr=null,fr=null;if(or!=null)for(ur in or.ref!==void 0&&(fr=or.ref),or.key!==void 0&&(dr=""+or.key),or)J$1.call(or,ur)&&!L$2.hasOwnProperty(ur)&&(cr[ur]=or[ur]);var pr=arguments.length-2;if(pr===1)cr.children=lr;else if(1<pr){for(var mr=Array(pr),hr=0;hr<pr;hr++)mr[hr]=arguments[hr+2];cr.children=mr}if(ar&&ar.defaultProps)for(ur in pr=ar.defaultProps,pr)cr[ur]===void 0&&(cr[ur]=pr[ur]);return{$$typeof:l$2,type:ar,key:dr,ref:fr,props:cr,_owner:K$2.current}}function N$2(ar,or){return{$$typeof:l$2,type:ar.type,key:or,ref:ar.ref,props:ar.props,_owner:ar._owner}}function O$2(ar){return typeof ar=="object"&&ar!==null&&ar.$$typeof===l$2}function escape(ar){var or={"=":"=0",":":"=2"};return"$"+ar.replace(/[=:]/g,function(lr){return or[lr]})}var P$2=/\/+/g;function Q$2(ar,or){return typeof ar=="object"&&ar!==null&&ar.key!=null?escape(""+ar.key):or.toString(36)}function R$3(ar,or,lr,ur,cr){var dr=typeof ar;(dr==="undefined"||dr==="boolean")&&(ar=null);var fr=!1;if(ar===null)fr=!0;else switch(dr){case"string":case"number":fr=!0;break;case"object":switch(ar.$$typeof){case l$2:case n$2:fr=!0}}if(fr)return fr=ar,cr=cr(fr),ar=ur===""?"."+Q$2(fr,0):ur,I$2(cr)?(lr="",ar!=null&&(lr=ar.replace(P$2,"$&/")+"/"),R$3(cr,or,lr,"",function(hr){return hr})):cr!=null&&(O$2(cr)&&(cr=N$2(cr,lr+(!cr.key||fr&&fr.key===cr.key?"":(""+cr.key).replace(P$2,"$&/")+"/")+ar)),or.push(cr)),1;if(fr=0,ur=ur===""?".":ur+":",I$2(ar))for(var pr=0;pr<ar.length;pr++){dr=ar[pr];var mr=ur+Q$2(dr,pr);fr+=R$3(dr,or,lr,mr,cr)}else if(mr=A$2(ar),typeof mr=="function")for(ar=mr.call(ar),pr=0;!(dr=ar.next()).done;)dr=dr.value,mr=ur+Q$2(dr,pr++),fr+=R$3(dr,or,lr,mr,cr);else if(dr==="object")throw or=String(ar),Error("Objects are not valid as a React child (found: "+(or==="[object Object]"?"object with keys {"+Object.keys(ar).join(", ")+"}":or)+"). If you meant to render a collection of children, use an array instead.");return fr}function S$2(ar,or,lr){if(ar==null)return ar;var ur=[],cr=0;return R$3(ar,ur,"","",function(dr){return or.call(lr,dr,cr++)}),ur}function T$2(ar){if(ar._status===-1){var or=ar._result;or=or(),or.then(function(lr){(ar._status===0||ar._status===-1)&&(ar._status=1,ar._result=lr)},function(lr){(ar._status===0||ar._status===-1)&&(ar._status=2,ar._result=lr)}),ar._status===-1&&(ar._status=0,ar._result=or)}if(ar._status===1)return ar._result.default;throw ar._result}var U$2={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$2};function X$2(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$2,forEach:function(ar,or,lr){S$2(ar,function(){or.apply(this,arguments)},lr)},count:function(ar){var or=0;return S$2(ar,function(){or++}),or},toArray:function(ar){return S$2(ar,function(or){return or})||[]},only:function(ar){if(!O$2(ar))throw Error("React.Children.only expected to receive a single React element child.");return ar}};react_production_min.Component=E$3;react_production_min.Fragment=p$3;react_production_min.Profiler=r$1;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.act=X$2;react_production_min.cloneElement=function(ar,or,lr){if(ar==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ar+".");var ur=C$2({},ar.props),cr=ar.key,dr=ar.ref,fr=ar._owner;if(or!=null){if(or.ref!==void 0&&(dr=or.ref,fr=K$2.current),or.key!==void 0&&(cr=""+or.key),ar.type&&ar.type.defaultProps)var pr=ar.type.defaultProps;for(mr in or)J$1.call(or,mr)&&!L$2.hasOwnProperty(mr)&&(ur[mr]=or[mr]===void 0&&pr!==void 0?pr[mr]:or[mr])}var mr=arguments.length-2;if(mr===1)ur.children=lr;else if(1<mr){pr=Array(mr);for(var hr=0;hr<mr;hr++)pr[hr]=arguments[hr+2];ur.children=pr}return{$$typeof:l$2,type:ar.type,key:cr,ref:dr,props:ur,_owner:fr}};react_production_min.createContext=function(ar){return ar={$$typeof:u$1,_currentValue:ar,_currentValue2:ar,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ar.Provider={$$typeof:t$1,_context:ar},ar.Consumer=ar};react_production_min.createElement=M$2;react_production_min.createFactory=function(ar){var or=M$2.bind(null,ar);return or.type=ar,or};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(ar){return{$$typeof:v$2,render:ar}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(ar){return{$$typeof:y$1,_payload:{_status:-1,_result:ar},_init:T$2}};react_production_min.memo=function(ar,or){return{$$typeof:x$1,type:ar,compare:or===void 0?null:or}};react_production_min.startTransition=function(ar){var or=V$2.transition;V$2.transition={};try{ar()}finally{V$2.transition=or}};react_production_min.unstable_act=X$2;react_production_min.useCallback=function(ar,or){return U$2.current.useCallback(ar,or)};react_production_min.useContext=function(ar){return U$2.current.useContext(ar)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(ar){return U$2.current.useDeferredValue(ar)};react_production_min.useEffect=function(ar,or){return U$2.current.useEffect(ar,or)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(ar,or,lr){return U$2.current.useImperativeHandle(ar,or,lr)};react_production_min.useInsertionEffect=function(ar,or){return U$2.current.useInsertionEffect(ar,or)};react_production_min.useLayoutEffect=function(ar,or){return U$2.current.useLayoutEffect(ar,or)};react_production_min.useMemo=function(ar,or){return U$2.current.useMemo(ar,or)};react_production_min.useReducer=function(ar,or,lr){return U$2.current.useReducer(ar,or,lr)};react_production_min.useRef=function(ar){return U$2.current.useRef(ar)};react_production_min.useState=function(ar){return U$2.current.useState(ar)};react_production_min.useSyncExternalStore=function(ar,or,lr){return U$2.current.useSyncExternalStore(ar,or,lr)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k$1=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n$1=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q$1(ar,or,lr){var ur,cr={},dr=null,fr=null;lr!==void 0&&(dr=""+lr),or.key!==void 0&&(dr=""+or.key),or.ref!==void 0&&(fr=or.ref);for(ur in or)m$2.call(or,ur)&&!p$2.hasOwnProperty(ur)&&(cr[ur]=or[ur]);if(ar&&ar.defaultProps)for(ur in or=ar.defaultProps,or)cr[ur]===void 0&&(cr[ur]=or[ur]);return{$$typeof:k$1,type:ar,key:dr,ref:fr,props:cr,_owner:n$1.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(ar){function or(_i,ba){var xa=_i.length;_i.push(ba);e:for(;0<xa;){var $a=xa-1>>>1,os=_i[$a];if(0<cr(os,ba))_i[$a]=ba,_i[xa]=os,xa=$a;else break e}}function lr(_i){return _i.length===0?null:_i[0]}function ur(_i){if(_i.length===0)return null;var ba=_i[0],xa=_i.pop();if(xa!==ba){_i[0]=xa;e:for(var $a=0,os=_i.length,ns=os>>>1;$a<ns;){var hs=2*($a+1)-1,ks=_i[hs],Ts=hs+1,Es=_i[Ts];if(0>cr(ks,xa))Ts<os&&0>cr(Es,ks)?(_i[$a]=Es,_i[Ts]=xa,$a=Ts):(_i[$a]=ks,_i[hs]=xa,$a=hs);else if(Ts<os&&0>cr(Es,xa))_i[$a]=Es,_i[Ts]=xa,$a=Ts;else break e}}return ba}function cr(_i,ba){var xa=_i.sortIndex-ba.sortIndex;return xa!==0?xa:_i.id-ba.id}if(typeof performance=="object"&&typeof performance.now=="function"){var dr=performance;ar.unstable_now=function(){return dr.now()}}else{var fr=Date,pr=fr.now();ar.unstable_now=function(){return fr.now()-pr}}var mr=[],hr=[],gr=1,vr=null,wr=3,_r=!1,Cr=!1,Sr=!1,Dr=typeof setTimeout=="function"?setTimeout:null,Er=typeof clearTimeout=="function"?clearTimeout:null,kr=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ir(_i){for(var ba=lr(hr);ba!==null;){if(ba.callback===null)ur(hr);else if(ba.startTime<=_i)ur(hr),ba.sortIndex=ba.expirationTime,or(mr,ba);else break;ba=lr(hr)}}function Br(_i){if(Sr=!1,Ir(_i),!Cr)if(lr(mr)!==null)Cr=!0,es(Nr);else{var ba=lr(hr);ba!==null&&ss(Br,ba.startTime-_i)}}function Nr(_i,ba){Cr=!1,Sr&&(Sr=!1,Er(Rr),Rr=-1),_r=!0;var xa=wr;try{for(Ir(ba),vr=lr(mr);vr!==null&&(!(vr.expirationTime>ba)||_i&&!Jr());){var $a=vr.callback;if(typeof $a=="function"){vr.callback=null,wr=vr.priorityLevel;var os=$a(vr.expirationTime<=ba);ba=ar.unstable_now(),typeof os=="function"?vr.callback=os:vr===lr(mr)&&ur(mr),Ir(ba)}else ur(mr);vr=lr(mr)}if(vr!==null)var ns=!0;else{var hs=lr(hr);hs!==null&&ss(Br,hs.startTime-ba),ns=!1}return ns}finally{vr=null,wr=xa,_r=!1}}var Mr=!1,xr=null,Rr=-1,Or=5,qr=-1;function Jr(){return!(ar.unstable_now()-qr<Or)}function na(){if(xr!==null){var _i=ar.unstable_now();qr=_i;var ba=!0;try{ba=xr(!0,_i)}finally{ba?Wr():(Mr=!1,xr=null)}}else Mr=!1}var Wr;if(typeof kr=="function")Wr=function(){kr(na)};else if(typeof MessageChannel<"u"){var Gr=new MessageChannel,is=Gr.port2;Gr.port1.onmessage=na,Wr=function(){is.postMessage(null)}}else Wr=function(){Dr(na,0)};function es(_i){xr=_i,Mr||(Mr=!0,Wr())}function ss(_i,ba){Rr=Dr(function(){_i(ar.unstable_now())},ba)}ar.unstable_IdlePriority=5,ar.unstable_ImmediatePriority=1,ar.unstable_LowPriority=4,ar.unstable_NormalPriority=3,ar.unstable_Profiling=null,ar.unstable_UserBlockingPriority=2,ar.unstable_cancelCallback=function(_i){_i.callback=null},ar.unstable_continueExecution=function(){Cr||_r||(Cr=!0,es(Nr))},ar.unstable_forceFrameRate=function(_i){0>_i||125<_i?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Or=0<_i?Math.floor(1e3/_i):5},ar.unstable_getCurrentPriorityLevel=function(){return wr},ar.unstable_getFirstCallbackNode=function(){return lr(mr)},ar.unstable_next=function(_i){switch(wr){case 1:case 2:case 3:var ba=3;break;default:ba=wr}var xa=wr;wr=ba;try{return _i()}finally{wr=xa}},ar.unstable_pauseExecution=function(){},ar.unstable_requestPaint=function(){},ar.unstable_runWithPriority=function(_i,ba){switch(_i){case 1:case 2:case 3:case 4:case 5:break;default:_i=3}var xa=wr;wr=_i;try{return ba()}finally{wr=xa}},ar.unstable_scheduleCallback=function(_i,ba,xa){var $a=ar.unstable_now();switch(typeof xa=="object"&&xa!==null?(xa=xa.delay,xa=typeof xa=="number"&&0<xa?$a+xa:$a):xa=$a,_i){case 1:var os=-1;break;case 2:os=250;break;case 5:os=1073741823;break;case 4:os=1e4;break;default:os=5e3}return os=xa+os,_i={id:gr++,callback:ba,priorityLevel:_i,startTime:xa,expirationTime:os,sortIndex:-1},xa>$a?(_i.sortIndex=xa,or(hr,_i),lr(mr)===null&&_i===lr(hr)&&(Sr?(Er(Rr),Rr=-1):Sr=!0,ss(Br,xa-$a))):(_i.sortIndex=os,or(mr,_i),Cr||_r||(Cr=!0,es(Nr))),_i},ar.unstable_shouldYield=Jr,ar.unstable_wrapCallback=function(_i){var ba=wr;return function(){var xa=wr;wr=ba;try{return _i.apply(this,arguments)}finally{wr=xa}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$1(ar){for(var or="https://reactjs.org/docs/error-decoder.html?invariant="+ar,lr=1;lr<arguments.length;lr++)or+="&args[]="+encodeURIComponent(arguments[lr]);return"Minified React error #"+ar+"; visit "+or+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(ar,or){ha(ar,or),ha(ar+"Capture",or)}function ha(ar,or){for(ea[ar]=or,ar=0;ar<or.length;ar++)da.add(or[ar])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(ar){return ja.call(ma,ar)?!0:ja.call(la,ar)?!1:ka.test(ar)?ma[ar]=!0:(la[ar]=!0,!1)}function pa(ar,or,lr,ur){if(lr!==null&&lr.type===0)return!1;switch(typeof or){case"function":case"symbol":return!0;case"boolean":return ur?!1:lr!==null?!lr.acceptsBooleans:(ar=ar.toLowerCase().slice(0,5),ar!=="data-"&&ar!=="aria-");default:return!1}}function qa(ar,or,lr,ur){if(or===null||typeof or>"u"||pa(ar,or,lr,ur))return!0;if(ur)return!1;if(lr!==null)switch(lr.type){case 3:return!or;case 4:return or===!1;case 5:return isNaN(or);case 6:return isNaN(or)||1>or}return!1}function v$1(ar,or,lr,ur,cr,dr,fr){this.acceptsBooleans=or===2||or===3||or===4,this.attributeName=ur,this.attributeNamespace=cr,this.mustUseProperty=lr,this.propertyName=ar,this.type=or,this.sanitizeURL=dr,this.removeEmptyString=fr}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(ar){z$1[ar]=new v$1(ar,0,!1,ar,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(ar){var or=ar[0];z$1[or]=new v$1(or,1,!1,ar[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(ar){z$1[ar]=new v$1(ar,2,!1,ar.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(ar){z$1[ar]=new v$1(ar,2,!1,ar,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(ar){z$1[ar]=new v$1(ar,3,!1,ar.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(ar){z$1[ar]=new v$1(ar,3,!0,ar,null,!1,!1)});["capture","download"].forEach(function(ar){z$1[ar]=new v$1(ar,4,!1,ar,null,!1,!1)});["cols","rows","size","span"].forEach(function(ar){z$1[ar]=new v$1(ar,6,!1,ar,null,!1,!1)});["rowSpan","start"].forEach(function(ar){z$1[ar]=new v$1(ar,5,!1,ar.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(ar){return ar[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(ar){var or=ar.replace(ra,sa);z$1[or]=new v$1(or,1,!1,ar,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(ar){var or=ar.replace(ra,sa);z$1[or]=new v$1(or,1,!1,ar,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(ar){var or=ar.replace(ra,sa);z$1[or]=new v$1(or,1,!1,ar,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(ar){z$1[ar]=new v$1(ar,1,!1,ar.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(ar){z$1[ar]=new v$1(ar,1,!1,ar.toLowerCase(),null,!0,!0)});function ta(ar,or,lr,ur){var cr=z$1.hasOwnProperty(or)?z$1[or]:null;(cr!==null?cr.type!==0:ur||!(2<or.length)||or[0]!=="o"&&or[0]!=="O"||or[1]!=="n"&&or[1]!=="N")&&(qa(or,lr,cr,ur)&&(lr=null),ur||cr===null?oa(or)&&(lr===null?ar.removeAttribute(or):ar.setAttribute(or,""+lr)):cr.mustUseProperty?ar[cr.propertyName]=lr===null?cr.type===3?!1:"":lr:(or=cr.attributeName,ur=cr.attributeNamespace,lr===null?ar.removeAttribute(or):(cr=cr.type,lr=cr===3||cr===4&&lr===!0?"":""+lr,ur?ar.setAttributeNS(ur,or,lr):ar.setAttribute(or,lr))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(ar){return ar===null||typeof ar!="object"?null:(ar=Ja&&ar[Ja]||ar["@@iterator"],typeof ar=="function"?ar:null)}var A$1=Object.assign,La;function Ma(ar){if(La===void 0)try{throw Error()}catch(lr){var or=lr.stack.trim().match(/\n( *(at )?)/);La=or&&or[1]||""}return`
`+La+ar}var Na=!1;function Oa(ar,or){if(!ar||Na)return"";Na=!0;var lr=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(or)if(or=function(){throw Error()},Object.defineProperty(or.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(or,[])}catch(hr){var ur=hr}Reflect.construct(ar,[],or)}else{try{or.call()}catch(hr){ur=hr}ar.call(or.prototype)}else{try{throw Error()}catch(hr){ur=hr}ar()}}catch(hr){if(hr&&ur&&typeof hr.stack=="string"){for(var cr=hr.stack.split(`
`),dr=ur.stack.split(`
`),fr=cr.length-1,pr=dr.length-1;1<=fr&&0<=pr&&cr[fr]!==dr[pr];)pr--;for(;1<=fr&&0<=pr;fr--,pr--)if(cr[fr]!==dr[pr]){if(fr!==1||pr!==1)do if(fr--,pr--,0>pr||cr[fr]!==dr[pr]){var mr=`
`+cr[fr].replace(" at new "," at ");return ar.displayName&&mr.includes("<anonymous>")&&(mr=mr.replace("<anonymous>",ar.displayName)),mr}while(1<=fr&&0<=pr);break}}}finally{Na=!1,Error.prepareStackTrace=lr}return(ar=ar?ar.displayName||ar.name:"")?Ma(ar):""}function Pa(ar){switch(ar.tag){case 5:return Ma(ar.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return ar=Oa(ar.type,!1),ar;case 11:return ar=Oa(ar.type.render,!1),ar;case 1:return ar=Oa(ar.type,!0),ar;default:return""}}function Qa(ar){if(ar==null)return null;if(typeof ar=="function")return ar.displayName||ar.name||null;if(typeof ar=="string")return ar;switch(ar){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof ar=="object")switch(ar.$$typeof){case Ca:return(ar.displayName||"Context")+".Consumer";case Ba:return(ar._context.displayName||"Context")+".Provider";case Da:var or=ar.render;return ar=ar.displayName,ar||(ar=or.displayName||or.name||"",ar=ar!==""?"ForwardRef("+ar+")":"ForwardRef"),ar;case Ga:return or=ar.displayName||null,or!==null?or:Qa(ar.type)||"Memo";case Ha:or=ar._payload,ar=ar._init;try{return Qa(ar(or))}catch{}}return null}function Ra(ar){var or=ar.type;switch(ar.tag){case 24:return"Cache";case 9:return(or.displayName||"Context")+".Consumer";case 10:return(or._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return ar=or.render,ar=ar.displayName||ar.name||"",or.displayName||(ar!==""?"ForwardRef("+ar+")":"ForwardRef");case 7:return"Fragment";case 5:return or;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(or);case 8:return or===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof or=="function")return or.displayName||or.name||null;if(typeof or=="string")return or}return null}function Sa(ar){switch(typeof ar){case"boolean":case"number":case"string":case"undefined":return ar;case"object":return ar;default:return""}}function Ta(ar){var or=ar.type;return(ar=ar.nodeName)&&ar.toLowerCase()==="input"&&(or==="checkbox"||or==="radio")}function Ua(ar){var or=Ta(ar)?"checked":"value",lr=Object.getOwnPropertyDescriptor(ar.constructor.prototype,or),ur=""+ar[or];if(!ar.hasOwnProperty(or)&&typeof lr<"u"&&typeof lr.get=="function"&&typeof lr.set=="function"){var cr=lr.get,dr=lr.set;return Object.defineProperty(ar,or,{configurable:!0,get:function(){return cr.call(this)},set:function(fr){ur=""+fr,dr.call(this,fr)}}),Object.defineProperty(ar,or,{enumerable:lr.enumerable}),{getValue:function(){return ur},setValue:function(fr){ur=""+fr},stopTracking:function(){ar._valueTracker=null,delete ar[or]}}}}function Va(ar){ar._valueTracker||(ar._valueTracker=Ua(ar))}function Wa(ar){if(!ar)return!1;var or=ar._valueTracker;if(!or)return!0;var lr=or.getValue(),ur="";return ar&&(ur=Ta(ar)?ar.checked?"true":"false":ar.value),ar=ur,ar!==lr?(or.setValue(ar),!0):!1}function Xa(ar){if(ar=ar||(typeof document<"u"?document:void 0),typeof ar>"u")return null;try{return ar.activeElement||ar.body}catch{return ar.body}}function Ya(ar,or){var lr=or.checked;return A$1({},or,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:lr??ar._wrapperState.initialChecked})}function Za(ar,or){var lr=or.defaultValue==null?"":or.defaultValue,ur=or.checked!=null?or.checked:or.defaultChecked;lr=Sa(or.value!=null?or.value:lr),ar._wrapperState={initialChecked:ur,initialValue:lr,controlled:or.type==="checkbox"||or.type==="radio"?or.checked!=null:or.value!=null}}function ab(ar,or){or=or.checked,or!=null&&ta(ar,"checked",or,!1)}function bb(ar,or){ab(ar,or);var lr=Sa(or.value),ur=or.type;if(lr!=null)ur==="number"?(lr===0&&ar.value===""||ar.value!=lr)&&(ar.value=""+lr):ar.value!==""+lr&&(ar.value=""+lr);else if(ur==="submit"||ur==="reset"){ar.removeAttribute("value");return}or.hasOwnProperty("value")?cb(ar,or.type,lr):or.hasOwnProperty("defaultValue")&&cb(ar,or.type,Sa(or.defaultValue)),or.checked==null&&or.defaultChecked!=null&&(ar.defaultChecked=!!or.defaultChecked)}function db$1(ar,or,lr){if(or.hasOwnProperty("value")||or.hasOwnProperty("defaultValue")){var ur=or.type;if(!(ur!=="submit"&&ur!=="reset"||or.value!==void 0&&or.value!==null))return;or=""+ar._wrapperState.initialValue,lr||or===ar.value||(ar.value=or),ar.defaultValue=or}lr=ar.name,lr!==""&&(ar.name=""),ar.defaultChecked=!!ar._wrapperState.initialChecked,lr!==""&&(ar.name=lr)}function cb(ar,or,lr){(or!=="number"||Xa(ar.ownerDocument)!==ar)&&(lr==null?ar.defaultValue=""+ar._wrapperState.initialValue:ar.defaultValue!==""+lr&&(ar.defaultValue=""+lr))}var eb=Array.isArray;function fb(ar,or,lr,ur){if(ar=ar.options,or){or={};for(var cr=0;cr<lr.length;cr++)or["$"+lr[cr]]=!0;for(lr=0;lr<ar.length;lr++)cr=or.hasOwnProperty("$"+ar[lr].value),ar[lr].selected!==cr&&(ar[lr].selected=cr),cr&&ur&&(ar[lr].defaultSelected=!0)}else{for(lr=""+Sa(lr),or=null,cr=0;cr<ar.length;cr++){if(ar[cr].value===lr){ar[cr].selected=!0,ur&&(ar[cr].defaultSelected=!0);return}or!==null||ar[cr].disabled||(or=ar[cr])}or!==null&&(or.selected=!0)}}function gb(ar,or){if(or.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A$1({},or,{value:void 0,defaultValue:void 0,children:""+ar._wrapperState.initialValue})}function hb(ar,or){var lr=or.value;if(lr==null){if(lr=or.children,or=or.defaultValue,lr!=null){if(or!=null)throw Error(p$1(92));if(eb(lr)){if(1<lr.length)throw Error(p$1(93));lr=lr[0]}or=lr}or==null&&(or=""),lr=or}ar._wrapperState={initialValue:Sa(lr)}}function ib(ar,or){var lr=Sa(or.value),ur=Sa(or.defaultValue);lr!=null&&(lr=""+lr,lr!==ar.value&&(ar.value=lr),or.defaultValue==null&&ar.defaultValue!==lr&&(ar.defaultValue=lr)),ur!=null&&(ar.defaultValue=""+ur)}function jb(ar){var or=ar.textContent;or===ar._wrapperState.initialValue&&or!==""&&or!==null&&(ar.value=or)}function kb(ar){switch(ar){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(ar,or){return ar==null||ar==="http://www.w3.org/1999/xhtml"?kb(or):ar==="http://www.w3.org/2000/svg"&&or==="foreignObject"?"http://www.w3.org/1999/xhtml":ar}var mb,nb=function(ar){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(or,lr,ur,cr){MSApp.execUnsafeLocalFunction(function(){return ar(or,lr,ur,cr)})}:ar}(function(ar,or){if(ar.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in ar)ar.innerHTML=or;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+or.valueOf().toString()+"</svg>",or=mb.firstChild;ar.firstChild;)ar.removeChild(ar.firstChild);for(;or.firstChild;)ar.appendChild(or.firstChild)}});function ob(ar,or){if(or){var lr=ar.firstChild;if(lr&&lr===ar.lastChild&&lr.nodeType===3){lr.nodeValue=or;return}}ar.textContent=or}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(ar){qb.forEach(function(or){or=or+ar.charAt(0).toUpperCase()+ar.substring(1),pb[or]=pb[ar]})});function rb(ar,or,lr){return or==null||typeof or=="boolean"||or===""?"":lr||typeof or!="number"||or===0||pb.hasOwnProperty(ar)&&pb[ar]?(""+or).trim():or+"px"}function sb(ar,or){ar=ar.style;for(var lr in or)if(or.hasOwnProperty(lr)){var ur=lr.indexOf("--")===0,cr=rb(lr,or[lr],ur);lr==="float"&&(lr="cssFloat"),ur?ar.setProperty(lr,cr):ar[lr]=cr}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(ar,or){if(or){if(tb[ar]&&(or.children!=null||or.dangerouslySetInnerHTML!=null))throw Error(p$1(137,ar));if(or.dangerouslySetInnerHTML!=null){if(or.children!=null)throw Error(p$1(60));if(typeof or.dangerouslySetInnerHTML!="object"||!("__html"in or.dangerouslySetInnerHTML))throw Error(p$1(61))}if(or.style!=null&&typeof or.style!="object")throw Error(p$1(62))}}function vb(ar,or){if(ar.indexOf("-")===-1)return typeof or.is=="string";switch(ar){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(ar){return ar=ar.target||ar.srcElement||window,ar.correspondingUseElement&&(ar=ar.correspondingUseElement),ar.nodeType===3?ar.parentNode:ar}var yb=null,zb=null,Ab=null;function Bb(ar){if(ar=Cb(ar)){if(typeof yb!="function")throw Error(p$1(280));var or=ar.stateNode;or&&(or=Db(or),yb(ar.stateNode,ar.type,or))}}function Eb(ar){zb?Ab?Ab.push(ar):Ab=[ar]:zb=ar}function Fb(){if(zb){var ar=zb,or=Ab;if(Ab=zb=null,Bb(ar),or)for(ar=0;ar<or.length;ar++)Bb(or[ar])}}function Gb(ar,or){return ar(or)}function Hb(){}var Ib=!1;function Jb(ar,or,lr){if(Ib)return ar(or,lr);Ib=!0;try{return Gb(ar,or,lr)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(ar,or){var lr=ar.stateNode;if(lr===null)return null;var ur=Db(lr);if(ur===null)return null;lr=ur[or];e:switch(or){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(ur=!ur.disabled)||(ar=ar.type,ur=!(ar==="button"||ar==="input"||ar==="select"||ar==="textarea")),ar=!ur;break e;default:ar=!1}if(ar)return null;if(lr&&typeof lr!="function")throw Error(p$1(231,or,typeof lr));return lr}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(ar,or,lr,ur,cr,dr,fr,pr,mr){var hr=Array.prototype.slice.call(arguments,3);try{or.apply(lr,hr)}catch(gr){this.onError(gr)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(ar){Ob=!0,Pb=ar}};function Tb(ar,or,lr,ur,cr,dr,fr,pr,mr){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(ar,or,lr,ur,cr,dr,fr,pr,mr){if(Tb.apply(this,arguments),Ob){if(Ob){var hr=Pb;Ob=!1,Pb=null}else throw Error(p$1(198));Qb||(Qb=!0,Rb=hr)}}function Vb(ar){var or=ar,lr=ar;if(ar.alternate)for(;or.return;)or=or.return;else{ar=or;do or=ar,or.flags&4098&&(lr=or.return),ar=or.return;while(ar)}return or.tag===3?lr:null}function Wb(ar){if(ar.tag===13){var or=ar.memoizedState;if(or===null&&(ar=ar.alternate,ar!==null&&(or=ar.memoizedState)),or!==null)return or.dehydrated}return null}function Xb(ar){if(Vb(ar)!==ar)throw Error(p$1(188))}function Yb(ar){var or=ar.alternate;if(!or){if(or=Vb(ar),or===null)throw Error(p$1(188));return or!==ar?null:ar}for(var lr=ar,ur=or;;){var cr=lr.return;if(cr===null)break;var dr=cr.alternate;if(dr===null){if(ur=cr.return,ur!==null){lr=ur;continue}break}if(cr.child===dr.child){for(dr=cr.child;dr;){if(dr===lr)return Xb(cr),ar;if(dr===ur)return Xb(cr),or;dr=dr.sibling}throw Error(p$1(188))}if(lr.return!==ur.return)lr=cr,ur=dr;else{for(var fr=!1,pr=cr.child;pr;){if(pr===lr){fr=!0,lr=cr,ur=dr;break}if(pr===ur){fr=!0,ur=cr,lr=dr;break}pr=pr.sibling}if(!fr){for(pr=dr.child;pr;){if(pr===lr){fr=!0,lr=dr,ur=cr;break}if(pr===ur){fr=!0,ur=dr,lr=cr;break}pr=pr.sibling}if(!fr)throw Error(p$1(189))}}if(lr.alternate!==ur)throw Error(p$1(190))}if(lr.tag!==3)throw Error(p$1(188));return lr.stateNode.current===lr?ar:or}function Zb(ar){return ar=Yb(ar),ar!==null?$b(ar):null}function $b(ar){if(ar.tag===5||ar.tag===6)return ar;for(ar=ar.child;ar!==null;){var or=$b(ar);if(or!==null)return or;ar=ar.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(ar){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,ar,void 0,(ar.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(ar){return ar>>>=0,ar===0?32:31-(pc(ar)/qc|0)|0}var rc=64,sc=4194304;function tc(ar){switch(ar&-ar){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return ar&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return ar&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return ar}}function uc(ar,or){var lr=ar.pendingLanes;if(lr===0)return 0;var ur=0,cr=ar.suspendedLanes,dr=ar.pingedLanes,fr=lr&268435455;if(fr!==0){var pr=fr&~cr;pr!==0?ur=tc(pr):(dr&=fr,dr!==0&&(ur=tc(dr)))}else fr=lr&~cr,fr!==0?ur=tc(fr):dr!==0&&(ur=tc(dr));if(ur===0)return 0;if(or!==0&&or!==ur&&!(or&cr)&&(cr=ur&-ur,dr=or&-or,cr>=dr||cr===16&&(dr&4194240)!==0))return or;if(ur&4&&(ur|=lr&16),or=ar.entangledLanes,or!==0)for(ar=ar.entanglements,or&=ur;0<or;)lr=31-oc(or),cr=1<<lr,ur|=ar[lr],or&=~cr;return ur}function vc(ar,or){switch(ar){case 1:case 2:case 4:return or+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return or+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(ar,or){for(var lr=ar.suspendedLanes,ur=ar.pingedLanes,cr=ar.expirationTimes,dr=ar.pendingLanes;0<dr;){var fr=31-oc(dr),pr=1<<fr,mr=cr[fr];mr===-1?(!(pr&lr)||pr&ur)&&(cr[fr]=vc(pr,or)):mr<=or&&(ar.expiredLanes|=pr),dr&=~pr}}function xc(ar){return ar=ar.pendingLanes&-1073741825,ar!==0?ar:ar&1073741824?1073741824:0}function yc(){var ar=rc;return rc<<=1,!(rc&4194240)&&(rc=64),ar}function zc(ar){for(var or=[],lr=0;31>lr;lr++)or.push(ar);return or}function Ac(ar,or,lr){ar.pendingLanes|=or,or!==536870912&&(ar.suspendedLanes=0,ar.pingedLanes=0),ar=ar.eventTimes,or=31-oc(or),ar[or]=lr}function Bc(ar,or){var lr=ar.pendingLanes&~or;ar.pendingLanes=or,ar.suspendedLanes=0,ar.pingedLanes=0,ar.expiredLanes&=or,ar.mutableReadLanes&=or,ar.entangledLanes&=or,or=ar.entanglements;var ur=ar.eventTimes;for(ar=ar.expirationTimes;0<lr;){var cr=31-oc(lr),dr=1<<cr;or[cr]=0,ur[cr]=-1,ar[cr]=-1,lr&=~dr}}function Cc(ar,or){var lr=ar.entangledLanes|=or;for(ar=ar.entanglements;lr;){var ur=31-oc(lr),cr=1<<ur;cr&or|ar[ur]&or&&(ar[ur]|=or),lr&=~cr}}var C$1=0;function Dc(ar){return ar&=-ar,1<ar?4<ar?ar&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(ar,or){switch(ar){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(or.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(or.pointerId)}}function Tc(ar,or,lr,ur,cr,dr){return ar===null||ar.nativeEvent!==dr?(ar={blockedOn:or,domEventName:lr,eventSystemFlags:ur,nativeEvent:dr,targetContainers:[cr]},or!==null&&(or=Cb(or),or!==null&&Fc(or)),ar):(ar.eventSystemFlags|=ur,or=ar.targetContainers,cr!==null&&or.indexOf(cr)===-1&&or.push(cr),ar)}function Uc(ar,or,lr,ur,cr){switch(or){case"focusin":return Lc=Tc(Lc,ar,or,lr,ur,cr),!0;case"dragenter":return Mc=Tc(Mc,ar,or,lr,ur,cr),!0;case"mouseover":return Nc=Tc(Nc,ar,or,lr,ur,cr),!0;case"pointerover":var dr=cr.pointerId;return Oc.set(dr,Tc(Oc.get(dr)||null,ar,or,lr,ur,cr)),!0;case"gotpointercapture":return dr=cr.pointerId,Pc.set(dr,Tc(Pc.get(dr)||null,ar,or,lr,ur,cr)),!0}return!1}function Vc(ar){var or=Wc(ar.target);if(or!==null){var lr=Vb(or);if(lr!==null){if(or=lr.tag,or===13){if(or=Wb(lr),or!==null){ar.blockedOn=or,Ic(ar.priority,function(){Gc(lr)});return}}else if(or===3&&lr.stateNode.current.memoizedState.isDehydrated){ar.blockedOn=lr.tag===3?lr.stateNode.containerInfo:null;return}}}ar.blockedOn=null}function Xc(ar){if(ar.blockedOn!==null)return!1;for(var or=ar.targetContainers;0<or.length;){var lr=Yc(ar.domEventName,ar.eventSystemFlags,or[0],ar.nativeEvent);if(lr===null){lr=ar.nativeEvent;var ur=new lr.constructor(lr.type,lr);wb=ur,lr.target.dispatchEvent(ur),wb=null}else return or=Cb(lr),or!==null&&Fc(or),ar.blockedOn=lr,!1;or.shift()}return!0}function Zc(ar,or,lr){Xc(ar)&&lr.delete(or)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(ar,or){ar.blockedOn===or&&(ar.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(ar){function or(cr){return ad(cr,ar)}if(0<Kc.length){ad(Kc[0],ar);for(var lr=1;lr<Kc.length;lr++){var ur=Kc[lr];ur.blockedOn===ar&&(ur.blockedOn=null)}}for(Lc!==null&&ad(Lc,ar),Mc!==null&&ad(Mc,ar),Nc!==null&&ad(Nc,ar),Oc.forEach(or),Pc.forEach(or),lr=0;lr<Qc.length;lr++)ur=Qc[lr],ur.blockedOn===ar&&(ur.blockedOn=null);for(;0<Qc.length&&(lr=Qc[0],lr.blockedOn===null);)Vc(lr),lr.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(ar,or,lr,ur){var cr=C$1,dr=cd.transition;cd.transition=null;try{C$1=1,fd(ar,or,lr,ur)}finally{C$1=cr,cd.transition=dr}}function gd(ar,or,lr,ur){var cr=C$1,dr=cd.transition;cd.transition=null;try{C$1=4,fd(ar,or,lr,ur)}finally{C$1=cr,cd.transition=dr}}function fd(ar,or,lr,ur){if(dd){var cr=Yc(ar,or,lr,ur);if(cr===null)hd(ar,or,ur,id,lr),Sc(ar,ur);else if(Uc(cr,ar,or,lr,ur))ur.stopPropagation();else if(Sc(ar,ur),or&4&&-1<Rc.indexOf(ar)){for(;cr!==null;){var dr=Cb(cr);if(dr!==null&&Ec(dr),dr=Yc(ar,or,lr,ur),dr===null&&hd(ar,or,ur,id,lr),dr===cr)break;cr=dr}cr!==null&&ur.stopPropagation()}else hd(ar,or,ur,null,lr)}}var id=null;function Yc(ar,or,lr,ur){if(id=null,ar=xb(ur),ar=Wc(ar),ar!==null)if(or=Vb(ar),or===null)ar=null;else if(lr=or.tag,lr===13){if(ar=Wb(or),ar!==null)return ar;ar=null}else if(lr===3){if(or.stateNode.current.memoizedState.isDehydrated)return or.tag===3?or.stateNode.containerInfo:null;ar=null}else or!==ar&&(ar=null);return id=ar,null}function jd(ar){switch(ar){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var ar,or=ld,lr=or.length,ur,cr="value"in kd?kd.value:kd.textContent,dr=cr.length;for(ar=0;ar<lr&&or[ar]===cr[ar];ar++);var fr=lr-ar;for(ur=1;ur<=fr&&or[lr-ur]===cr[dr-ur];ur++);return md=cr.slice(ar,1<ur?1-ur:void 0)}function od(ar){var or=ar.keyCode;return"charCode"in ar?(ar=ar.charCode,ar===0&&or===13&&(ar=13)):ar=or,ar===10&&(ar=13),32<=ar||ar===13?ar:0}function pd(){return!0}function qd(){return!1}function rd(ar){function or(lr,ur,cr,dr,fr){this._reactName=lr,this._targetInst=cr,this.type=ur,this.nativeEvent=dr,this.target=fr,this.currentTarget=null;for(var pr in ar)ar.hasOwnProperty(pr)&&(lr=ar[pr],this[pr]=lr?lr(dr):dr[pr]);return this.isDefaultPrevented=(dr.defaultPrevented!=null?dr.defaultPrevented:dr.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(or.prototype,{preventDefault:function(){this.defaultPrevented=!0;var lr=this.nativeEvent;lr&&(lr.preventDefault?lr.preventDefault():typeof lr.returnValue!="unknown"&&(lr.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var lr=this.nativeEvent;lr&&(lr.stopPropagation?lr.stopPropagation():typeof lr.cancelBubble!="unknown"&&(lr.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),or}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(ar){return ar.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(ar){return ar.relatedTarget===void 0?ar.fromElement===ar.srcElement?ar.toElement:ar.fromElement:ar.relatedTarget},movementX:function(ar){return"movementX"in ar?ar.movementX:(ar!==yd&&(yd&&ar.type==="mousemove"?(wd=ar.screenX-yd.screenX,xd=ar.screenY-yd.screenY):xd=wd=0,yd=ar),wd)},movementY:function(ar){return"movementY"in ar?ar.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(ar){return"clipboardData"in ar?ar.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(ar){var or=this.nativeEvent;return or.getModifierState?or.getModifierState(ar):(ar=Od[ar])?!!or[ar]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(ar){if(ar.key){var or=Md[ar.key]||ar.key;if(or!=="Unidentified")return or}return ar.type==="keypress"?(ar=od(ar),ar===13?"Enter":String.fromCharCode(ar)):ar.type==="keydown"||ar.type==="keyup"?Nd[ar.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(ar){return ar.type==="keypress"?od(ar):0},keyCode:function(ar){return ar.type==="keydown"||ar.type==="keyup"?ar.keyCode:0},which:function(ar){return ar.type==="keypress"?od(ar):ar.type==="keydown"||ar.type==="keyup"?ar.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(ar){return"deltaX"in ar?ar.deltaX:"wheelDeltaX"in ar?-ar.wheelDeltaX:0},deltaY:function(ar){return"deltaY"in ar?ar.deltaY:"wheelDeltaY"in ar?-ar.wheelDeltaY:"wheelDelta"in ar?-ar.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia&&"CompositionEvent"in window,be$1=null;ia&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be$1,de$1=ia&&(!ae$1||be$1&&8<be$1&&11>=be$1),ee$1=" ",fe$1=!1;function ge$1(ar,or){switch(ar){case"keyup":return $d.indexOf(or.keyCode)!==-1;case"keydown":return or.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(ar){return ar=ar.detail,typeof ar=="object"&&"data"in ar?ar.data:null}var ie$1=!1;function je$1(ar,or){switch(ar){case"compositionend":return he$1(or);case"keypress":return or.which!==32?null:(fe$1=!0,ee$1);case"textInput":return ar=or.data,ar===ee$1&&fe$1?null:ar;default:return null}}function ke$1(ar,or){if(ie$1)return ar==="compositionend"||!ae$1&&ge$1(ar,or)?(ar=nd(),md=ld=kd=null,ie$1=!1,ar):null;switch(ar){case"paste":return null;case"keypress":if(!(or.ctrlKey||or.altKey||or.metaKey)||or.ctrlKey&&or.altKey){if(or.char&&1<or.char.length)return or.char;if(or.which)return String.fromCharCode(or.which)}return null;case"compositionend":return de$1&&or.locale!=="ko"?null:or.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(ar){var or=ar&&ar.nodeName&&ar.nodeName.toLowerCase();return or==="input"?!!le$1[ar.type]:or==="textarea"}function ne$1(ar,or,lr,ur){Eb(ur),or=oe$1(or,"onChange"),0<or.length&&(lr=new td("onChange","change",null,lr,ur),ar.push({event:lr,listeners:or}))}var pe$1=null,qe$1=null;function re$1(ar){se$1(ar,0)}function te$1(ar){var or=ue$1(ar);if(Wa(or))return ar}function ve$1(ar,or){if(ar==="change")return or}var we$1=!1;if(ia){var xe$1;if(ia){var ye$1="oninput"in document;if(!ye$1){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$1=typeof ze$1.oninput=="function"}xe$1=ye$1}else xe$1=!1;we$1=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be$1),qe$1=pe$1=null)}function Be$1(ar){if(ar.propertyName==="value"&&te$1(qe$1)){var or=[];ne$1(or,qe$1,ar,xb(ar)),Jb(re$1,or)}}function Ce$1(ar,or,lr){ar==="focusin"?(Ae$1(),pe$1=or,qe$1=lr,pe$1.attachEvent("onpropertychange",Be$1)):ar==="focusout"&&Ae$1()}function De$1(ar){if(ar==="selectionchange"||ar==="keyup"||ar==="keydown")return te$1(qe$1)}function Ee$1(ar,or){if(ar==="click")return te$1(or)}function Fe$1(ar,or){if(ar==="input"||ar==="change")return te$1(or)}function Ge$1(ar,or){return ar===or&&(ar!==0||1/ar===1/or)||ar!==ar&&or!==or}var He$1=typeof Object.is=="function"?Object.is:Ge$1;function Ie$1(ar,or){if(He$1(ar,or))return!0;if(typeof ar!="object"||ar===null||typeof or!="object"||or===null)return!1;var lr=Object.keys(ar),ur=Object.keys(or);if(lr.length!==ur.length)return!1;for(ur=0;ur<lr.length;ur++){var cr=lr[ur];if(!ja.call(or,cr)||!He$1(ar[cr],or[cr]))return!1}return!0}function Je$1(ar){for(;ar&&ar.firstChild;)ar=ar.firstChild;return ar}function Ke$1(ar,or){var lr=Je$1(ar);ar=0;for(var ur;lr;){if(lr.nodeType===3){if(ur=ar+lr.textContent.length,ar<=or&&ur>=or)return{node:lr,offset:or-ar};ar=ur}e:{for(;lr;){if(lr.nextSibling){lr=lr.nextSibling;break e}lr=lr.parentNode}lr=void 0}lr=Je$1(lr)}}function Le$1(ar,or){return ar&&or?ar===or?!0:ar&&ar.nodeType===3?!1:or&&or.nodeType===3?Le$1(ar,or.parentNode):"contains"in ar?ar.contains(or):ar.compareDocumentPosition?!!(ar.compareDocumentPosition(or)&16):!1:!1}function Me$1(){for(var ar=window,or=Xa();or instanceof ar.HTMLIFrameElement;){try{var lr=typeof or.contentWindow.location.href=="string"}catch{lr=!1}if(lr)ar=or.contentWindow;else break;or=Xa(ar.document)}return or}function Ne$1(ar){var or=ar&&ar.nodeName&&ar.nodeName.toLowerCase();return or&&(or==="input"&&(ar.type==="text"||ar.type==="search"||ar.type==="tel"||ar.type==="url"||ar.type==="password")||or==="textarea"||ar.contentEditable==="true")}function Oe$1(ar){var or=Me$1(),lr=ar.focusedElem,ur=ar.selectionRange;if(or!==lr&&lr&&lr.ownerDocument&&Le$1(lr.ownerDocument.documentElement,lr)){if(ur!==null&&Ne$1(lr)){if(or=ur.start,ar=ur.end,ar===void 0&&(ar=or),"selectionStart"in lr)lr.selectionStart=or,lr.selectionEnd=Math.min(ar,lr.value.length);else if(ar=(or=lr.ownerDocument||document)&&or.defaultView||window,ar.getSelection){ar=ar.getSelection();var cr=lr.textContent.length,dr=Math.min(ur.start,cr);ur=ur.end===void 0?dr:Math.min(ur.end,cr),!ar.extend&&dr>ur&&(cr=ur,ur=dr,dr=cr),cr=Ke$1(lr,dr);var fr=Ke$1(lr,ur);cr&&fr&&(ar.rangeCount!==1||ar.anchorNode!==cr.node||ar.anchorOffset!==cr.offset||ar.focusNode!==fr.node||ar.focusOffset!==fr.offset)&&(or=or.createRange(),or.setStart(cr.node,cr.offset),ar.removeAllRanges(),dr>ur?(ar.addRange(or),ar.extend(fr.node,fr.offset)):(or.setEnd(fr.node,fr.offset),ar.addRange(or)))}}for(or=[],ar=lr;ar=ar.parentNode;)ar.nodeType===1&&or.push({element:ar,left:ar.scrollLeft,top:ar.scrollTop});for(typeof lr.focus=="function"&&lr.focus(),lr=0;lr<or.length;lr++)ar=or[lr],ar.element.scrollLeft=ar.left,ar.element.scrollTop=ar.top}}var Pe$1=ia&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re$1=null,Se$1=null,Te$1=!1;function Ue$1(ar,or,lr){var ur=lr.window===lr?lr.document:lr.nodeType===9?lr:lr.ownerDocument;Te$1||Qe$1==null||Qe$1!==Xa(ur)||(ur=Qe$1,"selectionStart"in ur&&Ne$1(ur)?ur={start:ur.selectionStart,end:ur.selectionEnd}:(ur=(ur.ownerDocument&&ur.ownerDocument.defaultView||window).getSelection(),ur={anchorNode:ur.anchorNode,anchorOffset:ur.anchorOffset,focusNode:ur.focusNode,focusOffset:ur.focusOffset}),Se$1&&Ie$1(Se$1,ur)||(Se$1=ur,ur=oe$1(Re$1,"onSelect"),0<ur.length&&(or=new td("onSelect","select",null,or,lr),ar.push({event:or,listeners:ur}),or.target=Qe$1)))}function Ve$1(ar,or){var lr={};return lr[ar.toLowerCase()]=or.toLowerCase(),lr["Webkit"+ar]="webkit"+or,lr["Moz"+ar]="moz"+or,lr}var We$1={animationend:Ve$1("Animation","AnimationEnd"),animationiteration:Ve$1("Animation","AnimationIteration"),animationstart:Ve$1("Animation","AnimationStart"),transitionend:Ve$1("Transition","TransitionEnd")},Xe$1={},Ye$1={};ia&&(Ye$1=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze$1(ar){if(Xe$1[ar])return Xe$1[ar];if(!We$1[ar])return ar;var or=We$1[ar],lr;for(lr in or)if(or.hasOwnProperty(lr)&&lr in Ye$1)return Xe$1[ar]=or[lr];return ar}var $e$1=Ze$1("animationend"),af=Ze$1("animationiteration"),bf=Ze$1("animationstart"),cf=Ze$1("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(ar,or){df.set(ar,or),fa(or,[ar])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(ar,or,lr){var ur=ar.type||"unknown-event";ar.currentTarget=lr,Ub(ur,or,void 0,ar),ar.currentTarget=null}function se$1(ar,or){or=(or&4)!==0;for(var lr=0;lr<ar.length;lr++){var ur=ar[lr],cr=ur.event;ur=ur.listeners;e:{var dr=void 0;if(or)for(var fr=ur.length-1;0<=fr;fr--){var pr=ur[fr],mr=pr.instance,hr=pr.currentTarget;if(pr=pr.listener,mr!==dr&&cr.isPropagationStopped())break e;nf(cr,pr,hr),dr=mr}else for(fr=0;fr<ur.length;fr++){if(pr=ur[fr],mr=pr.instance,hr=pr.currentTarget,pr=pr.listener,mr!==dr&&cr.isPropagationStopped())break e;nf(cr,pr,hr),dr=mr}}}if(Qb)throw ar=Rb,Qb=!1,Rb=null,ar}function D$1(ar,or){var lr=or[of];lr===void 0&&(lr=or[of]=new Set);var ur=ar+"__bubble";lr.has(ur)||(pf(or,ar,2,!1),lr.add(ur))}function qf(ar,or,lr){var ur=0;or&&(ur|=4),pf(lr,ar,ur,or)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(ar){if(!ar[rf]){ar[rf]=!0,da.forEach(function(lr){lr!=="selectionchange"&&(mf.has(lr)||qf(lr,!1,ar),qf(lr,!0,ar))});var or=ar.nodeType===9?ar:ar.ownerDocument;or===null||or[rf]||(or[rf]=!0,qf("selectionchange",!1,or))}}function pf(ar,or,lr,ur){switch(jd(or)){case 1:var cr=ed;break;case 4:cr=gd;break;default:cr=fd}lr=cr.bind(null,or,lr,ar),cr=void 0,!Lb||or!=="touchstart"&&or!=="touchmove"&&or!=="wheel"||(cr=!0),ur?cr!==void 0?ar.addEventListener(or,lr,{capture:!0,passive:cr}):ar.addEventListener(or,lr,!0):cr!==void 0?ar.addEventListener(or,lr,{passive:cr}):ar.addEventListener(or,lr,!1)}function hd(ar,or,lr,ur,cr){var dr=ur;if(!(or&1)&&!(or&2)&&ur!==null)e:for(;;){if(ur===null)return;var fr=ur.tag;if(fr===3||fr===4){var pr=ur.stateNode.containerInfo;if(pr===cr||pr.nodeType===8&&pr.parentNode===cr)break;if(fr===4)for(fr=ur.return;fr!==null;){var mr=fr.tag;if((mr===3||mr===4)&&(mr=fr.stateNode.containerInfo,mr===cr||mr.nodeType===8&&mr.parentNode===cr))return;fr=fr.return}for(;pr!==null;){if(fr=Wc(pr),fr===null)return;if(mr=fr.tag,mr===5||mr===6){ur=dr=fr;continue e}pr=pr.parentNode}}ur=ur.return}Jb(function(){var hr=dr,gr=xb(lr),vr=[];e:{var wr=df.get(ar);if(wr!==void 0){var _r=td,Cr=ar;switch(ar){case"keypress":if(od(lr)===0)break e;case"keydown":case"keyup":_r=Rd;break;case"focusin":Cr="focus",_r=Fd;break;case"focusout":Cr="blur",_r=Fd;break;case"beforeblur":case"afterblur":_r=Fd;break;case"click":if(lr.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_r=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_r=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_r=Vd;break;case $e$1:case af:case bf:_r=Hd;break;case cf:_r=Xd;break;case"scroll":_r=vd;break;case"wheel":_r=Zd;break;case"copy":case"cut":case"paste":_r=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_r=Td}var Sr=(or&4)!==0,Dr=!Sr&&ar==="scroll",Er=Sr?wr!==null?wr+"Capture":null:wr;Sr=[];for(var kr=hr,Ir;kr!==null;){Ir=kr;var Br=Ir.stateNode;if(Ir.tag===5&&Br!==null&&(Ir=Br,Er!==null&&(Br=Kb(kr,Er),Br!=null&&Sr.push(tf(kr,Br,Ir)))),Dr)break;kr=kr.return}0<Sr.length&&(wr=new _r(wr,Cr,null,lr,gr),vr.push({event:wr,listeners:Sr}))}}if(!(or&7)){e:{if(wr=ar==="mouseover"||ar==="pointerover",_r=ar==="mouseout"||ar==="pointerout",wr&&lr!==wb&&(Cr=lr.relatedTarget||lr.fromElement)&&(Wc(Cr)||Cr[uf]))break e;if((_r||wr)&&(wr=gr.window===gr?gr:(wr=gr.ownerDocument)?wr.defaultView||wr.parentWindow:window,_r?(Cr=lr.relatedTarget||lr.toElement,_r=hr,Cr=Cr?Wc(Cr):null,Cr!==null&&(Dr=Vb(Cr),Cr!==Dr||Cr.tag!==5&&Cr.tag!==6)&&(Cr=null)):(_r=null,Cr=hr),_r!==Cr)){if(Sr=Bd,Br="onMouseLeave",Er="onMouseEnter",kr="mouse",(ar==="pointerout"||ar==="pointerover")&&(Sr=Td,Br="onPointerLeave",Er="onPointerEnter",kr="pointer"),Dr=_r==null?wr:ue$1(_r),Ir=Cr==null?wr:ue$1(Cr),wr=new Sr(Br,kr+"leave",_r,lr,gr),wr.target=Dr,wr.relatedTarget=Ir,Br=null,Wc(gr)===hr&&(Sr=new Sr(Er,kr+"enter",Cr,lr,gr),Sr.target=Ir,Sr.relatedTarget=Dr,Br=Sr),Dr=Br,_r&&Cr)t:{for(Sr=_r,Er=Cr,kr=0,Ir=Sr;Ir;Ir=vf(Ir))kr++;for(Ir=0,Br=Er;Br;Br=vf(Br))Ir++;for(;0<kr-Ir;)Sr=vf(Sr),kr--;for(;0<Ir-kr;)Er=vf(Er),Ir--;for(;kr--;){if(Sr===Er||Er!==null&&Sr===Er.alternate)break t;Sr=vf(Sr),Er=vf(Er)}Sr=null}else Sr=null;_r!==null&&wf(vr,wr,_r,Sr,!1),Cr!==null&&Dr!==null&&wf(vr,Dr,Cr,Sr,!0)}}e:{if(wr=hr?ue$1(hr):window,_r=wr.nodeName&&wr.nodeName.toLowerCase(),_r==="select"||_r==="input"&&wr.type==="file")var Nr=ve$1;else if(me$1(wr))if(we$1)Nr=Fe$1;else{Nr=De$1;var Mr=Ce$1}else(_r=wr.nodeName)&&_r.toLowerCase()==="input"&&(wr.type==="checkbox"||wr.type==="radio")&&(Nr=Ee$1);if(Nr&&(Nr=Nr(ar,hr))){ne$1(vr,Nr,lr,gr);break e}Mr&&Mr(ar,wr,hr),ar==="focusout"&&(Mr=wr._wrapperState)&&Mr.controlled&&wr.type==="number"&&cb(wr,"number",wr.value)}switch(Mr=hr?ue$1(hr):window,ar){case"focusin":(me$1(Mr)||Mr.contentEditable==="true")&&(Qe$1=Mr,Re$1=hr,Se$1=null);break;case"focusout":Se$1=Re$1=Qe$1=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1(vr,lr,gr);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue$1(vr,lr,gr)}var xr;if(ae$1)e:{switch(ar){case"compositionstart":var Rr="onCompositionStart";break e;case"compositionend":Rr="onCompositionEnd";break e;case"compositionupdate":Rr="onCompositionUpdate";break e}Rr=void 0}else ie$1?ge$1(ar,lr)&&(Rr="onCompositionEnd"):ar==="keydown"&&lr.keyCode===229&&(Rr="onCompositionStart");Rr&&(de$1&&lr.locale!=="ko"&&(ie$1||Rr!=="onCompositionStart"?Rr==="onCompositionEnd"&&ie$1&&(xr=nd()):(kd=gr,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),Mr=oe$1(hr,Rr),0<Mr.length&&(Rr=new Ld(Rr,ar,null,lr,gr),vr.push({event:Rr,listeners:Mr}),xr?Rr.data=xr:(xr=he$1(lr),xr!==null&&(Rr.data=xr)))),(xr=ce$1?je$1(ar,lr):ke$1(ar,lr))&&(hr=oe$1(hr,"onBeforeInput"),0<hr.length&&(gr=new Ld("onBeforeInput","beforeinput",null,lr,gr),vr.push({event:gr,listeners:hr}),gr.data=xr))}se$1(vr,or)})}function tf(ar,or,lr){return{instance:ar,listener:or,currentTarget:lr}}function oe$1(ar,or){for(var lr=or+"Capture",ur=[];ar!==null;){var cr=ar,dr=cr.stateNode;cr.tag===5&&dr!==null&&(cr=dr,dr=Kb(ar,lr),dr!=null&&ur.unshift(tf(ar,dr,cr)),dr=Kb(ar,or),dr!=null&&ur.push(tf(ar,dr,cr))),ar=ar.return}return ur}function vf(ar){if(ar===null)return null;do ar=ar.return;while(ar&&ar.tag!==5);return ar||null}function wf(ar,or,lr,ur,cr){for(var dr=or._reactName,fr=[];lr!==null&&lr!==ur;){var pr=lr,mr=pr.alternate,hr=pr.stateNode;if(mr!==null&&mr===ur)break;pr.tag===5&&hr!==null&&(pr=hr,cr?(mr=Kb(lr,dr),mr!=null&&fr.unshift(tf(lr,mr,pr))):cr||(mr=Kb(lr,dr),mr!=null&&fr.push(tf(lr,mr,pr)))),lr=lr.return}fr.length!==0&&ar.push({event:or,listeners:fr})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(ar){return(typeof ar=="string"?ar:""+ar).replace(xf,`
`).replace(yf,"")}function Af(ar,or,lr){if(or=zf(or),zf(ar)!==or&&lr)throw Error(p$1(425))}function Bf(){}var Cf=null,Df=null;function Ef(ar,or){return ar==="textarea"||ar==="noscript"||typeof or.children=="string"||typeof or.children=="number"||typeof or.dangerouslySetInnerHTML=="object"&&or.dangerouslySetInnerHTML!==null&&or.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(ar){return Hf.resolve(null).then(ar).catch(If)}:Ff;function If(ar){setTimeout(function(){throw ar})}function Kf(ar,or){var lr=or,ur=0;do{var cr=lr.nextSibling;if(ar.removeChild(lr),cr&&cr.nodeType===8)if(lr=cr.data,lr==="/$"){if(ur===0){ar.removeChild(cr),bd(or);return}ur--}else lr!=="$"&&lr!=="$?"&&lr!=="$!"||ur++;lr=cr}while(lr);bd(or)}function Lf(ar){for(;ar!=null;ar=ar.nextSibling){var or=ar.nodeType;if(or===1||or===3)break;if(or===8){if(or=ar.data,or==="$"||or==="$!"||or==="$?")break;if(or==="/$")return null}}return ar}function Mf(ar){ar=ar.previousSibling;for(var or=0;ar;){if(ar.nodeType===8){var lr=ar.data;if(lr==="$"||lr==="$!"||lr==="$?"){if(or===0)return ar;or--}else lr==="/$"&&or++}ar=ar.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(ar){var or=ar[Of];if(or)return or;for(var lr=ar.parentNode;lr;){if(or=lr[uf]||lr[Of]){if(lr=or.alternate,or.child!==null||lr!==null&&lr.child!==null)for(ar=Mf(ar);ar!==null;){if(lr=ar[Of])return lr;ar=Mf(ar)}return or}ar=lr,lr=ar.parentNode}return null}function Cb(ar){return ar=ar[Of]||ar[uf],!ar||ar.tag!==5&&ar.tag!==6&&ar.tag!==13&&ar.tag!==3?null:ar}function ue$1(ar){if(ar.tag===5||ar.tag===6)return ar.stateNode;throw Error(p$1(33))}function Db(ar){return ar[Pf]||null}var Sf=[],Tf=-1;function Uf(ar){return{current:ar}}function E$2(ar){0>Tf||(ar.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(ar,or){Tf++,Sf[Tf]=ar.current,ar.current=or}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(ar,or){var lr=ar.type.contextTypes;if(!lr)return Vf;var ur=ar.stateNode;if(ur&&ur.__reactInternalMemoizedUnmaskedChildContext===or)return ur.__reactInternalMemoizedMaskedChildContext;var cr={},dr;for(dr in lr)cr[dr]=or[dr];return ur&&(ar=ar.stateNode,ar.__reactInternalMemoizedUnmaskedChildContext=or,ar.__reactInternalMemoizedMaskedChildContext=cr),cr}function Zf(ar){return ar=ar.childContextTypes,ar!=null}function $f(){E$2(Wf),E$2(H$1)}function ag(ar,or,lr){if(H$1.current!==Vf)throw Error(p$1(168));G$1(H$1,or),G$1(Wf,lr)}function bg(ar,or,lr){var ur=ar.stateNode;if(or=or.childContextTypes,typeof ur.getChildContext!="function")return lr;ur=ur.getChildContext();for(var cr in ur)if(!(cr in or))throw Error(p$1(108,Ra(ar)||"Unknown",cr));return A$1({},lr,ur)}function cg(ar){return ar=(ar=ar.stateNode)&&ar.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G$1(H$1,ar),G$1(Wf,Wf.current),!0}function dg(ar,or,lr){var ur=ar.stateNode;if(!ur)throw Error(p$1(169));lr?(ar=bg(ar,or,Xf),ur.__reactInternalMemoizedMergedChildContext=ar,E$2(Wf),E$2(H$1),G$1(H$1,ar)):E$2(Wf),G$1(Wf,lr)}var eg=null,fg=!1,gg=!1;function hg(ar){eg===null?eg=[ar]:eg.push(ar)}function ig(ar){fg=!0,hg(ar)}function jg(){if(!gg&&eg!==null){gg=!0;var ar=0,or=C$1;try{var lr=eg;for(C$1=1;ar<lr.length;ar++){var ur=lr[ar];do ur=ur(!0);while(ur!==null)}eg=null,fg=!1}catch(cr){throw eg!==null&&(eg=eg.slice(ar+1)),ac(fc,jg),cr}finally{C$1=or,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(ar,or){kg[lg++]=ng,kg[lg++]=mg,mg=ar,ng=or}function ug(ar,or,lr){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=ar;var ur=rg;ar=sg;var cr=32-oc(ur)-1;ur&=~(1<<cr),lr+=1;var dr=32-oc(or)+cr;if(30<dr){var fr=cr-cr%5;dr=(ur&(1<<fr)-1).toString(32),ur>>=fr,cr-=fr,rg=1<<32-oc(or)+cr|lr<<cr|ur,sg=dr+ar}else rg=1<<dr|lr<<cr|ur,sg=ar}function vg(ar){ar.return!==null&&(tg(ar,1),ug(ar,1,0))}function wg(ar){for(;ar===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;ar===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(ar,or){var lr=Bg(5,null,null,0);lr.elementType="DELETED",lr.stateNode=or,lr.return=ar,or=ar.deletions,or===null?(ar.deletions=[lr],ar.flags|=16):or.push(lr)}function Cg(ar,or){switch(ar.tag){case 5:var lr=ar.type;return or=or.nodeType!==1||lr.toLowerCase()!==or.nodeName.toLowerCase()?null:or,or!==null?(ar.stateNode=or,xg=ar,yg=Lf(or.firstChild),!0):!1;case 6:return or=ar.pendingProps===""||or.nodeType!==3?null:or,or!==null?(ar.stateNode=or,xg=ar,yg=null,!0):!1;case 13:return or=or.nodeType!==8?null:or,or!==null?(lr=qg!==null?{id:rg,overflow:sg}:null,ar.memoizedState={dehydrated:or,treeContext:lr,retryLane:1073741824},lr=Bg(18,null,null,0),lr.stateNode=or,lr.return=ar,ar.child=lr,xg=ar,yg=null,!0):!1;default:return!1}}function Dg(ar){return(ar.mode&1)!==0&&(ar.flags&128)===0}function Eg(ar){if(I$1){var or=yg;if(or){var lr=or;if(!Cg(ar,or)){if(Dg(ar))throw Error(p$1(418));or=Lf(lr.nextSibling);var ur=xg;or&&Cg(ar,or)?Ag(ur,lr):(ar.flags=ar.flags&-4097|2,I$1=!1,xg=ar)}}else{if(Dg(ar))throw Error(p$1(418));ar.flags=ar.flags&-4097|2,I$1=!1,xg=ar}}}function Fg(ar){for(ar=ar.return;ar!==null&&ar.tag!==5&&ar.tag!==3&&ar.tag!==13;)ar=ar.return;xg=ar}function Gg(ar){if(ar!==xg)return!1;if(!I$1)return Fg(ar),I$1=!0,!1;var or;if((or=ar.tag!==3)&&!(or=ar.tag!==5)&&(or=ar.type,or=or!=="head"&&or!=="body"&&!Ef(ar.type,ar.memoizedProps)),or&&(or=yg)){if(Dg(ar))throw Hg(),Error(p$1(418));for(;or;)Ag(ar,or),or=Lf(or.nextSibling)}if(Fg(ar),ar.tag===13){if(ar=ar.memoizedState,ar=ar!==null?ar.dehydrated:null,!ar)throw Error(p$1(317));e:{for(ar=ar.nextSibling,or=0;ar;){if(ar.nodeType===8){var lr=ar.data;if(lr==="/$"){if(or===0){yg=Lf(ar.nextSibling);break e}or--}else lr!=="$"&&lr!=="$!"&&lr!=="$?"||or++}ar=ar.nextSibling}yg=null}}else yg=xg?Lf(ar.stateNode.nextSibling):null;return!0}function Hg(){for(var ar=yg;ar;)ar=Lf(ar.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(ar){zg===null?zg=[ar]:zg.push(ar)}var Kg=ua.ReactCurrentBatchConfig;function Lg(ar,or,lr){if(ar=lr.ref,ar!==null&&typeof ar!="function"&&typeof ar!="object"){if(lr._owner){if(lr=lr._owner,lr){if(lr.tag!==1)throw Error(p$1(309));var ur=lr.stateNode}if(!ur)throw Error(p$1(147,ar));var cr=ur,dr=""+ar;return or!==null&&or.ref!==null&&typeof or.ref=="function"&&or.ref._stringRef===dr?or.ref:(or=function(fr){var pr=cr.refs;fr===null?delete pr[dr]:pr[dr]=fr},or._stringRef=dr,or)}if(typeof ar!="string")throw Error(p$1(284));if(!lr._owner)throw Error(p$1(290,ar))}return ar}function Mg(ar,or){throw ar=Object.prototype.toString.call(or),Error(p$1(31,ar==="[object Object]"?"object with keys {"+Object.keys(or).join(", ")+"}":ar))}function Ng(ar){var or=ar._init;return or(ar._payload)}function Og(ar){function or(Er,kr){if(ar){var Ir=Er.deletions;Ir===null?(Er.deletions=[kr],Er.flags|=16):Ir.push(kr)}}function lr(Er,kr){if(!ar)return null;for(;kr!==null;)or(Er,kr),kr=kr.sibling;return null}function ur(Er,kr){for(Er=new Map;kr!==null;)kr.key!==null?Er.set(kr.key,kr):Er.set(kr.index,kr),kr=kr.sibling;return Er}function cr(Er,kr){return Er=Pg(Er,kr),Er.index=0,Er.sibling=null,Er}function dr(Er,kr,Ir){return Er.index=Ir,ar?(Ir=Er.alternate,Ir!==null?(Ir=Ir.index,Ir<kr?(Er.flags|=2,kr):Ir):(Er.flags|=2,kr)):(Er.flags|=1048576,kr)}function fr(Er){return ar&&Er.alternate===null&&(Er.flags|=2),Er}function pr(Er,kr,Ir,Br){return kr===null||kr.tag!==6?(kr=Qg(Ir,Er.mode,Br),kr.return=Er,kr):(kr=cr(kr,Ir),kr.return=Er,kr)}function mr(Er,kr,Ir,Br){var Nr=Ir.type;return Nr===ya?gr(Er,kr,Ir.props.children,Br,Ir.key):kr!==null&&(kr.elementType===Nr||typeof Nr=="object"&&Nr!==null&&Nr.$$typeof===Ha&&Ng(Nr)===kr.type)?(Br=cr(kr,Ir.props),Br.ref=Lg(Er,kr,Ir),Br.return=Er,Br):(Br=Rg(Ir.type,Ir.key,Ir.props,null,Er.mode,Br),Br.ref=Lg(Er,kr,Ir),Br.return=Er,Br)}function hr(Er,kr,Ir,Br){return kr===null||kr.tag!==4||kr.stateNode.containerInfo!==Ir.containerInfo||kr.stateNode.implementation!==Ir.implementation?(kr=Sg(Ir,Er.mode,Br),kr.return=Er,kr):(kr=cr(kr,Ir.children||[]),kr.return=Er,kr)}function gr(Er,kr,Ir,Br,Nr){return kr===null||kr.tag!==7?(kr=Tg(Ir,Er.mode,Br,Nr),kr.return=Er,kr):(kr=cr(kr,Ir),kr.return=Er,kr)}function vr(Er,kr,Ir){if(typeof kr=="string"&&kr!==""||typeof kr=="number")return kr=Qg(""+kr,Er.mode,Ir),kr.return=Er,kr;if(typeof kr=="object"&&kr!==null){switch(kr.$$typeof){case va:return Ir=Rg(kr.type,kr.key,kr.props,null,Er.mode,Ir),Ir.ref=Lg(Er,null,kr),Ir.return=Er,Ir;case wa:return kr=Sg(kr,Er.mode,Ir),kr.return=Er,kr;case Ha:var Br=kr._init;return vr(Er,Br(kr._payload),Ir)}if(eb(kr)||Ka(kr))return kr=Tg(kr,Er.mode,Ir,null),kr.return=Er,kr;Mg(Er,kr)}return null}function wr(Er,kr,Ir,Br){var Nr=kr!==null?kr.key:null;if(typeof Ir=="string"&&Ir!==""||typeof Ir=="number")return Nr!==null?null:pr(Er,kr,""+Ir,Br);if(typeof Ir=="object"&&Ir!==null){switch(Ir.$$typeof){case va:return Ir.key===Nr?mr(Er,kr,Ir,Br):null;case wa:return Ir.key===Nr?hr(Er,kr,Ir,Br):null;case Ha:return Nr=Ir._init,wr(Er,kr,Nr(Ir._payload),Br)}if(eb(Ir)||Ka(Ir))return Nr!==null?null:gr(Er,kr,Ir,Br,null);Mg(Er,Ir)}return null}function _r(Er,kr,Ir,Br,Nr){if(typeof Br=="string"&&Br!==""||typeof Br=="number")return Er=Er.get(Ir)||null,pr(kr,Er,""+Br,Nr);if(typeof Br=="object"&&Br!==null){switch(Br.$$typeof){case va:return Er=Er.get(Br.key===null?Ir:Br.key)||null,mr(kr,Er,Br,Nr);case wa:return Er=Er.get(Br.key===null?Ir:Br.key)||null,hr(kr,Er,Br,Nr);case Ha:var Mr=Br._init;return _r(Er,kr,Ir,Mr(Br._payload),Nr)}if(eb(Br)||Ka(Br))return Er=Er.get(Ir)||null,gr(kr,Er,Br,Nr,null);Mg(kr,Br)}return null}function Cr(Er,kr,Ir,Br){for(var Nr=null,Mr=null,xr=kr,Rr=kr=0,Or=null;xr!==null&&Rr<Ir.length;Rr++){xr.index>Rr?(Or=xr,xr=null):Or=xr.sibling;var qr=wr(Er,xr,Ir[Rr],Br);if(qr===null){xr===null&&(xr=Or);break}ar&&xr&&qr.alternate===null&&or(Er,xr),kr=dr(qr,kr,Rr),Mr===null?Nr=qr:Mr.sibling=qr,Mr=qr,xr=Or}if(Rr===Ir.length)return lr(Er,xr),I$1&&tg(Er,Rr),Nr;if(xr===null){for(;Rr<Ir.length;Rr++)xr=vr(Er,Ir[Rr],Br),xr!==null&&(kr=dr(xr,kr,Rr),Mr===null?Nr=xr:Mr.sibling=xr,Mr=xr);return I$1&&tg(Er,Rr),Nr}for(xr=ur(Er,xr);Rr<Ir.length;Rr++)Or=_r(xr,Er,Rr,Ir[Rr],Br),Or!==null&&(ar&&Or.alternate!==null&&xr.delete(Or.key===null?Rr:Or.key),kr=dr(Or,kr,Rr),Mr===null?Nr=Or:Mr.sibling=Or,Mr=Or);return ar&&xr.forEach(function(Jr){return or(Er,Jr)}),I$1&&tg(Er,Rr),Nr}function Sr(Er,kr,Ir,Br){var Nr=Ka(Ir);if(typeof Nr!="function")throw Error(p$1(150));if(Ir=Nr.call(Ir),Ir==null)throw Error(p$1(151));for(var Mr=Nr=null,xr=kr,Rr=kr=0,Or=null,qr=Ir.next();xr!==null&&!qr.done;Rr++,qr=Ir.next()){xr.index>Rr?(Or=xr,xr=null):Or=xr.sibling;var Jr=wr(Er,xr,qr.value,Br);if(Jr===null){xr===null&&(xr=Or);break}ar&&xr&&Jr.alternate===null&&or(Er,xr),kr=dr(Jr,kr,Rr),Mr===null?Nr=Jr:Mr.sibling=Jr,Mr=Jr,xr=Or}if(qr.done)return lr(Er,xr),I$1&&tg(Er,Rr),Nr;if(xr===null){for(;!qr.done;Rr++,qr=Ir.next())qr=vr(Er,qr.value,Br),qr!==null&&(kr=dr(qr,kr,Rr),Mr===null?Nr=qr:Mr.sibling=qr,Mr=qr);return I$1&&tg(Er,Rr),Nr}for(xr=ur(Er,xr);!qr.done;Rr++,qr=Ir.next())qr=_r(xr,Er,Rr,qr.value,Br),qr!==null&&(ar&&qr.alternate!==null&&xr.delete(qr.key===null?Rr:qr.key),kr=dr(qr,kr,Rr),Mr===null?Nr=qr:Mr.sibling=qr,Mr=qr);return ar&&xr.forEach(function(na){return or(Er,na)}),I$1&&tg(Er,Rr),Nr}function Dr(Er,kr,Ir,Br){if(typeof Ir=="object"&&Ir!==null&&Ir.type===ya&&Ir.key===null&&(Ir=Ir.props.children),typeof Ir=="object"&&Ir!==null){switch(Ir.$$typeof){case va:e:{for(var Nr=Ir.key,Mr=kr;Mr!==null;){if(Mr.key===Nr){if(Nr=Ir.type,Nr===ya){if(Mr.tag===7){lr(Er,Mr.sibling),kr=cr(Mr,Ir.props.children),kr.return=Er,Er=kr;break e}}else if(Mr.elementType===Nr||typeof Nr=="object"&&Nr!==null&&Nr.$$typeof===Ha&&Ng(Nr)===Mr.type){lr(Er,Mr.sibling),kr=cr(Mr,Ir.props),kr.ref=Lg(Er,Mr,Ir),kr.return=Er,Er=kr;break e}lr(Er,Mr);break}else or(Er,Mr);Mr=Mr.sibling}Ir.type===ya?(kr=Tg(Ir.props.children,Er.mode,Br,Ir.key),kr.return=Er,Er=kr):(Br=Rg(Ir.type,Ir.key,Ir.props,null,Er.mode,Br),Br.ref=Lg(Er,kr,Ir),Br.return=Er,Er=Br)}return fr(Er);case wa:e:{for(Mr=Ir.key;kr!==null;){if(kr.key===Mr)if(kr.tag===4&&kr.stateNode.containerInfo===Ir.containerInfo&&kr.stateNode.implementation===Ir.implementation){lr(Er,kr.sibling),kr=cr(kr,Ir.children||[]),kr.return=Er,Er=kr;break e}else{lr(Er,kr);break}else or(Er,kr);kr=kr.sibling}kr=Sg(Ir,Er.mode,Br),kr.return=Er,Er=kr}return fr(Er);case Ha:return Mr=Ir._init,Dr(Er,kr,Mr(Ir._payload),Br)}if(eb(Ir))return Cr(Er,kr,Ir,Br);if(Ka(Ir))return Sr(Er,kr,Ir,Br);Mg(Er,Ir)}return typeof Ir=="string"&&Ir!==""||typeof Ir=="number"?(Ir=""+Ir,kr!==null&&kr.tag===6?(lr(Er,kr.sibling),kr=cr(kr,Ir),kr.return=Er,Er=kr):(lr(Er,kr),kr=Qg(Ir,Er.mode,Br),kr.return=Er,Er=kr),fr(Er)):lr(Er,kr)}return Dr}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(ar){var or=Wg.current;E$2(Wg),ar._currentValue=or}function bh(ar,or,lr){for(;ar!==null;){var ur=ar.alternate;if((ar.childLanes&or)!==or?(ar.childLanes|=or,ur!==null&&(ur.childLanes|=or)):ur!==null&&(ur.childLanes&or)!==or&&(ur.childLanes|=or),ar===lr)break;ar=ar.return}}function ch(ar,or){Xg=ar,Zg=Yg=null,ar=ar.dependencies,ar!==null&&ar.firstContext!==null&&(ar.lanes&or&&(dh=!0),ar.firstContext=null)}function eh(ar){var or=ar._currentValue;if(Zg!==ar)if(ar={context:ar,memoizedValue:or,next:null},Yg===null){if(Xg===null)throw Error(p$1(308));Yg=ar,Xg.dependencies={lanes:0,firstContext:ar}}else Yg=Yg.next=ar;return or}var fh=null;function gh(ar){fh===null?fh=[ar]:fh.push(ar)}function hh(ar,or,lr,ur){var cr=or.interleaved;return cr===null?(lr.next=lr,gh(or)):(lr.next=cr.next,cr.next=lr),or.interleaved=lr,ih(ar,ur)}function ih(ar,or){ar.lanes|=or;var lr=ar.alternate;for(lr!==null&&(lr.lanes|=or),lr=ar,ar=ar.return;ar!==null;)ar.childLanes|=or,lr=ar.alternate,lr!==null&&(lr.childLanes|=or),lr=ar,ar=ar.return;return lr.tag===3?lr.stateNode:null}var jh=!1;function kh(ar){ar.updateQueue={baseState:ar.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(ar,or){ar=ar.updateQueue,or.updateQueue===ar&&(or.updateQueue={baseState:ar.baseState,firstBaseUpdate:ar.firstBaseUpdate,lastBaseUpdate:ar.lastBaseUpdate,shared:ar.shared,effects:ar.effects})}function mh(ar,or){return{eventTime:ar,lane:or,tag:0,payload:null,callback:null,next:null}}function nh(ar,or,lr){var ur=ar.updateQueue;if(ur===null)return null;if(ur=ur.shared,K$1&2){var cr=ur.pending;return cr===null?or.next=or:(or.next=cr.next,cr.next=or),ur.pending=or,ih(ar,lr)}return cr=ur.interleaved,cr===null?(or.next=or,gh(ur)):(or.next=cr.next,cr.next=or),ur.interleaved=or,ih(ar,lr)}function oh(ar,or,lr){if(or=or.updateQueue,or!==null&&(or=or.shared,(lr&4194240)!==0)){var ur=or.lanes;ur&=ar.pendingLanes,lr|=ur,or.lanes=lr,Cc(ar,lr)}}function ph(ar,or){var lr=ar.updateQueue,ur=ar.alternate;if(ur!==null&&(ur=ur.updateQueue,lr===ur)){var cr=null,dr=null;if(lr=lr.firstBaseUpdate,lr!==null){do{var fr={eventTime:lr.eventTime,lane:lr.lane,tag:lr.tag,payload:lr.payload,callback:lr.callback,next:null};dr===null?cr=dr=fr:dr=dr.next=fr,lr=lr.next}while(lr!==null);dr===null?cr=dr=or:dr=dr.next=or}else cr=dr=or;lr={baseState:ur.baseState,firstBaseUpdate:cr,lastBaseUpdate:dr,shared:ur.shared,effects:ur.effects},ar.updateQueue=lr;return}ar=lr.lastBaseUpdate,ar===null?lr.firstBaseUpdate=or:ar.next=or,lr.lastBaseUpdate=or}function qh(ar,or,lr,ur){var cr=ar.updateQueue;jh=!1;var dr=cr.firstBaseUpdate,fr=cr.lastBaseUpdate,pr=cr.shared.pending;if(pr!==null){cr.shared.pending=null;var mr=pr,hr=mr.next;mr.next=null,fr===null?dr=hr:fr.next=hr,fr=mr;var gr=ar.alternate;gr!==null&&(gr=gr.updateQueue,pr=gr.lastBaseUpdate,pr!==fr&&(pr===null?gr.firstBaseUpdate=hr:pr.next=hr,gr.lastBaseUpdate=mr))}if(dr!==null){var vr=cr.baseState;fr=0,gr=hr=mr=null,pr=dr;do{var wr=pr.lane,_r=pr.eventTime;if((ur&wr)===wr){gr!==null&&(gr=gr.next={eventTime:_r,lane:0,tag:pr.tag,payload:pr.payload,callback:pr.callback,next:null});e:{var Cr=ar,Sr=pr;switch(wr=or,_r=lr,Sr.tag){case 1:if(Cr=Sr.payload,typeof Cr=="function"){vr=Cr.call(_r,vr,wr);break e}vr=Cr;break e;case 3:Cr.flags=Cr.flags&-65537|128;case 0:if(Cr=Sr.payload,wr=typeof Cr=="function"?Cr.call(_r,vr,wr):Cr,wr==null)break e;vr=A$1({},vr,wr);break e;case 2:jh=!0}}pr.callback!==null&&pr.lane!==0&&(ar.flags|=64,wr=cr.effects,wr===null?cr.effects=[pr]:wr.push(pr))}else _r={eventTime:_r,lane:wr,tag:pr.tag,payload:pr.payload,callback:pr.callback,next:null},gr===null?(hr=gr=_r,mr=vr):gr=gr.next=_r,fr|=wr;if(pr=pr.next,pr===null){if(pr=cr.shared.pending,pr===null)break;wr=pr,pr=wr.next,wr.next=null,cr.lastBaseUpdate=wr,cr.shared.pending=null}}while(!0);if(gr===null&&(mr=vr),cr.baseState=mr,cr.firstBaseUpdate=hr,cr.lastBaseUpdate=gr,or=cr.shared.interleaved,or!==null){cr=or;do fr|=cr.lane,cr=cr.next;while(cr!==or)}else dr===null&&(cr.shared.lanes=0);rh|=fr,ar.lanes=fr,ar.memoizedState=vr}}function sh(ar,or,lr){if(ar=or.effects,or.effects=null,ar!==null)for(or=0;or<ar.length;or++){var ur=ar[or],cr=ur.callback;if(cr!==null){if(ur.callback=null,ur=lr,typeof cr!="function")throw Error(p$1(191,cr));cr.call(ur)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(ar){if(ar===th)throw Error(p$1(174));return ar}function yh(ar,or){switch(G$1(wh,or),G$1(vh,ar),G$1(uh,th),ar=or.nodeType,ar){case 9:case 11:or=(or=or.documentElement)?or.namespaceURI:lb(null,"");break;default:ar=ar===8?or.parentNode:or,or=ar.namespaceURI||null,ar=ar.tagName,or=lb(or,ar)}E$2(uh),G$1(uh,or)}function zh(){E$2(uh),E$2(vh),E$2(wh)}function Ah(ar){xh(wh.current);var or=xh(uh.current),lr=lb(or,ar.type);or!==lr&&(G$1(vh,ar),G$1(uh,lr))}function Bh(ar){vh.current===ar&&(E$2(uh),E$2(vh))}var L$1=Uf(0);function Ch(ar){for(var or=ar;or!==null;){if(or.tag===13){var lr=or.memoizedState;if(lr!==null&&(lr=lr.dehydrated,lr===null||lr.data==="$?"||lr.data==="$!"))return or}else if(or.tag===19&&or.memoizedProps.revealOrder!==void 0){if(or.flags&128)return or}else if(or.child!==null){or.child.return=or,or=or.child;continue}if(or===ar)break;for(;or.sibling===null;){if(or.return===null||or.return===ar)return null;or=or.return}or.sibling.return=or.return,or=or.sibling}return null}var Dh=[];function Eh(){for(var ar=0;ar<Dh.length;ar++)Dh[ar]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$1=null,N$1=null,O$1=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$1(){throw Error(p$1(321))}function Mh(ar,or){if(or===null)return!1;for(var lr=0;lr<or.length&&lr<ar.length;lr++)if(!He$1(ar[lr],or[lr]))return!1;return!0}function Nh(ar,or,lr,ur,cr,dr){if(Hh=dr,M$1=or,or.memoizedState=null,or.updateQueue=null,or.lanes=0,Fh.current=ar===null||ar.memoizedState===null?Oh:Ph,ar=lr(ur,cr),Jh){dr=0;do{if(Jh=!1,Kh=0,25<=dr)throw Error(p$1(301));dr+=1,O$1=N$1=null,or.updateQueue=null,Fh.current=Qh,ar=lr(ur,cr)}while(Jh)}if(Fh.current=Rh,or=N$1!==null&&N$1.next!==null,Hh=0,O$1=N$1=M$1=null,Ih=!1,or)throw Error(p$1(300));return ar}function Sh(){var ar=Kh!==0;return Kh=0,ar}function Th(){var ar={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M$1.memoizedState=O$1=ar:O$1=O$1.next=ar,O$1}function Uh(){if(N$1===null){var ar=M$1.alternate;ar=ar!==null?ar.memoizedState:null}else ar=N$1.next;var or=O$1===null?M$1.memoizedState:O$1.next;if(or!==null)O$1=or,N$1=ar;else{if(ar===null)throw Error(p$1(310));N$1=ar,ar={memoizedState:N$1.memoizedState,baseState:N$1.baseState,baseQueue:N$1.baseQueue,queue:N$1.queue,next:null},O$1===null?M$1.memoizedState=O$1=ar:O$1=O$1.next=ar}return O$1}function Vh(ar,or){return typeof or=="function"?or(ar):or}function Wh(ar){var or=Uh(),lr=or.queue;if(lr===null)throw Error(p$1(311));lr.lastRenderedReducer=ar;var ur=N$1,cr=ur.baseQueue,dr=lr.pending;if(dr!==null){if(cr!==null){var fr=cr.next;cr.next=dr.next,dr.next=fr}ur.baseQueue=cr=dr,lr.pending=null}if(cr!==null){dr=cr.next,ur=ur.baseState;var pr=fr=null,mr=null,hr=dr;do{var gr=hr.lane;if((Hh&gr)===gr)mr!==null&&(mr=mr.next={lane:0,action:hr.action,hasEagerState:hr.hasEagerState,eagerState:hr.eagerState,next:null}),ur=hr.hasEagerState?hr.eagerState:ar(ur,hr.action);else{var vr={lane:gr,action:hr.action,hasEagerState:hr.hasEagerState,eagerState:hr.eagerState,next:null};mr===null?(pr=mr=vr,fr=ur):mr=mr.next=vr,M$1.lanes|=gr,rh|=gr}hr=hr.next}while(hr!==null&&hr!==dr);mr===null?fr=ur:mr.next=pr,He$1(ur,or.memoizedState)||(dh=!0),or.memoizedState=ur,or.baseState=fr,or.baseQueue=mr,lr.lastRenderedState=ur}if(ar=lr.interleaved,ar!==null){cr=ar;do dr=cr.lane,M$1.lanes|=dr,rh|=dr,cr=cr.next;while(cr!==ar)}else cr===null&&(lr.lanes=0);return[or.memoizedState,lr.dispatch]}function Xh(ar){var or=Uh(),lr=or.queue;if(lr===null)throw Error(p$1(311));lr.lastRenderedReducer=ar;var ur=lr.dispatch,cr=lr.pending,dr=or.memoizedState;if(cr!==null){lr.pending=null;var fr=cr=cr.next;do dr=ar(dr,fr.action),fr=fr.next;while(fr!==cr);He$1(dr,or.memoizedState)||(dh=!0),or.memoizedState=dr,or.baseQueue===null&&(or.baseState=dr),lr.lastRenderedState=dr}return[dr,ur]}function Yh(){}function Zh(ar,or){var lr=M$1,ur=Uh(),cr=or(),dr=!He$1(ur.memoizedState,cr);if(dr&&(ur.memoizedState=cr,dh=!0),ur=ur.queue,$h(ai.bind(null,lr,ur,ar),[ar]),ur.getSnapshot!==or||dr||O$1!==null&&O$1.memoizedState.tag&1){if(lr.flags|=2048,bi(9,ci.bind(null,lr,ur,cr,or),void 0,null),Q$1===null)throw Error(p$1(349));Hh&30||di(lr,or,cr)}return cr}function di(ar,or,lr){ar.flags|=16384,ar={getSnapshot:or,value:lr},or=M$1.updateQueue,or===null?(or={lastEffect:null,stores:null},M$1.updateQueue=or,or.stores=[ar]):(lr=or.stores,lr===null?or.stores=[ar]:lr.push(ar))}function ci(ar,or,lr,ur){or.value=lr,or.getSnapshot=ur,ei(or)&&fi(ar)}function ai(ar,or,lr){return lr(function(){ei(or)&&fi(ar)})}function ei(ar){var or=ar.getSnapshot;ar=ar.value;try{var lr=or();return!He$1(ar,lr)}catch{return!0}}function fi(ar){var or=ih(ar,1);or!==null&&gi(or,ar,1,-1)}function hi(ar){var or=Th();return typeof ar=="function"&&(ar=ar()),or.memoizedState=or.baseState=ar,ar={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:ar},or.queue=ar,ar=ar.dispatch=ii.bind(null,M$1,ar),[or.memoizedState,ar]}function bi(ar,or,lr,ur){return ar={tag:ar,create:or,destroy:lr,deps:ur,next:null},or=M$1.updateQueue,or===null?(or={lastEffect:null,stores:null},M$1.updateQueue=or,or.lastEffect=ar.next=ar):(lr=or.lastEffect,lr===null?or.lastEffect=ar.next=ar:(ur=lr.next,lr.next=ar,ar.next=ur,or.lastEffect=ar)),ar}function ji(){return Uh().memoizedState}function ki(ar,or,lr,ur){var cr=Th();M$1.flags|=ar,cr.memoizedState=bi(1|or,lr,void 0,ur===void 0?null:ur)}function li(ar,or,lr,ur){var cr=Uh();ur=ur===void 0?null:ur;var dr=void 0;if(N$1!==null){var fr=N$1.memoizedState;if(dr=fr.destroy,ur!==null&&Mh(ur,fr.deps)){cr.memoizedState=bi(or,lr,dr,ur);return}}M$1.flags|=ar,cr.memoizedState=bi(1|or,lr,dr,ur)}function mi(ar,or){return ki(8390656,8,ar,or)}function $h(ar,or){return li(2048,8,ar,or)}function ni(ar,or){return li(4,2,ar,or)}function oi(ar,or){return li(4,4,ar,or)}function pi(ar,or){if(typeof or=="function")return ar=ar(),or(ar),function(){or(null)};if(or!=null)return ar=ar(),or.current=ar,function(){or.current=null}}function qi(ar,or,lr){return lr=lr!=null?lr.concat([ar]):null,li(4,4,pi.bind(null,or,ar),lr)}function ri(){}function si(ar,or){var lr=Uh();or=or===void 0?null:or;var ur=lr.memoizedState;return ur!==null&&or!==null&&Mh(or,ur[1])?ur[0]:(lr.memoizedState=[ar,or],ar)}function ti(ar,or){var lr=Uh();or=or===void 0?null:or;var ur=lr.memoizedState;return ur!==null&&or!==null&&Mh(or,ur[1])?ur[0]:(ar=ar(),lr.memoizedState=[ar,or],ar)}function ui(ar,or,lr){return Hh&21?(He$1(lr,or)||(lr=yc(),M$1.lanes|=lr,rh|=lr,ar.baseState=!0),or):(ar.baseState&&(ar.baseState=!1,dh=!0),ar.memoizedState=lr)}function vi(ar,or){var lr=C$1;C$1=lr!==0&&4>lr?lr:4,ar(!0);var ur=Gh.transition;Gh.transition={};try{ar(!1),or()}finally{C$1=lr,Gh.transition=ur}}function wi(){return Uh().memoizedState}function xi(ar,or,lr){var ur=yi(ar);if(lr={lane:ur,action:lr,hasEagerState:!1,eagerState:null,next:null},zi(ar))Ai(or,lr);else if(lr=hh(ar,or,lr,ur),lr!==null){var cr=R$2();gi(lr,ar,ur,cr),Bi(lr,or,ur)}}function ii(ar,or,lr){var ur=yi(ar),cr={lane:ur,action:lr,hasEagerState:!1,eagerState:null,next:null};if(zi(ar))Ai(or,cr);else{var dr=ar.alternate;if(ar.lanes===0&&(dr===null||dr.lanes===0)&&(dr=or.lastRenderedReducer,dr!==null))try{var fr=or.lastRenderedState,pr=dr(fr,lr);if(cr.hasEagerState=!0,cr.eagerState=pr,He$1(pr,fr)){var mr=or.interleaved;mr===null?(cr.next=cr,gh(or)):(cr.next=mr.next,mr.next=cr),or.interleaved=cr;return}}catch{}finally{}lr=hh(ar,or,cr,ur),lr!==null&&(cr=R$2(),gi(lr,ar,ur,cr),Bi(lr,or,ur))}}function zi(ar){var or=ar.alternate;return ar===M$1||or!==null&&or===M$1}function Ai(ar,or){Jh=Ih=!0;var lr=ar.pending;lr===null?or.next=or:(or.next=lr.next,lr.next=or),ar.pending=or}function Bi(ar,or,lr){if(lr&4194240){var ur=or.lanes;ur&=ar.pendingLanes,lr|=ur,or.lanes=lr,Cc(ar,lr)}}var Rh={readContext:eh,useCallback:P$1,useContext:P$1,useEffect:P$1,useImperativeHandle:P$1,useInsertionEffect:P$1,useLayoutEffect:P$1,useMemo:P$1,useReducer:P$1,useRef:P$1,useState:P$1,useDebugValue:P$1,useDeferredValue:P$1,useTransition:P$1,useMutableSource:P$1,useSyncExternalStore:P$1,useId:P$1,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(ar,or){return Th().memoizedState=[ar,or===void 0?null:or],ar},useContext:eh,useEffect:mi,useImperativeHandle:function(ar,or,lr){return lr=lr!=null?lr.concat([ar]):null,ki(4194308,4,pi.bind(null,or,ar),lr)},useLayoutEffect:function(ar,or){return ki(4194308,4,ar,or)},useInsertionEffect:function(ar,or){return ki(4,2,ar,or)},useMemo:function(ar,or){var lr=Th();return or=or===void 0?null:or,ar=ar(),lr.memoizedState=[ar,or],ar},useReducer:function(ar,or,lr){var ur=Th();return or=lr!==void 0?lr(or):or,ur.memoizedState=ur.baseState=or,ar={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:or},ur.queue=ar,ar=ar.dispatch=xi.bind(null,M$1,ar),[ur.memoizedState,ar]},useRef:function(ar){var or=Th();return ar={current:ar},or.memoizedState=ar},useState:hi,useDebugValue:ri,useDeferredValue:function(ar){return Th().memoizedState=ar},useTransition:function(){var ar=hi(!1),or=ar[0];return ar=vi.bind(null,ar[1]),Th().memoizedState=ar,[or,ar]},useMutableSource:function(){},useSyncExternalStore:function(ar,or,lr){var ur=M$1,cr=Th();if(I$1){if(lr===void 0)throw Error(p$1(407));lr=lr()}else{if(lr=or(),Q$1===null)throw Error(p$1(349));Hh&30||di(ur,or,lr)}cr.memoizedState=lr;var dr={value:lr,getSnapshot:or};return cr.queue=dr,mi(ai.bind(null,ur,dr,ar),[ar]),ur.flags|=2048,bi(9,ci.bind(null,ur,dr,lr,or),void 0,null),lr},useId:function(){var ar=Th(),or=Q$1.identifierPrefix;if(I$1){var lr=sg,ur=rg;lr=(ur&~(1<<32-oc(ur)-1)).toString(32)+lr,or=":"+or+"R"+lr,lr=Kh++,0<lr&&(or+="H"+lr.toString(32)),or+=":"}else lr=Lh++,or=":"+or+"r"+lr.toString(32)+":";return ar.memoizedState=or},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(ar){var or=Uh();return ui(or,N$1.memoizedState,ar)},useTransition:function(){var ar=Wh(Vh)[0],or=Uh().memoizedState;return[ar,or]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(ar){var or=Uh();return N$1===null?or.memoizedState=ar:ui(or,N$1.memoizedState,ar)},useTransition:function(){var ar=Xh(Vh)[0],or=Uh().memoizedState;return[ar,or]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(ar,or){if(ar&&ar.defaultProps){or=A$1({},or),ar=ar.defaultProps;for(var lr in ar)or[lr]===void 0&&(or[lr]=ar[lr]);return or}return or}function Di(ar,or,lr,ur){or=ar.memoizedState,lr=lr(ur,or),lr=lr==null?or:A$1({},or,lr),ar.memoizedState=lr,ar.lanes===0&&(ar.updateQueue.baseState=lr)}var Ei={isMounted:function(ar){return(ar=ar._reactInternals)?Vb(ar)===ar:!1},enqueueSetState:function(ar,or,lr){ar=ar._reactInternals;var ur=R$2(),cr=yi(ar),dr=mh(ur,cr);dr.payload=or,lr!=null&&(dr.callback=lr),or=nh(ar,dr,cr),or!==null&&(gi(or,ar,cr,ur),oh(or,ar,cr))},enqueueReplaceState:function(ar,or,lr){ar=ar._reactInternals;var ur=R$2(),cr=yi(ar),dr=mh(ur,cr);dr.tag=1,dr.payload=or,lr!=null&&(dr.callback=lr),or=nh(ar,dr,cr),or!==null&&(gi(or,ar,cr,ur),oh(or,ar,cr))},enqueueForceUpdate:function(ar,or){ar=ar._reactInternals;var lr=R$2(),ur=yi(ar),cr=mh(lr,ur);cr.tag=2,or!=null&&(cr.callback=or),or=nh(ar,cr,ur),or!==null&&(gi(or,ar,ur,lr),oh(or,ar,ur))}};function Fi(ar,or,lr,ur,cr,dr,fr){return ar=ar.stateNode,typeof ar.shouldComponentUpdate=="function"?ar.shouldComponentUpdate(ur,dr,fr):or.prototype&&or.prototype.isPureReactComponent?!Ie$1(lr,ur)||!Ie$1(cr,dr):!0}function Gi(ar,or,lr){var ur=!1,cr=Vf,dr=or.contextType;return typeof dr=="object"&&dr!==null?dr=eh(dr):(cr=Zf(or)?Xf:H$1.current,ur=or.contextTypes,dr=(ur=ur!=null)?Yf(ar,cr):Vf),or=new or(lr,dr),ar.memoizedState=or.state!==null&&or.state!==void 0?or.state:null,or.updater=Ei,ar.stateNode=or,or._reactInternals=ar,ur&&(ar=ar.stateNode,ar.__reactInternalMemoizedUnmaskedChildContext=cr,ar.__reactInternalMemoizedMaskedChildContext=dr),or}function Hi(ar,or,lr,ur){ar=or.state,typeof or.componentWillReceiveProps=="function"&&or.componentWillReceiveProps(lr,ur),typeof or.UNSAFE_componentWillReceiveProps=="function"&&or.UNSAFE_componentWillReceiveProps(lr,ur),or.state!==ar&&Ei.enqueueReplaceState(or,or.state,null)}function Ii(ar,or,lr,ur){var cr=ar.stateNode;cr.props=lr,cr.state=ar.memoizedState,cr.refs={},kh(ar);var dr=or.contextType;typeof dr=="object"&&dr!==null?cr.context=eh(dr):(dr=Zf(or)?Xf:H$1.current,cr.context=Yf(ar,dr)),cr.state=ar.memoizedState,dr=or.getDerivedStateFromProps,typeof dr=="function"&&(Di(ar,or,dr,lr),cr.state=ar.memoizedState),typeof or.getDerivedStateFromProps=="function"||typeof cr.getSnapshotBeforeUpdate=="function"||typeof cr.UNSAFE_componentWillMount!="function"&&typeof cr.componentWillMount!="function"||(or=cr.state,typeof cr.componentWillMount=="function"&&cr.componentWillMount(),typeof cr.UNSAFE_componentWillMount=="function"&&cr.UNSAFE_componentWillMount(),or!==cr.state&&Ei.enqueueReplaceState(cr,cr.state,null),qh(ar,lr,cr,ur),cr.state=ar.memoizedState),typeof cr.componentDidMount=="function"&&(ar.flags|=4194308)}function Ji(ar,or){try{var lr="",ur=or;do lr+=Pa(ur),ur=ur.return;while(ur);var cr=lr}catch(dr){cr=`
Error generating stack: `+dr.message+`
`+dr.stack}return{value:ar,source:or,stack:cr,digest:null}}function Ki(ar,or,lr){return{value:ar,source:null,stack:lr??null,digest:or??null}}function Li(ar,or){try{console.error(or.value)}catch(lr){setTimeout(function(){throw lr})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(ar,or,lr){lr=mh(-1,lr),lr.tag=3,lr.payload={element:null};var ur=or.value;return lr.callback=function(){Oi||(Oi=!0,Pi=ur),Li(ar,or)},lr}function Qi(ar,or,lr){lr=mh(-1,lr),lr.tag=3;var ur=ar.type.getDerivedStateFromError;if(typeof ur=="function"){var cr=or.value;lr.payload=function(){return ur(cr)},lr.callback=function(){Li(ar,or)}}var dr=ar.stateNode;return dr!==null&&typeof dr.componentDidCatch=="function"&&(lr.callback=function(){Li(ar,or),typeof ur!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var fr=or.stack;this.componentDidCatch(or.value,{componentStack:fr!==null?fr:""})}),lr}function Si(ar,or,lr){var ur=ar.pingCache;if(ur===null){ur=ar.pingCache=new Mi;var cr=new Set;ur.set(or,cr)}else cr=ur.get(or),cr===void 0&&(cr=new Set,ur.set(or,cr));cr.has(lr)||(cr.add(lr),ar=Ti.bind(null,ar,or,lr),or.then(ar,ar))}function Ui(ar){do{var or;if((or=ar.tag===13)&&(or=ar.memoizedState,or=or!==null?or.dehydrated!==null:!0),or)return ar;ar=ar.return}while(ar!==null);return null}function Vi(ar,or,lr,ur,cr){return ar.mode&1?(ar.flags|=65536,ar.lanes=cr,ar):(ar===or?ar.flags|=65536:(ar.flags|=128,lr.flags|=131072,lr.flags&=-52805,lr.tag===1&&(lr.alternate===null?lr.tag=17:(or=mh(-1,1),or.tag=2,nh(lr,or,1))),lr.lanes|=1),ar)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(ar,or,lr,ur){or.child=ar===null?Vg(or,null,lr,ur):Ug(or,ar.child,lr,ur)}function Yi(ar,or,lr,ur,cr){lr=lr.render;var dr=or.ref;return ch(or,cr),ur=Nh(ar,or,lr,ur,dr,cr),lr=Sh(),ar!==null&&!dh?(or.updateQueue=ar.updateQueue,or.flags&=-2053,ar.lanes&=~cr,Zi(ar,or,cr)):(I$1&&lr&&vg(or),or.flags|=1,Xi(ar,or,ur,cr),or.child)}function $i(ar,or,lr,ur,cr){if(ar===null){var dr=lr.type;return typeof dr=="function"&&!aj(dr)&&dr.defaultProps===void 0&&lr.compare===null&&lr.defaultProps===void 0?(or.tag=15,or.type=dr,bj(ar,or,dr,ur,cr)):(ar=Rg(lr.type,null,ur,or,or.mode,cr),ar.ref=or.ref,ar.return=or,or.child=ar)}if(dr=ar.child,!(ar.lanes&cr)){var fr=dr.memoizedProps;if(lr=lr.compare,lr=lr!==null?lr:Ie$1,lr(fr,ur)&&ar.ref===or.ref)return Zi(ar,or,cr)}return or.flags|=1,ar=Pg(dr,ur),ar.ref=or.ref,ar.return=or,or.child=ar}function bj(ar,or,lr,ur,cr){if(ar!==null){var dr=ar.memoizedProps;if(Ie$1(dr,ur)&&ar.ref===or.ref)if(dh=!1,or.pendingProps=ur=dr,(ar.lanes&cr)!==0)ar.flags&131072&&(dh=!0);else return or.lanes=ar.lanes,Zi(ar,or,cr)}return cj(ar,or,lr,ur,cr)}function dj(ar,or,lr){var ur=or.pendingProps,cr=ur.children,dr=ar!==null?ar.memoizedState:null;if(ur.mode==="hidden")if(!(or.mode&1))or.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(ej,fj),fj|=lr;else{if(!(lr&1073741824))return ar=dr!==null?dr.baseLanes|lr:lr,or.lanes=or.childLanes=1073741824,or.memoizedState={baseLanes:ar,cachePool:null,transitions:null},or.updateQueue=null,G$1(ej,fj),fj|=ar,null;or.memoizedState={baseLanes:0,cachePool:null,transitions:null},ur=dr!==null?dr.baseLanes:lr,G$1(ej,fj),fj|=ur}else dr!==null?(ur=dr.baseLanes|lr,or.memoizedState=null):ur=lr,G$1(ej,fj),fj|=ur;return Xi(ar,or,cr,lr),or.child}function gj(ar,or){var lr=or.ref;(ar===null&&lr!==null||ar!==null&&ar.ref!==lr)&&(or.flags|=512,or.flags|=2097152)}function cj(ar,or,lr,ur,cr){var dr=Zf(lr)?Xf:H$1.current;return dr=Yf(or,dr),ch(or,cr),lr=Nh(ar,or,lr,ur,dr,cr),ur=Sh(),ar!==null&&!dh?(or.updateQueue=ar.updateQueue,or.flags&=-2053,ar.lanes&=~cr,Zi(ar,or,cr)):(I$1&&ur&&vg(or),or.flags|=1,Xi(ar,or,lr,cr),or.child)}function hj(ar,or,lr,ur,cr){if(Zf(lr)){var dr=!0;cg(or)}else dr=!1;if(ch(or,cr),or.stateNode===null)ij(ar,or),Gi(or,lr,ur),Ii(or,lr,ur,cr),ur=!0;else if(ar===null){var fr=or.stateNode,pr=or.memoizedProps;fr.props=pr;var mr=fr.context,hr=lr.contextType;typeof hr=="object"&&hr!==null?hr=eh(hr):(hr=Zf(lr)?Xf:H$1.current,hr=Yf(or,hr));var gr=lr.getDerivedStateFromProps,vr=typeof gr=="function"||typeof fr.getSnapshotBeforeUpdate=="function";vr||typeof fr.UNSAFE_componentWillReceiveProps!="function"&&typeof fr.componentWillReceiveProps!="function"||(pr!==ur||mr!==hr)&&Hi(or,fr,ur,hr),jh=!1;var wr=or.memoizedState;fr.state=wr,qh(or,ur,fr,cr),mr=or.memoizedState,pr!==ur||wr!==mr||Wf.current||jh?(typeof gr=="function"&&(Di(or,lr,gr,ur),mr=or.memoizedState),(pr=jh||Fi(or,lr,pr,ur,wr,mr,hr))?(vr||typeof fr.UNSAFE_componentWillMount!="function"&&typeof fr.componentWillMount!="function"||(typeof fr.componentWillMount=="function"&&fr.componentWillMount(),typeof fr.UNSAFE_componentWillMount=="function"&&fr.UNSAFE_componentWillMount()),typeof fr.componentDidMount=="function"&&(or.flags|=4194308)):(typeof fr.componentDidMount=="function"&&(or.flags|=4194308),or.memoizedProps=ur,or.memoizedState=mr),fr.props=ur,fr.state=mr,fr.context=hr,ur=pr):(typeof fr.componentDidMount=="function"&&(or.flags|=4194308),ur=!1)}else{fr=or.stateNode,lh(ar,or),pr=or.memoizedProps,hr=or.type===or.elementType?pr:Ci(or.type,pr),fr.props=hr,vr=or.pendingProps,wr=fr.context,mr=lr.contextType,typeof mr=="object"&&mr!==null?mr=eh(mr):(mr=Zf(lr)?Xf:H$1.current,mr=Yf(or,mr));var _r=lr.getDerivedStateFromProps;(gr=typeof _r=="function"||typeof fr.getSnapshotBeforeUpdate=="function")||typeof fr.UNSAFE_componentWillReceiveProps!="function"&&typeof fr.componentWillReceiveProps!="function"||(pr!==vr||wr!==mr)&&Hi(or,fr,ur,mr),jh=!1,wr=or.memoizedState,fr.state=wr,qh(or,ur,fr,cr);var Cr=or.memoizedState;pr!==vr||wr!==Cr||Wf.current||jh?(typeof _r=="function"&&(Di(or,lr,_r,ur),Cr=or.memoizedState),(hr=jh||Fi(or,lr,hr,ur,wr,Cr,mr)||!1)?(gr||typeof fr.UNSAFE_componentWillUpdate!="function"&&typeof fr.componentWillUpdate!="function"||(typeof fr.componentWillUpdate=="function"&&fr.componentWillUpdate(ur,Cr,mr),typeof fr.UNSAFE_componentWillUpdate=="function"&&fr.UNSAFE_componentWillUpdate(ur,Cr,mr)),typeof fr.componentDidUpdate=="function"&&(or.flags|=4),typeof fr.getSnapshotBeforeUpdate=="function"&&(or.flags|=1024)):(typeof fr.componentDidUpdate!="function"||pr===ar.memoizedProps&&wr===ar.memoizedState||(or.flags|=4),typeof fr.getSnapshotBeforeUpdate!="function"||pr===ar.memoizedProps&&wr===ar.memoizedState||(or.flags|=1024),or.memoizedProps=ur,or.memoizedState=Cr),fr.props=ur,fr.state=Cr,fr.context=mr,ur=hr):(typeof fr.componentDidUpdate!="function"||pr===ar.memoizedProps&&wr===ar.memoizedState||(or.flags|=4),typeof fr.getSnapshotBeforeUpdate!="function"||pr===ar.memoizedProps&&wr===ar.memoizedState||(or.flags|=1024),ur=!1)}return jj(ar,or,lr,ur,dr,cr)}function jj(ar,or,lr,ur,cr,dr){gj(ar,or);var fr=(or.flags&128)!==0;if(!ur&&!fr)return cr&&dg(or,lr,!1),Zi(ar,or,dr);ur=or.stateNode,Wi.current=or;var pr=fr&&typeof lr.getDerivedStateFromError!="function"?null:ur.render();return or.flags|=1,ar!==null&&fr?(or.child=Ug(or,ar.child,null,dr),or.child=Ug(or,null,pr,dr)):Xi(ar,or,pr,dr),or.memoizedState=ur.state,cr&&dg(or,lr,!0),or.child}function kj(ar){var or=ar.stateNode;or.pendingContext?ag(ar,or.pendingContext,or.pendingContext!==or.context):or.context&&ag(ar,or.context,!1),yh(ar,or.containerInfo)}function lj(ar,or,lr,ur,cr){return Ig(),Jg(cr),or.flags|=256,Xi(ar,or,lr,ur),or.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(ar){return{baseLanes:ar,cachePool:null,transitions:null}}function oj(ar,or,lr){var ur=or.pendingProps,cr=L$1.current,dr=!1,fr=(or.flags&128)!==0,pr;if((pr=fr)||(pr=ar!==null&&ar.memoizedState===null?!1:(cr&2)!==0),pr?(dr=!0,or.flags&=-129):(ar===null||ar.memoizedState!==null)&&(cr|=1),G$1(L$1,cr&1),ar===null)return Eg(or),ar=or.memoizedState,ar!==null&&(ar=ar.dehydrated,ar!==null)?(or.mode&1?ar.data==="$!"?or.lanes=8:or.lanes=1073741824:or.lanes=1,null):(fr=ur.children,ar=ur.fallback,dr?(ur=or.mode,dr=or.child,fr={mode:"hidden",children:fr},!(ur&1)&&dr!==null?(dr.childLanes=0,dr.pendingProps=fr):dr=pj(fr,ur,0,null),ar=Tg(ar,ur,lr,null),dr.return=or,ar.return=or,dr.sibling=ar,or.child=dr,or.child.memoizedState=nj(lr),or.memoizedState=mj,ar):qj(or,fr));if(cr=ar.memoizedState,cr!==null&&(pr=cr.dehydrated,pr!==null))return rj(ar,or,fr,ur,pr,cr,lr);if(dr){dr=ur.fallback,fr=or.mode,cr=ar.child,pr=cr.sibling;var mr={mode:"hidden",children:ur.children};return!(fr&1)&&or.child!==cr?(ur=or.child,ur.childLanes=0,ur.pendingProps=mr,or.deletions=null):(ur=Pg(cr,mr),ur.subtreeFlags=cr.subtreeFlags&14680064),pr!==null?dr=Pg(pr,dr):(dr=Tg(dr,fr,lr,null),dr.flags|=2),dr.return=or,ur.return=or,ur.sibling=dr,or.child=ur,ur=dr,dr=or.child,fr=ar.child.memoizedState,fr=fr===null?nj(lr):{baseLanes:fr.baseLanes|lr,cachePool:null,transitions:fr.transitions},dr.memoizedState=fr,dr.childLanes=ar.childLanes&~lr,or.memoizedState=mj,ur}return dr=ar.child,ar=dr.sibling,ur=Pg(dr,{mode:"visible",children:ur.children}),!(or.mode&1)&&(ur.lanes=lr),ur.return=or,ur.sibling=null,ar!==null&&(lr=or.deletions,lr===null?(or.deletions=[ar],or.flags|=16):lr.push(ar)),or.child=ur,or.memoizedState=null,ur}function qj(ar,or){return or=pj({mode:"visible",children:or},ar.mode,0,null),or.return=ar,ar.child=or}function sj(ar,or,lr,ur){return ur!==null&&Jg(ur),Ug(or,ar.child,null,lr),ar=qj(or,or.pendingProps.children),ar.flags|=2,or.memoizedState=null,ar}function rj(ar,or,lr,ur,cr,dr,fr){if(lr)return or.flags&256?(or.flags&=-257,ur=Ki(Error(p$1(422))),sj(ar,or,fr,ur)):or.memoizedState!==null?(or.child=ar.child,or.flags|=128,null):(dr=ur.fallback,cr=or.mode,ur=pj({mode:"visible",children:ur.children},cr,0,null),dr=Tg(dr,cr,fr,null),dr.flags|=2,ur.return=or,dr.return=or,ur.sibling=dr,or.child=ur,or.mode&1&&Ug(or,ar.child,null,fr),or.child.memoizedState=nj(fr),or.memoizedState=mj,dr);if(!(or.mode&1))return sj(ar,or,fr,null);if(cr.data==="$!"){if(ur=cr.nextSibling&&cr.nextSibling.dataset,ur)var pr=ur.dgst;return ur=pr,dr=Error(p$1(419)),ur=Ki(dr,ur,void 0),sj(ar,or,fr,ur)}if(pr=(fr&ar.childLanes)!==0,dh||pr){if(ur=Q$1,ur!==null){switch(fr&-fr){case 4:cr=2;break;case 16:cr=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:cr=32;break;case 536870912:cr=268435456;break;default:cr=0}cr=cr&(ur.suspendedLanes|fr)?0:cr,cr!==0&&cr!==dr.retryLane&&(dr.retryLane=cr,ih(ar,cr),gi(ur,ar,cr,-1))}return tj(),ur=Ki(Error(p$1(421))),sj(ar,or,fr,ur)}return cr.data==="$?"?(or.flags|=128,or.child=ar.child,or=uj.bind(null,ar),cr._reactRetry=or,null):(ar=dr.treeContext,yg=Lf(cr.nextSibling),xg=or,I$1=!0,zg=null,ar!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=ar.id,sg=ar.overflow,qg=or),or=qj(or,ur.children),or.flags|=4096,or)}function vj(ar,or,lr){ar.lanes|=or;var ur=ar.alternate;ur!==null&&(ur.lanes|=or),bh(ar.return,or,lr)}function wj(ar,or,lr,ur,cr){var dr=ar.memoizedState;dr===null?ar.memoizedState={isBackwards:or,rendering:null,renderingStartTime:0,last:ur,tail:lr,tailMode:cr}:(dr.isBackwards=or,dr.rendering=null,dr.renderingStartTime=0,dr.last=ur,dr.tail=lr,dr.tailMode=cr)}function xj(ar,or,lr){var ur=or.pendingProps,cr=ur.revealOrder,dr=ur.tail;if(Xi(ar,or,ur.children,lr),ur=L$1.current,ur&2)ur=ur&1|2,or.flags|=128;else{if(ar!==null&&ar.flags&128)e:for(ar=or.child;ar!==null;){if(ar.tag===13)ar.memoizedState!==null&&vj(ar,lr,or);else if(ar.tag===19)vj(ar,lr,or);else if(ar.child!==null){ar.child.return=ar,ar=ar.child;continue}if(ar===or)break e;for(;ar.sibling===null;){if(ar.return===null||ar.return===or)break e;ar=ar.return}ar.sibling.return=ar.return,ar=ar.sibling}ur&=1}if(G$1(L$1,ur),!(or.mode&1))or.memoizedState=null;else switch(cr){case"forwards":for(lr=or.child,cr=null;lr!==null;)ar=lr.alternate,ar!==null&&Ch(ar)===null&&(cr=lr),lr=lr.sibling;lr=cr,lr===null?(cr=or.child,or.child=null):(cr=lr.sibling,lr.sibling=null),wj(or,!1,cr,lr,dr);break;case"backwards":for(lr=null,cr=or.child,or.child=null;cr!==null;){if(ar=cr.alternate,ar!==null&&Ch(ar)===null){or.child=cr;break}ar=cr.sibling,cr.sibling=lr,lr=cr,cr=ar}wj(or,!0,lr,null,dr);break;case"together":wj(or,!1,null,null,void 0);break;default:or.memoizedState=null}return or.child}function ij(ar,or){!(or.mode&1)&&ar!==null&&(ar.alternate=null,or.alternate=null,or.flags|=2)}function Zi(ar,or,lr){if(ar!==null&&(or.dependencies=ar.dependencies),rh|=or.lanes,!(lr&or.childLanes))return null;if(ar!==null&&or.child!==ar.child)throw Error(p$1(153));if(or.child!==null){for(ar=or.child,lr=Pg(ar,ar.pendingProps),or.child=lr,lr.return=or;ar.sibling!==null;)ar=ar.sibling,lr=lr.sibling=Pg(ar,ar.pendingProps),lr.return=or;lr.sibling=null}return or.child}function yj(ar,or,lr){switch(or.tag){case 3:kj(or),Ig();break;case 5:Ah(or);break;case 1:Zf(or.type)&&cg(or);break;case 4:yh(or,or.stateNode.containerInfo);break;case 10:var ur=or.type._context,cr=or.memoizedProps.value;G$1(Wg,ur._currentValue),ur._currentValue=cr;break;case 13:if(ur=or.memoizedState,ur!==null)return ur.dehydrated!==null?(G$1(L$1,L$1.current&1),or.flags|=128,null):lr&or.child.childLanes?oj(ar,or,lr):(G$1(L$1,L$1.current&1),ar=Zi(ar,or,lr),ar!==null?ar.sibling:null);G$1(L$1,L$1.current&1);break;case 19:if(ur=(lr&or.childLanes)!==0,ar.flags&128){if(ur)return xj(ar,or,lr);or.flags|=128}if(cr=or.memoizedState,cr!==null&&(cr.rendering=null,cr.tail=null,cr.lastEffect=null),G$1(L$1,L$1.current),ur)break;return null;case 22:case 23:return or.lanes=0,dj(ar,or,lr)}return Zi(ar,or,lr)}var zj,Aj,Bj,Cj;zj=function(ar,or){for(var lr=or.child;lr!==null;){if(lr.tag===5||lr.tag===6)ar.appendChild(lr.stateNode);else if(lr.tag!==4&&lr.child!==null){lr.child.return=lr,lr=lr.child;continue}if(lr===or)break;for(;lr.sibling===null;){if(lr.return===null||lr.return===or)return;lr=lr.return}lr.sibling.return=lr.return,lr=lr.sibling}};Aj=function(){};Bj=function(ar,or,lr,ur){var cr=ar.memoizedProps;if(cr!==ur){ar=or.stateNode,xh(uh.current);var dr=null;switch(lr){case"input":cr=Ya(ar,cr),ur=Ya(ar,ur),dr=[];break;case"select":cr=A$1({},cr,{value:void 0}),ur=A$1({},ur,{value:void 0}),dr=[];break;case"textarea":cr=gb(ar,cr),ur=gb(ar,ur),dr=[];break;default:typeof cr.onClick!="function"&&typeof ur.onClick=="function"&&(ar.onclick=Bf)}ub(lr,ur);var fr;lr=null;for(hr in cr)if(!ur.hasOwnProperty(hr)&&cr.hasOwnProperty(hr)&&cr[hr]!=null)if(hr==="style"){var pr=cr[hr];for(fr in pr)pr.hasOwnProperty(fr)&&(lr||(lr={}),lr[fr]="")}else hr!=="dangerouslySetInnerHTML"&&hr!=="children"&&hr!=="suppressContentEditableWarning"&&hr!=="suppressHydrationWarning"&&hr!=="autoFocus"&&(ea.hasOwnProperty(hr)?dr||(dr=[]):(dr=dr||[]).push(hr,null));for(hr in ur){var mr=ur[hr];if(pr=cr!=null?cr[hr]:void 0,ur.hasOwnProperty(hr)&&mr!==pr&&(mr!=null||pr!=null))if(hr==="style")if(pr){for(fr in pr)!pr.hasOwnProperty(fr)||mr&&mr.hasOwnProperty(fr)||(lr||(lr={}),lr[fr]="");for(fr in mr)mr.hasOwnProperty(fr)&&pr[fr]!==mr[fr]&&(lr||(lr={}),lr[fr]=mr[fr])}else lr||(dr||(dr=[]),dr.push(hr,lr)),lr=mr;else hr==="dangerouslySetInnerHTML"?(mr=mr?mr.__html:void 0,pr=pr?pr.__html:void 0,mr!=null&&pr!==mr&&(dr=dr||[]).push(hr,mr)):hr==="children"?typeof mr!="string"&&typeof mr!="number"||(dr=dr||[]).push(hr,""+mr):hr!=="suppressContentEditableWarning"&&hr!=="suppressHydrationWarning"&&(ea.hasOwnProperty(hr)?(mr!=null&&hr==="onScroll"&&D$1("scroll",ar),dr||pr===mr||(dr=[])):(dr=dr||[]).push(hr,mr))}lr&&(dr=dr||[]).push("style",lr);var hr=dr;(or.updateQueue=hr)&&(or.flags|=4)}};Cj=function(ar,or,lr,ur){lr!==ur&&(or.flags|=4)};function Dj(ar,or){if(!I$1)switch(ar.tailMode){case"hidden":or=ar.tail;for(var lr=null;or!==null;)or.alternate!==null&&(lr=or),or=or.sibling;lr===null?ar.tail=null:lr.sibling=null;break;case"collapsed":lr=ar.tail;for(var ur=null;lr!==null;)lr.alternate!==null&&(ur=lr),lr=lr.sibling;ur===null?or||ar.tail===null?ar.tail=null:ar.tail.sibling=null:ur.sibling=null}}function S$1(ar){var or=ar.alternate!==null&&ar.alternate.child===ar.child,lr=0,ur=0;if(or)for(var cr=ar.child;cr!==null;)lr|=cr.lanes|cr.childLanes,ur|=cr.subtreeFlags&14680064,ur|=cr.flags&14680064,cr.return=ar,cr=cr.sibling;else for(cr=ar.child;cr!==null;)lr|=cr.lanes|cr.childLanes,ur|=cr.subtreeFlags,ur|=cr.flags,cr.return=ar,cr=cr.sibling;return ar.subtreeFlags|=ur,ar.childLanes=lr,or}function Ej(ar,or,lr){var ur=or.pendingProps;switch(wg(or),or.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(or),null;case 1:return Zf(or.type)&&$f(),S$1(or),null;case 3:return ur=or.stateNode,zh(),E$2(Wf),E$2(H$1),Eh(),ur.pendingContext&&(ur.context=ur.pendingContext,ur.pendingContext=null),(ar===null||ar.child===null)&&(Gg(or)?or.flags|=4:ar===null||ar.memoizedState.isDehydrated&&!(or.flags&256)||(or.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(ar,or),S$1(or),null;case 5:Bh(or);var cr=xh(wh.current);if(lr=or.type,ar!==null&&or.stateNode!=null)Bj(ar,or,lr,ur,cr),ar.ref!==or.ref&&(or.flags|=512,or.flags|=2097152);else{if(!ur){if(or.stateNode===null)throw Error(p$1(166));return S$1(or),null}if(ar=xh(uh.current),Gg(or)){ur=or.stateNode,lr=or.type;var dr=or.memoizedProps;switch(ur[Of]=or,ur[Pf]=dr,ar=(or.mode&1)!==0,lr){case"dialog":D$1("cancel",ur),D$1("close",ur);break;case"iframe":case"object":case"embed":D$1("load",ur);break;case"video":case"audio":for(cr=0;cr<lf.length;cr++)D$1(lf[cr],ur);break;case"source":D$1("error",ur);break;case"img":case"image":case"link":D$1("error",ur),D$1("load",ur);break;case"details":D$1("toggle",ur);break;case"input":Za(ur,dr),D$1("invalid",ur);break;case"select":ur._wrapperState={wasMultiple:!!dr.multiple},D$1("invalid",ur);break;case"textarea":hb(ur,dr),D$1("invalid",ur)}ub(lr,dr),cr=null;for(var fr in dr)if(dr.hasOwnProperty(fr)){var pr=dr[fr];fr==="children"?typeof pr=="string"?ur.textContent!==pr&&(dr.suppressHydrationWarning!==!0&&Af(ur.textContent,pr,ar),cr=["children",pr]):typeof pr=="number"&&ur.textContent!==""+pr&&(dr.suppressHydrationWarning!==!0&&Af(ur.textContent,pr,ar),cr=["children",""+pr]):ea.hasOwnProperty(fr)&&pr!=null&&fr==="onScroll"&&D$1("scroll",ur)}switch(lr){case"input":Va(ur),db$1(ur,dr,!0);break;case"textarea":Va(ur),jb(ur);break;case"select":case"option":break;default:typeof dr.onClick=="function"&&(ur.onclick=Bf)}ur=cr,or.updateQueue=ur,ur!==null&&(or.flags|=4)}else{fr=cr.nodeType===9?cr:cr.ownerDocument,ar==="http://www.w3.org/1999/xhtml"&&(ar=kb(lr)),ar==="http://www.w3.org/1999/xhtml"?lr==="script"?(ar=fr.createElement("div"),ar.innerHTML="<script><\/script>",ar=ar.removeChild(ar.firstChild)):typeof ur.is=="string"?ar=fr.createElement(lr,{is:ur.is}):(ar=fr.createElement(lr),lr==="select"&&(fr=ar,ur.multiple?fr.multiple=!0:ur.size&&(fr.size=ur.size))):ar=fr.createElementNS(ar,lr),ar[Of]=or,ar[Pf]=ur,zj(ar,or,!1,!1),or.stateNode=ar;e:{switch(fr=vb(lr,ur),lr){case"dialog":D$1("cancel",ar),D$1("close",ar),cr=ur;break;case"iframe":case"object":case"embed":D$1("load",ar),cr=ur;break;case"video":case"audio":for(cr=0;cr<lf.length;cr++)D$1(lf[cr],ar);cr=ur;break;case"source":D$1("error",ar),cr=ur;break;case"img":case"image":case"link":D$1("error",ar),D$1("load",ar),cr=ur;break;case"details":D$1("toggle",ar),cr=ur;break;case"input":Za(ar,ur),cr=Ya(ar,ur),D$1("invalid",ar);break;case"option":cr=ur;break;case"select":ar._wrapperState={wasMultiple:!!ur.multiple},cr=A$1({},ur,{value:void 0}),D$1("invalid",ar);break;case"textarea":hb(ar,ur),cr=gb(ar,ur),D$1("invalid",ar);break;default:cr=ur}ub(lr,cr),pr=cr;for(dr in pr)if(pr.hasOwnProperty(dr)){var mr=pr[dr];dr==="style"?sb(ar,mr):dr==="dangerouslySetInnerHTML"?(mr=mr?mr.__html:void 0,mr!=null&&nb(ar,mr)):dr==="children"?typeof mr=="string"?(lr!=="textarea"||mr!=="")&&ob(ar,mr):typeof mr=="number"&&ob(ar,""+mr):dr!=="suppressContentEditableWarning"&&dr!=="suppressHydrationWarning"&&dr!=="autoFocus"&&(ea.hasOwnProperty(dr)?mr!=null&&dr==="onScroll"&&D$1("scroll",ar):mr!=null&&ta(ar,dr,mr,fr))}switch(lr){case"input":Va(ar),db$1(ar,ur,!1);break;case"textarea":Va(ar),jb(ar);break;case"option":ur.value!=null&&ar.setAttribute("value",""+Sa(ur.value));break;case"select":ar.multiple=!!ur.multiple,dr=ur.value,dr!=null?fb(ar,!!ur.multiple,dr,!1):ur.defaultValue!=null&&fb(ar,!!ur.multiple,ur.defaultValue,!0);break;default:typeof cr.onClick=="function"&&(ar.onclick=Bf)}switch(lr){case"button":case"input":case"select":case"textarea":ur=!!ur.autoFocus;break e;case"img":ur=!0;break e;default:ur=!1}}ur&&(or.flags|=4)}or.ref!==null&&(or.flags|=512,or.flags|=2097152)}return S$1(or),null;case 6:if(ar&&or.stateNode!=null)Cj(ar,or,ar.memoizedProps,ur);else{if(typeof ur!="string"&&or.stateNode===null)throw Error(p$1(166));if(lr=xh(wh.current),xh(uh.current),Gg(or)){if(ur=or.stateNode,lr=or.memoizedProps,ur[Of]=or,(dr=ur.nodeValue!==lr)&&(ar=xg,ar!==null))switch(ar.tag){case 3:Af(ur.nodeValue,lr,(ar.mode&1)!==0);break;case 5:ar.memoizedProps.suppressHydrationWarning!==!0&&Af(ur.nodeValue,lr,(ar.mode&1)!==0)}dr&&(or.flags|=4)}else ur=(lr.nodeType===9?lr:lr.ownerDocument).createTextNode(ur),ur[Of]=or,or.stateNode=ur}return S$1(or),null;case 13:if(E$2(L$1),ur=or.memoizedState,ar===null||ar.memoizedState!==null&&ar.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&or.mode&1&&!(or.flags&128))Hg(),Ig(),or.flags|=98560,dr=!1;else if(dr=Gg(or),ur!==null&&ur.dehydrated!==null){if(ar===null){if(!dr)throw Error(p$1(318));if(dr=or.memoizedState,dr=dr!==null?dr.dehydrated:null,!dr)throw Error(p$1(317));dr[Of]=or}else Ig(),!(or.flags&128)&&(or.memoizedState=null),or.flags|=4;S$1(or),dr=!1}else zg!==null&&(Fj(zg),zg=null),dr=!0;if(!dr)return or.flags&65536?or:null}return or.flags&128?(or.lanes=lr,or):(ur=ur!==null,ur!==(ar!==null&&ar.memoizedState!==null)&&ur&&(or.child.flags|=8192,or.mode&1&&(ar===null||L$1.current&1?T$1===0&&(T$1=3):tj())),or.updateQueue!==null&&(or.flags|=4),S$1(or),null);case 4:return zh(),Aj(ar,or),ar===null&&sf(or.stateNode.containerInfo),S$1(or),null;case 10:return ah(or.type._context),S$1(or),null;case 17:return Zf(or.type)&&$f(),S$1(or),null;case 19:if(E$2(L$1),dr=or.memoizedState,dr===null)return S$1(or),null;if(ur=(or.flags&128)!==0,fr=dr.rendering,fr===null)if(ur)Dj(dr,!1);else{if(T$1!==0||ar!==null&&ar.flags&128)for(ar=or.child;ar!==null;){if(fr=Ch(ar),fr!==null){for(or.flags|=128,Dj(dr,!1),ur=fr.updateQueue,ur!==null&&(or.updateQueue=ur,or.flags|=4),or.subtreeFlags=0,ur=lr,lr=or.child;lr!==null;)dr=lr,ar=ur,dr.flags&=14680066,fr=dr.alternate,fr===null?(dr.childLanes=0,dr.lanes=ar,dr.child=null,dr.subtreeFlags=0,dr.memoizedProps=null,dr.memoizedState=null,dr.updateQueue=null,dr.dependencies=null,dr.stateNode=null):(dr.childLanes=fr.childLanes,dr.lanes=fr.lanes,dr.child=fr.child,dr.subtreeFlags=0,dr.deletions=null,dr.memoizedProps=fr.memoizedProps,dr.memoizedState=fr.memoizedState,dr.updateQueue=fr.updateQueue,dr.type=fr.type,ar=fr.dependencies,dr.dependencies=ar===null?null:{lanes:ar.lanes,firstContext:ar.firstContext}),lr=lr.sibling;return G$1(L$1,L$1.current&1|2),or.child}ar=ar.sibling}dr.tail!==null&&B$1()>Gj&&(or.flags|=128,ur=!0,Dj(dr,!1),or.lanes=4194304)}else{if(!ur)if(ar=Ch(fr),ar!==null){if(or.flags|=128,ur=!0,lr=ar.updateQueue,lr!==null&&(or.updateQueue=lr,or.flags|=4),Dj(dr,!0),dr.tail===null&&dr.tailMode==="hidden"&&!fr.alternate&&!I$1)return S$1(or),null}else 2*B$1()-dr.renderingStartTime>Gj&&lr!==1073741824&&(or.flags|=128,ur=!0,Dj(dr,!1),or.lanes=4194304);dr.isBackwards?(fr.sibling=or.child,or.child=fr):(lr=dr.last,lr!==null?lr.sibling=fr:or.child=fr,dr.last=fr)}return dr.tail!==null?(or=dr.tail,dr.rendering=or,dr.tail=or.sibling,dr.renderingStartTime=B$1(),or.sibling=null,lr=L$1.current,G$1(L$1,ur?lr&1|2:lr&1),or):(S$1(or),null);case 22:case 23:return Hj(),ur=or.memoizedState!==null,ar!==null&&ar.memoizedState!==null!==ur&&(or.flags|=8192),ur&&or.mode&1?fj&1073741824&&(S$1(or),or.subtreeFlags&6&&(or.flags|=8192)):S$1(or),null;case 24:return null;case 25:return null}throw Error(p$1(156,or.tag))}function Ij(ar,or){switch(wg(or),or.tag){case 1:return Zf(or.type)&&$f(),ar=or.flags,ar&65536?(or.flags=ar&-65537|128,or):null;case 3:return zh(),E$2(Wf),E$2(H$1),Eh(),ar=or.flags,ar&65536&&!(ar&128)?(or.flags=ar&-65537|128,or):null;case 5:return Bh(or),null;case 13:if(E$2(L$1),ar=or.memoizedState,ar!==null&&ar.dehydrated!==null){if(or.alternate===null)throw Error(p$1(340));Ig()}return ar=or.flags,ar&65536?(or.flags=ar&-65537|128,or):null;case 19:return E$2(L$1),null;case 4:return zh(),null;case 10:return ah(or.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$1=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Lj(ar,or){var lr=ar.ref;if(lr!==null)if(typeof lr=="function")try{lr(null)}catch(ur){W$1(ar,or,ur)}else lr.current=null}function Mj(ar,or,lr){try{lr()}catch(ur){W$1(ar,or,ur)}}var Nj=!1;function Oj(ar,or){if(Cf=dd,ar=Me$1(),Ne$1(ar)){if("selectionStart"in ar)var lr={start:ar.selectionStart,end:ar.selectionEnd};else e:{lr=(lr=ar.ownerDocument)&&lr.defaultView||window;var ur=lr.getSelection&&lr.getSelection();if(ur&&ur.rangeCount!==0){lr=ur.anchorNode;var cr=ur.anchorOffset,dr=ur.focusNode;ur=ur.focusOffset;try{lr.nodeType,dr.nodeType}catch{lr=null;break e}var fr=0,pr=-1,mr=-1,hr=0,gr=0,vr=ar,wr=null;t:for(;;){for(var _r;vr!==lr||cr!==0&&vr.nodeType!==3||(pr=fr+cr),vr!==dr||ur!==0&&vr.nodeType!==3||(mr=fr+ur),vr.nodeType===3&&(fr+=vr.nodeValue.length),(_r=vr.firstChild)!==null;)wr=vr,vr=_r;for(;;){if(vr===ar)break t;if(wr===lr&&++hr===cr&&(pr=fr),wr===dr&&++gr===ur&&(mr=fr),(_r=vr.nextSibling)!==null)break;vr=wr,wr=vr.parentNode}vr=_r}lr=pr===-1||mr===-1?null:{start:pr,end:mr}}else lr=null}lr=lr||{start:0,end:0}}else lr=null;for(Df={focusedElem:ar,selectionRange:lr},dd=!1,V$1=or;V$1!==null;)if(or=V$1,ar=or.child,(or.subtreeFlags&1028)!==0&&ar!==null)ar.return=or,V$1=ar;else for(;V$1!==null;){or=V$1;try{var Cr=or.alternate;if(or.flags&1024)switch(or.tag){case 0:case 11:case 15:break;case 1:if(Cr!==null){var Sr=Cr.memoizedProps,Dr=Cr.memoizedState,Er=or.stateNode,kr=Er.getSnapshotBeforeUpdate(or.elementType===or.type?Sr:Ci(or.type,Sr),Dr);Er.__reactInternalSnapshotBeforeUpdate=kr}break;case 3:var Ir=or.stateNode.containerInfo;Ir.nodeType===1?Ir.textContent="":Ir.nodeType===9&&Ir.documentElement&&Ir.removeChild(Ir.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(Br){W$1(or,or.return,Br)}if(ar=or.sibling,ar!==null){ar.return=or.return,V$1=ar;break}V$1=or.return}return Cr=Nj,Nj=!1,Cr}function Pj(ar,or,lr){var ur=or.updateQueue;if(ur=ur!==null?ur.lastEffect:null,ur!==null){var cr=ur=ur.next;do{if((cr.tag&ar)===ar){var dr=cr.destroy;cr.destroy=void 0,dr!==void 0&&Mj(or,lr,dr)}cr=cr.next}while(cr!==ur)}}function Qj(ar,or){if(or=or.updateQueue,or=or!==null?or.lastEffect:null,or!==null){var lr=or=or.next;do{if((lr.tag&ar)===ar){var ur=lr.create;lr.destroy=ur()}lr=lr.next}while(lr!==or)}}function Rj(ar){var or=ar.ref;if(or!==null){var lr=ar.stateNode;switch(ar.tag){case 5:ar=lr;break;default:ar=lr}typeof or=="function"?or(ar):or.current=ar}}function Sj(ar){var or=ar.alternate;or!==null&&(ar.alternate=null,Sj(or)),ar.child=null,ar.deletions=null,ar.sibling=null,ar.tag===5&&(or=ar.stateNode,or!==null&&(delete or[Of],delete or[Pf],delete or[of],delete or[Qf],delete or[Rf])),ar.stateNode=null,ar.return=null,ar.dependencies=null,ar.memoizedProps=null,ar.memoizedState=null,ar.pendingProps=null,ar.stateNode=null,ar.updateQueue=null}function Tj(ar){return ar.tag===5||ar.tag===3||ar.tag===4}function Uj(ar){e:for(;;){for(;ar.sibling===null;){if(ar.return===null||Tj(ar.return))return null;ar=ar.return}for(ar.sibling.return=ar.return,ar=ar.sibling;ar.tag!==5&&ar.tag!==6&&ar.tag!==18;){if(ar.flags&2||ar.child===null||ar.tag===4)continue e;ar.child.return=ar,ar=ar.child}if(!(ar.flags&2))return ar.stateNode}}function Vj(ar,or,lr){var ur=ar.tag;if(ur===5||ur===6)ar=ar.stateNode,or?lr.nodeType===8?lr.parentNode.insertBefore(ar,or):lr.insertBefore(ar,or):(lr.nodeType===8?(or=lr.parentNode,or.insertBefore(ar,lr)):(or=lr,or.appendChild(ar)),lr=lr._reactRootContainer,lr!=null||or.onclick!==null||(or.onclick=Bf));else if(ur!==4&&(ar=ar.child,ar!==null))for(Vj(ar,or,lr),ar=ar.sibling;ar!==null;)Vj(ar,or,lr),ar=ar.sibling}function Wj(ar,or,lr){var ur=ar.tag;if(ur===5||ur===6)ar=ar.stateNode,or?lr.insertBefore(ar,or):lr.appendChild(ar);else if(ur!==4&&(ar=ar.child,ar!==null))for(Wj(ar,or,lr),ar=ar.sibling;ar!==null;)Wj(ar,or,lr),ar=ar.sibling}var X$1=null,Xj=!1;function Yj(ar,or,lr){for(lr=lr.child;lr!==null;)Zj(ar,or,lr),lr=lr.sibling}function Zj(ar,or,lr){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,lr)}catch{}switch(lr.tag){case 5:U$1||Lj(lr,or);case 6:var ur=X$1,cr=Xj;X$1=null,Yj(ar,or,lr),X$1=ur,Xj=cr,X$1!==null&&(Xj?(ar=X$1,lr=lr.stateNode,ar.nodeType===8?ar.parentNode.removeChild(lr):ar.removeChild(lr)):X$1.removeChild(lr.stateNode));break;case 18:X$1!==null&&(Xj?(ar=X$1,lr=lr.stateNode,ar.nodeType===8?Kf(ar.parentNode,lr):ar.nodeType===1&&Kf(ar,lr),bd(ar)):Kf(X$1,lr.stateNode));break;case 4:ur=X$1,cr=Xj,X$1=lr.stateNode.containerInfo,Xj=!0,Yj(ar,or,lr),X$1=ur,Xj=cr;break;case 0:case 11:case 14:case 15:if(!U$1&&(ur=lr.updateQueue,ur!==null&&(ur=ur.lastEffect,ur!==null))){cr=ur=ur.next;do{var dr=cr,fr=dr.destroy;dr=dr.tag,fr!==void 0&&(dr&2||dr&4)&&Mj(lr,or,fr),cr=cr.next}while(cr!==ur)}Yj(ar,or,lr);break;case 1:if(!U$1&&(Lj(lr,or),ur=lr.stateNode,typeof ur.componentWillUnmount=="function"))try{ur.props=lr.memoizedProps,ur.state=lr.memoizedState,ur.componentWillUnmount()}catch(pr){W$1(lr,or,pr)}Yj(ar,or,lr);break;case 21:Yj(ar,or,lr);break;case 22:lr.mode&1?(U$1=(ur=U$1)||lr.memoizedState!==null,Yj(ar,or,lr),U$1=ur):Yj(ar,or,lr);break;default:Yj(ar,or,lr)}}function ak(ar){var or=ar.updateQueue;if(or!==null){ar.updateQueue=null;var lr=ar.stateNode;lr===null&&(lr=ar.stateNode=new Kj),or.forEach(function(ur){var cr=bk.bind(null,ar,ur);lr.has(ur)||(lr.add(ur),ur.then(cr,cr))})}}function ck(ar,or){var lr=or.deletions;if(lr!==null)for(var ur=0;ur<lr.length;ur++){var cr=lr[ur];try{var dr=ar,fr=or,pr=fr;e:for(;pr!==null;){switch(pr.tag){case 5:X$1=pr.stateNode,Xj=!1;break e;case 3:X$1=pr.stateNode.containerInfo,Xj=!0;break e;case 4:X$1=pr.stateNode.containerInfo,Xj=!0;break e}pr=pr.return}if(X$1===null)throw Error(p$1(160));Zj(dr,fr,cr),X$1=null,Xj=!1;var mr=cr.alternate;mr!==null&&(mr.return=null),cr.return=null}catch(hr){W$1(cr,or,hr)}}if(or.subtreeFlags&12854)for(or=or.child;or!==null;)dk(or,ar),or=or.sibling}function dk(ar,or){var lr=ar.alternate,ur=ar.flags;switch(ar.tag){case 0:case 11:case 14:case 15:if(ck(or,ar),ek(ar),ur&4){try{Pj(3,ar,ar.return),Qj(3,ar)}catch(Sr){W$1(ar,ar.return,Sr)}try{Pj(5,ar,ar.return)}catch(Sr){W$1(ar,ar.return,Sr)}}break;case 1:ck(or,ar),ek(ar),ur&512&&lr!==null&&Lj(lr,lr.return);break;case 5:if(ck(or,ar),ek(ar),ur&512&&lr!==null&&Lj(lr,lr.return),ar.flags&32){var cr=ar.stateNode;try{ob(cr,"")}catch(Sr){W$1(ar,ar.return,Sr)}}if(ur&4&&(cr=ar.stateNode,cr!=null)){var dr=ar.memoizedProps,fr=lr!==null?lr.memoizedProps:dr,pr=ar.type,mr=ar.updateQueue;if(ar.updateQueue=null,mr!==null)try{pr==="input"&&dr.type==="radio"&&dr.name!=null&&ab(cr,dr),vb(pr,fr);var hr=vb(pr,dr);for(fr=0;fr<mr.length;fr+=2){var gr=mr[fr],vr=mr[fr+1];gr==="style"?sb(cr,vr):gr==="dangerouslySetInnerHTML"?nb(cr,vr):gr==="children"?ob(cr,vr):ta(cr,gr,vr,hr)}switch(pr){case"input":bb(cr,dr);break;case"textarea":ib(cr,dr);break;case"select":var wr=cr._wrapperState.wasMultiple;cr._wrapperState.wasMultiple=!!dr.multiple;var _r=dr.value;_r!=null?fb(cr,!!dr.multiple,_r,!1):wr!==!!dr.multiple&&(dr.defaultValue!=null?fb(cr,!!dr.multiple,dr.defaultValue,!0):fb(cr,!!dr.multiple,dr.multiple?[]:"",!1))}cr[Pf]=dr}catch(Sr){W$1(ar,ar.return,Sr)}}break;case 6:if(ck(or,ar),ek(ar),ur&4){if(ar.stateNode===null)throw Error(p$1(162));cr=ar.stateNode,dr=ar.memoizedProps;try{cr.nodeValue=dr}catch(Sr){W$1(ar,ar.return,Sr)}}break;case 3:if(ck(or,ar),ek(ar),ur&4&&lr!==null&&lr.memoizedState.isDehydrated)try{bd(or.containerInfo)}catch(Sr){W$1(ar,ar.return,Sr)}break;case 4:ck(or,ar),ek(ar);break;case 13:ck(or,ar),ek(ar),cr=ar.child,cr.flags&8192&&(dr=cr.memoizedState!==null,cr.stateNode.isHidden=dr,!dr||cr.alternate!==null&&cr.alternate.memoizedState!==null||(fk=B$1())),ur&4&&ak(ar);break;case 22:if(gr=lr!==null&&lr.memoizedState!==null,ar.mode&1?(U$1=(hr=U$1)||gr,ck(or,ar),U$1=hr):ck(or,ar),ek(ar),ur&8192){if(hr=ar.memoizedState!==null,(ar.stateNode.isHidden=hr)&&!gr&&ar.mode&1)for(V$1=ar,gr=ar.child;gr!==null;){for(vr=V$1=gr;V$1!==null;){switch(wr=V$1,_r=wr.child,wr.tag){case 0:case 11:case 14:case 15:Pj(4,wr,wr.return);break;case 1:Lj(wr,wr.return);var Cr=wr.stateNode;if(typeof Cr.componentWillUnmount=="function"){ur=wr,lr=wr.return;try{or=ur,Cr.props=or.memoizedProps,Cr.state=or.memoizedState,Cr.componentWillUnmount()}catch(Sr){W$1(ur,lr,Sr)}}break;case 5:Lj(wr,wr.return);break;case 22:if(wr.memoizedState!==null){gk(vr);continue}}_r!==null?(_r.return=wr,V$1=_r):gk(vr)}gr=gr.sibling}e:for(gr=null,vr=ar;;){if(vr.tag===5){if(gr===null){gr=vr;try{cr=vr.stateNode,hr?(dr=cr.style,typeof dr.setProperty=="function"?dr.setProperty("display","none","important"):dr.display="none"):(pr=vr.stateNode,mr=vr.memoizedProps.style,fr=mr!=null&&mr.hasOwnProperty("display")?mr.display:null,pr.style.display=rb("display",fr))}catch(Sr){W$1(ar,ar.return,Sr)}}}else if(vr.tag===6){if(gr===null)try{vr.stateNode.nodeValue=hr?"":vr.memoizedProps}catch(Sr){W$1(ar,ar.return,Sr)}}else if((vr.tag!==22&&vr.tag!==23||vr.memoizedState===null||vr===ar)&&vr.child!==null){vr.child.return=vr,vr=vr.child;continue}if(vr===ar)break e;for(;vr.sibling===null;){if(vr.return===null||vr.return===ar)break e;gr===vr&&(gr=null),vr=vr.return}gr===vr&&(gr=null),vr.sibling.return=vr.return,vr=vr.sibling}}break;case 19:ck(or,ar),ek(ar),ur&4&&ak(ar);break;case 21:break;default:ck(or,ar),ek(ar)}}function ek(ar){var or=ar.flags;if(or&2){try{e:{for(var lr=ar.return;lr!==null;){if(Tj(lr)){var ur=lr;break e}lr=lr.return}throw Error(p$1(160))}switch(ur.tag){case 5:var cr=ur.stateNode;ur.flags&32&&(ob(cr,""),ur.flags&=-33);var dr=Uj(ar);Wj(ar,dr,cr);break;case 3:case 4:var fr=ur.stateNode.containerInfo,pr=Uj(ar);Vj(ar,pr,fr);break;default:throw Error(p$1(161))}}catch(mr){W$1(ar,ar.return,mr)}ar.flags&=-3}or&4096&&(ar.flags&=-4097)}function hk(ar,or,lr){V$1=ar,ik(ar)}function ik(ar,or,lr){for(var ur=(ar.mode&1)!==0;V$1!==null;){var cr=V$1,dr=cr.child;if(cr.tag===22&&ur){var fr=cr.memoizedState!==null||Jj;if(!fr){var pr=cr.alternate,mr=pr!==null&&pr.memoizedState!==null||U$1;pr=Jj;var hr=U$1;if(Jj=fr,(U$1=mr)&&!hr)for(V$1=cr;V$1!==null;)fr=V$1,mr=fr.child,fr.tag===22&&fr.memoizedState!==null?jk(cr):mr!==null?(mr.return=fr,V$1=mr):jk(cr);for(;dr!==null;)V$1=dr,ik(dr),dr=dr.sibling;V$1=cr,Jj=pr,U$1=hr}kk(ar)}else cr.subtreeFlags&8772&&dr!==null?(dr.return=cr,V$1=dr):kk(ar)}}function kk(ar){for(;V$1!==null;){var or=V$1;if(or.flags&8772){var lr=or.alternate;try{if(or.flags&8772)switch(or.tag){case 0:case 11:case 15:U$1||Qj(5,or);break;case 1:var ur=or.stateNode;if(or.flags&4&&!U$1)if(lr===null)ur.componentDidMount();else{var cr=or.elementType===or.type?lr.memoizedProps:Ci(or.type,lr.memoizedProps);ur.componentDidUpdate(cr,lr.memoizedState,ur.__reactInternalSnapshotBeforeUpdate)}var dr=or.updateQueue;dr!==null&&sh(or,dr,ur);break;case 3:var fr=or.updateQueue;if(fr!==null){if(lr=null,or.child!==null)switch(or.child.tag){case 5:lr=or.child.stateNode;break;case 1:lr=or.child.stateNode}sh(or,fr,lr)}break;case 5:var pr=or.stateNode;if(lr===null&&or.flags&4){lr=pr;var mr=or.memoizedProps;switch(or.type){case"button":case"input":case"select":case"textarea":mr.autoFocus&&lr.focus();break;case"img":mr.src&&(lr.src=mr.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(or.memoizedState===null){var hr=or.alternate;if(hr!==null){var gr=hr.memoizedState;if(gr!==null){var vr=gr.dehydrated;vr!==null&&bd(vr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U$1||or.flags&512&&Rj(or)}catch(wr){W$1(or,or.return,wr)}}if(or===ar){V$1=null;break}if(lr=or.sibling,lr!==null){lr.return=or.return,V$1=lr;break}V$1=or.return}}function gk(ar){for(;V$1!==null;){var or=V$1;if(or===ar){V$1=null;break}var lr=or.sibling;if(lr!==null){lr.return=or.return,V$1=lr;break}V$1=or.return}}function jk(ar){for(;V$1!==null;){var or=V$1;try{switch(or.tag){case 0:case 11:case 15:var lr=or.return;try{Qj(4,or)}catch(mr){W$1(or,lr,mr)}break;case 1:var ur=or.stateNode;if(typeof ur.componentDidMount=="function"){var cr=or.return;try{ur.componentDidMount()}catch(mr){W$1(or,cr,mr)}}var dr=or.return;try{Rj(or)}catch(mr){W$1(or,dr,mr)}break;case 5:var fr=or.return;try{Rj(or)}catch(mr){W$1(or,fr,mr)}}}catch(mr){W$1(or,or.return,mr)}if(or===ar){V$1=null;break}var pr=or.sibling;if(pr!==null){pr.return=or.return,V$1=pr;break}V$1=or.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K$1=0,Q$1=null,Y$1=null,Z$1=0,fj=0,ej=Uf(0),T$1=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$2(){return K$1&6?B$1():Ak!==-1?Ak:Ak=B$1()}function yi(ar){return ar.mode&1?K$1&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(ar=C$1,ar!==0||(ar=window.event,ar=ar===void 0?16:jd(ar.type)),ar):1}function gi(ar,or,lr,ur){if(50<yk)throw yk=0,zk=null,Error(p$1(185));Ac(ar,lr,ur),(!(K$1&2)||ar!==Q$1)&&(ar===Q$1&&(!(K$1&2)&&(qk|=lr),T$1===4&&Ck(ar,Z$1)),Dk(ar,ur),lr===1&&K$1===0&&!(or.mode&1)&&(Gj=B$1()+500,fg&&jg()))}function Dk(ar,or){var lr=ar.callbackNode;wc(ar,or);var ur=uc(ar,ar===Q$1?Z$1:0);if(ur===0)lr!==null&&bc(lr),ar.callbackNode=null,ar.callbackPriority=0;else if(or=ur&-ur,ar.callbackPriority!==or){if(lr!=null&&bc(lr),or===1)ar.tag===0?ig(Ek.bind(null,ar)):hg(Ek.bind(null,ar)),Jf(function(){!(K$1&6)&&jg()}),lr=null;else{switch(Dc(ur)){case 1:lr=fc;break;case 4:lr=gc;break;case 16:lr=hc;break;case 536870912:lr=jc;break;default:lr=hc}lr=Fk(lr,Gk.bind(null,ar))}ar.callbackPriority=or,ar.callbackNode=lr}}function Gk(ar,or){if(Ak=-1,Bk=0,K$1&6)throw Error(p$1(327));var lr=ar.callbackNode;if(Hk()&&ar.callbackNode!==lr)return null;var ur=uc(ar,ar===Q$1?Z$1:0);if(ur===0)return null;if(ur&30||ur&ar.expiredLanes||or)or=Ik(ar,ur);else{or=ur;var cr=K$1;K$1|=2;var dr=Jk();(Q$1!==ar||Z$1!==or)&&(uk=null,Gj=B$1()+500,Kk(ar,or));do try{Lk();break}catch(pr){Mk(ar,pr)}while(!0);$g(),mk.current=dr,K$1=cr,Y$1!==null?or=0:(Q$1=null,Z$1=0,or=T$1)}if(or!==0){if(or===2&&(cr=xc(ar),cr!==0&&(ur=cr,or=Nk(ar,cr))),or===1)throw lr=pk,Kk(ar,0),Ck(ar,ur),Dk(ar,B$1()),lr;if(or===6)Ck(ar,ur);else{if(cr=ar.current.alternate,!(ur&30)&&!Ok(cr)&&(or=Ik(ar,ur),or===2&&(dr=xc(ar),dr!==0&&(ur=dr,or=Nk(ar,dr))),or===1))throw lr=pk,Kk(ar,0),Ck(ar,ur),Dk(ar,B$1()),lr;switch(ar.finishedWork=cr,ar.finishedLanes=ur,or){case 0:case 1:throw Error(p$1(345));case 2:Pk(ar,tk,uk);break;case 3:if(Ck(ar,ur),(ur&130023424)===ur&&(or=fk+500-B$1(),10<or)){if(uc(ar,0)!==0)break;if(cr=ar.suspendedLanes,(cr&ur)!==ur){R$2(),ar.pingedLanes|=ar.suspendedLanes&cr;break}ar.timeoutHandle=Ff(Pk.bind(null,ar,tk,uk),or);break}Pk(ar,tk,uk);break;case 4:if(Ck(ar,ur),(ur&4194240)===ur)break;for(or=ar.eventTimes,cr=-1;0<ur;){var fr=31-oc(ur);dr=1<<fr,fr=or[fr],fr>cr&&(cr=fr),ur&=~dr}if(ur=cr,ur=B$1()-ur,ur=(120>ur?120:480>ur?480:1080>ur?1080:1920>ur?1920:3e3>ur?3e3:4320>ur?4320:1960*lk(ur/1960))-ur,10<ur){ar.timeoutHandle=Ff(Pk.bind(null,ar,tk,uk),ur);break}Pk(ar,tk,uk);break;case 5:Pk(ar,tk,uk);break;default:throw Error(p$1(329))}}}return Dk(ar,B$1()),ar.callbackNode===lr?Gk.bind(null,ar):null}function Nk(ar,or){var lr=sk;return ar.current.memoizedState.isDehydrated&&(Kk(ar,or).flags|=256),ar=Ik(ar,or),ar!==2&&(or=tk,tk=lr,or!==null&&Fj(or)),ar}function Fj(ar){tk===null?tk=ar:tk.push.apply(tk,ar)}function Ok(ar){for(var or=ar;;){if(or.flags&16384){var lr=or.updateQueue;if(lr!==null&&(lr=lr.stores,lr!==null))for(var ur=0;ur<lr.length;ur++){var cr=lr[ur],dr=cr.getSnapshot;cr=cr.value;try{if(!He$1(dr(),cr))return!1}catch{return!1}}}if(lr=or.child,or.subtreeFlags&16384&&lr!==null)lr.return=or,or=lr;else{if(or===ar)break;for(;or.sibling===null;){if(or.return===null||or.return===ar)return!0;or=or.return}or.sibling.return=or.return,or=or.sibling}}return!0}function Ck(ar,or){for(or&=~rk,or&=~qk,ar.suspendedLanes|=or,ar.pingedLanes&=~or,ar=ar.expirationTimes;0<or;){var lr=31-oc(or),ur=1<<lr;ar[lr]=-1,or&=~ur}}function Ek(ar){if(K$1&6)throw Error(p$1(327));Hk();var or=uc(ar,0);if(!(or&1))return Dk(ar,B$1()),null;var lr=Ik(ar,or);if(ar.tag!==0&&lr===2){var ur=xc(ar);ur!==0&&(or=ur,lr=Nk(ar,ur))}if(lr===1)throw lr=pk,Kk(ar,0),Ck(ar,or),Dk(ar,B$1()),lr;if(lr===6)throw Error(p$1(345));return ar.finishedWork=ar.current.alternate,ar.finishedLanes=or,Pk(ar,tk,uk),Dk(ar,B$1()),null}function Qk(ar,or){var lr=K$1;K$1|=1;try{return ar(or)}finally{K$1=lr,K$1===0&&(Gj=B$1()+500,fg&&jg())}}function Rk(ar){wk!==null&&wk.tag===0&&!(K$1&6)&&Hk();var or=K$1;K$1|=1;var lr=ok.transition,ur=C$1;try{if(ok.transition=null,C$1=1,ar)return ar()}finally{C$1=ur,ok.transition=lr,K$1=or,!(K$1&6)&&jg()}}function Hj(){fj=ej.current,E$2(ej)}function Kk(ar,or){ar.finishedWork=null,ar.finishedLanes=0;var lr=ar.timeoutHandle;if(lr!==-1&&(ar.timeoutHandle=-1,Gf(lr)),Y$1!==null)for(lr=Y$1.return;lr!==null;){var ur=lr;switch(wg(ur),ur.tag){case 1:ur=ur.type.childContextTypes,ur!=null&&$f();break;case 3:zh(),E$2(Wf),E$2(H$1),Eh();break;case 5:Bh(ur);break;case 4:zh();break;case 13:E$2(L$1);break;case 19:E$2(L$1);break;case 10:ah(ur.type._context);break;case 22:case 23:Hj()}lr=lr.return}if(Q$1=ar,Y$1=ar=Pg(ar.current,null),Z$1=fj=or,T$1=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(or=0;or<fh.length;or++)if(lr=fh[or],ur=lr.interleaved,ur!==null){lr.interleaved=null;var cr=ur.next,dr=lr.pending;if(dr!==null){var fr=dr.next;dr.next=cr,ur.next=fr}lr.pending=ur}fh=null}return ar}function Mk(ar,or){do{var lr=Y$1;try{if($g(),Fh.current=Rh,Ih){for(var ur=M$1.memoizedState;ur!==null;){var cr=ur.queue;cr!==null&&(cr.pending=null),ur=ur.next}Ih=!1}if(Hh=0,O$1=N$1=M$1=null,Jh=!1,Kh=0,nk.current=null,lr===null||lr.return===null){T$1=1,pk=or,Y$1=null;break}e:{var dr=ar,fr=lr.return,pr=lr,mr=or;if(or=Z$1,pr.flags|=32768,mr!==null&&typeof mr=="object"&&typeof mr.then=="function"){var hr=mr,gr=pr,vr=gr.tag;if(!(gr.mode&1)&&(vr===0||vr===11||vr===15)){var wr=gr.alternate;wr?(gr.updateQueue=wr.updateQueue,gr.memoizedState=wr.memoizedState,gr.lanes=wr.lanes):(gr.updateQueue=null,gr.memoizedState=null)}var _r=Ui(fr);if(_r!==null){_r.flags&=-257,Vi(_r,fr,pr,dr,or),_r.mode&1&&Si(dr,hr,or),or=_r,mr=hr;var Cr=or.updateQueue;if(Cr===null){var Sr=new Set;Sr.add(mr),or.updateQueue=Sr}else Cr.add(mr);break e}else{if(!(or&1)){Si(dr,hr,or),tj();break e}mr=Error(p$1(426))}}else if(I$1&&pr.mode&1){var Dr=Ui(fr);if(Dr!==null){!(Dr.flags&65536)&&(Dr.flags|=256),Vi(Dr,fr,pr,dr,or),Jg(Ji(mr,pr));break e}}dr=mr=Ji(mr,pr),T$1!==4&&(T$1=2),sk===null?sk=[dr]:sk.push(dr),dr=fr;do{switch(dr.tag){case 3:dr.flags|=65536,or&=-or,dr.lanes|=or;var Er=Ni(dr,mr,or);ph(dr,Er);break e;case 1:pr=mr;var kr=dr.type,Ir=dr.stateNode;if(!(dr.flags&128)&&(typeof kr.getDerivedStateFromError=="function"||Ir!==null&&typeof Ir.componentDidCatch=="function"&&(Ri===null||!Ri.has(Ir)))){dr.flags|=65536,or&=-or,dr.lanes|=or;var Br=Qi(dr,pr,or);ph(dr,Br);break e}}dr=dr.return}while(dr!==null)}Sk(lr)}catch(Nr){or=Nr,Y$1===lr&&lr!==null&&(Y$1=lr=lr.return);continue}break}while(!0)}function Jk(){var ar=mk.current;return mk.current=Rh,ar===null?Rh:ar}function tj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),Q$1===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q$1,Z$1)}function Ik(ar,or){var lr=K$1;K$1|=2;var ur=Jk();(Q$1!==ar||Z$1!==or)&&(uk=null,Kk(ar,or));do try{Tk();break}catch(cr){Mk(ar,cr)}while(!0);if($g(),K$1=lr,mk.current=ur,Y$1!==null)throw Error(p$1(261));return Q$1=null,Z$1=0,T$1}function Tk(){for(;Y$1!==null;)Uk(Y$1)}function Lk(){for(;Y$1!==null&&!cc();)Uk(Y$1)}function Uk(ar){var or=Vk(ar.alternate,ar,fj);ar.memoizedProps=ar.pendingProps,or===null?Sk(ar):Y$1=or,nk.current=null}function Sk(ar){var or=ar;do{var lr=or.alternate;if(ar=or.return,or.flags&32768){if(lr=Ij(lr,or),lr!==null){lr.flags&=32767,Y$1=lr;return}if(ar!==null)ar.flags|=32768,ar.subtreeFlags=0,ar.deletions=null;else{T$1=6,Y$1=null;return}}else if(lr=Ej(lr,or,fj),lr!==null){Y$1=lr;return}if(or=or.sibling,or!==null){Y$1=or;return}Y$1=or=ar}while(or!==null);T$1===0&&(T$1=5)}function Pk(ar,or,lr){var ur=C$1,cr=ok.transition;try{ok.transition=null,C$1=1,Wk(ar,or,lr,ur)}finally{ok.transition=cr,C$1=ur}return null}function Wk(ar,or,lr,ur){do Hk();while(wk!==null);if(K$1&6)throw Error(p$1(327));lr=ar.finishedWork;var cr=ar.finishedLanes;if(lr===null)return null;if(ar.finishedWork=null,ar.finishedLanes=0,lr===ar.current)throw Error(p$1(177));ar.callbackNode=null,ar.callbackPriority=0;var dr=lr.lanes|lr.childLanes;if(Bc(ar,dr),ar===Q$1&&(Y$1=Q$1=null,Z$1=0),!(lr.subtreeFlags&2064)&&!(lr.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),dr=(lr.flags&15990)!==0,lr.subtreeFlags&15990||dr){dr=ok.transition,ok.transition=null;var fr=C$1;C$1=1;var pr=K$1;K$1|=4,nk.current=null,Oj(ar,lr),dk(lr,ar),Oe$1(Df),dd=!!Cf,Df=Cf=null,ar.current=lr,hk(lr),dc(),K$1=pr,C$1=fr,ok.transition=dr}else ar.current=lr;if(vk&&(vk=!1,wk=ar,xk=cr),dr=ar.pendingLanes,dr===0&&(Ri=null),mc(lr.stateNode),Dk(ar,B$1()),or!==null)for(ur=ar.onRecoverableError,lr=0;lr<or.length;lr++)cr=or[lr],ur(cr.value,{componentStack:cr.stack,digest:cr.digest});if(Oi)throw Oi=!1,ar=Pi,Pi=null,ar;return xk&1&&ar.tag!==0&&Hk(),dr=ar.pendingLanes,dr&1?ar===zk?yk++:(yk=0,zk=ar):yk=0,jg(),null}function Hk(){if(wk!==null){var ar=Dc(xk),or=ok.transition,lr=C$1;try{if(ok.transition=null,C$1=16>ar?16:ar,wk===null)var ur=!1;else{if(ar=wk,wk=null,xk=0,K$1&6)throw Error(p$1(331));var cr=K$1;for(K$1|=4,V$1=ar.current;V$1!==null;){var dr=V$1,fr=dr.child;if(V$1.flags&16){var pr=dr.deletions;if(pr!==null){for(var mr=0;mr<pr.length;mr++){var hr=pr[mr];for(V$1=hr;V$1!==null;){var gr=V$1;switch(gr.tag){case 0:case 11:case 15:Pj(8,gr,dr)}var vr=gr.child;if(vr!==null)vr.return=gr,V$1=vr;else for(;V$1!==null;){gr=V$1;var wr=gr.sibling,_r=gr.return;if(Sj(gr),gr===hr){V$1=null;break}if(wr!==null){wr.return=_r,V$1=wr;break}V$1=_r}}}var Cr=dr.alternate;if(Cr!==null){var Sr=Cr.child;if(Sr!==null){Cr.child=null;do{var Dr=Sr.sibling;Sr.sibling=null,Sr=Dr}while(Sr!==null)}}V$1=dr}}if(dr.subtreeFlags&2064&&fr!==null)fr.return=dr,V$1=fr;else e:for(;V$1!==null;){if(dr=V$1,dr.flags&2048)switch(dr.tag){case 0:case 11:case 15:Pj(9,dr,dr.return)}var Er=dr.sibling;if(Er!==null){Er.return=dr.return,V$1=Er;break e}V$1=dr.return}}var kr=ar.current;for(V$1=kr;V$1!==null;){fr=V$1;var Ir=fr.child;if(fr.subtreeFlags&2064&&Ir!==null)Ir.return=fr,V$1=Ir;else e:for(fr=kr;V$1!==null;){if(pr=V$1,pr.flags&2048)try{switch(pr.tag){case 0:case 11:case 15:Qj(9,pr)}}catch(Nr){W$1(pr,pr.return,Nr)}if(pr===fr){V$1=null;break e}var Br=pr.sibling;if(Br!==null){Br.return=pr.return,V$1=Br;break e}V$1=pr.return}}if(K$1=cr,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,ar)}catch{}ur=!0}return ur}finally{C$1=lr,ok.transition=or}}return!1}function Xk(ar,or,lr){or=Ji(lr,or),or=Ni(ar,or,1),ar=nh(ar,or,1),or=R$2(),ar!==null&&(Ac(ar,1,or),Dk(ar,or))}function W$1(ar,or,lr){if(ar.tag===3)Xk(ar,ar,lr);else for(;or!==null;){if(or.tag===3){Xk(or,ar,lr);break}else if(or.tag===1){var ur=or.stateNode;if(typeof or.type.getDerivedStateFromError=="function"||typeof ur.componentDidCatch=="function"&&(Ri===null||!Ri.has(ur))){ar=Ji(lr,ar),ar=Qi(or,ar,1),or=nh(or,ar,1),ar=R$2(),or!==null&&(Ac(or,1,ar),Dk(or,ar));break}}or=or.return}}function Ti(ar,or,lr){var ur=ar.pingCache;ur!==null&&ur.delete(or),or=R$2(),ar.pingedLanes|=ar.suspendedLanes&lr,Q$1===ar&&(Z$1&lr)===lr&&(T$1===4||T$1===3&&(Z$1&130023424)===Z$1&&500>B$1()-fk?Kk(ar,0):rk|=lr),Dk(ar,or)}function Yk(ar,or){or===0&&(ar.mode&1?(or=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):or=1);var lr=R$2();ar=ih(ar,or),ar!==null&&(Ac(ar,or,lr),Dk(ar,lr))}function uj(ar){var or=ar.memoizedState,lr=0;or!==null&&(lr=or.retryLane),Yk(ar,lr)}function bk(ar,or){var lr=0;switch(ar.tag){case 13:var ur=ar.stateNode,cr=ar.memoizedState;cr!==null&&(lr=cr.retryLane);break;case 19:ur=ar.stateNode;break;default:throw Error(p$1(314))}ur!==null&&ur.delete(or),Yk(ar,lr)}var Vk;Vk=function(ar,or,lr){if(ar!==null)if(ar.memoizedProps!==or.pendingProps||Wf.current)dh=!0;else{if(!(ar.lanes&lr)&&!(or.flags&128))return dh=!1,yj(ar,or,lr);dh=!!(ar.flags&131072)}else dh=!1,I$1&&or.flags&1048576&&ug(or,ng,or.index);switch(or.lanes=0,or.tag){case 2:var ur=or.type;ij(ar,or),ar=or.pendingProps;var cr=Yf(or,H$1.current);ch(or,lr),cr=Nh(null,or,ur,ar,cr,lr);var dr=Sh();return or.flags|=1,typeof cr=="object"&&cr!==null&&typeof cr.render=="function"&&cr.$$typeof===void 0?(or.tag=1,or.memoizedState=null,or.updateQueue=null,Zf(ur)?(dr=!0,cg(or)):dr=!1,or.memoizedState=cr.state!==null&&cr.state!==void 0?cr.state:null,kh(or),cr.updater=Ei,or.stateNode=cr,cr._reactInternals=or,Ii(or,ur,ar,lr),or=jj(null,or,ur,!0,dr,lr)):(or.tag=0,I$1&&dr&&vg(or),Xi(null,or,cr,lr),or=or.child),or;case 16:ur=or.elementType;e:{switch(ij(ar,or),ar=or.pendingProps,cr=ur._init,ur=cr(ur._payload),or.type=ur,cr=or.tag=Zk(ur),ar=Ci(ur,ar),cr){case 0:or=cj(null,or,ur,ar,lr);break e;case 1:or=hj(null,or,ur,ar,lr);break e;case 11:or=Yi(null,or,ur,ar,lr);break e;case 14:or=$i(null,or,ur,Ci(ur.type,ar),lr);break e}throw Error(p$1(306,ur,""))}return or;case 0:return ur=or.type,cr=or.pendingProps,cr=or.elementType===ur?cr:Ci(ur,cr),cj(ar,or,ur,cr,lr);case 1:return ur=or.type,cr=or.pendingProps,cr=or.elementType===ur?cr:Ci(ur,cr),hj(ar,or,ur,cr,lr);case 3:e:{if(kj(or),ar===null)throw Error(p$1(387));ur=or.pendingProps,dr=or.memoizedState,cr=dr.element,lh(ar,or),qh(or,ur,null,lr);var fr=or.memoizedState;if(ur=fr.element,dr.isDehydrated)if(dr={element:ur,isDehydrated:!1,cache:fr.cache,pendingSuspenseBoundaries:fr.pendingSuspenseBoundaries,transitions:fr.transitions},or.updateQueue.baseState=dr,or.memoizedState=dr,or.flags&256){cr=Ji(Error(p$1(423)),or),or=lj(ar,or,ur,lr,cr);break e}else if(ur!==cr){cr=Ji(Error(p$1(424)),or),or=lj(ar,or,ur,lr,cr);break e}else for(yg=Lf(or.stateNode.containerInfo.firstChild),xg=or,I$1=!0,zg=null,lr=Vg(or,null,ur,lr),or.child=lr;lr;)lr.flags=lr.flags&-3|4096,lr=lr.sibling;else{if(Ig(),ur===cr){or=Zi(ar,or,lr);break e}Xi(ar,or,ur,lr)}or=or.child}return or;case 5:return Ah(or),ar===null&&Eg(or),ur=or.type,cr=or.pendingProps,dr=ar!==null?ar.memoizedProps:null,fr=cr.children,Ef(ur,cr)?fr=null:dr!==null&&Ef(ur,dr)&&(or.flags|=32),gj(ar,or),Xi(ar,or,fr,lr),or.child;case 6:return ar===null&&Eg(or),null;case 13:return oj(ar,or,lr);case 4:return yh(or,or.stateNode.containerInfo),ur=or.pendingProps,ar===null?or.child=Ug(or,null,ur,lr):Xi(ar,or,ur,lr),or.child;case 11:return ur=or.type,cr=or.pendingProps,cr=or.elementType===ur?cr:Ci(ur,cr),Yi(ar,or,ur,cr,lr);case 7:return Xi(ar,or,or.pendingProps,lr),or.child;case 8:return Xi(ar,or,or.pendingProps.children,lr),or.child;case 12:return Xi(ar,or,or.pendingProps.children,lr),or.child;case 10:e:{if(ur=or.type._context,cr=or.pendingProps,dr=or.memoizedProps,fr=cr.value,G$1(Wg,ur._currentValue),ur._currentValue=fr,dr!==null)if(He$1(dr.value,fr)){if(dr.children===cr.children&&!Wf.current){or=Zi(ar,or,lr);break e}}else for(dr=or.child,dr!==null&&(dr.return=or);dr!==null;){var pr=dr.dependencies;if(pr!==null){fr=dr.child;for(var mr=pr.firstContext;mr!==null;){if(mr.context===ur){if(dr.tag===1){mr=mh(-1,lr&-lr),mr.tag=2;var hr=dr.updateQueue;if(hr!==null){hr=hr.shared;var gr=hr.pending;gr===null?mr.next=mr:(mr.next=gr.next,gr.next=mr),hr.pending=mr}}dr.lanes|=lr,mr=dr.alternate,mr!==null&&(mr.lanes|=lr),bh(dr.return,lr,or),pr.lanes|=lr;break}mr=mr.next}}else if(dr.tag===10)fr=dr.type===or.type?null:dr.child;else if(dr.tag===18){if(fr=dr.return,fr===null)throw Error(p$1(341));fr.lanes|=lr,pr=fr.alternate,pr!==null&&(pr.lanes|=lr),bh(fr,lr,or),fr=dr.sibling}else fr=dr.child;if(fr!==null)fr.return=dr;else for(fr=dr;fr!==null;){if(fr===or){fr=null;break}if(dr=fr.sibling,dr!==null){dr.return=fr.return,fr=dr;break}fr=fr.return}dr=fr}Xi(ar,or,cr.children,lr),or=or.child}return or;case 9:return cr=or.type,ur=or.pendingProps.children,ch(or,lr),cr=eh(cr),ur=ur(cr),or.flags|=1,Xi(ar,or,ur,lr),or.child;case 14:return ur=or.type,cr=Ci(ur,or.pendingProps),cr=Ci(ur.type,cr),$i(ar,or,ur,cr,lr);case 15:return bj(ar,or,or.type,or.pendingProps,lr);case 17:return ur=or.type,cr=or.pendingProps,cr=or.elementType===ur?cr:Ci(ur,cr),ij(ar,or),or.tag=1,Zf(ur)?(ar=!0,cg(or)):ar=!1,ch(or,lr),Gi(or,ur,cr),Ii(or,ur,cr,lr),jj(null,or,ur,!0,ar,lr);case 19:return xj(ar,or,lr);case 22:return dj(ar,or,lr)}throw Error(p$1(156,or.tag))};function Fk(ar,or){return ac(ar,or)}function $k(ar,or,lr,ur){this.tag=ar,this.key=lr,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=or,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=ur,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(ar,or,lr,ur){return new $k(ar,or,lr,ur)}function aj(ar){return ar=ar.prototype,!(!ar||!ar.isReactComponent)}function Zk(ar){if(typeof ar=="function")return aj(ar)?1:0;if(ar!=null){if(ar=ar.$$typeof,ar===Da)return 11;if(ar===Ga)return 14}return 2}function Pg(ar,or){var lr=ar.alternate;return lr===null?(lr=Bg(ar.tag,or,ar.key,ar.mode),lr.elementType=ar.elementType,lr.type=ar.type,lr.stateNode=ar.stateNode,lr.alternate=ar,ar.alternate=lr):(lr.pendingProps=or,lr.type=ar.type,lr.flags=0,lr.subtreeFlags=0,lr.deletions=null),lr.flags=ar.flags&14680064,lr.childLanes=ar.childLanes,lr.lanes=ar.lanes,lr.child=ar.child,lr.memoizedProps=ar.memoizedProps,lr.memoizedState=ar.memoizedState,lr.updateQueue=ar.updateQueue,or=ar.dependencies,lr.dependencies=or===null?null:{lanes:or.lanes,firstContext:or.firstContext},lr.sibling=ar.sibling,lr.index=ar.index,lr.ref=ar.ref,lr}function Rg(ar,or,lr,ur,cr,dr){var fr=2;if(ur=ar,typeof ar=="function")aj(ar)&&(fr=1);else if(typeof ar=="string")fr=5;else e:switch(ar){case ya:return Tg(lr.children,cr,dr,or);case za:fr=8,cr|=8;break;case Aa:return ar=Bg(12,lr,or,cr|2),ar.elementType=Aa,ar.lanes=dr,ar;case Ea:return ar=Bg(13,lr,or,cr),ar.elementType=Ea,ar.lanes=dr,ar;case Fa:return ar=Bg(19,lr,or,cr),ar.elementType=Fa,ar.lanes=dr,ar;case Ia:return pj(lr,cr,dr,or);default:if(typeof ar=="object"&&ar!==null)switch(ar.$$typeof){case Ba:fr=10;break e;case Ca:fr=9;break e;case Da:fr=11;break e;case Ga:fr=14;break e;case Ha:fr=16,ur=null;break e}throw Error(p$1(130,ar==null?ar:typeof ar,""))}return or=Bg(fr,lr,or,cr),or.elementType=ar,or.type=ur,or.lanes=dr,or}function Tg(ar,or,lr,ur){return ar=Bg(7,ar,ur,or),ar.lanes=lr,ar}function pj(ar,or,lr,ur){return ar=Bg(22,ar,ur,or),ar.elementType=Ia,ar.lanes=lr,ar.stateNode={isHidden:!1},ar}function Qg(ar,or,lr){return ar=Bg(6,ar,null,or),ar.lanes=lr,ar}function Sg(ar,or,lr){return or=Bg(4,ar.children!==null?ar.children:[],ar.key,or),or.lanes=lr,or.stateNode={containerInfo:ar.containerInfo,pendingChildren:null,implementation:ar.implementation},or}function al(ar,or,lr,ur,cr){this.tag=or,this.containerInfo=ar,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=ur,this.onRecoverableError=cr,this.mutableSourceEagerHydrationData=null}function bl(ar,or,lr,ur,cr,dr,fr,pr,mr){return ar=new al(ar,or,lr,pr,mr),or===1?(or=1,dr===!0&&(or|=8)):or=0,dr=Bg(3,null,null,or),ar.current=dr,dr.stateNode=ar,dr.memoizedState={element:ur,isDehydrated:lr,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(dr),ar}function cl(ar,or,lr){var ur=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:ur==null?null:""+ur,children:ar,containerInfo:or,implementation:lr}}function dl(ar){if(!ar)return Vf;ar=ar._reactInternals;e:{if(Vb(ar)!==ar||ar.tag!==1)throw Error(p$1(170));var or=ar;do{switch(or.tag){case 3:or=or.stateNode.context;break e;case 1:if(Zf(or.type)){or=or.stateNode.__reactInternalMemoizedMergedChildContext;break e}}or=or.return}while(or!==null);throw Error(p$1(171))}if(ar.tag===1){var lr=ar.type;if(Zf(lr))return bg(ar,lr,or)}return or}function el(ar,or,lr,ur,cr,dr,fr,pr,mr){return ar=bl(lr,ur,!0,ar,cr,dr,fr,pr,mr),ar.context=dl(null),lr=ar.current,ur=R$2(),cr=yi(lr),dr=mh(ur,cr),dr.callback=or??null,nh(lr,dr,cr),ar.current.lanes=cr,Ac(ar,cr,ur),Dk(ar,ur),ar}function fl(ar,or,lr,ur){var cr=or.current,dr=R$2(),fr=yi(cr);return lr=dl(lr),or.context===null?or.context=lr:or.pendingContext=lr,or=mh(dr,fr),or.payload={element:ar},ur=ur===void 0?null:ur,ur!==null&&(or.callback=ur),ar=nh(cr,or,fr),ar!==null&&(gi(ar,cr,fr,dr),oh(ar,cr,fr)),fr}function gl(ar){if(ar=ar.current,!ar.child)return null;switch(ar.child.tag){case 5:return ar.child.stateNode;default:return ar.child.stateNode}}function hl(ar,or){if(ar=ar.memoizedState,ar!==null&&ar.dehydrated!==null){var lr=ar.retryLane;ar.retryLane=lr!==0&&lr<or?lr:or}}function il(ar,or){hl(ar,or),(ar=ar.alternate)&&hl(ar,or)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(ar){console.error(ar)};function ll(ar){this._internalRoot=ar}ml.prototype.render=ll.prototype.render=function(ar){var or=this._internalRoot;if(or===null)throw Error(p$1(409));fl(ar,or,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var ar=this._internalRoot;if(ar!==null){this._internalRoot=null;var or=ar.containerInfo;Rk(function(){fl(null,ar,null,null)}),or[uf]=null}};function ml(ar){this._internalRoot=ar}ml.prototype.unstable_scheduleHydration=function(ar){if(ar){var or=Hc();ar={blockedOn:null,target:ar,priority:or};for(var lr=0;lr<Qc.length&&or!==0&&or<Qc[lr].priority;lr++);Qc.splice(lr,0,ar),lr===0&&Vc(ar)}};function nl(ar){return!(!ar||ar.nodeType!==1&&ar.nodeType!==9&&ar.nodeType!==11)}function ol(ar){return!(!ar||ar.nodeType!==1&&ar.nodeType!==9&&ar.nodeType!==11&&(ar.nodeType!==8||ar.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(ar,or,lr,ur,cr){if(cr){if(typeof ur=="function"){var dr=ur;ur=function(){var hr=gl(fr);dr.call(hr)}}var fr=el(or,ur,ar,0,null,!1,!1,"",pl);return ar._reactRootContainer=fr,ar[uf]=fr.current,sf(ar.nodeType===8?ar.parentNode:ar),Rk(),fr}for(;cr=ar.lastChild;)ar.removeChild(cr);if(typeof ur=="function"){var pr=ur;ur=function(){var hr=gl(mr);pr.call(hr)}}var mr=bl(ar,0,!1,null,null,!1,!1,"",pl);return ar._reactRootContainer=mr,ar[uf]=mr.current,sf(ar.nodeType===8?ar.parentNode:ar),Rk(function(){fl(or,mr,lr,ur)}),mr}function rl(ar,or,lr,ur,cr){var dr=lr._reactRootContainer;if(dr){var fr=dr;if(typeof cr=="function"){var pr=cr;cr=function(){var mr=gl(fr);pr.call(mr)}}fl(or,fr,ar,cr)}else fr=ql(lr,or,ar,cr,ur);return gl(fr)}Ec=function(ar){switch(ar.tag){case 3:var or=ar.stateNode;if(or.current.memoizedState.isDehydrated){var lr=tc(or.pendingLanes);lr!==0&&(Cc(or,lr|1),Dk(or,B$1()),!(K$1&6)&&(Gj=B$1()+500,jg()))}break;case 13:Rk(function(){var ur=ih(ar,1);if(ur!==null){var cr=R$2();gi(ur,ar,1,cr)}}),il(ar,1)}};Fc=function(ar){if(ar.tag===13){var or=ih(ar,134217728);if(or!==null){var lr=R$2();gi(or,ar,134217728,lr)}il(ar,134217728)}};Gc=function(ar){if(ar.tag===13){var or=yi(ar),lr=ih(ar,or);if(lr!==null){var ur=R$2();gi(lr,ar,or,ur)}il(ar,or)}};Hc=function(){return C$1};Ic=function(ar,or){var lr=C$1;try{return C$1=ar,or()}finally{C$1=lr}};yb=function(ar,or,lr){switch(or){case"input":if(bb(ar,lr),or=lr.name,lr.type==="radio"&&or!=null){for(lr=ar;lr.parentNode;)lr=lr.parentNode;for(lr=lr.querySelectorAll("input[name="+JSON.stringify(""+or)+'][type="radio"]'),or=0;or<lr.length;or++){var ur=lr[or];if(ur!==ar&&ur.form===ar.form){var cr=Db(ur);if(!cr)throw Error(p$1(90));Wa(ur),bb(ur,cr)}}}break;case"textarea":ib(ar,lr);break;case"select":or=lr.value,or!=null&&fb(ar,!!lr.multiple,or,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(ar){return ar=Zb(ar),ar===null?null:ar.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(ar,or){var lr=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(or))throw Error(p$1(200));return cl(ar,or,null,lr)};reactDom_production_min.createRoot=function(ar,or){if(!nl(ar))throw Error(p$1(299));var lr=!1,ur="",cr=kl;return or!=null&&(or.unstable_strictMode===!0&&(lr=!0),or.identifierPrefix!==void 0&&(ur=or.identifierPrefix),or.onRecoverableError!==void 0&&(cr=or.onRecoverableError)),or=bl(ar,1,!1,null,null,lr,!1,ur,cr),ar[uf]=or.current,sf(ar.nodeType===8?ar.parentNode:ar),new ll(or)};reactDom_production_min.findDOMNode=function(ar){if(ar==null)return null;if(ar.nodeType===1)return ar;var or=ar._reactInternals;if(or===void 0)throw typeof ar.render=="function"?Error(p$1(188)):(ar=Object.keys(ar).join(","),Error(p$1(268,ar)));return ar=Zb(or),ar=ar===null?null:ar.stateNode,ar};reactDom_production_min.flushSync=function(ar){return Rk(ar)};reactDom_production_min.hydrate=function(ar,or,lr){if(!ol(or))throw Error(p$1(200));return rl(null,ar,or,!0,lr)};reactDom_production_min.hydrateRoot=function(ar,or,lr){if(!nl(ar))throw Error(p$1(405));var ur=lr!=null&&lr.hydratedSources||null,cr=!1,dr="",fr=kl;if(lr!=null&&(lr.unstable_strictMode===!0&&(cr=!0),lr.identifierPrefix!==void 0&&(dr=lr.identifierPrefix),lr.onRecoverableError!==void 0&&(fr=lr.onRecoverableError)),or=el(or,null,ar,1,lr??null,cr,!1,dr,fr),ar[uf]=or.current,sf(ar),ur)for(ar=0;ar<ur.length;ar++)lr=ur[ar],cr=lr._getVersion,cr=cr(lr._source),or.mutableSourceEagerHydrationData==null?or.mutableSourceEagerHydrationData=[lr,cr]:or.mutableSourceEagerHydrationData.push(lr,cr);return new ml(or)};reactDom_production_min.render=function(ar,or,lr){if(!ol(or))throw Error(p$1(200));return rl(null,ar,or,!1,lr)};reactDom_production_min.unmountComponentAtNode=function(ar){if(!ol(ar))throw Error(p$1(40));return ar._reactRootContainer?(Rk(function(){rl(null,null,ar,!1,function(){ar._reactRootContainer=null,ar[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(ar,or,lr,ur){if(!ol(lr))throw Error(p$1(200));if(ar==null||ar._reactInternals===void 0)throw Error(p$1(38));return rl(ar,or,lr,!1,ur)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(ar){console.error(ar)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m$1=reactDomExports;client.createRoot=m$1.createRoot,client.hydrateRoot=m$1.hydrateRoot;var lib$3={},browser$3={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var ar=1e3,or=ar*60,lr=or*60,ur=lr*24,cr=ur*7,dr=ur*365.25;ms=function(gr,vr){vr=vr||{};var wr=typeof gr;if(wr==="string"&&gr.length>0)return fr(gr);if(wr==="number"&&isFinite(gr))return vr.long?mr(gr):pr(gr);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(gr))};function fr(gr){if(gr=String(gr),!(gr.length>100)){var vr=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(gr);if(vr){var wr=parseFloat(vr[1]),_r=(vr[2]||"ms").toLowerCase();switch(_r){case"years":case"year":case"yrs":case"yr":case"y":return wr*dr;case"weeks":case"week":case"w":return wr*cr;case"days":case"day":case"d":return wr*ur;case"hours":case"hour":case"hrs":case"hr":case"h":return wr*lr;case"minutes":case"minute":case"mins":case"min":case"m":return wr*or;case"seconds":case"second":case"secs":case"sec":case"s":return wr*ar;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return wr;default:return}}}}function pr(gr){var vr=Math.abs(gr);return vr>=ur?Math.round(gr/ur)+"d":vr>=lr?Math.round(gr/lr)+"h":vr>=or?Math.round(gr/or)+"m":vr>=ar?Math.round(gr/ar)+"s":gr+"ms"}function mr(gr){var vr=Math.abs(gr);return vr>=ur?hr(gr,vr,ur,"day"):vr>=lr?hr(gr,vr,lr,"hour"):vr>=or?hr(gr,vr,or,"minute"):vr>=ar?hr(gr,vr,ar,"second"):gr+" ms"}function hr(gr,vr,wr,_r){var Cr=vr>=wr*1.5;return Math.round(gr/wr)+" "+_r+(Cr?"s":"")}return ms}function setup(ar){lr.debug=lr,lr.default=lr,lr.coerce=mr,lr.disable=fr,lr.enable=cr,lr.enabled=pr,lr.humanize=requireMs(),lr.destroy=hr,Object.keys(ar).forEach(gr=>{lr[gr]=ar[gr]}),lr.names=[],lr.skips=[],lr.formatters={};function or(gr){let vr=0;for(let wr=0;wr<gr.length;wr++)vr=(vr<<5)-vr+gr.charCodeAt(wr),vr|=0;return lr.colors[Math.abs(vr)%lr.colors.length]}lr.selectColor=or;function lr(gr){let vr,wr=null,_r,Cr;function Sr(...Dr){if(!Sr.enabled)return;const Er=Sr,kr=Number(new Date),Ir=kr-(vr||kr);Er.diff=Ir,Er.prev=vr,Er.curr=kr,vr=kr,Dr[0]=lr.coerce(Dr[0]),typeof Dr[0]!="string"&&Dr.unshift("%O");let Br=0;Dr[0]=Dr[0].replace(/%([a-zA-Z%])/g,(Mr,xr)=>{if(Mr==="%%")return"%";Br++;const Rr=lr.formatters[xr];if(typeof Rr=="function"){const Or=Dr[Br];Mr=Rr.call(Er,Or),Dr.splice(Br,1),Br--}return Mr}),lr.formatArgs.call(Er,Dr),(Er.log||lr.log).apply(Er,Dr)}return Sr.namespace=gr,Sr.useColors=lr.useColors(),Sr.color=lr.selectColor(gr),Sr.extend=ur,Sr.destroy=lr.destroy,Object.defineProperty(Sr,"enabled",{enumerable:!0,configurable:!1,get:()=>wr!==null?wr:(_r!==lr.namespaces&&(_r=lr.namespaces,Cr=lr.enabled(gr)),Cr),set:Dr=>{wr=Dr}}),typeof lr.init=="function"&&lr.init(Sr),Sr}function ur(gr,vr){const wr=lr(this.namespace+(typeof vr>"u"?":":vr)+gr);return wr.log=this.log,wr}function cr(gr){lr.save(gr),lr.namespaces=gr,lr.names=[],lr.skips=[];const vr=(typeof gr=="string"?gr:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const wr of vr)wr[0]==="-"?lr.skips.push(wr.slice(1)):lr.names.push(wr)}function dr(gr,vr){let wr=0,_r=0,Cr=-1,Sr=0;for(;wr<gr.length;)if(_r<vr.length&&(vr[_r]===gr[wr]||vr[_r]==="*"))vr[_r]==="*"?(Cr=_r,Sr=wr,_r++):(wr++,_r++);else if(Cr!==-1)_r=Cr+1,Sr++,wr=Sr;else return!1;for(;_r<vr.length&&vr[_r]==="*";)_r++;return _r===vr.length}function fr(){const gr=[...lr.names,...lr.skips.map(vr=>"-"+vr)].join(",");return lr.enable(""),gr}function pr(gr){for(const vr of lr.skips)if(dr(gr,vr))return!1;for(const vr of lr.names)if(dr(gr,vr))return!0;return!1}function mr(gr){return gr instanceof Error?gr.stack||gr.message:gr}function hr(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return lr.enable(lr.load()),lr}var common$3=setup;(function(ar,or){var lr={};or.formatArgs=cr,or.save=dr,or.load=fr,or.useColors=ur,or.storage=pr(),or.destroy=(()=>{let hr=!1;return()=>{hr||(hr=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),or.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function ur(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let hr;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(hr=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(hr[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function cr(hr){if(hr[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+hr[0]+(this.useColors?"%c ":" ")+"+"+ar.exports.humanize(this.diff),!this.useColors)return;const gr="color: "+this.color;hr.splice(1,0,gr,"color: inherit");let vr=0,wr=0;hr[0].replace(/%[a-zA-Z%]/g,_r=>{_r!=="%%"&&(vr++,_r==="%c"&&(wr=vr))}),hr.splice(wr,0,gr)}or.log=console.debug||console.log||(()=>{});function dr(hr){try{hr?or.storage.setItem("debug",hr):or.storage.removeItem("debug")}catch{}}function fr(){let hr;try{hr=or.storage.getItem("debug")||or.storage.getItem("DEBUG")}catch{}return!hr&&typeof process<"u"&&"env"in process&&(hr=lr.DEBUG),hr}function pr(){try{return localStorage}catch{}}ar.exports=common$3(or);const{formatters:mr}=ar.exports;mr.j=function(hr){try{return JSON.stringify(hr)}catch(gr){return"[UnexpectedJSONParseError]: "+gr.message}}})(browser$3,browser$3.exports);var browserExports$2=browser$3.exports,core$2={},core$1={},ReadStreamTokenizer$1={},AbstractTokenizer$1={},lib$2={},EndOfFileStream={};(function(ar){Object.defineProperty(ar,"__esModule",{value:!0}),ar.EndOfStreamError=ar.defaultMessages=void 0,ar.defaultMessages="End-Of-Stream";class or extends Error{constructor(){super(ar.defaultMessages)}}ar.EndOfStreamError=or})(EndOfFileStream);var StreamReader$1={},Deferred$1={};Object.defineProperty(Deferred$1,"__esModule",{value:!0});Deferred$1.Deferred=void 0;class Deferred{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((or,lr)=>{this.reject=lr,this.resolve=or})}}Deferred$1.Deferred=Deferred;(function(ar){Object.defineProperty(ar,"__esModule",{value:!0}),ar.StreamReader=ar.EndOfStreamError=void 0;const or=EndOfFileStream,lr=Deferred$1;var ur=EndOfFileStream;Object.defineProperty(ar,"EndOfStreamError",{enumerable:!0,get:function(){return ur.EndOfStreamError}});const cr=1*1024*1024;class dr{constructor(pr){if(this.s=pr,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!pr.read||!pr.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new or.EndOfStreamError)),this.s.once("error",mr=>this.reject(mr)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}async peek(pr,mr,hr){const gr=await this.read(pr,mr,hr);return this.peekQueue.push(pr.subarray(mr,mr+gr)),gr}async read(pr,mr,hr){if(hr===0)return 0;if(this.peekQueue.length===0&&this.endOfStream)throw new or.EndOfStreamError;let gr=hr,vr=0;for(;this.peekQueue.length>0&&gr>0;){const wr=this.peekQueue.pop();if(!wr)throw new Error("peekData should be defined");const _r=Math.min(wr.length,gr);pr.set(wr.subarray(0,_r),mr+vr),vr+=_r,gr-=_r,_r<wr.length&&this.peekQueue.push(wr.subarray(_r))}for(;gr>0&&!this.endOfStream;){const wr=Math.min(gr,cr),_r=await this.readFromStream(pr,mr+vr,wr);if(vr+=_r,_r<wr)break;gr-=_r}return vr}async readFromStream(pr,mr,hr){const gr=this.s.read(hr);if(gr)return pr.set(gr,mr),gr.length;{const vr={buffer:pr,offset:mr,length:hr,deferred:new lr.Deferred};return this.deferred=vr.deferred,this.s.once("readable",()=>{this.readDeferred(vr)}),vr.deferred.promise}}readDeferred(pr){const mr=this.s.read(pr.length);mr?(pr.buffer.set(mr,pr.offset),pr.deferred.resolve(mr.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(pr)})}reject(pr){this.endOfStream=!0,this.deferred&&(this.deferred.reject(pr),this.deferred=null)}}ar.StreamReader=dr})(StreamReader$1);(function(ar){Object.defineProperty(ar,"__esModule",{value:!0}),ar.StreamReader=ar.EndOfStreamError=void 0;var or=EndOfFileStream;Object.defineProperty(ar,"EndOfStreamError",{enumerable:!0,get:function(){return or.EndOfStreamError}});var lr=StreamReader$1;Object.defineProperty(ar,"StreamReader",{enumerable:!0,get:function(){return lr.StreamReader}})})(lib$2);Object.defineProperty(AbstractTokenizer$1,"__esModule",{value:!0});AbstractTokenizer$1.AbstractTokenizer=void 0;const peek_readable_1$2=lib$2;class AbstractTokenizer{constructor(or){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=or||{}}async readToken(or,lr=this.position){const ur=Buffer.alloc(or.len);if(await this.readBuffer(ur,{position:lr})<or.len)throw new peek_readable_1$2.EndOfStreamError;return or.get(ur,0)}async peekToken(or,lr=this.position){const ur=Buffer.alloc(or.len);if(await this.peekBuffer(ur,{position:lr})<or.len)throw new peek_readable_1$2.EndOfStreamError;return or.get(ur,0)}async readNumber(or){if(await this.readBuffer(this.numBuffer,{length:or.len})<or.len)throw new peek_readable_1$2.EndOfStreamError;return or.get(this.numBuffer,0)}async peekNumber(or){if(await this.peekBuffer(this.numBuffer,{length:or.len})<or.len)throw new peek_readable_1$2.EndOfStreamError;return or.get(this.numBuffer,0)}async ignore(or){if(this.fileInfo.size!==void 0){const lr=this.fileInfo.size-this.position;if(or>lr)return this.position+=lr,lr}return this.position+=or,or}async close(){}normalizeOptions(or,lr){if(lr&&lr.position!==void 0&&lr.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return lr?{mayBeLess:lr.mayBeLess===!0,offset:lr.offset?lr.offset:0,length:lr.length?lr.length:or.length-(lr.offset?lr.offset:0),position:lr.position?lr.position:this.position}:{mayBeLess:!1,offset:0,length:or.length,position:this.position}}}AbstractTokenizer$1.AbstractTokenizer=AbstractTokenizer;Object.defineProperty(ReadStreamTokenizer$1,"__esModule",{value:!0});ReadStreamTokenizer$1.ReadStreamTokenizer=void 0;const AbstractTokenizer_1$1=AbstractTokenizer$1,peek_readable_1$1=lib$2,maxBufferSize=256e3;class ReadStreamTokenizer extends AbstractTokenizer_1$1.AbstractTokenizer{constructor(or,lr){super(lr),this.streamReader=new peek_readable_1$1.StreamReader(or)}async getFileInfo(){return this.fileInfo}async readBuffer(or,lr){const ur=this.normalizeOptions(or,lr),cr=ur.position-this.position;if(cr>0)return await this.ignore(cr),this.readBuffer(or,lr);if(cr<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(ur.length===0)return 0;const dr=await this.streamReader.read(or,ur.offset,ur.length);if(this.position+=dr,(!lr||!lr.mayBeLess)&&dr<ur.length)throw new peek_readable_1$1.EndOfStreamError;return dr}async peekBuffer(or,lr){const ur=this.normalizeOptions(or,lr);let cr=0;if(ur.position){const dr=ur.position-this.position;if(dr>0){const fr=new Uint8Array(ur.length+dr);return cr=await this.peekBuffer(fr,{mayBeLess:ur.mayBeLess}),or.set(fr.subarray(dr),ur.offset),cr-dr}else if(dr<0)throw new Error("Cannot peek from a negative offset in a stream")}if(ur.length>0){try{cr=await this.streamReader.peek(or,ur.offset,ur.length)}catch(dr){if(lr&&lr.mayBeLess&&dr instanceof peek_readable_1$1.EndOfStreamError)return 0;throw dr}if(!ur.mayBeLess&&cr<ur.length)throw new peek_readable_1$1.EndOfStreamError}return cr}async ignore(or){const lr=Math.min(maxBufferSize,or),ur=new Uint8Array(lr);let cr=0;for(;cr<or;){const dr=or-cr,fr=await this.readBuffer(ur,{length:Math.min(lr,dr)});if(fr<0)return fr;cr+=fr}return cr}}ReadStreamTokenizer$1.ReadStreamTokenizer=ReadStreamTokenizer;var BufferTokenizer$1={};Object.defineProperty(BufferTokenizer$1,"__esModule",{value:!0});BufferTokenizer$1.BufferTokenizer=void 0;const peek_readable_1=lib$2,AbstractTokenizer_1=AbstractTokenizer$1;class BufferTokenizer extends AbstractTokenizer_1.AbstractTokenizer{constructor(or,lr){super(lr),this.uint8Array=or,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:or.length}async readBuffer(or,lr){if(lr&&lr.position){if(lr.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=lr.position}const ur=await this.peekBuffer(or,lr);return this.position+=ur,ur}async peekBuffer(or,lr){const ur=this.normalizeOptions(or,lr),cr=Math.min(this.uint8Array.length-ur.position,ur.length);if(!ur.mayBeLess&&cr<ur.length)throw new peek_readable_1.EndOfStreamError;return or.set(this.uint8Array.subarray(ur.position,ur.position+cr),ur.offset),cr}async close(){}}BufferTokenizer$1.BufferTokenizer=BufferTokenizer;(function(ar){Object.defineProperty(ar,"__esModule",{value:!0}),ar.fromBuffer=ar.fromStream=ar.EndOfStreamError=void 0;const or=ReadStreamTokenizer$1,lr=BufferTokenizer$1;var ur=lib$2;Object.defineProperty(ar,"EndOfStreamError",{enumerable:!0,get:function(){return ur.EndOfStreamError}});function cr(fr,pr){return pr=pr||{},new or.ReadStreamTokenizer(fr,pr)}ar.fromStream=cr;function dr(fr,pr){return new lr.BufferTokenizer(fr,pr)}ar.fromBuffer=dr})(core$1);var ParserFactory$1={},lib$1={},ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(ar,or,lr,ur,cr){var dr,fr,pr=cr*8-ur-1,mr=(1<<pr)-1,hr=mr>>1,gr=-7,vr=lr?cr-1:0,wr=lr?-1:1,_r=ar[or+vr];for(vr+=wr,dr=_r&(1<<-gr)-1,_r>>=-gr,gr+=pr;gr>0;dr=dr*256+ar[or+vr],vr+=wr,gr-=8);for(fr=dr&(1<<-gr)-1,dr>>=-gr,gr+=ur;gr>0;fr=fr*256+ar[or+vr],vr+=wr,gr-=8);if(dr===0)dr=1-hr;else{if(dr===mr)return fr?NaN:(_r?-1:1)*(1/0);fr=fr+Math.pow(2,ur),dr=dr-hr}return(_r?-1:1)*fr*Math.pow(2,dr-ur)};ieee754.write=function(ar,or,lr,ur,cr,dr){var fr,pr,mr,hr=dr*8-cr-1,gr=(1<<hr)-1,vr=gr>>1,wr=cr===23?Math.pow(2,-24)-Math.pow(2,-77):0,_r=ur?0:dr-1,Cr=ur?1:-1,Sr=or<0||or===0&&1/or<0?1:0;for(or=Math.abs(or),isNaN(or)||or===1/0?(pr=isNaN(or)?1:0,fr=gr):(fr=Math.floor(Math.log(or)/Math.LN2),or*(mr=Math.pow(2,-fr))<1&&(fr--,mr*=2),fr+vr>=1?or+=wr/mr:or+=wr*Math.pow(2,1-vr),or*mr>=2&&(fr++,mr/=2),fr+vr>=gr?(pr=0,fr=gr):fr+vr>=1?(pr=(or*mr-1)*Math.pow(2,cr),fr=fr+vr):(pr=or*Math.pow(2,vr-1)*Math.pow(2,cr),fr=0));cr>=8;ar[lr+_r]=pr&255,_r+=Cr,pr/=256,cr-=8);for(fr=fr<<cr|pr,hr+=cr;hr>0;ar[lr+_r]=fr&255,_r+=Cr,fr/=256,hr-=8);ar[lr+_r-Cr]|=Sr*128};(function(ar){Object.defineProperty(ar,"__esModule",{value:!0}),ar.AnsiStringType=ar.StringType=ar.BufferType=ar.Uint8ArrayType=ar.IgnoreType=ar.Float80_LE=ar.Float80_BE=ar.Float64_LE=ar.Float64_BE=ar.Float32_LE=ar.Float32_BE=ar.Float16_LE=ar.Float16_BE=ar.INT64_BE=ar.UINT64_BE=ar.INT64_LE=ar.UINT64_LE=ar.INT32_LE=ar.INT32_BE=ar.INT24_BE=ar.INT24_LE=ar.INT16_LE=ar.INT16_BE=ar.INT8=ar.UINT32_BE=ar.UINT32_LE=ar.UINT24_BE=ar.UINT24_LE=ar.UINT16_BE=ar.UINT16_LE=ar.UINT8=void 0;const or=ieee754;function lr(mr){return new DataView(mr.buffer,mr.byteOffset)}ar.UINT8={len:1,get(mr,hr){return lr(mr).getUint8(hr)},put(mr,hr,gr){return lr(mr).setUint8(hr,gr),hr+1}},ar.UINT16_LE={len:2,get(mr,hr){return lr(mr).getUint16(hr,!0)},put(mr,hr,gr){return lr(mr).setUint16(hr,gr,!0),hr+2}},ar.UINT16_BE={len:2,get(mr,hr){return lr(mr).getUint16(hr)},put(mr,hr,gr){return lr(mr).setUint16(hr,gr),hr+2}},ar.UINT24_LE={len:3,get(mr,hr){const gr=lr(mr);return gr.getUint8(hr)+(gr.getUint16(hr+1,!0)<<8)},put(mr,hr,gr){const vr=lr(mr);return vr.setUint8(hr,gr&255),vr.setUint16(hr+1,gr>>8,!0),hr+3}},ar.UINT24_BE={len:3,get(mr,hr){const gr=lr(mr);return(gr.getUint16(hr)<<8)+gr.getUint8(hr+2)},put(mr,hr,gr){const vr=lr(mr);return vr.setUint16(hr,gr>>8),vr.setUint8(hr+2,gr&255),hr+3}},ar.UINT32_LE={len:4,get(mr,hr){return lr(mr).getUint32(hr,!0)},put(mr,hr,gr){return lr(mr).setUint32(hr,gr,!0),hr+4}},ar.UINT32_BE={len:4,get(mr,hr){return lr(mr).getUint32(hr)},put(mr,hr,gr){return lr(mr).setUint32(hr,gr),hr+4}},ar.INT8={len:1,get(mr,hr){return lr(mr).getInt8(hr)},put(mr,hr,gr){return lr(mr).setInt8(hr,gr),hr+1}},ar.INT16_BE={len:2,get(mr,hr){return lr(mr).getInt16(hr)},put(mr,hr,gr){return lr(mr).setInt16(hr,gr),hr+2}},ar.INT16_LE={len:2,get(mr,hr){return lr(mr).getInt16(hr,!0)},put(mr,hr,gr){return lr(mr).setInt16(hr,gr,!0),hr+2}},ar.INT24_LE={len:3,get(mr,hr){const gr=ar.UINT24_LE.get(mr,hr);return gr>8388607?gr-16777216:gr},put(mr,hr,gr){const vr=lr(mr);return vr.setUint8(hr,gr&255),vr.setUint16(hr+1,gr>>8,!0),hr+3}},ar.INT24_BE={len:3,get(mr,hr){const gr=ar.UINT24_BE.get(mr,hr);return gr>8388607?gr-16777216:gr},put(mr,hr,gr){const vr=lr(mr);return vr.setUint16(hr,gr>>8),vr.setUint8(hr+2,gr&255),hr+3}},ar.INT32_BE={len:4,get(mr,hr){return lr(mr).getInt32(hr)},put(mr,hr,gr){return lr(mr).setInt32(hr,gr),hr+4}},ar.INT32_LE={len:4,get(mr,hr){return lr(mr).getInt32(hr,!0)},put(mr,hr,gr){return lr(mr).setInt32(hr,gr,!0),hr+4}},ar.UINT64_LE={len:8,get(mr,hr){return lr(mr).getBigUint64(hr,!0)},put(mr,hr,gr){return lr(mr).setBigUint64(hr,gr,!0),hr+8}},ar.INT64_LE={len:8,get(mr,hr){return lr(mr).getBigInt64(hr,!0)},put(mr,hr,gr){return lr(mr).setBigInt64(hr,gr,!0),hr+8}},ar.UINT64_BE={len:8,get(mr,hr){return lr(mr).getBigUint64(hr)},put(mr,hr,gr){return lr(mr).setBigUint64(hr,gr),hr+8}},ar.INT64_BE={len:8,get(mr,hr){return lr(mr).getBigInt64(hr)},put(mr,hr,gr){return lr(mr).setBigInt64(hr,gr),hr+8}},ar.Float16_BE={len:2,get(mr,hr){return or.read(mr,hr,!1,10,this.len)},put(mr,hr,gr){return or.write(mr,gr,hr,!1,10,this.len),hr+this.len}},ar.Float16_LE={len:2,get(mr,hr){return or.read(mr,hr,!0,10,this.len)},put(mr,hr,gr){return or.write(mr,gr,hr,!0,10,this.len),hr+this.len}},ar.Float32_BE={len:4,get(mr,hr){return lr(mr).getFloat32(hr)},put(mr,hr,gr){return lr(mr).setFloat32(hr,gr),hr+4}},ar.Float32_LE={len:4,get(mr,hr){return lr(mr).getFloat32(hr,!0)},put(mr,hr,gr){return lr(mr).setFloat32(hr,gr,!0),hr+4}},ar.Float64_BE={len:8,get(mr,hr){return lr(mr).getFloat64(hr)},put(mr,hr,gr){return lr(mr).setFloat64(hr,gr),hr+8}},ar.Float64_LE={len:8,get(mr,hr){return lr(mr).getFloat64(hr,!0)},put(mr,hr,gr){return lr(mr).setFloat64(hr,gr,!0),hr+8}},ar.Float80_BE={len:10,get(mr,hr){return or.read(mr,hr,!1,63,this.len)},put(mr,hr,gr){return or.write(mr,gr,hr,!1,63,this.len),hr+this.len}},ar.Float80_LE={len:10,get(mr,hr){return or.read(mr,hr,!0,63,this.len)},put(mr,hr,gr){return or.write(mr,gr,hr,!0,63,this.len),hr+this.len}};class ur{constructor(hr){this.len=hr}get(hr,gr){}}ar.IgnoreType=ur;class cr{constructor(hr){this.len=hr}get(hr,gr){return hr.subarray(gr,gr+this.len)}}ar.Uint8ArrayType=cr;class dr{constructor(hr){this.len=hr}get(hr,gr){return Buffer.from(hr.subarray(gr,gr+this.len))}}ar.BufferType=dr;class fr{constructor(hr,gr){this.len=hr,this.encoding=gr}get(hr,gr){return Buffer.from(hr).toString(this.encoding,gr,gr+this.len)}}ar.StringType=fr;class pr{constructor(hr){this.len=hr}static decode(hr,gr,vr){let wr="";for(let _r=gr;_r<vr;++_r)wr+=pr.codePointToString(pr.singleByteDecoder(hr[_r]));return wr}static inRange(hr,gr,vr){return gr<=hr&&hr<=vr}static codePointToString(hr){return hr<=65535?String.fromCharCode(hr):(hr-=65536,String.fromCharCode((hr>>10)+55296,(hr&1023)+56320))}static singleByteDecoder(hr){if(pr.inRange(hr,0,127))return hr;const gr=pr.windows1252[hr-128];if(gr===null)throw Error("invaliding encoding");return gr}get(hr,gr=0){return pr.decode(hr,gr,gr+this.len)}}ar.AnsiStringType=pr,pr.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]})(lib$1);var util$c={};util$c.stringToBytes=ar=>[...ar].map(or=>or.charCodeAt(0));util$c.tarHeaderChecksumMatches=(ar,or=0)=>{const lr=parseInt(ar.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(lr))return!1;let ur=8*32;for(let cr=or;cr<or+148;cr++)ur+=ar[cr];for(let cr=or+156;cr<or+512;cr++)ur+=ar[cr];return lr===ur};util$c.uint32SyncSafeToken={get:(ar,or)=>ar[or+3]&127|ar[or+2]<<7|ar[or+1]<<14|ar[or]<<21,len:4};var supported$1={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]};const Token$s=lib$1,strtok3$5=core$1,{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=util$c,supported=supported$1,minimumBytes=4100;async function fromStream(ar){const or=await strtok3$5.fromStream(ar);try{return await fromTokenizer(or)}finally{await or.close()}}async function fromBuffer(ar){if(!(ar instanceof Uint8Array||ar instanceof ArrayBuffer||Buffer.isBuffer(ar)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof ar}\``);const or=ar instanceof Buffer?ar:Buffer.from(ar);if(!(or&&or.length>1))return;const lr=strtok3$5.fromBuffer(or);return fromTokenizer(lr)}function _check(ar,or,lr){lr={offset:0,...lr};for(const[ur,cr]of or.entries())if(lr.mask){if(cr!==(lr.mask[ur]&ar[ur+lr.offset]))return!1}else if(cr!==ar[ur+lr.offset])return!1;return!0}async function fromTokenizer(ar){try{return _fromTokenizer(ar)}catch(or){if(!(or instanceof strtok3$5.EndOfStreamError))throw or}}async function _fromTokenizer(ar){let or=Buffer.alloc(minimumBytes);const lr=12,ur=(dr,fr)=>_check(or,dr,fr),cr=(dr,fr)=>ur(stringToBytes(dr),fr);if(ar.fileInfo.size||(ar.fileInfo.size=Number.MAX_SAFE_INTEGER),await ar.peekBuffer(or,{length:lr,mayBeLess:!0}),ur([66,77]))return{ext:"bmp",mime:"image/bmp"};if(ur([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(ur([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(ur([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(ur([37,33]))return await ar.peekBuffer(or,{length:24,mayBeLess:!0}),cr("PS-Adobe-",{offset:2})&&cr(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(ur([31,160])||ur([31,157]))return{ext:"Z",mime:"application/x-compress"};if(ur([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(ur([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(ur([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(ur([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(cr("ID3")){await ar.ignore(6);const dr=await ar.readToken(uint32SyncSafeToken);return ar.position+dr>ar.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await ar.ignore(dr),fromTokenizer(ar))}if(cr("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((or[0]===67||or[0]===70)&&ur([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(ur([71,73,70]))return{ext:"gif",mime:"image/gif"};if(cr("FLIF"))return{ext:"flif",mime:"image/flif"};if(cr("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(cr("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(cr("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(cr("FORM"))return{ext:"aif",mime:"audio/aiff"};if(cr("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(ur([80,75,3,4])){try{for(;ar.position+30<ar.fileInfo.size;){await ar.readBuffer(or,{length:30});const dr={compressedSize:or.readUInt32LE(18),uncompressedSize:or.readUInt32LE(22),filenameLength:or.readUInt16LE(26),extraFieldLength:or.readUInt16LE(28)};if(dr.filename=await ar.readToken(new Token$s.StringType(dr.filenameLength,"utf-8")),await ar.ignore(dr.extraFieldLength),dr.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(dr.filename.endsWith(".rels")||dr.filename.endsWith(".xml"))switch(dr.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};default:break}if(dr.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(dr.filename.startsWith("3D/")&&dr.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(dr.filename==="mimetype"&&dr.compressedSize===dr.uncompressedSize)switch(await ar.readToken(new Token$s.StringType(dr.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}if(dr.compressedSize===0){let fr=-1;for(;fr<0&&ar.position<ar.fileInfo.size;)await ar.peekBuffer(or,{mayBeLess:!0}),fr=or.indexOf("504B0304",0,"hex"),await ar.ignore(fr>=0?fr:or.length)}else await ar.ignore(dr.compressedSize)}}catch(dr){if(!(dr instanceof strtok3$5.EndOfStreamError))throw dr}return{ext:"zip",mime:"application/zip"}}if(cr("OggS")){await ar.ignore(28);const dr=Buffer.alloc(8);return await ar.readBuffer(dr),_check(dr,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(dr,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(dr,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(dr,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(dr,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(dr,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(ur([80,75])&&(or[2]===3||or[2]===5||or[2]===7)&&(or[3]===4||or[3]===6||or[3]===8))return{ext:"zip",mime:"application/zip"};if(cr("ftyp",{offset:4})&&or[8]&96){const dr=or.toString("binary",8,12).replace("\0"," ").trim();switch(dr){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return dr.startsWith("3g")?dr.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(cr("MThd"))return{ext:"mid",mime:"audio/midi"};if(cr("wOFF")&&(ur([0,1,0,0],{offset:4})||cr("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(cr("wOF2")&&(ur([0,1,0,0],{offset:4})||cr("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(ur([212,195,178,161])||ur([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(cr("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(cr("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(cr("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(ur([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(cr("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(cr("%PDF")){await ar.ignore(1350);const dr=10*1024*1024,fr=Buffer.alloc(Math.min(dr,ar.fileInfo.size));return await ar.readBuffer(fr,{mayBeLess:!0}),fr.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(ur([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(ur([73,73,42,0]))return cr("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:ur([28,0,254,0],{offset:8})||ur([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:ur([8,0,0,0],{offset:4})&&(ur([45,0,254,0],{offset:8})||ur([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(or=Buffer.alloc(24),await ar.peekBuffer(or),(ur([16,251,134,1],{offset:4})||ur([8,0,0,0],{offset:4}))&&ur([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(ur([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(cr("MAC "))return{ext:"ape",mime:"audio/ape"};if(ur([26,69,223,163])){async function dr(){const gr=await ar.peekNumber(Token$s.UINT8);let vr=128,wr=0;for(;!(gr&vr)&&vr!==0;)++wr,vr>>=1;const _r=Buffer.alloc(wr+1);return await ar.readBuffer(_r),_r}async function fr(){const gr=await dr(),vr=await dr();vr[0]^=128>>vr.length-1;const wr=Math.min(6,vr.length);return{id:gr.readUIntBE(0,gr.length),len:vr.readUIntBE(vr.length-wr,wr)}}async function pr(gr,vr){for(;vr>0;){const wr=await fr();if(wr.id===17026)return ar.readToken(new Token$s.StringType(wr.len,"utf-8"));await ar.ignore(wr.len),--vr}}const mr=await fr();switch(await pr(1,mr.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(ur([82,73,70,70])){if(ur([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(ur([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(ur([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(cr("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(ur([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(cr("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(cr("MSCF")||cr("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(ur([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(ur([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(ur([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(ur([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(cr("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(cr("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(ur([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(cr("IMPM"))return{ext:"it",mime:"audio/x-it"};if(cr("-lh0-",{offset:2})||cr("-lh1-",{offset:2})||cr("-lh2-",{offset:2})||cr("-lh3-",{offset:2})||cr("-lh4-",{offset:2})||cr("-lh5-",{offset:2})||cr("-lh6-",{offset:2})||cr("-lh7-",{offset:2})||cr("-lzs-",{offset:2})||cr("-lz4-",{offset:2})||cr("-lz5-",{offset:2})||cr("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(ur([0,0,1,186])){if(ur([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(ur([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(cr("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(ur([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(cr("<?xml "))return{ext:"xml",mime:"application/xml"};if(ur([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(ur([82,97,114,33,26,7])&&(or[6]===0||or[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(cr("solid "))return{ext:"stl",mime:"model/stl"};if(cr("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(cr("!<arch>"))return await ar.ignore(8),await ar.readToken(new Token$s.StringType(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(ur([137,80,78,71,13,10,26,10])){await ar.ignore(8);async function dr(){return{length:await ar.readToken(Token$s.INT32_BE),type:await ar.readToken(new Token$s.StringType(4,"binary"))}}do{const fr=await dr();if(fr.length<0)return;switch(fr.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await ar.ignore(fr.length+4)}}while(ar.position+8<ar.fileInfo.size);return{ext:"png",mime:"image/png"}}if(ur([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(ur([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(ur([102,114,101,101],{offset:4})||ur([109,100,97,116],{offset:4})||ur([109,111,111,118],{offset:4})||ur([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(ur([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(cr("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(ur([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(ur([48,38,178,117,142,102,207,17,166,217])){async function dr(){const fr=Buffer.alloc(16);return await ar.readBuffer(fr),{id:fr,size:Number(await ar.readToken(Token$s.UINT64_LE))}}for(await ar.ignore(30);ar.position+24<ar.fileInfo.size;){const fr=await dr();let pr=fr.size-24;if(_check(fr.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const mr=Buffer.alloc(16);if(pr-=await ar.readBuffer(mr),_check(mr,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(mr,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await ar.ignore(pr)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(ur([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((ur([126,16,4])||ur([126,24,4]))&&ur([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(ur([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(ur([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await ar.ignore(20),await ar.readToken(new Token$s.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(ur([255,10])||ur([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(ur([0,0,1,186])||ur([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(ur([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(ur([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(ur([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(ur([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await ar.peekBuffer(or,{length:Math.min(256,ar.fileInfo.size),mayBeLess:!0}),cr("BEGIN:")){if(cr("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(cr("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(cr("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(cr("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(cr("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(ur([4,0,0,0])&&or.length>=16){const dr=or.readUInt32LE(12);if(dr>12&&or.length>=dr+16)try{const fr=or.slice(16,dr+16).toString();if(JSON.parse(fr).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(ur([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(cr("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(ur([71],{offset:4})&&(ur([71],{offset:192})||ur([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(ur([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(ur([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(ur([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(ur([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(ur([76,80],{offset:34})&&(ur([0,0,1],{offset:8})||ur([1,0,2],{offset:8})||ur([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(ur([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await ar.peekBuffer(or,{length:Math.min(512,ar.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(or))return{ext:"tar",mime:"application/x-tar"};if(ur([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(cr("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(or.length>=2&&ur([255,224],{offset:0,mask:[255,224]})){if(ur([16],{offset:1,mask:[22]}))return ur([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(ur([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(ur([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(ur([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}const stream$1=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",async()=>{const ar=new stream.PassThrough;let or;stream.pipeline?or=stream.pipeline(readableStream,ar,()=>{}):or=readableStream.pipe(ar);const lr=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{const ur=await fromBuffer(lr);ar.fileType=ur}catch(ur){reject(ur)}resolve(or)})}),fileType={fromStream,fromTokenizer,fromBuffer,stream:stream$1};Object.defineProperty(fileType,"extensions",{get(){return new Set(supported.extensions)}});Object.defineProperty(fileType,"mimeTypes",{get(){return new Set(supported.mimeTypes)}});var core=fileType,contentType={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var PARAM_REGEXP=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,TEXT_REGEXP=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,TOKEN_REGEXP=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,QESC_REGEXP=/\\([\u000b\u0020-\u00ff])/g,QUOTE_REGEXP=/([\\"])/g,TYPE_REGEXP$1=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;contentType.format=format$2;contentType.parse=parse$2;function format$2(ar){if(!ar||typeof ar!="object")throw new TypeError("argument obj is required");var or=ar.parameters,lr=ar.type;if(!lr||!TYPE_REGEXP$1.test(lr))throw new TypeError("invalid type");var ur=lr;if(or&&typeof or=="object")for(var cr,dr=Object.keys(or).sort(),fr=0;fr<dr.length;fr++){if(cr=dr[fr],!TOKEN_REGEXP.test(cr))throw new TypeError("invalid parameter name");ur+="; "+cr+"="+qstring(or[cr])}return ur}function parse$2(ar){if(!ar)throw new TypeError("argument string is required");var or=typeof ar=="object"?getcontenttype(ar):ar;if(typeof or!="string")throw new TypeError("argument string is required to be a string");var lr=or.indexOf(";"),ur=lr!==-1?or.slice(0,lr).trim():or.trim();if(!TYPE_REGEXP$1.test(ur))throw new TypeError("invalid media type");var cr=new ContentType$1(ur.toLowerCase());if(lr!==-1){var dr,fr,pr;for(PARAM_REGEXP.lastIndex=lr;fr=PARAM_REGEXP.exec(or);){if(fr.index!==lr)throw new TypeError("invalid parameter format");lr+=fr[0].length,dr=fr[1].toLowerCase(),pr=fr[2],pr.charCodeAt(0)===34&&(pr=pr.slice(1,-1),pr.indexOf("\\")!==-1&&(pr=pr.replace(QESC_REGEXP,"$1"))),cr.parameters[dr]=pr}if(lr!==or.length)throw new TypeError("invalid parameter format")}return cr}function getcontenttype(ar){var or;if(typeof ar.getHeader=="function"?or=ar.getHeader("content-type"):typeof ar.headers=="object"&&(or=ar.headers&&ar.headers["content-type"]),typeof or!="string")throw new TypeError("content-type header is missing from object");return or}function qstring(ar){var or=String(ar);if(TOKEN_REGEXP.test(or))return or;if(or.length>0&&!TEXT_REGEXP.test(or))throw new TypeError("invalid parameter value");return'"'+or.replace(QUOTE_REGEXP,"\\$1")+'"'}function ContentType$1(ar){this.parameters=Object.create(null),this.type=ar}var mediaTyper={};/*!
 * media-typer
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */var SUBTYPE_NAME_REGEXP=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/,TYPE_NAME_REGEXP=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/,TYPE_REGEXP=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;mediaTyper.format=format$1;mediaTyper.parse=parse$1;mediaTyper.test=test;function format$1(ar){if(!ar||typeof ar!="object")throw new TypeError("argument obj is required");var or=ar.subtype,lr=ar.suffix,ur=ar.type;if(!ur||!TYPE_NAME_REGEXP.test(ur))throw new TypeError("invalid type");if(!or||!SUBTYPE_NAME_REGEXP.test(or))throw new TypeError("invalid subtype");var cr=ur+"/"+or;if(lr){if(!TYPE_NAME_REGEXP.test(lr))throw new TypeError("invalid suffix");cr+="+"+lr}return cr}function test(ar){if(!ar)throw new TypeError("argument string is required");if(typeof ar!="string")throw new TypeError("argument string is required to be a string");return TYPE_REGEXP.test(ar.toLowerCase())}function parse$1(ar){if(!ar)throw new TypeError("argument string is required");if(typeof ar!="string")throw new TypeError("argument string is required to be a string");var or=TYPE_REGEXP.exec(ar.toLowerCase());if(!or)throw new TypeError("invalid media type");var lr=or[1],ur=or[2],cr,dr=ur.lastIndexOf("+");return dr!==-1&&(cr=ur.substr(dr+1),ur=ur.substr(0,dr)),new MediaType(lr,ur,cr)}function MediaType(ar,or,lr){this.type=ar,this.subtype=or,this.suffix=lr}var MetadataCollector$1={},type={},types={};(function(ar){Object.defineProperty(ar,"__esModule",{value:!0}),ar.TrackType=ar.TargetType=ar.DataType=void 0,function(or){or[or.string=0]="string",or[or.uint=1]="uint",or[or.uid=2]="uid",or[or.bool=3]="bool",or[or.binary=4]="binary",or[or.float=5]="float"}(ar.DataType||(ar.DataType={})),function(or){or[or.shot=10]="shot",or[or.scene=20]="scene",or[or.track=30]="track",or[or.part=40]="part",or[or.album=50]="album",or[or.edition=60]="edition",or[or.collection=70]="collection"}(ar.TargetType||(ar.TargetType={})),function(or){or[or.video=1]="video",or[or.audio=2]="audio",or[or.complex=3]="complex",or[or.logo=4]="logo",or[or.subtitle=17]="subtitle",or[or.button=18]="button",or[or.control=32]="control"}(ar.TrackType||(ar.TrackType={}))})(types);(function(ar){Object.defineProperty(ar,"__esModule",{value:!0}),ar.TrackType=void 0;var or=types;Object.defineProperty(ar,"TrackType",{enumerable:!0,get:function(){return or.TrackType}})})(type);var GenericTagTypes={};(function(ar){Object.defineProperty(ar,"__esModule",{value:!0}),ar.isUnique=ar.isSingleton=ar.commonTags=void 0,ar.commonTags={year:{multiple:!1},track:{multiple:!1},disk:{multiple:!1},title:{multiple:!1},artist:{multiple:!1},artists:{multiple:!0,unique:!0},albumartist:{multiple:!1},album:{multiple:!1},date:{multiple:!1},originaldate:{multiple:!1},originalyear:{multiple:!1},comment:{multiple:!0,unique:!1},genre:{multiple:!0,unique:!0},picture:{multiple:!0,unique:!0},composer:{multiple:!0,unique:!0},lyrics:{multiple:!0,unique:!1},albumsort:{multiple:!1,unique:!0},titlesort:{multiple:!1,unique:!0},work:{multiple:!1,unique:!0},artistsort:{multiple:!1,unique:!0},albumartistsort:{multiple:!1,unique:!0},composersort:{multiple:!1,unique:!0},lyricist:{multiple:!0,unique:!0},writer:{multiple:!0,unique:!0},conductor:{multiple:!0,unique:!0},remixer:{multiple:!0,unique:!0},arranger:{multiple:!0,unique:!0},engineer:{multiple:!0,unique:!0},producer:{multiple:!0,unique:!0},technician:{multiple:!0,unique:!0},djmixer:{multiple:!0,unique:!0},mixer:{multiple:!0,unique:!0},label:{multiple:!0,unique:!0},grouping:{multiple:!1},subtitle:{multiple:!0},discsubtitle:{multiple:!1},totaltracks:{multiple:!1},totaldiscs:{multiple:!1},compilation:{multiple:!1},rating:{multiple:!0},bpm:{multiple:!1},mood:{multiple:!1},media:{multiple:!1},catalognumber:{multiple:!0,unique:!0},tvShow:{multiple:!1},tvShowSort:{multiple:!1},tvSeason:{multiple:!1},tvEpisode:{multiple:!1},tvEpisodeId:{multiple:!1},tvNetwork:{multiple:!1},podcast:{multiple:!1},podcasturl:{multiple:!1},releasestatus:{multiple:!1},releasetype:{multiple:!0},releasecountry:{multiple:!1},script:{multiple:!1},language:{multiple:!1},copyright:{multiple:!1},license:{multiple:!1},encodedby:{multiple:!1},encodersettings:{multiple:!1},gapless:{multiple:!1},barcode:{multiple:!1},isrc:{multiple:!0},asin:{multiple:!1},musicbrainz_recordingid:{multiple:!1},musicbrainz_trackid:{multiple:!1},musicbrainz_albumid:{multiple:!1},musicbrainz_artistid:{multiple:!0},musicbrainz_albumartistid:{multiple:!0},musicbrainz_releasegroupid:{multiple:!1},musicbrainz_workid:{multiple:!1},musicbrainz_trmid:{multiple:!1},musicbrainz_discid:{multiple:!1},acoustid_id:{multiple:!1},acoustid_fingerprint:{multiple:!1},musicip_puid:{multiple:!1},musicip_fingerprint:{multiple:!1},website:{multiple:!1},"performer:instrument":{multiple:!0,unique:!0},averageLevel:{multiple:!1},peakLevel:{multiple:!1},notes:{multiple:!0,unique:!1},key:{multiple:!1},originalalbum:{multiple:!1},originalartist:{multiple:!1},discogs_artist_id:{multiple:!0,unique:!0},discogs_release_id:{multiple:!1},discogs_label_id:{multiple:!1},discogs_master_release_id:{multiple:!1},discogs_votes:{multiple:!1},discogs_rating:{multiple:!1},replaygain_track_peak:{multiple:!1},replaygain_track_gain:{multiple:!1},replaygain_album_peak:{multiple:!1},replaygain_album_gain:{multiple:!1},replaygain_track_minmax:{multiple:!1},replaygain_album_minmax:{multiple:!1},replaygain_undo:{multiple:!1},description:{multiple:!0},longDescription:{multiple:!1},category:{multiple:!0},hdVideo:{multiple:!1},keywords:{multiple:!0},movement:{multiple:!1},movementIndex:{multiple:!1},movementTotal:{multiple:!1},podcastId:{multiple:!1},showMovement:{multiple:!1},stik:{multiple:!1}};function or(ur){return ar.commonTags.hasOwnProperty(ur)&&!ar.commonTags[ur].multiple}ar.isSingleton=or;function lr(ur){return!ar.commonTags[ur].multiple||ar.commonTags[ur].unique}ar.isUnique=lr})(GenericTagTypes);var CombinedTagMapper$1={},ID3v1TagMap={},GenericTagMapper={};Object.defineProperty(GenericTagMapper,"__esModule",{value:!0});GenericTagMapper.CommonTagMapper=void 0;class CommonTagMapper{static toIntOrNull(or){const lr=parseInt(or,10);return isNaN(lr)?null:lr}static normalizeTrack(or){const lr=or.toString().split("/");return{no:parseInt(lr[0],10)||null,of:parseInt(lr[1],10)||null}}constructor(or,lr){this.tagTypes=or,this.tagMap=lr}mapGenericTag(or,lr){or={id:or.id,value:or.value},this.postMap(or,lr);const ur=this.getCommonName(or.id);return ur?{id:ur,value:or.value}:null}getCommonName(or){return this.tagMap[or]}postMap(or,lr){}}CommonTagMapper.maxRatingScore=1;GenericTagMapper.CommonTagMapper=CommonTagMapper;Object.defineProperty(ID3v1TagMap,"__esModule",{value:!0});ID3v1TagMap.ID3v1TagMapper=void 0;const GenericTagMapper_1$6=GenericTagMapper,id3v1TagMap={title:"title",artist:"artist",album:"album",year:"year",comment:"comment",track:"track",genre:"genre"};class ID3v1TagMapper extends GenericTagMapper_1$6.CommonTagMapper{constructor(){super(["ID3v1"],id3v1TagMap)}}ID3v1TagMap.ID3v1TagMapper=ID3v1TagMapper;var ID3v24TagMapper$1={},CaseInsensitiveTagMap$1={};Object.defineProperty(CaseInsensitiveTagMap$1,"__esModule",{value:!0});CaseInsensitiveTagMap$1.CaseInsensitiveTagMap=void 0;const GenericTagMapper_1$5=GenericTagMapper;class CaseInsensitiveTagMap extends GenericTagMapper_1$5.CommonTagMapper{constructor(or,lr){const ur={};for(const cr of Object.keys(lr))ur[cr.toUpperCase()]=lr[cr];super(or,ur)}getCommonName(or){return this.tagMap[or.toUpperCase()]}}CaseInsensitiveTagMap$1.CaseInsensitiveTagMap=CaseInsensitiveTagMap;var Util={};Object.defineProperty(Util,"__esModule",{value:!0});Util.toRatio=Util.dbToRatio=Util.ratioToDb=Util.a2hex=Util.isBitSet=Util.getBitAllignedNumber=Util.stripNulls=Util.decodeString=Util.trimRightNull=Util.findZero=Util.getBit=void 0;function getBit(ar,or,lr){return(ar[or]&1<<lr)!==0}Util.getBit=getBit;function findZero(ar,or,lr,ur){let cr=or;if(ur==="utf16le"){for(;ar[cr]!==0||ar[cr+1]!==0;){if(cr>=lr)return lr;cr+=2}return cr}else{for(;ar[cr]!==0;){if(cr>=lr)return lr;cr++}return cr}}Util.findZero=findZero;function trimRightNull(ar){const or=ar.indexOf("\0");return or===-1?ar:ar.substr(0,or)}Util.trimRightNull=trimRightNull;function swapBytes(ar){const or=ar.length;if(or&1)throw new Error("Buffer length must be even");for(let lr=0;lr<or;lr+=2){const ur=ar[lr];ar[lr]=ar[lr+1],ar[lr+1]=ur}return ar}function decodeString(ar,or){if(ar[0]===255&&ar[1]===254)return decodeString(ar.subarray(2),or);if(or==="utf16le"&&ar[0]===254&&ar[1]===255){if(ar.length&1)throw new Error("Expected even number of octets for 16-bit unicode string");return decodeString(swapBytes(ar),or)}return Buffer.from(ar).toString(or)}Util.decodeString=decodeString;function stripNulls(ar){return ar=ar.replace(/^\x00+/g,""),ar=ar.replace(/\x00+$/g,""),ar}Util.stripNulls=stripNulls;function getBitAllignedNumber(ar,or,lr,ur){const cr=or+~~(lr/8),dr=lr%8;let fr=ar[cr];fr&=255>>dr;const pr=8-dr,mr=ur-pr;return mr<0?fr>>=8-dr-ur:mr>0&&(fr<<=mr,fr|=getBitAllignedNumber(ar,or,lr+pr,mr)),fr}Util.getBitAllignedNumber=getBitAllignedNumber;function isBitSet(ar,or,lr){return getBitAllignedNumber(ar,or,lr,1)===1}Util.isBitSet=isBitSet;function a2hex(ar){const or=[];for(let lr=0,ur=ar.length;lr<ur;lr++){const cr=Number(ar.charCodeAt(lr)).toString(16);or.push(cr.length===1?"0"+cr:cr)}return or.join(" ")}Util.a2hex=a2hex;function ratioToDb(ar){return 10*Math.log10(ar)}Util.ratioToDb=ratioToDb;function dbToRatio(ar){return Math.pow(10,ar/10)}Util.dbToRatio=dbToRatio;function toRatio(ar){const or=ar.split(" ").map(lr=>lr.trim().toLowerCase());if(or.length>=1){const lr=parseFloat(or[0]);return or.length===2&&or[1]==="db"?{dB:lr,ratio:dbToRatio(lr)}:{dB:ratioToDb(lr),ratio:lr}}}Util.toRatio=toRatio;Object.defineProperty(ID3v24TagMapper$1,"__esModule",{value:!0});ID3v24TagMapper$1.ID3v24TagMapper=void 0;const GenericTagMapper_1$4=GenericTagMapper,CaseInsensitiveTagMap_1$2=CaseInsensitiveTagMap$1,util$b=Util,id3v24TagMap={TIT2:"title",TPE1:"artist","TXXX:Artists":"artists",TPE2:"albumartist",TALB:"album",TDRV:"date",TORY:"originalyear",TPOS:"disk",TCON:"genre",APIC:"picture",TCOM:"composer","USLT:description":"lyrics",TSOA:"albumsort",TSOT:"titlesort",TOAL:"originalalbum",TSOP:"artistsort",TSO2:"albumartistsort",TSOC:"composersort",TEXT:"lyricist","TXXX:Writer":"writer",TPE3:"conductor",TPE4:"remixer","IPLS:arranger":"arranger","IPLS:engineer":"engineer","IPLS:producer":"producer","IPLS:DJ-mix":"djmixer","IPLS:mix":"mixer",TPUB:"label",TIT1:"grouping",TIT3:"subtitle",TRCK:"track",TCMP:"compilation",POPM:"rating",TBPM:"bpm",TMED:"media","TXXX:CATALOGNUMBER":"catalognumber","TXXX:MusicBrainz Album Status":"releasestatus","TXXX:MusicBrainz Album Type":"releasetype","TXXX:MusicBrainz Album Release Country":"releasecountry","TXXX:RELEASECOUNTRY":"releasecountry","TXXX:SCRIPT":"script",TLAN:"language",TCOP:"copyright",WCOP:"license",TENC:"encodedby",TSSE:"encodersettings","TXXX:BARCODE":"barcode","TXXX:ISRC":"isrc",TSRC:"isrc","TXXX:ASIN":"asin","TXXX:originalyear":"originalyear","UFID:http://musicbrainz.org":"musicbrainz_recordingid","TXXX:MusicBrainz Release Track Id":"musicbrainz_trackid","TXXX:MusicBrainz Album Id":"musicbrainz_albumid","TXXX:MusicBrainz Artist Id":"musicbrainz_artistid","TXXX:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","TXXX:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","TXXX:MusicBrainz Work Id":"musicbrainz_workid","TXXX:MusicBrainz TRM Id":"musicbrainz_trmid","TXXX:MusicBrainz Disc Id":"musicbrainz_discid","TXXX:ACOUSTID_ID":"acoustid_id","TXXX:Acoustid Id":"acoustid_id","TXXX:Acoustid Fingerprint":"acoustid_fingerprint","TXXX:MusicIP PUID":"musicip_puid","TXXX:MusicMagic Fingerprint":"musicip_fingerprint",WOAR:"website",TDRC:"date",TYER:"year",TDOR:"originaldate","TIPL:arranger":"arranger","TIPL:engineer":"engineer","TIPL:producer":"producer","TIPL:DJ-mix":"djmixer","TIPL:mix":"mixer",TMOO:"mood",SYLT:"lyrics",TSST:"discsubtitle",TKEY:"key",COMM:"comment",TOPE:"originalartist","PRIV:AverageLevel":"averageLevel","PRIV:PeakLevel":"peakLevel","TXXX:DISCOGS_ARTIST_ID":"discogs_artist_id","TXXX:DISCOGS_ARTISTS":"artists","TXXX:DISCOGS_ARTIST_NAME":"artists","TXXX:DISCOGS_ALBUM_ARTISTS":"albumartist","TXXX:DISCOGS_CATALOG":"catalognumber","TXXX:DISCOGS_COUNTRY":"releasecountry","TXXX:DISCOGS_DATE":"originaldate","TXXX:DISCOGS_LABEL":"label","TXXX:DISCOGS_LABEL_ID":"discogs_label_id","TXXX:DISCOGS_MASTER_RELEASE_ID":"discogs_master_release_id","TXXX:DISCOGS_RATING":"discogs_rating","TXXX:DISCOGS_RELEASED":"date","TXXX:DISCOGS_RELEASE_ID":"discogs_release_id","TXXX:DISCOGS_VOTES":"discogs_votes","TXXX:CATALOGID":"catalognumber","TXXX:STYLE":"genre","TXXX:REPLAYGAIN_TRACK_PEAK":"replaygain_track_peak","TXXX:REPLAYGAIN_TRACK_GAIN":"replaygain_track_gain","TXXX:REPLAYGAIN_ALBUM_PEAK":"replaygain_album_peak","TXXX:REPLAYGAIN_ALBUM_GAIN":"replaygain_album_gain","TXXX:MP3GAIN_MINMAX":"replaygain_track_minmax","TXXX:MP3GAIN_ALBUM_MINMAX":"replaygain_album_minmax","TXXX:MP3GAIN_UNDO":"replaygain_undo",MVNM:"movement",MVIN:"movementIndex",PCST:"podcast",TCAT:"category",TDES:"description",TDRL:"date",TGID:"podcastId",TKWD:"keywords",WFED:"podcasturl"};class ID3v24TagMapper extends CaseInsensitiveTagMap_1$2.CaseInsensitiveTagMap{static toRating(or){return{source:or.email,rating:or.rating>0?(or.rating-1)/254*GenericTagMapper_1$4.CommonTagMapper.maxRatingScore:void 0}}constructor(){super(["ID3v2.3","ID3v2.4"],id3v24TagMap)}postMap(or,lr){switch(or.id){case"UFID":or.value.owner_identifier==="http://musicbrainz.org"&&(or.id+=":"+or.value.owner_identifier,or.value=util$b.decodeString(or.value.identifier,"latin1"));break;case"PRIV":switch(or.value.owner_identifier){case"AverageLevel":case"PeakValue":or.id+=":"+or.value.owner_identifier,or.value=or.value.data.length===4?or.value.data.readUInt32LE(0):null,or.value===null&&lr.addWarning("Failed to parse PRIV:PeakValue");break;default:lr.addWarning(`Unknown PRIV owner-identifier: ${or.value.owner_identifier}`)}break;case"COMM":or.value=or.value?or.value.text:null;break;case"POPM":or.value=ID3v24TagMapper.toRating(or.value);break}}}ID3v24TagMapper$1.ID3v24TagMapper=ID3v24TagMapper;var AsfTagMapper$1={};Object.defineProperty(AsfTagMapper$1,"__esModule",{value:!0});AsfTagMapper$1.AsfTagMapper=void 0;const GenericTagMapper_1$3=GenericTagMapper,asfTagMap={Title:"title",Author:"artist","WM/AlbumArtist":"albumartist","WM/AlbumTitle":"album","WM/Year":"date","WM/OriginalReleaseTime":"originaldate","WM/OriginalReleaseYear":"originalyear",Description:"comment","WM/TrackNumber":"track","WM/PartOfSet":"disk","WM/Genre":"genre","WM/Composer":"composer","WM/Lyrics":"lyrics","WM/AlbumSortOrder":"albumsort","WM/TitleSortOrder":"titlesort","WM/ArtistSortOrder":"artistsort","WM/AlbumArtistSortOrder":"albumartistsort","WM/ComposerSortOrder":"composersort","WM/Writer":"lyricist","WM/Conductor":"conductor","WM/ModifiedBy":"remixer","WM/Engineer":"engineer","WM/Producer":"producer","WM/DJMixer":"djmixer","WM/Mixer":"mixer","WM/Publisher":"label","WM/ContentGroupDescription":"grouping","WM/SubTitle":"subtitle","WM/SetSubTitle":"discsubtitle","WM/IsCompilation":"compilation","WM/SharedUserRating":"rating","WM/BeatsPerMinute":"bpm","WM/Mood":"mood","WM/Media":"media","WM/CatalogNo":"catalognumber","MusicBrainz/Album Status":"releasestatus","MusicBrainz/Album Type":"releasetype","MusicBrainz/Album Release Country":"releasecountry","WM/Script":"script","WM/Language":"language",Copyright:"copyright",LICENSE:"license","WM/EncodedBy":"encodedby","WM/EncodingSettings":"encodersettings","WM/Barcode":"barcode","WM/ISRC":"isrc","MusicBrainz/Track Id":"musicbrainz_recordingid","MusicBrainz/Release Track Id":"musicbrainz_trackid","MusicBrainz/Album Id":"musicbrainz_albumid","MusicBrainz/Artist Id":"musicbrainz_artistid","MusicBrainz/Album Artist Id":"musicbrainz_albumartistid","MusicBrainz/Release Group Id":"musicbrainz_releasegroupid","MusicBrainz/Work Id":"musicbrainz_workid","MusicBrainz/TRM Id":"musicbrainz_trmid","MusicBrainz/Disc Id":"musicbrainz_discid","Acoustid/Id":"acoustid_id","Acoustid/Fingerprint":"acoustid_fingerprint","MusicIP/PUID":"musicip_puid","WM/ARTISTS":"artists","WM/InitialKey":"key",ASIN:"asin","WM/Work":"work","WM/AuthorURL":"website","WM/Picture":"picture"};class AsfTagMapper extends GenericTagMapper_1$3.CommonTagMapper{static toRating(or){return{rating:parseFloat(or+1)/5}}constructor(){super(["asf"],asfTagMap)}postMap(or){switch(or.id){case"WM/SharedUserRating":const lr=or.id.split(":");or.value=AsfTagMapper.toRating(or.value),or.id=lr[0];break}}}AsfTagMapper$1.AsfTagMapper=AsfTagMapper;var ID3v22TagMapper={};(function(ar){Object.defineProperty(ar,"__esModule",{value:!0}),ar.ID3v22TagMapper=ar.id3v22TagMap=void 0;const or=CaseInsensitiveTagMap$1;ar.id3v22TagMap={TT2:"title",TP1:"artist",TP2:"albumartist",TAL:"album",TYE:"year",COM:"comment",TRK:"track",TPA:"disk",TCO:"genre",PIC:"picture",TCM:"composer",TOR:"originaldate",TOT:"originalalbum",TXT:"lyricist",TP3:"conductor",TPB:"label",TT1:"grouping",TT3:"subtitle",TLA:"language",TCR:"copyright",WCP:"license",TEN:"encodedby",TSS:"encodersettings",WAR:"website","COM:iTunPGAP":"gapless",PCS:"podcast",TCP:"compilation",TDR:"date",TS2:"albumartistsort",TSA:"albumsort",TSC:"composersort",TSP:"artistsort",TST:"titlesort",WFD:"podcasturl",TBP:"bpm"};class lr extends or.CaseInsensitiveTagMap{constructor(){super(["ID3v2.2"],ar.id3v22TagMap)}}ar.ID3v22TagMapper=lr})(ID3v22TagMapper);var APEv2TagMapper$1={};Object.defineProperty(APEv2TagMapper$1,"__esModule",{value:!0});APEv2TagMapper$1.APEv2TagMapper=void 0;const CaseInsensitiveTagMap_1$1=CaseInsensitiveTagMap$1,apev2TagMap={Title:"title",Artist:"artist",Artists:"artists","Album Artist":"albumartist",Album:"album",Year:"date",Originalyear:"originalyear",Originaldate:"originaldate",Comment:"comment",Track:"track",Disc:"disk",DISCNUMBER:"disk",Genre:"genre","Cover Art (Front)":"picture","Cover Art (Back)":"picture",Composer:"composer",Lyrics:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",Lyricist:"lyricist",Writer:"writer",Conductor:"conductor",MixArtist:"remixer",Arranger:"arranger",Engineer:"engineer",Producer:"producer",DJMixer:"djmixer",Mixer:"mixer",Label:"label",Grouping:"grouping",Subtitle:"subtitle",DiscSubtitle:"discsubtitle",Compilation:"compilation",BPM:"bpm",Mood:"mood",Media:"media",CatalogNumber:"catalognumber",MUSICBRAINZ_ALBUMSTATUS:"releasestatus",MUSICBRAINZ_ALBUMTYPE:"releasetype",RELEASECOUNTRY:"releasecountry",Script:"script",Language:"language",Copyright:"copyright",LICENSE:"license",EncodedBy:"encodedby",EncoderSettings:"encodersettings",Barcode:"barcode",ISRC:"isrc",ASIN:"asin",musicbrainz_trackid:"musicbrainz_recordingid",musicbrainz_releasetrackid:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",Acoustid_Id:"acoustid_id",ACOUSTID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",Weblink:"website",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",MP3GAIN_MINMAX:"replaygain_track_minmax",MP3GAIN_UNDO:"replaygain_undo"};class APEv2TagMapper extends CaseInsensitiveTagMap_1$1.CaseInsensitiveTagMap{constructor(){super(["APEv2"],apev2TagMap)}}APEv2TagMapper$1.APEv2TagMapper=APEv2TagMapper;var MP4TagMapper={};(function(ar){Object.defineProperty(ar,"__esModule",{value:!0}),ar.MP4TagMapper=ar.tagType=void 0;const or=CaseInsensitiveTagMap$1,lr={"nam":"title","ART":"artist",aART:"albumartist","----:com.apple.iTunes:Band":"albumartist","alb":"album","day":"date","cmt":"comment","com":"comment",trkn:"track",disk:"disk","gen":"genre",covr:"picture","wrt":"composer","lyr":"lyrics",soal:"albumsort",sonm:"titlesort",soar:"artistsort",soaa:"albumartistsort",soco:"composersort","----:com.apple.iTunes:LYRICIST":"lyricist","----:com.apple.iTunes:CONDUCTOR":"conductor","----:com.apple.iTunes:REMIXER":"remixer","----:com.apple.iTunes:ENGINEER":"engineer","----:com.apple.iTunes:PRODUCER":"producer","----:com.apple.iTunes:DJMIXER":"djmixer","----:com.apple.iTunes:MIXER":"mixer","----:com.apple.iTunes:LABEL":"label","grp":"grouping","----:com.apple.iTunes:SUBTITLE":"subtitle","----:com.apple.iTunes:DISCSUBTITLE":"discsubtitle",cpil:"compilation",tmpo:"bpm","----:com.apple.iTunes:MOOD":"mood","----:com.apple.iTunes:MEDIA":"media","----:com.apple.iTunes:CATALOGNUMBER":"catalognumber",tvsh:"tvShow",tvsn:"tvSeason",tves:"tvEpisode",sosn:"tvShowSort",tven:"tvEpisodeId",tvnn:"tvNetwork",pcst:"podcast",purl:"podcasturl","----:com.apple.iTunes:MusicBrainz Album Status":"releasestatus","----:com.apple.iTunes:MusicBrainz Album Type":"releasetype","----:com.apple.iTunes:MusicBrainz Album Release Country":"releasecountry","----:com.apple.iTunes:SCRIPT":"script","----:com.apple.iTunes:LANGUAGE":"language",cprt:"copyright","cpy":"copyright","----:com.apple.iTunes:LICENSE":"license","too":"encodedby",pgap:"gapless","----:com.apple.iTunes:BARCODE":"barcode","----:com.apple.iTunes:ISRC":"isrc","----:com.apple.iTunes:ASIN":"asin","----:com.apple.iTunes:NOTES":"comment","----:com.apple.iTunes:MusicBrainz Track Id":"musicbrainz_recordingid","----:com.apple.iTunes:MusicBrainz Release Track Id":"musicbrainz_trackid","----:com.apple.iTunes:MusicBrainz Album Id":"musicbrainz_albumid","----:com.apple.iTunes:MusicBrainz Artist Id":"musicbrainz_artistid","----:com.apple.iTunes:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","----:com.apple.iTunes:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","----:com.apple.iTunes:MusicBrainz Work Id":"musicbrainz_workid","----:com.apple.iTunes:MusicBrainz TRM Id":"musicbrainz_trmid","----:com.apple.iTunes:MusicBrainz Disc Id":"musicbrainz_discid","----:com.apple.iTunes:Acoustid Id":"acoustid_id","----:com.apple.iTunes:Acoustid Fingerprint":"acoustid_fingerprint","----:com.apple.iTunes:MusicIP PUID":"musicip_puid","----:com.apple.iTunes:fingerprint":"musicip_fingerprint","----:com.apple.iTunes:replaygain_track_gain":"replaygain_track_gain","----:com.apple.iTunes:replaygain_track_peak":"replaygain_track_peak","----:com.apple.iTunes:replaygain_album_gain":"replaygain_album_gain","----:com.apple.iTunes:replaygain_album_peak":"replaygain_album_peak","----:com.apple.iTunes:replaygain_track_minmax":"replaygain_track_minmax","----:com.apple.iTunes:replaygain_album_minmax":"replaygain_album_minmax","----:com.apple.iTunes:replaygain_undo":"replaygain_undo",gnre:"genre","----:com.apple.iTunes:ALBUMARTISTSORT":"albumartistsort","----:com.apple.iTunes:ARTISTS":"artists","----:com.apple.iTunes:ORIGINALDATE":"originaldate","----:com.apple.iTunes:ORIGINALYEAR":"originalyear",desc:"description",ldes:"longDescription","mvn":"movement","mvi":"movementIndex","mvc":"movementTotal","wrk":"work",catg:"category",egid:"podcastId",hdvd:"hdVideo",keyw:"keywords",shwm:"showMovement",stik:"stik",rate:"rating"};ar.tagType="iTunes";class ur extends or.CaseInsensitiveTagMap{constructor(){super([ar.tagType],lr)}postMap(dr,fr){switch(dr.id){case"rate":dr.value={source:void 0,rating:parseFloat(dr.value)/100};break}}}ar.MP4TagMapper=ur})(MP4TagMapper);var VorbisTagMapper$1={};Object.defineProperty(VorbisTagMapper$1,"__esModule",{value:!0});VorbisTagMapper$1.VorbisTagMapper=void 0;const GenericTagMapper_1$2=GenericTagMapper,vorbisTagMap={TITLE:"title",ARTIST:"artist",ARTISTS:"artists",ALBUMARTIST:"albumartist","ALBUM ARTIST":"albumartist",ALBUM:"album",DATE:"date",ORIGINALDATE:"originaldate",ORIGINALYEAR:"originalyear",COMMENT:"comment",TRACKNUMBER:"track",DISCNUMBER:"disk",GENRE:"genre",METADATA_BLOCK_PICTURE:"picture",COMPOSER:"composer",LYRICS:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",LYRICIST:"lyricist",WRITER:"writer",CONDUCTOR:"conductor",REMIXER:"remixer",ARRANGER:"arranger",ENGINEER:"engineer",PRODUCER:"producer",DJMIXER:"djmixer",MIXER:"mixer",LABEL:"label",GROUPING:"grouping",SUBTITLE:"subtitle",DISCSUBTITLE:"discsubtitle",TRACKTOTAL:"totaltracks",DISCTOTAL:"totaldiscs",COMPILATION:"compilation",RATING:"rating",BPM:"bpm",KEY:"key",MOOD:"mood",MEDIA:"media",CATALOGNUMBER:"catalognumber",RELEASESTATUS:"releasestatus",RELEASETYPE:"releasetype",RELEASECOUNTRY:"releasecountry",SCRIPT:"script",LANGUAGE:"language",COPYRIGHT:"copyright",LICENSE:"license",ENCODEDBY:"encodedby",ENCODERSETTINGS:"encodersettings",BARCODE:"barcode",ISRC:"isrc",ASIN:"asin",MUSICBRAINZ_TRACKID:"musicbrainz_recordingid",MUSICBRAINZ_RELEASETRACKID:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",ACOUSTID_ID:"acoustid_id",ACOUSTID_ID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",WEBSITE:"website",NOTES:"notes",TOTALTRACKS:"totaltracks",TOTALDISCS:"totaldiscs",DISCOGS_ARTIST_ID:"discogs_artist_id",DISCOGS_ARTISTS:"artists",DISCOGS_ARTIST_NAME:"artists",DISCOGS_ALBUM_ARTISTS:"albumartist",DISCOGS_CATALOG:"catalognumber",DISCOGS_COUNTRY:"releasecountry",DISCOGS_DATE:"originaldate",DISCOGS_LABEL:"label",DISCOGS_LABEL_ID:"discogs_label_id",DISCOGS_MASTER_RELEASE_ID:"discogs_master_release_id",DISCOGS_RATING:"discogs_rating",DISCOGS_RELEASED:"date",DISCOGS_RELEASE_ID:"discogs_release_id",DISCOGS_VOTES:"discogs_votes",CATALOGID:"catalognumber",STYLE:"genre",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",REPLAYGAIN_ALBUM_GAIN:"replaygain_album_gain",REPLAYGAIN_ALBUM_PEAK:"replaygain_album_peak",REPLAYGAIN_MINMAX:"replaygain_track_minmax",REPLAYGAIN_ALBUM_MINMAX:"replaygain_album_minmax",REPLAYGAIN_UNDO:"replaygain_undo"};class VorbisTagMapper extends GenericTagMapper_1$2.CommonTagMapper{static toRating(or,lr,ur){return{source:or&&or.toLowerCase(),rating:parseFloat(lr)/ur*GenericTagMapper_1$2.CommonTagMapper.maxRatingScore}}constructor(){super(["vorbis"],vorbisTagMap)}postMap(or){if(or.id==="RATING")or.value=VorbisTagMapper.toRating(void 0,or.value,100);else if(or.id.indexOf("RATING:")===0){const lr=or.id.split(":");or.value=VorbisTagMapper.toRating(lr[1],or.value,1),or.id=lr[0]}}}VorbisTagMapper$1.VorbisTagMapper=VorbisTagMapper;var RiffInfoTagMap={};(function(ar){Object.defineProperty(ar,"__esModule",{value:!0}),ar.RiffInfoTagMapper=ar.riffInfoTagMap=void 0;const or=GenericTagMapper;ar.riffInfoTagMap={IART:"artist",ICRD:"date",INAM:"title",TITL:"title",IPRD:"album",ITRK:"track",IPRT:"track",COMM:"comment",ICMT:"comment",ICNT:"releasecountry",GNRE:"genre",IWRI:"writer",RATE:"rating",YEAR:"year",ISFT:"encodedby",CODE:"encodedby",TURL:"website",IGNR:"genre",IENG:"engineer",ITCH:"technician",IMED:"media",IRPD:"album"};class lr extends or.CommonTagMapper{constructor(){super(["exif"],ar.riffInfoTagMap)}}ar.RiffInfoTagMapper=lr})(RiffInfoTagMap);var MatroskaTagMapper$1={};Object.defineProperty(MatroskaTagMapper$1,"__esModule",{value:!0});MatroskaTagMapper$1.MatroskaTagMapper=void 0;const CaseInsensitiveTagMap_1=CaseInsensitiveTagMap$1,ebmlTagMap={"segment:title":"title","album:ARTIST":"albumartist","album:ARTISTSORT":"albumartistsort","album:TITLE":"album","album:DATE_RECORDED":"originaldate","album:PART_NUMBER":"disk","album:TOTAL_PARTS":"totaltracks","track:ARTIST":"artist","track:ARTISTSORT":"artistsort","track:TITLE":"title","track:PART_NUMBER":"track","track:MUSICBRAINZ_TRACKID":"musicbrainz_recordingid","track:MUSICBRAINZ_ALBUMID":"musicbrainz_albumid","track:MUSICBRAINZ_ARTISTID":"musicbrainz_artistid","track:PUBLISHER":"label","track:GENRE":"genre","track:ENCODER":"encodedby","track:ENCODER_OPTIONS":"encodersettings","edition:TOTAL_PARTS":"totaldiscs",picture:"picture"};class MatroskaTagMapper extends CaseInsensitiveTagMap_1.CaseInsensitiveTagMap{constructor(){super(["matroska"],ebmlTagMap)}}MatroskaTagMapper$1.MatroskaTagMapper=MatroskaTagMapper;var AiffTagMap={};Object.defineProperty(AiffTagMap,"__esModule",{value:!0});AiffTagMap.AiffTagMapper=void 0;const GenericTagMapper_1$1=GenericTagMapper,tagMap={NAME:"title",AUTH:"artist","(c) ":"copyright",ANNO:"comment"};class AiffTagMapper extends GenericTagMapper_1$1.CommonTagMapper{constructor(){super(["AIFF"],tagMap)}}AiffTagMap.AiffTagMapper=AiffTagMapper;Object.defineProperty(CombinedTagMapper$1,"__esModule",{value:!0});CombinedTagMapper$1.CombinedTagMapper=void 0;const ID3v1TagMap_1=ID3v1TagMap,ID3v24TagMapper_1=ID3v24TagMapper$1,AsfTagMapper_1=AsfTagMapper$1,ID3v22TagMapper_1=ID3v22TagMapper,APEv2TagMapper_1=APEv2TagMapper$1,MP4TagMapper_1=MP4TagMapper,VorbisTagMapper_1=VorbisTagMapper$1,RiffInfoTagMap_1=RiffInfoTagMap,MatroskaTagMapper_1=MatroskaTagMapper$1,AiffTagMap_1=AiffTagMap;class CombinedTagMapper{constructor(){this.tagMappers={},[new ID3v1TagMap_1.ID3v1TagMapper,new ID3v22TagMapper_1.ID3v22TagMapper,new ID3v24TagMapper_1.ID3v24TagMapper,new MP4TagMapper_1.MP4TagMapper,new MP4TagMapper_1.MP4TagMapper,new VorbisTagMapper_1.VorbisTagMapper,new APEv2TagMapper_1.APEv2TagMapper,new AsfTagMapper_1.AsfTagMapper,new RiffInfoTagMap_1.RiffInfoTagMapper,new MatroskaTagMapper_1.MatroskaTagMapper,new AiffTagMap_1.AiffTagMapper].forEach(or=>{this.registerTagMapper(or)})}mapTag(or,lr,ur){if(this.tagMappers[or])return this.tagMappers[or].mapGenericTag(lr,ur);throw new Error("No generic tag mapper defined for tag-format: "+or)}registerTagMapper(or){for(const lr of or.tagTypes)this.tagMappers[lr]=or}}CombinedTagMapper$1.CombinedTagMapper=CombinedTagMapper;Object.defineProperty(MetadataCollector$1,"__esModule",{value:!0});MetadataCollector$1.joinArtists=MetadataCollector$1.MetadataCollector=void 0;const type_1$2=type,debug_1$n=browserExports$2,GenericTagTypes_1=GenericTagTypes,CombinedTagMapper_1=CombinedTagMapper$1,GenericTagMapper_1=GenericTagMapper,Util_1$1=Util,FileType$1=core,debug$n=(0,debug_1$n.default)("music-metadata:collector"),TagPriority=["matroska","APEv2","vorbis","ID3v2.4","ID3v2.3","ID3v2.2","exif","asf","iTunes","AIFF","ID3v1"];class MetadataCollector{constructor(or){this.opts=or,this.format={tagTypes:[],trackInfo:[]},this.native={},this.common={track:{no:null,of:null},disk:{no:null,of:null},movementIndex:{}},this.quality={warnings:[]},this.commonOrigin={},this.originPriority={},this.tagMapper=new CombinedTagMapper_1.CombinedTagMapper;let lr=1;for(const ur of TagPriority)this.originPriority[ur]=lr++;this.originPriority.artificial=500,this.originPriority.id3v1=600}hasAny(){return Object.keys(this.native).length>0}addStreamInfo(or){debug$n(`streamInfo: type=${type_1$2.TrackType[or.type]}, codec=${or.codecName}`),this.format.trackInfo.push(or)}setFormat(or,lr){debug$n(`format: ${or} = ${lr}`),this.format[or]=lr,this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"format",id:or,value:lr}})}addTag(or,lr,ur){debug$n(`tag ${or}.${lr} = ${ur}`),this.native[or]||(this.format.tagTypes.push(or),this.native[or]=[]),this.native[or].push({id:lr,value:ur}),this.toCommon(or,lr,ur)}addWarning(or){this.quality.warnings.push({message:or})}postMap(or,lr){switch(lr.id){case"artist":if(this.commonOrigin.artist===this.originPriority[or])return this.postMap("artificial",{id:"artists",value:lr.value});this.common.artists||this.setGenericTag("artificial",{id:"artists",value:lr.value});break;case"artists":if((!this.common.artist||this.commonOrigin.artist===this.originPriority.artificial)&&(!this.common.artists||this.common.artists.indexOf(lr.value)===-1)){const fr=(this.common.artists||[]).concat([lr.value]),mr={id:"artist",value:joinArtists(fr)};this.setGenericTag("artificial",mr)}break;case"picture":this.postFixPicture(lr.value).then(fr=>{fr!==null&&(lr.value=fr,this.setGenericTag(or,lr))});return;case"totaltracks":this.common.track.of=GenericTagMapper_1.CommonTagMapper.toIntOrNull(lr.value);return;case"totaldiscs":this.common.disk.of=GenericTagMapper_1.CommonTagMapper.toIntOrNull(lr.value);return;case"movementTotal":this.common.movementIndex.of=GenericTagMapper_1.CommonTagMapper.toIntOrNull(lr.value);return;case"track":case"disk":case"movementIndex":const ur=this.common[lr.id].of;this.common[lr.id]=GenericTagMapper_1.CommonTagMapper.normalizeTrack(lr.value),this.common[lr.id].of=ur??this.common[lr.id].of;return;case"bpm":case"year":case"originalyear":lr.value=parseInt(lr.value,10);break;case"date":const cr=parseInt(lr.value.substr(0,4),10);isNaN(cr)||(this.common.year=cr);break;case"discogs_label_id":case"discogs_release_id":case"discogs_master_release_id":case"discogs_artist_id":case"discogs_votes":lr.value=typeof lr.value=="string"?parseInt(lr.value,10):lr.value;break;case"replaygain_track_gain":case"replaygain_track_peak":case"replaygain_album_gain":case"replaygain_album_peak":lr.value=(0,Util_1$1.toRatio)(lr.value);break;case"replaygain_track_minmax":lr.value=lr.value.split(",").map(fr=>parseInt(fr,10));break;case"replaygain_undo":const dr=lr.value.split(",").map(fr=>parseInt(fr,10));lr.value={leftChannel:dr[0],rightChannel:dr[1]};break;case"gapless":case"compilation":case"podcast":case"showMovement":lr.value=lr.value==="1"||lr.value===1;break;case"isrc":if(this.common[lr.id]&&this.common[lr.id].indexOf(lr.value)!==-1)return;break}lr.value!==null&&this.setGenericTag(or,lr)}toCommonMetadata(){return{format:this.format,native:this.native,quality:this.quality,common:this.common}}async postFixPicture(or){if(or.data&&or.data.length>0){if(!or.format){const lr=await FileType$1.fromBuffer(or.data);if(lr)or.format=lr.mime;else return null}switch(or.format=or.format.toLocaleLowerCase(),or.format){case"image/jpg":or.format="image/jpeg"}return or}return this.addWarning("Empty picture tag found"),null}toCommon(or,lr,ur){const cr={id:lr,value:ur},dr=this.tagMapper.mapTag(or,cr,this);dr&&this.postMap(or,dr)}setGenericTag(or,lr){debug$n(`common.${lr.id} = ${lr.value}`);const ur=this.commonOrigin[lr.id]||1e3,cr=this.originPriority[or];if((0,GenericTagTypes_1.isSingleton)(lr.id))if(cr<=ur)this.common[lr.id]=lr.value,this.commonOrigin[lr.id]=cr;else return debug$n(`Ignore native tag (singleton): ${or}.${lr.id} = ${lr.value}`);else if(cr===ur)!(0,GenericTagTypes_1.isUnique)(lr.id)||this.common[lr.id].indexOf(lr.value)===-1?this.common[lr.id].push(lr.value):debug$n(`Ignore duplicate value: ${or}.${lr.id} = ${lr.value}`);else if(cr<ur)this.common[lr.id]=[lr.value],this.commonOrigin[lr.id]=cr;else return debug$n(`Ignore native tag (list): ${or}.${lr.id} = ${lr.value}`);this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"common",id:lr.id,value:lr.value}})}}MetadataCollector$1.MetadataCollector=MetadataCollector;function joinArtists(ar){return ar.length>2?ar.slice(0,ar.length-1).join(", ")+" & "+ar[ar.length-1]:ar.join(" & ")}MetadataCollector$1.joinArtists=joinArtists;var AiffParser={},ID3v2Parser$1={},FrameParser$1={},ID3v2Token={};(function(ar){Object.defineProperty(ar,"__esModule",{value:!0}),ar.TextEncodingToken=ar.ExtendedHeader=ar.ID3v2Header=ar.UINT32SYNCSAFE=ar.AttachedPictureType=void 0;const or=lib$1,lr=Util;(function(ur){ur[ur.Other=0]="Other",ur[ur["32x32 pixels 'file icon' (PNG only)"]=1]="32x32 pixels 'file icon' (PNG only)",ur[ur["Other file icon"]=2]="Other file icon",ur[ur["Cover (front)"]=3]="Cover (front)",ur[ur["Cover (back)"]=4]="Cover (back)",ur[ur["Leaflet page"]=5]="Leaflet page",ur[ur["Media (e.g. label side of CD)"]=6]="Media (e.g. label side of CD)",ur[ur["Lead artist/lead performer/soloist"]=7]="Lead artist/lead performer/soloist",ur[ur["Artist/performer"]=8]="Artist/performer",ur[ur.Conductor=9]="Conductor",ur[ur["Band/Orchestra"]=10]="Band/Orchestra",ur[ur.Composer=11]="Composer",ur[ur["Lyricist/text writer"]=12]="Lyricist/text writer",ur[ur["Recording Location"]=13]="Recording Location",ur[ur["During recording"]=14]="During recording",ur[ur["During performance"]=15]="During performance",ur[ur["Movie/video screen capture"]=16]="Movie/video screen capture",ur[ur["A bright coloured fish"]=17]="A bright coloured fish",ur[ur.Illustration=18]="Illustration",ur[ur["Band/artist logotype"]=19]="Band/artist logotype",ur[ur["Publisher/Studio logotype"]=20]="Publisher/Studio logotype"})(ar.AttachedPictureType||(ar.AttachedPictureType={})),ar.UINT32SYNCSAFE={get:(ur,cr)=>ur[cr+3]&127|ur[cr+2]<<7|ur[cr+1]<<14|ur[cr]<<21,len:4},ar.ID3v2Header={len:10,get:(ur,cr)=>({fileIdentifier:new or.StringType(3,"ascii").get(ur,cr),version:{major:or.INT8.get(ur,cr+3),revision:or.INT8.get(ur,cr+4)},flags:{unsynchronisation:lr.getBit(ur,cr+5,7),isExtendedHeader:lr.getBit(ur,cr+5,6),expIndicator:lr.getBit(ur,cr+5,5),footer:lr.getBit(ur,cr+5,4)},size:ar.UINT32SYNCSAFE.get(ur,cr+6)})},ar.ExtendedHeader={len:10,get:(ur,cr)=>({size:or.UINT32_BE.get(ur,cr),extendedFlags:or.UINT16_BE.get(ur,cr+4),sizeOfPadding:or.UINT32_BE.get(ur,cr+6),crcDataPresent:lr.getBit(ur,cr+4,31)})},ar.TextEncodingToken={len:1,get:(ur,cr)=>{switch(ur[cr]){case 0:return{encoding:"latin1"};case 1:return{encoding:"utf16le",bom:!0};case 2:return{encoding:"utf16le",bom:!1};case 3:return{encoding:"utf8",bom:!1};default:return{encoding:"utf8",bom:!1}}}}})(ID3v2Token);var ID3v1Parser={},BasicParser$1={};Object.defineProperty(BasicParser$1,"__esModule",{value:!0});BasicParser$1.BasicParser=void 0;class BasicParser{init(or,lr,ur){return this.metadata=or,this.tokenizer=lr,this.options=ur,this}}BasicParser$1.BasicParser=BasicParser;var APEv2Parser$1={},APEv2Token={},FourCC={};(function(ar){Object.defineProperty(ar,"__esModule",{value:!0}),ar.FourCcToken=void 0;const or=Util,lr=/^[\x21-\x7e][\x20-\x7e\x00()]{3}/;ar.FourCcToken={len:4,get:(ur,cr)=>{const dr=ur.toString("binary",cr,cr+ar.FourCcToken.len);if(!dr.match(lr))throw new Error(`FourCC contains invalid characters: ${or.a2hex(dr)} "${dr}"`);return dr},put:(ur,cr,dr)=>{const fr=Buffer.from(dr,"binary");if(fr.length!==4)throw new Error("Invalid length");return fr.copy(ur,cr)}}})(FourCC);(function(ar){Object.defineProperty(ar,"__esModule",{value:!0}),ar.isBitSet=ar.parseTagFlags=ar.TagField=ar.TagItemHeader=ar.TagFooter=ar.Header=ar.DescriptorParser=ar.DataType=void 0;const or=lib$1,lr=FourCC;(function(fr){fr[fr.text_utf8=0]="text_utf8",fr[fr.binary=1]="binary",fr[fr.external_info=2]="external_info",fr[fr.reserved=3]="reserved"})(ar.DataType||(ar.DataType={})),ar.DescriptorParser={len:52,get:(fr,pr)=>({ID:lr.FourCcToken.get(fr,pr),version:or.UINT32_LE.get(fr,pr+4)/1e3,descriptorBytes:or.UINT32_LE.get(fr,pr+8),headerBytes:or.UINT32_LE.get(fr,pr+12),seekTableBytes:or.UINT32_LE.get(fr,pr+16),headerDataBytes:or.UINT32_LE.get(fr,pr+20),apeFrameDataBytes:or.UINT32_LE.get(fr,pr+24),apeFrameDataBytesHigh:or.UINT32_LE.get(fr,pr+28),terminatingDataBytes:or.UINT32_LE.get(fr,pr+32),fileMD5:new or.Uint8ArrayType(16).get(fr,pr+36)})},ar.Header={len:24,get:(fr,pr)=>({compressionLevel:or.UINT16_LE.get(fr,pr),formatFlags:or.UINT16_LE.get(fr,pr+2),blocksPerFrame:or.UINT32_LE.get(fr,pr+4),finalFrameBlocks:or.UINT32_LE.get(fr,pr+8),totalFrames:or.UINT32_LE.get(fr,pr+12),bitsPerSample:or.UINT16_LE.get(fr,pr+16),channel:or.UINT16_LE.get(fr,pr+18),sampleRate:or.UINT32_LE.get(fr,pr+20)})},ar.TagFooter={len:32,get:(fr,pr)=>({ID:new or.StringType(8,"ascii").get(fr,pr),version:or.UINT32_LE.get(fr,pr+8),size:or.UINT32_LE.get(fr,pr+12),fields:or.UINT32_LE.get(fr,pr+16),flags:cr(or.UINT32_LE.get(fr,pr+20))})},ar.TagItemHeader={len:8,get:(fr,pr)=>({size:or.UINT32_LE.get(fr,pr),flags:cr(or.UINT32_LE.get(fr,pr+4))})};const ur=fr=>new or.Uint8ArrayType(fr.size-ar.TagFooter.len);ar.TagField=ur;function cr(fr){return{containsHeader:dr(fr,31),containsFooter:dr(fr,30),isHeader:dr(fr,31),readOnly:dr(fr,0),dataType:(fr&6)>>1}}ar.parseTagFlags=cr;function dr(fr,pr){return(fr&1<<pr)!==0}ar.isBitSet=dr})(APEv2Token);Object.defineProperty(APEv2Parser$1,"__esModule",{value:!0});APEv2Parser$1.APEv2Parser=void 0;const debug_1$m=browserExports$2,strtok3$4=core$1,token_types_1$2=lib$1,util$a=Util,BasicParser_1$b=BasicParser$1,APEv2Token_1=APEv2Token,debug$m=(0,debug_1$m.default)("music-metadata:parser:APEv2"),tagFormat$1="APEv2",preamble="APETAGEX";class APEv2Parser extends BasicParser_1$b.BasicParser{constructor(){super(...arguments),this.ape={}}static tryParseApeHeader(or,lr,ur){const cr=new APEv2Parser;return cr.init(or,lr,ur),cr.tryParseApeHeader()}static calculateDuration(or){let lr=or.totalFrames>1?or.blocksPerFrame*(or.totalFrames-1):0;return lr+=or.finalFrameBlocks,lr/or.sampleRate}static async findApeFooterOffset(or,lr){const ur=Buffer.alloc(APEv2Token_1.TagFooter.len);await or.randomRead(ur,0,APEv2Token_1.TagFooter.len,lr-APEv2Token_1.TagFooter.len);const cr=APEv2Token_1.TagFooter.get(ur,0);if(cr.ID==="APETAGEX")return debug$m(`APE footer header at offset=${lr}`),{footer:cr,offset:lr-cr.size}}static parseTagFooter(or,lr,ur){const cr=APEv2Token_1.TagFooter.get(lr,lr.length-APEv2Token_1.TagFooter.len);if(cr.ID!==preamble)throw new Error("Unexpected APEv2 Footer ID preamble value.");strtok3$4.fromBuffer(lr);const dr=new APEv2Parser;return dr.init(or,strtok3$4.fromBuffer(lr),ur),dr.parseTags(cr)}async tryParseApeHeader(){if(this.tokenizer.fileInfo.size&&this.tokenizer.fileInfo.size-this.tokenizer.position<APEv2Token_1.TagFooter.len){debug$m("No APEv2 header found, end-of-file reached");return}const or=await this.tokenizer.peekToken(APEv2Token_1.TagFooter);if(or.ID===preamble)return await this.tokenizer.ignore(APEv2Token_1.TagFooter.len),this.parseTags(or);if(debug$m(`APEv2 header not found at offset=${this.tokenizer.position}`),this.tokenizer.fileInfo.size){const lr=this.tokenizer.fileInfo.size-this.tokenizer.position,ur=Buffer.alloc(lr);return await this.tokenizer.readBuffer(ur),APEv2Parser.parseTagFooter(this.metadata,ur,this.options)}}async parse(){const or=await this.tokenizer.readToken(APEv2Token_1.DescriptorParser);if(or.ID!=="MAC ")throw new Error("Unexpected descriptor ID");this.ape.descriptor=or;const lr=or.descriptorBytes-APEv2Token_1.DescriptorParser.len,ur=await(lr>0?this.parseDescriptorExpansion(lr):this.parseHeader());return await this.tokenizer.ignore(ur.forwardBytes),this.tryParseApeHeader()}async parseTags(or){const lr=Buffer.alloc(256);let ur=or.size-APEv2Token_1.TagFooter.len;debug$m(`Parse APE tags at offset=${this.tokenizer.position}, size=${ur}`);for(let cr=0;cr<or.fields;cr++){if(ur<APEv2Token_1.TagItemHeader.len){this.metadata.addWarning(`APEv2 Tag-header: ${or.fields-cr} items remaining, but no more tag data to read.`);break}const dr=await this.tokenizer.readToken(APEv2Token_1.TagItemHeader);ur-=APEv2Token_1.TagItemHeader.len+dr.size,await this.tokenizer.peekBuffer(lr,{length:Math.min(lr.length,ur)});let fr=util$a.findZero(lr,0,lr.length);const pr=await this.tokenizer.readToken(new token_types_1$2.StringType(fr,"ascii"));switch(await this.tokenizer.ignore(1),ur-=pr.length+1,dr.flags.dataType){case APEv2Token_1.DataType.text_utf8:{const hr=(await this.tokenizer.readToken(new token_types_1$2.StringType(dr.size,"utf8"))).split(/\x00/g);for(const gr of hr)this.metadata.addTag(tagFormat$1,pr,gr);break}case APEv2Token_1.DataType.binary:if(this.options.skipCovers)await this.tokenizer.ignore(dr.size);else{const mr=Buffer.alloc(dr.size);await this.tokenizer.readBuffer(mr),fr=util$a.findZero(mr,0,mr.length);const hr=mr.toString("utf8",0,fr),gr=Buffer.from(mr.slice(fr+1));this.metadata.addTag(tagFormat$1,pr,{description:hr,data:gr})}break;case APEv2Token_1.DataType.external_info:debug$m(`Ignore external info ${pr}`),await this.tokenizer.ignore(dr.size);break;case APEv2Token_1.DataType.reserved:debug$m(`Ignore external info ${pr}`),this.metadata.addWarning(`APEv2 header declares a reserved datatype for "${pr}"`),await this.tokenizer.ignore(dr.size);break}}}async parseDescriptorExpansion(or){return await this.tokenizer.ignore(or),this.parseHeader()}async parseHeader(){const or=await this.tokenizer.readToken(APEv2Token_1.Header);return this.metadata.setFormat("lossless",!0),this.metadata.setFormat("container","Monkey's Audio"),this.metadata.setFormat("bitsPerSample",or.bitsPerSample),this.metadata.setFormat("sampleRate",or.sampleRate),this.metadata.setFormat("numberOfChannels",or.channel),this.metadata.setFormat("duration",APEv2Parser.calculateDuration(or)),{forwardBytes:this.ape.descriptor.seekTableBytes+this.ape.descriptor.headerDataBytes+this.ape.descriptor.apeFrameDataBytes+this.ape.descriptor.terminatingDataBytes}}}APEv2Parser$1.APEv2Parser=APEv2Parser;(function(ar){Object.defineProperty(ar,"__esModule",{value:!0}),ar.hasID3v1Header=ar.ID3v1Parser=ar.Genres=void 0;const or=browserExports$2,lr=lib$1,ur=Util,cr=BasicParser$1,dr=APEv2Parser$1,fr=(0,or.default)("music-metadata:parser:ID3v1");ar.Genres=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","Alt. Rock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast-Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Abstract","Art Rock","Baroque","Bhangra","Big Beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math Rock","New Romantic","Nu-Breakz","Post-Punk","Post-Rock","Psytrance","Shoegaze","Space Rock","Trop Rock","World Music","Neoclassical","Audiobook","Audio Theatre","Neue Deutsche Welle","Podcast","Indie Rock","G-Funk","Dubstep","Garage Rock","Psybient"];const pr={len:128,get:(vr,wr)=>{const _r=new mr(3).get(vr,wr);return _r==="TAG"?{header:_r,title:new mr(30).get(vr,wr+3),artist:new mr(30).get(vr,wr+33),album:new mr(30).get(vr,wr+63),year:new mr(4).get(vr,wr+93),comment:new mr(28).get(vr,wr+97),zeroByte:lr.UINT8.get(vr,wr+127),track:lr.UINT8.get(vr,wr+126),genre:lr.UINT8.get(vr,wr+127)}:null}};class mr extends lr.StringType{constructor(wr){super(wr,"binary")}get(wr,_r){let Cr=super.get(wr,_r);return Cr=ur.trimRightNull(Cr),Cr=Cr.trim(),Cr.length>0?Cr:void 0}}class hr extends cr.BasicParser{static getGenre(wr){if(wr<ar.Genres.length)return ar.Genres[wr]}async parse(){if(!this.tokenizer.fileInfo.size){fr("Skip checking for ID3v1 because the file-size is unknown");return}if(this.options.apeHeader){this.tokenizer.ignore(this.options.apeHeader.offset-this.tokenizer.position);const Cr=new dr.APEv2Parser;Cr.init(this.metadata,this.tokenizer,this.options),await Cr.parseTags(this.options.apeHeader.footer)}const wr=this.tokenizer.fileInfo.size-pr.len;if(this.tokenizer.position>wr){fr("Already consumed the last 128 bytes");return}const _r=await this.tokenizer.readToken(pr,wr);if(_r){fr("ID3v1 header found at: pos=%s",this.tokenizer.fileInfo.size-pr.len);for(const Sr of["title","artist","album","comment","track","year"])_r[Sr]&&_r[Sr]!==""&&this.addTag(Sr,_r[Sr]);const Cr=hr.getGenre(_r.genre);Cr&&this.addTag("genre",Cr)}else fr("ID3v1 header not found at: pos=%s",this.tokenizer.fileInfo.size-pr.len)}addTag(wr,_r){this.metadata.addTag("ID3v1",wr,_r)}}ar.ID3v1Parser=hr;async function gr(vr){if(vr.fileSize>=128){const wr=Buffer.alloc(3);return await vr.randomRead(wr,0,wr.length,vr.fileSize-128),wr.toString("binary")==="TAG"}return!1}ar.hasID3v1Header=gr})(ID3v1Parser);Object.defineProperty(FrameParser$1,"__esModule",{value:!0});FrameParser$1.FrameParser=FrameParser$1.parseGenre=void 0;const debug_1$l=browserExports$2,Token$r=lib$1,util$9=Util,ID3v2Token_1$3=ID3v2Token,ID3v1Parser_1$3=ID3v1Parser,debug$l=(0,debug_1$l.default)("music-metadata:id3v2:frame-parser"),defaultEnc="latin1";function parseGenre(ar){const or=[];let lr,ur="";for(const cr of ar)if(typeof lr=="string")if(cr==="("&&lr==="")ur+="(",lr=void 0;else if(cr===")"){ur!==""&&(or.push(ur),ur="");const dr=parseGenreCode(lr);dr&&or.push(dr),lr=void 0}else lr+=cr;else cr==="("?lr="":ur+=cr;return ur&&(or.length===0&&ur.match(/^\d*$/)&&(ur=ID3v1Parser_1$3.Genres[ur]),or.push(ur)),or}FrameParser$1.parseGenre=parseGenre;function parseGenreCode(ar){if(ar==="RX")return"Remix";if(ar==="CR")return"Cover";if(ar.match(/^\d*$/))return ID3v1Parser_1$3.Genres[ar]}class FrameParser{constructor(or,lr){this.major=or,this.warningCollector=lr}readData(or,lr,ur){if(or.length===0){this.warningCollector.addWarning(`id3v2.${this.major} header has empty tag type=${lr}`);return}const{encoding:cr,bom:dr}=ID3v2Token_1$3.TextEncodingToken.get(or,0),fr=or.length;let pr=0,mr=[];const hr=FrameParser.getNullTerminatorLength(cr);let gr;const vr={};switch(debug$l(`Parsing tag type=${lr}, encoding=${cr}, bom=${dr}`),lr!=="TXXX"&&lr[0]==="T"?"T*":lr){case"T*":case"IPLS":case"MVIN":case"MVNM":case"PCS":case"PCST":let wr;try{wr=util$9.decodeString(or.slice(1),cr).replace(/\x00+$/,"")}catch(Sr){this.warningCollector.addWarning(`id3v2.${this.major} type=${lr} header has invalid string value: ${Sr.message}`)}switch(lr){case"TMCL":case"TIPL":case"IPLS":mr=this.splitValue(lr,wr),mr=FrameParser.functionList(mr);break;case"TRK":case"TRCK":case"TPOS":mr=wr;break;case"TCOM":case"TEXT":case"TOLY":case"TOPE":case"TPE1":case"TSRC":mr=this.splitValue(lr,wr);break;case"TCO":case"TCON":mr=this.splitValue(lr,wr).map(Sr=>parseGenre(Sr)).reduce((Sr,Dr)=>Sr.concat(Dr),[]);break;case"PCS":case"PCST":mr=this.major>=4?this.splitValue(lr,wr):[wr],mr=Array.isArray(mr)&&mr[0]===""?1:0;break;default:mr=this.major>=4?this.splitValue(lr,wr):[wr]}break;case"TXXX":mr=FrameParser.readIdentifierAndData(or,pr+1,fr,cr),mr={description:mr.id,text:this.splitValue(lr,util$9.decodeString(mr.data,cr).replace(/\x00+$/,""))};break;case"PIC":case"APIC":if(ur){const Sr={};switch(pr+=1,this.major){case 2:Sr.format=util$9.decodeString(or.slice(pr,pr+3),"latin1"),pr+=3;break;case 3:case 4:gr=util$9.findZero(or,pr,fr,defaultEnc),Sr.format=util$9.decodeString(or.slice(pr,gr),defaultEnc),pr=gr+1;break;default:throw new Error("Warning: unexpected major versionIndex: "+this.major)}Sr.format=FrameParser.fixPictureMimeType(Sr.format),Sr.type=ID3v2Token_1$3.AttachedPictureType[or[pr]],pr+=1,gr=util$9.findZero(or,pr,fr,cr),Sr.description=util$9.decodeString(or.slice(pr,gr),cr),pr=gr+hr,Sr.data=Buffer.from(or.slice(pr,fr)),mr=Sr}break;case"CNT":case"PCNT":mr=Token$r.UINT32_BE.get(or,0);break;case"SYLT":for(pr+=7,mr=[];pr<fr;){const Sr=or.slice(pr,pr=util$9.findZero(or,pr,fr,cr));pr+=5,mr.push(util$9.decodeString(Sr,cr))}break;case"ULT":case"USLT":case"COM":case"COMM":pr+=1,vr.language=util$9.decodeString(or.slice(pr,pr+3),defaultEnc),pr+=3,gr=util$9.findZero(or,pr,fr,cr),vr.description=util$9.decodeString(or.slice(pr,gr),cr),pr=gr+hr,vr.text=util$9.decodeString(or.slice(pr,fr),cr).replace(/\x00+$/,""),mr=[vr];break;case"UFID":mr=FrameParser.readIdentifierAndData(or,pr,fr,defaultEnc),mr={owner_identifier:mr.id,identifier:mr.data};break;case"PRIV":mr=FrameParser.readIdentifierAndData(or,pr,fr,defaultEnc),mr={owner_identifier:mr.id,data:mr.data};break;case"POPM":gr=util$9.findZero(or,pr,fr,defaultEnc);const _r=util$9.decodeString(or.slice(pr,gr),defaultEnc);pr=gr+1;const Cr=fr-pr;mr={email:_r,rating:Token$r.UINT8.get(or,pr),counter:Cr>=5?Token$r.UINT32_BE.get(or,pr+1):void 0};break;case"GEOB":{gr=util$9.findZero(or,pr+1,fr,cr);const Sr=util$9.decodeString(or.slice(pr+1,gr),defaultEnc);pr=gr+1,gr=util$9.findZero(or,pr,fr-pr,cr);const Dr=util$9.decodeString(or.slice(pr,gr),defaultEnc);pr=gr+1,gr=util$9.findZero(or,pr,fr-pr,cr);const Er=util$9.decodeString(or.slice(pr,gr),defaultEnc);mr={type:Sr,filename:Dr,description:Er,data:or.slice(pr+1,fr)};break}case"WCOM":case"WCOP":case"WOAF":case"WOAR":case"WOAS":case"WORS":case"WPAY":case"WPUB":mr=util$9.decodeString(or.slice(pr,gr),defaultEnc);break;case"WXXX":{gr=util$9.findZero(or,pr+1,fr,cr);const Sr=util$9.decodeString(or.slice(pr+1,gr),cr);pr=gr+(cr==="utf16le"?2:1),mr={description:Sr,url:util$9.decodeString(or.slice(pr,fr),defaultEnc)};break}case"WFD":case"WFED":mr=util$9.decodeString(or.slice(pr+1,util$9.findZero(or,pr+1,fr,cr)),cr);break;case"MCDI":{mr=or.slice(0,fr);break}default:debug$l("Warning: unsupported id3v2-tag-type: "+lr);break}return mr}static fixPictureMimeType(or){switch(or=or.toLocaleLowerCase(),or){case"jpg":return"image/jpeg";case"png":return"image/png"}return or}static functionList(or){const lr={};for(let ur=0;ur+1<or.length;ur+=2){const cr=or[ur+1].split(",");lr[or[ur]]=lr.hasOwnProperty(or[ur])?lr[or[ur]].concat(cr):cr}return lr}splitValue(or,lr){let ur;return this.major<4?(ur=lr.split(/\x00/g),ur.length>1?this.warningCollector.addWarning(`ID3v2.${this.major} ${or} uses non standard null-separator.`):ur=lr.split(/\//g)):ur=lr.split(/\x00/g),FrameParser.trimArray(ur)}static trimArray(or){return or.map(lr=>lr.replace(/\x00+$/,"").trim())}static readIdentifierAndData(or,lr,ur,cr){const dr=util$9.findZero(or,lr,ur,cr),fr=util$9.decodeString(or.slice(lr,dr),cr);return lr=dr+FrameParser.getNullTerminatorLength(cr),{id:fr,data:or.slice(lr,ur)}}static getNullTerminatorLength(or){return or==="utf16le"?2:1}}FrameParser$1.FrameParser=FrameParser;Object.defineProperty(ID3v2Parser$1,"__esModule",{value:!0});ID3v2Parser$1.ID3v2Parser=void 0;const Token$q=lib$1,util$8=Util,FrameParser_1=FrameParser$1,ID3v2Token_1$2=ID3v2Token;class ID3v2Parser{static removeUnsyncBytes(or){let lr=0,ur=0;for(;lr<or.length-1;)lr!==ur&&(or[ur]=or[lr]),lr+=or[lr]===255&&or[lr+1]===0?2:1,ur++;return lr<or.length&&(or[ur++]=or[lr]),or.slice(0,ur)}static getFrameHeaderLength(or){switch(or){case 2:return 6;case 3:case 4:return 10;default:throw new Error("header versionIndex is incorrect")}}static readFrameFlags(or){return{status:{tag_alter_preservation:util$8.getBit(or,0,6),file_alter_preservation:util$8.getBit(or,0,5),read_only:util$8.getBit(or,0,4)},format:{grouping_identity:util$8.getBit(or,1,7),compression:util$8.getBit(or,1,3),encryption:util$8.getBit(or,1,2),unsynchronisation:util$8.getBit(or,1,1),data_length_indicator:util$8.getBit(or,1,0)}}}static readFrameData(or,lr,ur,cr,dr){const fr=new FrameParser_1.FrameParser(ur,dr);switch(ur){case 2:return fr.readData(or,lr.id,cr);case 3:case 4:return lr.flags.format.unsynchronisation&&(or=ID3v2Parser.removeUnsyncBytes(or)),lr.flags.format.data_length_indicator&&(or=or.slice(4,or.length)),fr.readData(or,lr.id,cr);default:throw new Error("Unexpected majorVer: "+ur)}}static makeDescriptionTagName(or,lr){return or+(lr?":"+lr:"")}async parse(or,lr,ur){this.tokenizer=lr,this.metadata=or,this.options=ur;const cr=await this.tokenizer.readToken(ID3v2Token_1$2.ID3v2Header);if(cr.fileIdentifier!=="ID3")throw new Error("expected ID3-header file-identifier 'ID3' was not found");return this.id3Header=cr,this.headerType="ID3v2."+cr.version.major,cr.flags.isExtendedHeader?this.parseExtendedHeader():this.parseId3Data(cr.size)}async parseExtendedHeader(){const or=await this.tokenizer.readToken(ID3v2Token_1$2.ExtendedHeader),lr=or.size-ID3v2Token_1$2.ExtendedHeader.len;return lr>0?this.parseExtendedHeaderData(lr,or.size):this.parseId3Data(this.id3Header.size-or.size)}async parseExtendedHeaderData(or,lr){return await this.tokenizer.ignore(or),this.parseId3Data(this.id3Header.size-lr)}async parseId3Data(or){const lr=await this.tokenizer.readToken(new Token$q.Uint8ArrayType(or));for(const ur of this.parseMetadata(lr))if(ur.id==="TXXX"){if(ur.value)for(const cr of ur.value.text)this.addTag(ID3v2Parser.makeDescriptionTagName(ur.id,ur.value.description),cr)}else if(ur.id==="COM")for(const cr of ur.value)this.addTag(ID3v2Parser.makeDescriptionTagName(ur.id,cr.description),cr.text);else if(ur.id==="COMM")for(const cr of ur.value)this.addTag(ID3v2Parser.makeDescriptionTagName(ur.id,cr.description),cr);else if(Array.isArray(ur.value))for(const cr of ur.value)this.addTag(ur.id,cr);else this.addTag(ur.id,ur.value)}addTag(or,lr){this.metadata.addTag(this.headerType,or,lr)}parseMetadata(or){let lr=0;const ur=[];for(;lr!==or.length;){const cr=ID3v2Parser.getFrameHeaderLength(this.id3Header.version.major);if(lr+cr>or.length){this.metadata.addWarning("Illegal ID3v2 tag length");break}const dr=or.slice(lr,lr+=cr),fr=this.readFrameHeader(dr,this.id3Header.version.major),pr=or.slice(lr,lr+=fr.length),mr=ID3v2Parser.readFrameData(pr,fr,this.id3Header.version.major,!this.options.skipCovers,this.metadata);mr&&ur.push({id:fr.id,value:mr})}return ur}readFrameHeader(or,lr){let ur;switch(lr){case 2:ur={id:Buffer.from(or.slice(0,3)).toString("ascii"),length:Token$q.UINT24_BE.get(or,3)},ur.id.match(/[A-Z0-9]{3}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${ur.id}`);break;case 3:case 4:ur={id:Buffer.from(or.slice(0,4)).toString("ascii"),length:(lr===4?ID3v2Token_1$2.UINT32SYNCSAFE:Token$q.UINT32_BE).get(or,4),flags:ID3v2Parser.readFrameFlags(or.slice(8,10))},ur.id.match(/[A-Z0-9]{4}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${ur.id}`);break;default:throw new Error("Unexpected majorVer: "+lr)}return ur}}ID3v2Parser$1.ID3v2Parser=ID3v2Parser;var AiffToken$1={};Object.defineProperty(AiffToken$1,"__esModule",{value:!0});AiffToken$1.Common=void 0;const Token$p=lib$1,FourCC_1$a=FourCC;class Common{constructor(or,lr){this.isAifc=lr;const ur=lr?22:18;if(or.chunkSize<ur)throw new Error(`COMMON CHUNK size should always be at least ${ur}`);this.len=or.chunkSize}get(or,lr){const ur=or.readUInt16BE(lr+8)-16398,cr=or.readUInt16BE(lr+8+2),dr={numChannels:or.readUInt16BE(lr),numSampleFrames:or.readUInt32BE(lr+2),sampleSize:or.readUInt16BE(lr+6),sampleRate:ur<0?cr>>Math.abs(ur):cr<<ur};if(this.isAifc){if(dr.compressionType=FourCC_1$a.FourCcToken.get(or,lr+18),this.len>22){const fr=or.readInt8(lr+22);if(fr>0){const pr=(fr+1)%2;if(23+fr+pr===this.len)dr.compressionName=new Token$p.StringType(fr,"binary").get(or,lr+23);else throw new Error("Illegal pstring length")}else dr.compressionName=void 0}}else dr.compressionName="PCM";return dr}}AiffToken$1.Common=Common;var iff$1={};Object.defineProperty(iff$1,"__esModule",{value:!0});iff$1.Header=void 0;const Token$o=lib$1,FourCC_1$9=FourCC;iff$1.Header={len:8,get:(ar,or)=>({chunkID:FourCC_1$9.FourCcToken.get(ar,or),chunkSize:Number(BigInt(Token$o.UINT32_BE.get(ar,or+4)))})};Object.defineProperty(AiffParser,"__esModule",{value:!0});AiffParser.AIFFParser=void 0;const Token$n=lib$1,debug_1$k=browserExports$2,strtok3$3=core$1,ID3v2Parser_1$4=ID3v2Parser$1,FourCC_1$8=FourCC,BasicParser_1$a=BasicParser$1,AiffToken=AiffToken$1,iff=iff$1,debug$k=(0,debug_1$k.default)("music-metadata:parser:aiff"),compressionTypes={NONE:"not compressed	PCM	Apple Computer",sowt:"PCM (byte swapped)",fl32:"32-bit floating point IEEE 32-bit float",fl64:"64-bit floating point IEEE 64-bit float	Apple Computer",alaw:"ALaw 2:1	8-bit ITU-T G.711 A-law",ulaw:"Law 2:1	8-bit ITU-T G.711 -law	Apple Computer",ULAW:"CCITT G.711 u-law 8-bit ITU-T G.711 -law",ALAW:"CCITT G.711 A-law 8-bit ITU-T G.711 A-law",FL32:"Float 32	IEEE 32-bit float "};class AIFFParser extends BasicParser_1$a.BasicParser{async parse(){if((await this.tokenizer.readToken(iff.Header)).chunkID!=="FORM")throw new Error("Invalid Chunk-ID, expected 'FORM'");const lr=await this.tokenizer.readToken(FourCC_1$8.FourCcToken);switch(lr){case"AIFF":this.metadata.setFormat("container",lr),this.isCompressed=!1;break;case"AIFC":this.metadata.setFormat("container","AIFF-C"),this.isCompressed=!0;break;default:throw Error("Unsupported AIFF type: "+lr)}this.metadata.setFormat("lossless",!this.isCompressed);try{for(;!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=iff.Header.len;){debug$k("Reading AIFF chunk at offset="+this.tokenizer.position);const ur=await this.tokenizer.readToken(iff.Header),cr=2*Math.round(ur.chunkSize/2),dr=await this.readData(ur);await this.tokenizer.ignore(cr-dr)}}catch(ur){if(ur instanceof strtok3$3.EndOfStreamError)debug$k("End-of-stream");else throw ur}}async readData(or){var lr;switch(or.chunkID){case"COMM":const ur=await this.tokenizer.readToken(new AiffToken.Common(or,this.isCompressed));return this.metadata.setFormat("bitsPerSample",ur.sampleSize),this.metadata.setFormat("sampleRate",ur.sampleRate),this.metadata.setFormat("numberOfChannels",ur.numChannels),this.metadata.setFormat("numberOfSamples",ur.numSampleFrames),this.metadata.setFormat("duration",ur.numSampleFrames/ur.sampleRate),this.metadata.setFormat("codec",(lr=ur.compressionName)!==null&&lr!==void 0?lr:compressionTypes[ur.compressionType]),or.chunkSize;case"ID3 ":const cr=await this.tokenizer.readToken(new Token$n.Uint8ArrayType(or.chunkSize)),dr=strtok3$3.fromBuffer(cr);return await new ID3v2Parser_1$4.ID3v2Parser().parse(this.metadata,dr,this.options),or.chunkSize;case"SSND":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*or.chunkSize/this.metadata.format.duration),0;case"NAME":case"AUTH":case"(c) ":case"ANNO":return this.readTextChunk(or);default:return debug$k(`Ignore chunk id=${or.chunkID}, size=${or.chunkSize}`),0}}async readTextChunk(or){return(await this.tokenizer.readToken(new Token$n.StringType(or.chunkSize,"ascii"))).split("\0").map(ur=>ur.trim()).filter(ur=>ur&&ur.length>0).forEach(ur=>{this.metadata.addTag("AIFF",or.chunkID,ur.trim())}),or.chunkSize}}AiffParser.AIFFParser=AIFFParser;var AsfParser$1={},GUID$1={};Object.defineProperty(GUID$1,"__esModule",{value:!0});class GUID{static fromBin(or,lr=0){return new GUID(this.decode(or,lr))}static decode(or,lr=0){return(or.readUInt32LE(lr).toString(16)+"-"+or.readUInt16LE(lr+4).toString(16)+"-"+or.readUInt16LE(lr+6).toString(16)+"-"+or.readUInt16BE(lr+8).toString(16)+"-"+or.slice(lr+10,lr+16).toString("hex")).toUpperCase()}static decodeMediaType(or){switch(or.str){case GUID.AudioMedia.str:return"audio";case GUID.VideoMedia.str:return"video";case GUID.CommandMedia.str:return"command";case GUID.Degradable_JPEG_Media.str:return"degradable-jpeg";case GUID.FileTransferMedia.str:return"file-transfer";case GUID.BinaryMedia.str:return"binary"}}static encode(or){const lr=Buffer.alloc(16);return lr.writeUInt32LE(parseInt(or.slice(0,8),16),0),lr.writeUInt16LE(parseInt(or.slice(9,13),16),4),lr.writeUInt16LE(parseInt(or.slice(14,18),16),6),Buffer.from(or.slice(19,23),"hex").copy(lr,8),Buffer.from(or.slice(24),"hex").copy(lr,10),lr}constructor(or){this.str=or}equals(or){return this.str===or.str}toBin(){return GUID.encode(this.str)}}GUID.HeaderObject=new GUID("75B22630-668E-11CF-A6D9-00AA0062CE6C");GUID.DataObject=new GUID("75B22636-668E-11CF-A6D9-00AA0062CE6C");GUID.SimpleIndexObject=new GUID("33000890-E5B1-11CF-89F4-00A0C90349CB");GUID.IndexObject=new GUID("D6E229D3-35DA-11D1-9034-00A0C90349BE");GUID.MediaObjectIndexObject=new GUID("FEB103F8-12AD-4C64-840F-2A1D2F7AD48C");GUID.TimecodeIndexObject=new GUID("3CB73FD0-0C4A-4803-953D-EDF7B6228F0C");GUID.FilePropertiesObject=new GUID("8CABDCA1-A947-11CF-8EE4-00C00C205365");GUID.StreamPropertiesObject=new GUID("B7DC0791-A9B7-11CF-8EE6-00C00C205365");GUID.HeaderExtensionObject=new GUID("5FBF03B5-A92E-11CF-8EE3-00C00C205365");GUID.CodecListObject=new GUID("86D15240-311D-11D0-A3A4-00A0C90348F6");GUID.ScriptCommandObject=new GUID("1EFB1A30-0B62-11D0-A39B-00A0C90348F6");GUID.MarkerObject=new GUID("F487CD01-A951-11CF-8EE6-00C00C205365");GUID.BitrateMutualExclusionObject=new GUID("D6E229DC-35DA-11D1-9034-00A0C90349BE");GUID.ErrorCorrectionObject=new GUID("75B22635-668E-11CF-A6D9-00AA0062CE6C");GUID.ContentDescriptionObject=new GUID("75B22633-668E-11CF-A6D9-00AA0062CE6C");GUID.ExtendedContentDescriptionObject=new GUID("D2D0A440-E307-11D2-97F0-00A0C95EA850");GUID.ContentBrandingObject=new GUID("2211B3FA-BD23-11D2-B4B7-00A0C955FC6E");GUID.StreamBitratePropertiesObject=new GUID("7BF875CE-468D-11D1-8D82-006097C9A2B2");GUID.ContentEncryptionObject=new GUID("2211B3FB-BD23-11D2-B4B7-00A0C955FC6E");GUID.ExtendedContentEncryptionObject=new GUID("298AE614-2622-4C17-B935-DAE07EE9289C");GUID.DigitalSignatureObject=new GUID("2211B3FC-BD23-11D2-B4B7-00A0C955FC6E");GUID.PaddingObject=new GUID("1806D474-CADF-4509-A4BA-9AABCB96AAE8");GUID.ExtendedStreamPropertiesObject=new GUID("14E6A5CB-C672-4332-8399-A96952065B5A");GUID.AdvancedMutualExclusionObject=new GUID("A08649CF-4775-4670-8A16-6E35357566CD");GUID.GroupMutualExclusionObject=new GUID("D1465A40-5A79-4338-B71B-E36B8FD6C249");GUID.StreamPrioritizationObject=new GUID("D4FED15B-88D3-454F-81F0-ED5C45999E24");GUID.BandwidthSharingObject=new GUID("A69609E6-517B-11D2-B6AF-00C04FD908E9");GUID.LanguageListObject=new GUID("7C4346A9-EFE0-4BFC-B229-393EDE415C85");GUID.MetadataObject=new GUID("C5F8CBEA-5BAF-4877-8467-AA8C44FA4CCA");GUID.MetadataLibraryObject=new GUID("44231C94-9498-49D1-A141-1D134E457054");GUID.IndexParametersObject=new GUID("D6E229DF-35DA-11D1-9034-00A0C90349BE");GUID.MediaObjectIndexParametersObject=new GUID("6B203BAD-3F11-48E4-ACA8-D7613DE2CFA7");GUID.TimecodeIndexParametersObject=new GUID("F55E496D-9797-4B5D-8C8B-604DFE9BFB24");GUID.CompatibilityObject=new GUID("26F18B5D-4584-47EC-9F5F-0E651F0452C9");GUID.AdvancedContentEncryptionObject=new GUID("43058533-6981-49E6-9B74-AD12CB86D58C");GUID.AudioMedia=new GUID("F8699E40-5B4D-11CF-A8FD-00805F5C442B");GUID.VideoMedia=new GUID("BC19EFC0-5B4D-11CF-A8FD-00805F5C442B");GUID.CommandMedia=new GUID("59DACFC0-59E6-11D0-A3AC-00A0C90348F6");GUID.JFIF_Media=new GUID("B61BE100-5B4E-11CF-A8FD-00805F5C442B");GUID.Degradable_JPEG_Media=new GUID("35907DE0-E415-11CF-A917-00805F5C442B");GUID.FileTransferMedia=new GUID("91BD222C-F21C-497A-8B6D-5AA86BFC0185");GUID.BinaryMedia=new GUID("3AFB65E2-47EF-40F2-AC2C-70A90D71D343");GUID.ASF_Index_Placeholder_Object=new GUID("D9AADE20-7C17-4F9C-BC28-8555DD98E2A2");GUID$1.default=GUID;var AsfObject$1={},AsfUtil$1={};Object.defineProperty(AsfUtil$1,"__esModule",{value:!0});AsfUtil$1.AsfUtil=void 0;const Token$m=lib$1,util$7=Util;class AsfUtil{static getParserForAttr(or){return AsfUtil.attributeParsers[or]}static parseUnicodeAttr(or){return util$7.stripNulls(util$7.decodeString(or,"utf16le"))}static parseByteArrayAttr(or){return Buffer.from(or)}static parseBoolAttr(or,lr=0){return AsfUtil.parseWordAttr(or,lr)===1}static parseDWordAttr(or,lr=0){return or.readUInt32LE(lr)}static parseQWordAttr(or,lr=0){return Token$m.UINT64_LE.get(or,lr)}static parseWordAttr(or,lr=0){return or.readUInt16LE(lr)}}AsfUtil.attributeParsers=[AsfUtil.parseUnicodeAttr,AsfUtil.parseByteArrayAttr,AsfUtil.parseBoolAttr,AsfUtil.parseDWordAttr,AsfUtil.parseQWordAttr,AsfUtil.parseWordAttr,AsfUtil.parseByteArrayAttr];AsfUtil$1.AsfUtil=AsfUtil;(function(ar){Object.defineProperty(ar,"__esModule",{value:!0}),ar.WmPictureToken=ar.MetadataLibraryObjectState=ar.MetadataObjectState=ar.ExtendedStreamPropertiesObjectState=ar.ExtendedContentDescriptionObjectState=ar.ContentDescriptionObjectState=ar.readCodecEntries=ar.HeaderExtensionObject=ar.StreamPropertiesObject=ar.FilePropertiesObject=ar.IgnoreObjectState=ar.State=ar.HeaderObjectToken=ar.TopLevelHeaderObjectToken=ar.DataType=void 0;const or=Util,lr=lib$1,ur=GUID$1,cr=AsfUtil$1,dr=ID3v2Token;(function(Mr){Mr[Mr.UnicodeString=0]="UnicodeString",Mr[Mr.ByteArray=1]="ByteArray",Mr[Mr.Bool=2]="Bool",Mr[Mr.DWord=3]="DWord",Mr[Mr.QWord=4]="QWord",Mr[Mr.Word=5]="Word"})(ar.DataType||(ar.DataType={})),ar.TopLevelHeaderObjectToken={len:30,get:(Mr,xr)=>({objectId:ur.default.fromBin(new lr.BufferType(16).get(Mr,xr)),objectSize:Number(lr.UINT64_LE.get(Mr,xr+16)),numberOfHeaderObjects:lr.UINT32_LE.get(Mr,xr+24)})},ar.HeaderObjectToken={len:24,get:(Mr,xr)=>({objectId:ur.default.fromBin(new lr.BufferType(16).get(Mr,xr)),objectSize:Number(lr.UINT64_LE.get(Mr,xr+16))})};class fr{constructor(xr){this.len=Number(xr.objectSize)-ar.HeaderObjectToken.len}postProcessTag(xr,Rr,Or,qr){if(Rr==="WM/Picture")xr.push({id:Rr,value:Nr.fromBuffer(qr)});else{const Jr=cr.AsfUtil.getParserForAttr(Or);if(!Jr)throw new Error("unexpected value headerType: "+Or);xr.push({id:Rr,value:Jr(qr)})}}}ar.State=fr;class pr extends fr{constructor(xr){super(xr)}get(xr,Rr){return null}}ar.IgnoreObjectState=pr;class mr extends fr{constructor(xr){super(xr)}get(xr,Rr){return{fileId:ur.default.fromBin(xr,Rr),fileSize:lr.UINT64_LE.get(xr,Rr+16),creationDate:lr.UINT64_LE.get(xr,Rr+24),dataPacketsCount:lr.UINT64_LE.get(xr,Rr+32),playDuration:lr.UINT64_LE.get(xr,Rr+40),sendDuration:lr.UINT64_LE.get(xr,Rr+48),preroll:lr.UINT64_LE.get(xr,Rr+56),flags:{broadcast:or.getBit(xr,Rr+64,24),seekable:or.getBit(xr,Rr+64,25)},minimumDataPacketSize:lr.UINT32_LE.get(xr,Rr+68),maximumDataPacketSize:lr.UINT32_LE.get(xr,Rr+72),maximumBitrate:lr.UINT32_LE.get(xr,Rr+76)}}}mr.guid=ur.default.FilePropertiesObject,ar.FilePropertiesObject=mr;class hr extends fr{constructor(xr){super(xr)}get(xr,Rr){return{streamType:ur.default.decodeMediaType(ur.default.fromBin(xr,Rr)),errorCorrectionType:ur.default.fromBin(xr,Rr+8)}}}hr.guid=ur.default.StreamPropertiesObject,ar.StreamPropertiesObject=hr;class gr{constructor(){this.len=22}get(xr,Rr){return{reserved1:ur.default.fromBin(xr,Rr),reserved2:xr.readUInt16LE(Rr+16),extensionDataSize:xr.readUInt32LE(Rr+18)}}}gr.guid=ur.default.HeaderExtensionObject,ar.HeaderExtensionObject=gr;const vr={len:20,get:(Mr,xr)=>({entryCount:Mr.readUInt16LE(xr+16)})};async function wr(Mr){const xr=await Mr.readNumber(lr.UINT16_LE);return(await Mr.readToken(new lr.StringType(xr*2,"utf16le"))).replace("\0","")}async function _r(Mr){const xr=await Mr.readToken(vr),Rr=[];for(let Or=0;Or<xr.entryCount;++Or)Rr.push(await Sr(Mr));return Rr}ar.readCodecEntries=_r;async function Cr(Mr){const xr=await Mr.readNumber(lr.UINT16_LE),Rr=Buffer.alloc(xr);return await Mr.readBuffer(Rr),Rr}async function Sr(Mr){const xr=await Mr.readNumber(lr.UINT16_LE);return{type:{videoCodec:(xr&1)===1,audioCodec:(xr&2)===2},codecName:await wr(Mr),description:await wr(Mr),information:await Cr(Mr)}}class Dr extends fr{constructor(xr){super(xr)}get(xr,Rr){const Or=[];let qr=Rr+10;for(let Jr=0;Jr<Dr.contentDescTags.length;++Jr){const na=xr.readUInt16LE(Rr+Jr*2);if(na>0){const Wr=Dr.contentDescTags[Jr],Gr=qr+na;Or.push({id:Wr,value:cr.AsfUtil.parseUnicodeAttr(xr.slice(qr,Gr))}),qr=Gr}}return Or}}Dr.guid=ur.default.ContentDescriptionObject,Dr.contentDescTags=["Title","Author","Copyright","Description","Rating"],ar.ContentDescriptionObjectState=Dr;class Er extends fr{constructor(xr){super(xr)}get(xr,Rr){const Or=[],qr=xr.readUInt16LE(Rr);let Jr=Rr+2;for(let na=0;na<qr;na+=1){const Wr=xr.readUInt16LE(Jr);Jr+=2;const Gr=cr.AsfUtil.parseUnicodeAttr(xr.slice(Jr,Jr+Wr));Jr+=Wr;const is=xr.readUInt16LE(Jr);Jr+=2;const es=xr.readUInt16LE(Jr);Jr+=2;const ss=xr.slice(Jr,Jr+es);Jr+=es,this.postProcessTag(Or,Gr,is,ss)}return Or}}Er.guid=ur.default.ExtendedContentDescriptionObject,ar.ExtendedContentDescriptionObjectState=Er;class kr extends fr{constructor(xr){super(xr)}get(xr,Rr){return{startTime:lr.UINT64_LE.get(xr,Rr),endTime:lr.UINT64_LE.get(xr,Rr+8),dataBitrate:xr.readInt32LE(Rr+12),bufferSize:xr.readInt32LE(Rr+16),initialBufferFullness:xr.readInt32LE(Rr+20),alternateDataBitrate:xr.readInt32LE(Rr+24),alternateBufferSize:xr.readInt32LE(Rr+28),alternateInitialBufferFullness:xr.readInt32LE(Rr+32),maximumObjectSize:xr.readInt32LE(Rr+36),flags:{reliableFlag:or.getBit(xr,Rr+40,0),seekableFlag:or.getBit(xr,Rr+40,1),resendLiveCleanpointsFlag:or.getBit(xr,Rr+40,2)},streamNumber:xr.readInt16LE(Rr+42),streamLanguageId:xr.readInt16LE(Rr+44),averageTimePerFrame:xr.readInt32LE(Rr+52),streamNameCount:xr.readInt32LE(Rr+54),payloadExtensionSystems:xr.readInt32LE(Rr+56),streamNames:[],streamPropertiesObject:null}}}kr.guid=ur.default.ExtendedStreamPropertiesObject,ar.ExtendedStreamPropertiesObjectState=kr;class Ir extends fr{constructor(xr){super(xr)}get(xr,Rr){const Or=[],qr=Buffer.from(xr),Jr=qr.readUInt16LE(Rr);let na=Rr+2;for(let Wr=0;Wr<Jr;Wr+=1){na+=4;const Gr=qr.readUInt16LE(na);na+=2;const is=qr.readUInt16LE(na);na+=2;const es=qr.readUInt32LE(na);na+=4;const ss=cr.AsfUtil.parseUnicodeAttr(qr.slice(na,na+Gr));na+=Gr;const _i=qr.slice(na,na+es);na+=es,this.postProcessTag(Or,ss,is,_i)}return Or}}Ir.guid=ur.default.MetadataObject,ar.MetadataObjectState=Ir;class Br extends Ir{constructor(xr){super(xr)}}Br.guid=ur.default.MetadataLibraryObject,ar.MetadataLibraryObjectState=Br;class Nr{static fromBase64(xr){return this.fromBuffer(Buffer.from(xr,"base64"))}static fromBuffer(xr){return new Nr(xr.length).get(xr,0)}constructor(xr){this.len=xr}get(xr,Rr){const Or=xr.readUInt8(Rr++),qr=xr.readInt32LE(Rr);let Jr=5;for(;xr.readUInt16BE(Jr)!==0;)Jr+=2;const na=xr.slice(5,Jr).toString("utf16le");for(;xr.readUInt16BE(Jr)!==0;)Jr+=2;const Wr=xr.slice(5,Jr).toString("utf16le");return{type:dr.AttachedPictureType[Or],format:na,description:Wr,size:qr,data:xr.slice(Jr+4)}}}ar.WmPictureToken=Nr})(AsfObject$1);Object.defineProperty(AsfParser$1,"__esModule",{value:!0});AsfParser$1.AsfParser=void 0;const debug_1$j=browserExports$2,type_1$1=type,GUID_1=GUID$1,AsfObject=AsfObject$1,BasicParser_1$9=BasicParser$1,debug$j=(0,debug_1$j.default)("music-metadata:parser:ASF"),headerType="asf";class AsfParser extends BasicParser_1$9.BasicParser{async parse(){const or=await this.tokenizer.readToken(AsfObject.TopLevelHeaderObjectToken);if(!or.objectId.equals(GUID_1.default.HeaderObject))throw new Error("expected asf header; but was not found; got: "+or.objectId.str);try{await this.parseObjectHeader(or.numberOfHeaderObjects)}catch(lr){debug$j("Error while parsing ASF: %s",lr)}}async parseObjectHeader(or){let lr;do{const ur=await this.tokenizer.readToken(AsfObject.HeaderObjectToken);switch(debug$j("header GUID=%s",ur.objectId.str),ur.objectId.str){case AsfObject.FilePropertiesObject.guid.str:const cr=await this.tokenizer.readToken(new AsfObject.FilePropertiesObject(ur));this.metadata.setFormat("duration",Number(cr.playDuration/BigInt(1e3))/1e4-Number(cr.preroll)/1e3),this.metadata.setFormat("bitrate",cr.maximumBitrate);break;case AsfObject.StreamPropertiesObject.guid.str:const dr=await this.tokenizer.readToken(new AsfObject.StreamPropertiesObject(ur));this.metadata.setFormat("container","ASF/"+dr.streamType);break;case AsfObject.HeaderExtensionObject.guid.str:const fr=await this.tokenizer.readToken(new AsfObject.HeaderExtensionObject);await this.parseExtensionObject(fr.extensionDataSize);break;case AsfObject.ContentDescriptionObjectState.guid.str:lr=await this.tokenizer.readToken(new AsfObject.ContentDescriptionObjectState(ur)),this.addTags(lr);break;case AsfObject.ExtendedContentDescriptionObjectState.guid.str:lr=await this.tokenizer.readToken(new AsfObject.ExtendedContentDescriptionObjectState(ur)),this.addTags(lr);break;case GUID_1.default.CodecListObject.str:const pr=await AsfObject.readCodecEntries(this.tokenizer);pr.forEach(hr=>{this.metadata.addStreamInfo({type:hr.type.videoCodec?type_1$1.TrackType.video:type_1$1.TrackType.audio,codecName:hr.codecName})});const mr=pr.filter(hr=>hr.type.audioCodec).map(hr=>hr.codecName).join("/");this.metadata.setFormat("codec",mr);break;case GUID_1.default.StreamBitratePropertiesObject.str:await this.tokenizer.ignore(ur.objectSize-AsfObject.HeaderObjectToken.len);break;case GUID_1.default.PaddingObject.str:debug$j("Padding: %s bytes",ur.objectSize-AsfObject.HeaderObjectToken.len),await this.tokenizer.ignore(ur.objectSize-AsfObject.HeaderObjectToken.len);break;default:this.metadata.addWarning("Ignore ASF-Object-GUID: "+ur.objectId.str),debug$j("Ignore ASF-Object-GUID: %s",ur.objectId.str),await this.tokenizer.readToken(new AsfObject.IgnoreObjectState(ur))}}while(--or)}addTags(or){or.forEach(lr=>{this.metadata.addTag(headerType,lr.id,lr.value)})}async parseExtensionObject(or){do{const lr=await this.tokenizer.readToken(AsfObject.HeaderObjectToken),ur=lr.objectSize-AsfObject.HeaderObjectToken.len;switch(lr.objectId.str){case AsfObject.ExtendedStreamPropertiesObjectState.guid.str:await this.tokenizer.readToken(new AsfObject.ExtendedStreamPropertiesObjectState(lr));break;case AsfObject.MetadataObjectState.guid.str:const cr=await this.tokenizer.readToken(new AsfObject.MetadataObjectState(lr));this.addTags(cr);break;case AsfObject.MetadataLibraryObjectState.guid.str:const dr=await this.tokenizer.readToken(new AsfObject.MetadataLibraryObjectState(lr));this.addTags(dr);break;case GUID_1.default.PaddingObject.str:await this.tokenizer.ignore(ur);break;case GUID_1.default.CompatibilityObject.str:this.tokenizer.ignore(ur);break;case GUID_1.default.ASF_Index_Placeholder_Object.str:await this.tokenizer.ignore(ur);break;default:this.metadata.addWarning("Ignore ASF-Object-GUID: "+lr.objectId.str),await this.tokenizer.readToken(new AsfObject.IgnoreObjectState(lr));break}or-=lr.objectSize}while(or>0)}}AsfParser$1.AsfParser=AsfParser;var FlacParser$1={},Vorbis={};Object.defineProperty(Vorbis,"__esModule",{value:!0});Vorbis.IdentificationHeader=Vorbis.CommonHeader=Vorbis.VorbisPictureToken=void 0;const Token$l=lib$1,ID3v2Token_1$1=ID3v2Token;class VorbisPictureToken{static fromBase64(or){return this.fromBuffer(Buffer.from(or,"base64"))}static fromBuffer(or){return new VorbisPictureToken(or.length).get(or,0)}constructor(or){this.len=or}get(or,lr){const ur=ID3v2Token_1$1.AttachedPictureType[Token$l.UINT32_BE.get(or,lr)],cr=Token$l.UINT32_BE.get(or,lr+=4),dr=or.toString("utf-8",lr+=4,lr+cr),fr=Token$l.UINT32_BE.get(or,lr+=cr),pr=or.toString("utf-8",lr+=4,lr+fr),mr=Token$l.UINT32_BE.get(or,lr+=fr),hr=Token$l.UINT32_BE.get(or,lr+=4),gr=Token$l.UINT32_BE.get(or,lr+=4),vr=Token$l.UINT32_BE.get(or,lr+=4),wr=Token$l.UINT32_BE.get(or,lr+=4),_r=Buffer.from(or.slice(lr+=4,lr+wr));return{type:ur,format:dr,description:pr,width:mr,height:hr,colour_depth:gr,indexed_color:vr,data:_r}}}Vorbis.VorbisPictureToken=VorbisPictureToken;Vorbis.CommonHeader={len:7,get:(ar,or)=>({packetType:ar.readUInt8(or),vorbis:new Token$l.StringType(6,"ascii").get(ar,or+1)})};Vorbis.IdentificationHeader={len:23,get:(ar,or)=>{const lr=new DataView(ar.buffer,ar.byteOffset);return{version:lr.getUint32(or+0,!0),channelMode:lr.getUint8(or+4),sampleRate:lr.getUint32(or+5,!0),bitrateMax:lr.getUint32(or+9,!0),bitrateNominal:lr.getUint32(or+13,!0),bitrateMin:lr.getUint32(or+17,!0)}}};var AbstractID3Parser$1={};Object.defineProperty(AbstractID3Parser$1,"__esModule",{value:!0});AbstractID3Parser$1.AbstractID3Parser=void 0;const core_1$2=core$1,debug_1$i=browserExports$2,ID3v2Token_1=ID3v2Token,ID3v2Parser_1$3=ID3v2Parser$1,ID3v1Parser_1$2=ID3v1Parser,BasicParser_1$8=BasicParser$1,debug$i=(0,debug_1$i.default)("music-metadata:parser:ID3");class AbstractID3Parser extends BasicParser_1$8.BasicParser{constructor(){super(...arguments),this.id3parser=new ID3v2Parser_1$3.ID3v2Parser}static async startsWithID3v2Header(or){return(await or.peekToken(ID3v2Token_1.ID3v2Header)).fileIdentifier==="ID3"}async parse(){try{await this.parseID3v2()}catch(or){if(or instanceof core_1$2.EndOfStreamError)debug$i("End-of-stream");else throw or}}finalize(){}async parseID3v2(){await this.tryReadId3v2Headers(),debug$i("End of ID3v2 header, go to MPEG-parser: pos=%s",this.tokenizer.position),await this.postId3v2Parse(),this.options.skipPostHeaders&&this.metadata.hasAny()?this.finalize():(await new ID3v1Parser_1$2.ID3v1Parser().init(this.metadata,this.tokenizer,this.options).parse(),this.finalize())}async tryReadId3v2Headers(){if((await this.tokenizer.peekToken(ID3v2Token_1.ID3v2Header)).fileIdentifier==="ID3")return debug$i("Found ID3v2 header, pos=%s",this.tokenizer.position),await this.id3parser.parse(this.metadata,this.tokenizer,this.options),this.tryReadId3v2Headers()}}AbstractID3Parser$1.AbstractID3Parser=AbstractID3Parser;var VorbisParser$1={},VorbisDecoder$1={};Object.defineProperty(VorbisDecoder$1,"__esModule",{value:!0});VorbisDecoder$1.VorbisDecoder=void 0;const Token$k=lib$1;class VorbisDecoder{constructor(or,lr){this.data=or,this.offset=lr}readInt32(){const or=Token$k.UINT32_LE.get(this.data,this.offset);return this.offset+=4,or}readStringUtf8(){const or=this.readInt32(),lr=Buffer.from(this.data).toString("utf-8",this.offset,this.offset+or);return this.offset+=or,lr}parseUserComment(){const or=this.offset,lr=this.readStringUtf8(),ur=lr.indexOf("=");return{key:lr.slice(0,ur).toUpperCase(),value:lr.slice(ur+1),len:this.offset-or}}}VorbisDecoder$1.VorbisDecoder=VorbisDecoder;Object.defineProperty(VorbisParser$1,"__esModule",{value:!0});VorbisParser$1.VorbisParser=void 0;const Token$j=lib$1,debug_1$h=browserExports$2,VorbisDecoder_1$1=VorbisDecoder$1,Vorbis_1$1=Vorbis,debug$h=(0,debug_1$h.default)("music-metadata:parser:ogg:vorbis1");class VorbisParser{constructor(or,lr){this.metadata=or,this.options=lr,this.pageSegments=[]}parsePage(or,lr){if(or.headerType.firstPage)this.parseFirstPage(or,lr);else{if(or.headerType.continued){if(this.pageSegments.length===0)throw new Error("Cannot continue on previous page");this.pageSegments.push(lr)}if(or.headerType.lastPage||!or.headerType.continued){if(this.pageSegments.length>0){const ur=Buffer.concat(this.pageSegments);this.parseFullPage(ur)}this.pageSegments=or.headerType.lastPage?[]:[lr]}}or.headerType.lastPage&&this.calculateDuration(or)}flush(){this.parseFullPage(Buffer.concat(this.pageSegments))}parseUserComment(or,lr){const cr=new VorbisDecoder_1$1.VorbisDecoder(or,lr).parseUserComment();return this.addTag(cr.key,cr.value),cr.len}addTag(or,lr){if(or==="METADATA_BLOCK_PICTURE"&&typeof lr=="string"){if(this.options.skipCovers){debug$h("Ignore picture");return}lr=Vorbis_1$1.VorbisPictureToken.fromBase64(lr),debug$h(`Push picture: id=${or}, format=${lr.format}`)}else debug$h(`Push tag: id=${or}, value=${lr}`);this.metadata.addTag("vorbis",or,lr)}calculateDuration(or){this.metadata.format.sampleRate&&or.absoluteGranulePosition>=0&&(this.metadata.setFormat("numberOfSamples",or.absoluteGranulePosition),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate))}parseFirstPage(or,lr){this.metadata.setFormat("codec","Vorbis I"),debug$h("Parse first page");const ur=Vorbis_1$1.CommonHeader.get(lr,0);if(ur.vorbis!=="vorbis")throw new Error("Metadata does not look like Vorbis");if(ur.packetType===1){const cr=Vorbis_1$1.IdentificationHeader.get(lr,Vorbis_1$1.CommonHeader.len);this.metadata.setFormat("sampleRate",cr.sampleRate),this.metadata.setFormat("bitrate",cr.bitrateNominal),this.metadata.setFormat("numberOfChannels",cr.channelMode),debug$h("sample-rate=%s[hz], bitrate=%s[b/s], channel-mode=%s",cr.sampleRate,cr.bitrateNominal,cr.channelMode)}else throw new Error("First Ogg page should be type 1: the identification header")}parseFullPage(or){const lr=Vorbis_1$1.CommonHeader.get(or,0);switch(debug$h("Parse full page: type=%s, byteLength=%s",lr.packetType,or.byteLength),lr.packetType){case 3:return this.parseUserCommentList(or,Vorbis_1$1.CommonHeader.len)}}parseUserCommentList(or,lr){const ur=Token$j.UINT32_LE.get(or,lr);lr+=4,lr+=ur;let cr=Token$j.UINT32_LE.get(or,lr);for(lr+=4;cr-- >0;)lr+=this.parseUserComment(or,lr)}}VorbisParser$1.VorbisParser=VorbisParser;Object.defineProperty(FlacParser$1,"__esModule",{value:!0});FlacParser$1.FlacParser=void 0;const token_types_1$1=lib$1,debug_1$g=browserExports$2,util$6=Util,Vorbis_1=Vorbis,AbstractID3Parser_1$3=AbstractID3Parser$1,FourCC_1$7=FourCC,VorbisParser_1$3=VorbisParser$1,VorbisDecoder_1=VorbisDecoder$1,debug$g=(0,debug_1$g.default)("music-metadata:parser:FLAC");var BlockType;(function(ar){ar[ar.STREAMINFO=0]="STREAMINFO",ar[ar.PADDING=1]="PADDING",ar[ar.APPLICATION=2]="APPLICATION",ar[ar.SEEKTABLE=3]="SEEKTABLE",ar[ar.VORBIS_COMMENT=4]="VORBIS_COMMENT",ar[ar.CUESHEET=5]="CUESHEET",ar[ar.PICTURE=6]="PICTURE"})(BlockType||(BlockType={}));class FlacParser extends AbstractID3Parser_1$3.AbstractID3Parser{constructor(){super(...arguments),this.padding=0}init(or,lr,ur){return super.init(or,lr,ur),this.vorbisParser=new VorbisParser_1$3.VorbisParser(or,ur),this}async postId3v2Parse(){if((await this.tokenizer.readToken(FourCC_1$7.FourCcToken)).toString()!=="fLaC")throw new Error("Invalid FLAC preamble");let lr;do lr=await this.tokenizer.readToken(Metadata.BlockHeader),await this.parseDataBlock(lr);while(!lr.lastBlock);if(this.tokenizer.fileInfo.size&&this.metadata.format.duration){const ur=this.tokenizer.fileInfo.size-this.tokenizer.position;this.metadata.setFormat("bitrate",8*ur/this.metadata.format.duration)}}parseDataBlock(or){switch(debug$g(`blockHeader type=${or.type}, length=${or.length}`),or.type){case BlockType.STREAMINFO:return this.parseBlockStreamInfo(or.length);case BlockType.PADDING:this.padding+=or.length;break;case BlockType.APPLICATION:break;case BlockType.SEEKTABLE:break;case BlockType.VORBIS_COMMENT:return this.parseComment(or.length);case BlockType.CUESHEET:break;case BlockType.PICTURE:return this.parsePicture(or.length).then();default:this.metadata.addWarning("Unknown block type: "+or.type)}return this.tokenizer.ignore(or.length).then()}async parseBlockStreamInfo(or){if(or!==Metadata.BlockStreamInfo.len)throw new Error("Unexpected block-stream-info length");const lr=await this.tokenizer.readToken(Metadata.BlockStreamInfo);this.metadata.setFormat("container","FLAC"),this.metadata.setFormat("codec","FLAC"),this.metadata.setFormat("lossless",!0),this.metadata.setFormat("numberOfChannels",lr.channels),this.metadata.setFormat("bitsPerSample",lr.bitsPerSample),this.metadata.setFormat("sampleRate",lr.sampleRate),lr.totalSamples>0&&this.metadata.setFormat("duration",lr.totalSamples/lr.sampleRate)}async parseComment(or){const lr=await this.tokenizer.readToken(new token_types_1$1.Uint8ArrayType(or)),ur=new VorbisDecoder_1.VorbisDecoder(lr,0);ur.readStringUtf8();const cr=ur.readInt32();for(let dr=0;dr<cr;dr++){const fr=ur.parseUserComment();this.vorbisParser.addTag(fr.key,fr.value)}}async parsePicture(or){if(this.options.skipCovers)return this.tokenizer.ignore(or);{const lr=await this.tokenizer.readToken(new Vorbis_1.VorbisPictureToken(or));this.vorbisParser.addTag("METADATA_BLOCK_PICTURE",lr)}}}FlacParser$1.FlacParser=FlacParser;class Metadata{}Metadata.BlockHeader={len:4,get:(ar,or)=>({lastBlock:util$6.getBit(ar,or,7),type:util$6.getBitAllignedNumber(ar,or,1,7),length:token_types_1$1.UINT24_BE.get(ar,or+1)})};Metadata.BlockStreamInfo={len:34,get:(ar,or)=>({minimumBlockSize:token_types_1$1.UINT16_BE.get(ar,or),maximumBlockSize:token_types_1$1.UINT16_BE.get(ar,or+2)/1e3,minimumFrameSize:token_types_1$1.UINT24_BE.get(ar,or+4),maximumFrameSize:token_types_1$1.UINT24_BE.get(ar,or+7),sampleRate:token_types_1$1.UINT24_BE.get(ar,or+10)>>4,channels:util$6.getBitAllignedNumber(ar,or+12,4,3)+1,bitsPerSample:util$6.getBitAllignedNumber(ar,or+12,7,5)+1,totalSamples:util$6.getBitAllignedNumber(ar,or+13,4,36),fileMD5:new token_types_1$1.Uint8ArrayType(16).get(ar,or+18)})};var MP4Parser$1={},Atom$1={},AtomToken$2={};(function(ar){Object.defineProperty(ar,"__esModule",{value:!0}),ar.ChapterText=ar.StcoAtom=ar.StszAtom=ar.StscAtom=ar.SampleToChunkToken=ar.SttsAtom=ar.TimeToSampleToken=ar.SoundSampleDescriptionV0=ar.SoundSampleDescriptionVersion=ar.StsdAtom=ar.TrackHeaderAtom=ar.NameAtom=ar.DataAtom=ar.MvhdAtom=ar.MdhdAtom=ar.FixedLengthAtom=ar.mhdr=ar.tkhd=ar.ftyp=ar.ExtendedSize=ar.Header=void 0;const or=lib$1,lr=browserExports$2,ur=FourCC,cr=(0,lr.default)("music-metadata:parser:MP4:atom");ar.Header={len:8,get:(Mr,xr)=>{const Rr=or.UINT32_BE.get(Mr,xr);if(Rr<0)throw new Error("Invalid atom header length");return{length:BigInt(Rr),name:new or.StringType(4,"binary").get(Mr,xr+4)}},put:(Mr,xr,Rr)=>(or.UINT32_BE.put(Mr,xr,Number(Rr.length)),ur.FourCcToken.put(Mr,xr+4,Rr.name))},ar.ExtendedSize=or.UINT64_BE,ar.ftyp={len:4,get:(Mr,xr)=>({type:new or.StringType(4,"ascii").get(Mr,xr)})},ar.tkhd={len:4,get:(Mr,xr)=>({type:new or.StringType(4,"ascii").get(Mr,xr)})},ar.mhdr={len:8,get:(Mr,xr)=>({version:or.UINT8.get(Mr,xr),flags:or.UINT24_BE.get(Mr,xr+1),nextItemID:or.UINT32_BE.get(Mr,xr+4)})};class dr{constructor(xr,Rr,Or){if(this.len=xr,xr<Rr)throw new Error(`Atom ${Or} expected to be ${Rr}, but specifies ${xr} bytes long.`);xr>Rr&&cr(`Warning: atom ${Or} expected to be ${Rr}, but was actually ${xr} bytes long.`)}}ar.FixedLengthAtom=dr;const fr={len:4,get:(Mr,xr)=>{const Rr=or.UINT32_BE.get(Mr,xr)-2082844800;return new Date(Rr*1e3)}};class pr extends dr{constructor(xr){super(xr,24,"mdhd"),this.len=xr}get(xr,Rr){return{version:or.UINT8.get(xr,Rr+0),flags:or.UINT24_BE.get(xr,Rr+1),creationTime:fr.get(xr,Rr+4),modificationTime:fr.get(xr,Rr+8),timeScale:or.UINT32_BE.get(xr,Rr+12),duration:or.UINT32_BE.get(xr,Rr+16),language:or.UINT16_BE.get(xr,Rr+20),quality:or.UINT16_BE.get(xr,Rr+22)}}}ar.MdhdAtom=pr;class mr extends dr{constructor(xr){super(xr,100,"mvhd"),this.len=xr}get(xr,Rr){return{version:or.UINT8.get(xr,Rr),flags:or.UINT24_BE.get(xr,Rr+1),creationTime:fr.get(xr,Rr+4),modificationTime:fr.get(xr,Rr+8),timeScale:or.UINT32_BE.get(xr,Rr+12),duration:or.UINT32_BE.get(xr,Rr+16),preferredRate:or.UINT32_BE.get(xr,Rr+20),preferredVolume:or.UINT16_BE.get(xr,Rr+24),previewTime:or.UINT32_BE.get(xr,Rr+72),previewDuration:or.UINT32_BE.get(xr,Rr+76),posterTime:or.UINT32_BE.get(xr,Rr+80),selectionTime:or.UINT32_BE.get(xr,Rr+84),selectionDuration:or.UINT32_BE.get(xr,Rr+88),currentTime:or.UINT32_BE.get(xr,Rr+92),nextTrackID:or.UINT32_BE.get(xr,Rr+96)}}}ar.MvhdAtom=mr;class hr{constructor(xr){this.len=xr}get(xr,Rr){return{type:{set:or.UINT8.get(xr,Rr+0),type:or.UINT24_BE.get(xr,Rr+1)},locale:or.UINT24_BE.get(xr,Rr+4),value:Buffer.from(new or.Uint8ArrayType(this.len-8).get(xr,Rr+8))}}}ar.DataAtom=hr;class gr{constructor(xr){this.len=xr}get(xr,Rr){return{version:or.UINT8.get(xr,Rr),flags:or.UINT24_BE.get(xr,Rr+1),name:new or.StringType(this.len-4,"utf-8").get(xr,Rr+4)}}}ar.NameAtom=gr;class vr{constructor(xr){this.len=xr}get(xr,Rr){return{version:or.UINT8.get(xr,Rr),flags:or.UINT24_BE.get(xr,Rr+1),creationTime:fr.get(xr,Rr+4),modificationTime:fr.get(xr,Rr+8),trackId:or.UINT32_BE.get(xr,Rr+12),duration:or.UINT32_BE.get(xr,Rr+20),layer:or.UINT16_BE.get(xr,Rr+24),alternateGroup:or.UINT16_BE.get(xr,Rr+26),volume:or.UINT16_BE.get(xr,Rr+28)}}}ar.TrackHeaderAtom=vr;const wr={len:8,get:(Mr,xr)=>({version:or.UINT8.get(Mr,xr),flags:or.UINT24_BE.get(Mr,xr+1),numberOfEntries:or.UINT32_BE.get(Mr,xr+4)})};class _r{constructor(xr){this.len=xr}get(xr,Rr){return{dataFormat:ur.FourCcToken.get(xr,Rr),dataReferenceIndex:or.UINT16_BE.get(xr,Rr+10),description:new or.Uint8ArrayType(this.len-12).get(xr,Rr+12)}}}class Cr{constructor(xr){this.len=xr}get(xr,Rr){const Or=wr.get(xr,Rr);Rr+=wr.len;const qr=[];for(let Jr=0;Jr<Or.numberOfEntries;++Jr){const na=or.UINT32_BE.get(xr,Rr);Rr+=or.UINT32_BE.len,qr.push(new _r(na).get(xr,Rr)),Rr+=na}return{header:Or,table:qr}}}ar.StsdAtom=Cr,ar.SoundSampleDescriptionVersion={len:8,get(Mr,xr){return{version:or.INT16_BE.get(Mr,xr),revision:or.INT16_BE.get(Mr,xr+2),vendor:or.INT32_BE.get(Mr,xr+4)}}},ar.SoundSampleDescriptionV0={len:12,get(Mr,xr){return{numAudioChannels:or.INT16_BE.get(Mr,xr+0),sampleSize:or.INT16_BE.get(Mr,xr+2),compressionId:or.INT16_BE.get(Mr,xr+4),packetSize:or.INT16_BE.get(Mr,xr+6),sampleRate:or.UINT16_BE.get(Mr,xr+8)+or.UINT16_BE.get(Mr,xr+10)/1e4}}};class Sr{constructor(xr,Rr){this.len=xr,this.token=Rr}get(xr,Rr){const Or=or.INT32_BE.get(xr,Rr+4);return{version:or.INT8.get(xr,Rr+0),flags:or.INT24_BE.get(xr,Rr+1),numberOfEntries:Or,entries:Nr(xr,this.token,Rr+8,this.len-8,Or)}}}ar.TimeToSampleToken={len:8,get(Mr,xr){return{count:or.INT32_BE.get(Mr,xr+0),duration:or.INT32_BE.get(Mr,xr+4)}}};class Dr extends Sr{constructor(xr){super(xr,ar.TimeToSampleToken),this.len=xr}}ar.SttsAtom=Dr,ar.SampleToChunkToken={len:12,get(Mr,xr){return{firstChunk:or.INT32_BE.get(Mr,xr),samplesPerChunk:or.INT32_BE.get(Mr,xr+4),sampleDescriptionId:or.INT32_BE.get(Mr,xr+8)}}};class Er extends Sr{constructor(xr){super(xr,ar.SampleToChunkToken),this.len=xr}}ar.StscAtom=Er;class kr{constructor(xr){this.len=xr}get(xr,Rr){const Or=or.INT32_BE.get(xr,Rr+8);return{version:or.INT8.get(xr,Rr),flags:or.INT24_BE.get(xr,Rr+1),sampleSize:or.INT32_BE.get(xr,Rr+4),numberOfEntries:Or,entries:Nr(xr,or.INT32_BE,Rr+12,this.len-12,Or)}}}ar.StszAtom=kr;class Ir extends Sr{constructor(xr){super(xr,or.INT32_BE),this.len=xr}}ar.StcoAtom=Ir;class Br{constructor(xr){this.len=xr}get(xr,Rr){const Or=or.INT16_BE.get(xr,Rr+0);return new or.StringType(Or,"utf-8").get(xr,Rr+2)}}ar.ChapterText=Br;function Nr(Mr,xr,Rr,Or,qr){if(cr(`remainingLen=${Or}, numberOfEntries=${qr} * token-len=${xr.len}`),Or===0)return[];if(Or!==qr*xr.len)throw new Error("mismatch number-of-entries with remaining atom-length");const Jr=[];for(let na=0;na<qr;++na)Jr.push(xr.get(Mr,Rr)),Rr+=xr.len;return Jr}})(AtomToken$2);Object.defineProperty(Atom$1,"__esModule",{value:!0});Atom$1.Atom=void 0;const debug_1$f=browserExports$2,AtomToken$1=AtomToken$2,debug$f=(0,debug_1$f.default)("music-metadata:parser:MP4:Atom");class Atom{static async readAtom(or,lr,ur,cr){const dr=or.position,fr=await or.readToken(AtomToken$1.Header);fr.length===BigInt(1)&&(fr.length=await or.readToken(AtomToken$1.ExtendedSize));const mr=new Atom(fr,fr.length===BigInt(1),ur),hr=mr.getPayloadLength(cr);return debug$f(`parse atom name=${mr.atomPath}, extended=${mr.extended}, offset=${dr}, len=${mr.header.length}`),await mr.readData(or,lr,hr),mr}constructor(or,lr,ur){this.header=or,this.extended=lr,this.parent=ur,this.children=[],this.atomPath=(this.parent?this.parent.atomPath+".":"")+this.header.name}getHeaderLength(){return this.extended?16:8}getPayloadLength(or){return(this.header.length===BigInt(0)?or:Number(this.header.length))-this.getHeaderLength()}async readAtoms(or,lr,ur){for(;ur>0;){const cr=await Atom.readAtom(or,lr,this,ur);this.children.push(cr),ur-=cr.header.length===BigInt(0)?ur:Number(cr.header.length)}}async readData(or,lr,ur){switch(this.header.name){case"moov":case"udta":case"trak":case"mdia":case"minf":case"stbl":case"<id>":case"ilst":case"tref":return this.readAtoms(or,lr,this.getPayloadLength(ur));case"meta":const dr=(await or.peekToken(AtomToken$1.Header)).name==="hdlr"?0:4;return await or.ignore(dr),this.readAtoms(or,lr,this.getPayloadLength(ur)-dr);case"mdhd":case"mvhd":case"tkhd":case"stsz":case"mdat":default:return lr(this,ur)}}}Atom$1.Atom=Atom;Object.defineProperty(MP4Parser$1,"__esModule",{value:!0});MP4Parser$1.MP4Parser=void 0;const debug_1$e=browserExports$2,Token$i=lib$1,BasicParser_1$7=BasicParser$1,ID3v1Parser_1$1=ID3v1Parser,type_1=type,Atom_1=Atom$1,AtomToken=AtomToken$2,debug$e=(0,debug_1$e.default)("music-metadata:parser:MP4"),tagFormat="iTunes",encoderDict={raw:{lossy:!1,format:"raw"},MAC3:{lossy:!0,format:"MACE 3:1"},MAC6:{lossy:!0,format:"MACE 6:1"},ima4:{lossy:!0,format:"IMA 4:1"},ulaw:{lossy:!0,format:"uLaw 2:1"},alaw:{lossy:!0,format:"uLaw 2:1"},Qclp:{lossy:!0,format:"QUALCOMM PureVoice"},".mp3":{lossy:!0,format:"MPEG-1 layer 3"},alac:{lossy:!1,format:"ALAC"},"ac-3":{lossy:!0,format:"AC-3"},mp4a:{lossy:!0,format:"MPEG-4/AAC"},mp4s:{lossy:!0,format:"MP4S"},c608:{lossy:!0,format:"CEA-608"},c708:{lossy:!0,format:"CEA-708"}};function distinct(ar,or,lr){return lr.indexOf(ar)===or}class MP4Parser extends BasicParser_1$7.BasicParser{constructor(){super(...arguments),this.atomParsers={mvhd:async or=>{const lr=await this.tokenizer.readToken(new AtomToken.MvhdAtom(or));this.metadata.setFormat("creationTime",lr.creationTime),this.metadata.setFormat("modificationTime",lr.modificationTime)},mdhd:async or=>{const lr=await this.tokenizer.readToken(new AtomToken.MdhdAtom(or)),ur=this.getTrackDescription();ur.creationTime=lr.creationTime,ur.modificationTime=lr.modificationTime,ur.timeScale=lr.timeScale,ur.duration=lr.duration},chap:async or=>{const lr=this.getTrackDescription(),ur=[];for(;or>=Token$i.UINT32_BE.len;)ur.push(await this.tokenizer.readNumber(Token$i.UINT32_BE)),or-=Token$i.UINT32_BE.len;lr.chapterList=ur},tkhd:async or=>{const lr=await this.tokenizer.readToken(new AtomToken.TrackHeaderAtom(or));this.tracks.push(lr)},mdat:async or=>{if(this.audioLengthInBytes=or,this.calculateBitRate(),this.options.includeChapters){const lr=this.tracks.filter(ur=>ur.chapterList);if(lr.length===1){const ur=lr[0].chapterList,cr=this.tracks.filter(dr=>ur.indexOf(dr.trackId)!==-1);if(cr.length===1)return this.parseChapterTrack(cr[0],lr[0],or)}}await this.tokenizer.ignore(or)},ftyp:async or=>{const lr=[];for(;or>0;){const cr=await this.tokenizer.readToken(AtomToken.ftyp);or-=AtomToken.ftyp.len;const dr=cr.type.replace(/\W/g,"");dr.length>0&&lr.push(dr)}debug$e(`ftyp: ${lr.join("/")}`);const ur=lr.filter(distinct).join("/");this.metadata.setFormat("container",ur)},stsd:async or=>{const lr=await this.tokenizer.readToken(new AtomToken.StsdAtom(or)),ur=this.getTrackDescription();ur.soundSampleDescription=lr.table.map(cr=>this.parseSoundSampleDescription(cr))},stsc:async or=>{const lr=await this.tokenizer.readToken(new AtomToken.StscAtom(or));this.getTrackDescription().sampleToChunkTable=lr.entries},stts:async or=>{const lr=await this.tokenizer.readToken(new AtomToken.SttsAtom(or));this.getTrackDescription().timeToSampleTable=lr.entries},stsz:async or=>{const lr=await this.tokenizer.readToken(new AtomToken.StszAtom(or)),ur=this.getTrackDescription();ur.sampleSize=lr.sampleSize,ur.sampleSizeTable=lr.entries},stco:async or=>{const lr=await this.tokenizer.readToken(new AtomToken.StcoAtom(or));this.getTrackDescription().chunkOffsetTable=lr.entries},date:async or=>{const lr=await this.tokenizer.readToken(new Token$i.StringType(or,"utf-8"));this.addTag("date",lr)}}}static read_BE_Integer(or,lr){const ur=(lr?"INT":"UINT")+or.length*8+(or.length>1?"_BE":""),cr=Token$i[ur];if(!cr)throw new Error('Token for integer type not found: "'+ur+'"');return Number(cr.get(or,0))}async parse(){this.tracks=[];let or=this.tokenizer.fileInfo.size;for(;!this.tokenizer.fileInfo.size||or>0;){try{if((await this.tokenizer.peekToken(AtomToken.Header)).name==="\0\0\0\0"){const fr=`Error at offset=${this.tokenizer.position}: box.id=0`;debug$e(fr),this.addWarning(fr);break}}catch(dr){const fr=`Error at offset=${this.tokenizer.position}: ${dr.message}`;debug$e(fr),this.addWarning(fr);break}const cr=await Atom_1.Atom.readAtom(this.tokenizer,(dr,fr)=>this.handleAtom(dr,fr),null,or);or-=cr.header.length===BigInt(0)?or:Number(cr.header.length)}const lr=[];this.tracks.forEach(cr=>{const dr=[];cr.soundSampleDescription.forEach(fr=>{const pr={},mr=encoderDict[fr.dataFormat];if(mr?(dr.push(mr.format),pr.codecName=mr.format):pr.codecName=`<${fr.dataFormat}>`,fr.description){const{description:hr}=fr;hr.sampleRate>0&&(pr.type=type_1.TrackType.audio,pr.audio={samplingFrequency:hr.sampleRate,bitDepth:hr.sampleSize,channels:hr.numAudioChannels})}this.metadata.addStreamInfo(pr)}),dr.length>=1&&lr.push(dr.join("/"))}),lr.length>0&&this.metadata.setFormat("codec",lr.filter(distinct).join("+"));const ur=this.tracks.filter(cr=>cr.soundSampleDescription.length>=1&&cr.soundSampleDescription[0].description&&cr.soundSampleDescription[0].description.numAudioChannels>0);if(ur.length>=1){const cr=ur[0];if(cr.timeScale>0){const pr=cr.duration/cr.timeScale;this.metadata.setFormat("duration",pr)}const dr=cr.soundSampleDescription[0];if(dr.description&&(this.metadata.setFormat("sampleRate",dr.description.sampleRate),this.metadata.setFormat("bitsPerSample",dr.description.sampleSize),this.metadata.setFormat("numberOfChannels",dr.description.numAudioChannels),cr.timeScale===0&&cr.timeToSampleTable.length>0)){const mr=cr.timeToSampleTable.map(hr=>hr.count*hr.duration).reduce((hr,gr)=>hr+gr)/dr.description.sampleRate;this.metadata.setFormat("duration",mr)}const fr=encoderDict[dr.dataFormat];fr&&this.metadata.setFormat("lossless",!fr.lossy),this.calculateBitRate()}}async handleAtom(or,lr){if(or.parent)switch(or.parent.header.name){case"ilst":case"<id>":return this.parseMetadataItemData(or)}if(this.atomParsers[or.header.name])return this.atomParsers[or.header.name](lr);debug$e(`No parser for atom path=${or.atomPath}, payload-len=${lr}, ignoring atom`),await this.tokenizer.ignore(lr)}getTrackDescription(){return this.tracks[this.tracks.length-1]}calculateBitRate(){this.audioLengthInBytes&&this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*this.audioLengthInBytes/this.metadata.format.duration)}addTag(or,lr){this.metadata.addTag(tagFormat,or,lr)}addWarning(or){debug$e("Warning: "+or),this.metadata.addWarning(or)}parseMetadataItemData(or){let lr=or.header.name;return or.readAtoms(this.tokenizer,async(ur,cr)=>{const dr=ur.getPayloadLength(cr);switch(ur.header.name){case"data":return this.parseValueAtom(lr,ur);case"name":case"mean":case"rate":const fr=await this.tokenizer.readToken(new AtomToken.NameAtom(dr));lr+=":"+fr.name;break;default:const pr=await this.tokenizer.readToken(new Token$i.BufferType(dr));this.addWarning("Unsupported meta-item: "+lr+"["+ur.header.name+"] => value="+pr.toString("hex")+" ascii="+pr.toString("ascii"))}},or.getPayloadLength(0))}async parseValueAtom(or,lr){const ur=await this.tokenizer.readToken(new AtomToken.DataAtom(Number(lr.header.length)-AtomToken.Header.len));if(ur.type.set!==0)throw new Error("Unsupported type-set != 0: "+ur.type.set);switch(ur.type.type){case 0:switch(or){case"trkn":case"disk":const cr=Token$i.UINT8.get(ur.value,3),dr=Token$i.UINT8.get(ur.value,5);this.addTag(or,cr+"/"+dr);break;case"gnre":const fr=Token$i.UINT8.get(ur.value,1),pr=ID3v1Parser_1$1.Genres[fr-1];this.addTag(or,pr);break;case"rate":const mr=ur.value.toString("ascii");this.addTag(or,mr);break;default:debug$e("unknown proprietary value type for: "+lr.atomPath)}break;case 1:case 18:this.addTag(or,ur.value.toString("utf-8"));break;case 13:if(this.options.skipCovers)break;this.addTag(or,{format:"image/jpeg",data:Buffer.from(ur.value)});break;case 14:if(this.options.skipCovers)break;this.addTag(or,{format:"image/png",data:Buffer.from(ur.value)});break;case 21:this.addTag(or,MP4Parser.read_BE_Integer(ur.value,!0));break;case 22:this.addTag(or,MP4Parser.read_BE_Integer(ur.value,!1));break;case 65:this.addTag(or,ur.value.readInt8(0));break;case 66:this.addTag(or,ur.value.readInt16BE(0));break;case 67:this.addTag(or,ur.value.readInt32BE(0));break;default:this.addWarning(`atom key=${or}, has unknown well-known-type (data-type): ${ur.type.type}`)}}parseSoundSampleDescription(or){const lr={dataFormat:or.dataFormat,dataReferenceIndex:or.dataReferenceIndex};let ur=0;const cr=AtomToken.SoundSampleDescriptionVersion.get(or.description,ur);return ur+=AtomToken.SoundSampleDescriptionVersion.len,cr.version===0||cr.version===1?lr.description=AtomToken.SoundSampleDescriptionV0.get(or.description,ur):debug$e(`Warning: sound-sample-description ${cr} not implemented`),lr}async parseChapterTrack(or,lr,ur){if(!or.sampleSize&&or.chunkOffsetTable.length!==or.sampleSizeTable.length)throw new Error("Expected equal chunk-offset-table & sample-size-table length.");const cr=[];for(let dr=0;dr<or.chunkOffsetTable.length&&ur>0;++dr){const pr=or.chunkOffsetTable[dr]-this.tokenizer.position,mr=or.sampleSize>0?or.sampleSize:or.sampleSizeTable[dr];if(ur-=pr+mr,ur<0)throw new Error("Chapter chunk exceeding token length");await this.tokenizer.ignore(pr);const hr=await this.tokenizer.readToken(new AtomToken.ChapterText(mr));debug$e(`Chapter ${dr+1}: ${hr}`);const gr={title:hr,sampleOffset:this.findSampleOffset(lr,this.tokenizer.position)};debug$e(`Chapter title=${gr.title}, offset=${gr.sampleOffset}/${this.tracks[0].duration}`),cr.push(gr)}this.metadata.setFormat("chapters",cr),await this.tokenizer.ignore(ur)}findSampleOffset(or,lr){let ur=0;or.timeToSampleTable.forEach(dr=>{ur+=dr.count*dr.duration}),debug$e(`Total duration=${ur}`);let cr=0;for(;cr<or.chunkOffsetTable.length&&or.chunkOffsetTable[cr]<lr;)++cr;return this.getChunkDuration(cr+1,or)}getChunkDuration(or,lr){let ur=0,cr=lr.timeToSampleTable[ur].count,dr=lr.timeToSampleTable[ur].duration,fr=1,pr=this.getSamplesPerChunk(fr,lr.sampleToChunkTable),mr=0;for(;fr<or;){const hr=Math.min(cr,pr);mr+=hr*dr,cr-=hr,pr-=hr,pr===0?(++fr,pr=this.getSamplesPerChunk(fr,lr.sampleToChunkTable)):(++ur,cr=lr.timeToSampleTable[ur].count,dr=lr.timeToSampleTable[ur].duration)}return mr}getSamplesPerChunk(or,lr){for(let ur=0;ur<lr.length-1;++ur)if(or>=lr[ur].firstChunk&&or<lr[ur+1].firstChunk)return lr[ur].samplesPerChunk;return lr[lr.length-1].samplesPerChunk}}MP4Parser$1.MP4Parser=MP4Parser;var MpegParser$1={},XingTag={},ExtendedLameHeader={},ReplayGainDataFormat={};Object.defineProperty(ReplayGainDataFormat,"__esModule",{value:!0});ReplayGainDataFormat.ReplayGain=void 0;const common$2=Util;var NameCode;(function(ar){ar[ar.not_set=0]="not_set",ar[ar.radio=1]="radio",ar[ar.audiophile=2]="audiophile"})(NameCode||(NameCode={}));var ReplayGainOriginator;(function(ar){ar[ar.unspecified=0]="unspecified",ar[ar.engineer=1]="engineer",ar[ar.user=2]="user",ar[ar.automatic=3]="automatic",ar[ar.rms_average=4]="rms_average"})(ReplayGainOriginator||(ReplayGainOriginator={}));ReplayGainDataFormat.ReplayGain={len:2,get:(ar,or)=>{const lr=common$2.getBitAllignedNumber(ar,or,0,3),ur=common$2.getBitAllignedNumber(ar,or,6,1),cr=common$2.getBitAllignedNumber(ar,or,7,9)/10;if(lr>0)return{type:common$2.getBitAllignedNumber(ar,or,0,3),origin:common$2.getBitAllignedNumber(ar,or,3,3),adjustment:ur?-cr:cr}}};Object.defineProperty(ExtendedLameHeader,"__esModule",{value:!0});ExtendedLameHeader.ExtendedLameHeader=void 0;const Token$h=lib$1,common$1=Util,ReplayGainDataFormat_1=ReplayGainDataFormat;ExtendedLameHeader.ExtendedLameHeader={len:27,get:(ar,or)=>{const lr=Token$h.UINT32_BE.get(ar,or+2);return{revision:common$1.getBitAllignedNumber(ar,or,0,4),vbr_method:common$1.getBitAllignedNumber(ar,or,4,4),lowpass_filter:100*Token$h.UINT8.get(ar,or+1),track_peak:lr===0?void 0:lr/Math.pow(2,23),track_gain:ReplayGainDataFormat_1.ReplayGain.get(ar,6),album_gain:ReplayGainDataFormat_1.ReplayGain.get(ar,8),music_length:Token$h.UINT32_BE.get(ar,or+20),music_crc:Token$h.UINT8.get(ar,or+24),header_crc:Token$h.UINT16_BE.get(ar,or+24)}}};(function(ar){Object.defineProperty(ar,"__esModule",{value:!0}),ar.readXingHeader=ar.XingHeaderFlags=ar.LameEncoderVersion=ar.InfoTagHeaderTag=void 0;const or=lib$1,lr=Util,ur=ExtendedLameHeader;ar.InfoTagHeaderTag=new or.StringType(4,"ascii"),ar.LameEncoderVersion=new or.StringType(6,"ascii"),ar.XingHeaderFlags={len:4,get:(dr,fr)=>({frames:lr.isBitSet(dr,fr,31),bytes:lr.isBitSet(dr,fr,30),toc:lr.isBitSet(dr,fr,29),vbrScale:lr.isBitSet(dr,fr,28)})};async function cr(dr){const fr=await dr.readToken(ar.XingHeaderFlags),pr={};if(fr.frames&&(pr.numFrames=await dr.readToken(or.UINT32_BE)),fr.bytes&&(pr.streamSize=await dr.readToken(or.UINT32_BE)),fr.toc&&(pr.toc=Buffer.alloc(100),await dr.readBuffer(pr.toc)),fr.vbrScale&&(pr.vbrScale=await dr.readToken(or.UINT32_BE)),await dr.peekToken(new or.StringType(4,"ascii"))==="LAME"&&(await dr.ignore(4),pr.lame={version:await dr.readToken(new or.StringType(5,"ascii"))},pr.lame.version.match(/\d+.\d+/g))){const vr=pr.lame.version.match(/\d+.\d+/g)[0].split(".").map(wr=>parseInt(wr,10));vr[0]>=3&&vr[1]>=90&&(pr.lame.extended=await dr.readToken(ur.ExtendedLameHeader))}return pr}ar.readXingHeader=cr})(XingTag);Object.defineProperty(MpegParser$1,"__esModule",{value:!0});MpegParser$1.MpegParser=void 0;const Token$g=lib$1,core_1$1=core$1,debug_1$d=browserExports$2,common=Util,AbstractID3Parser_1$2=AbstractID3Parser$1,XingTag_1=XingTag,debug$d=(0,debug_1$d.default)("music-metadata:parser:mpeg"),maxPeekLen=1024,MPEG4={AudioObjectTypes:["AAC Main","AAC LC","AAC SSR","AAC LTP"],SamplingFrequencies:[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,void 0,void 0,-1]},MPEG4_ChannelConfigurations=[void 0,["front-center"],["front-left","front-right"],["front-center","front-left","front-right"],["front-center","front-left","front-right","back-center"],["front-center","front-left","front-right","back-left","back-right"],["front-center","front-left","front-right","back-left","back-right","LFE-channel"],["front-center","front-left","front-right","side-left","side-right","back-left","back-right","LFE-channel"]];class MpegFrameHeader{constructor(or,lr){this.versionIndex=common.getBitAllignedNumber(or,lr+1,3,2),this.layer=MpegFrameHeader.LayerDescription[common.getBitAllignedNumber(or,lr+1,5,2)],this.versionIndex>1&&this.layer===0?this.parseAdtsHeader(or,lr):this.parseMpegHeader(or,lr),this.isProtectedByCRC=!common.isBitSet(or,lr+1,7)}calcDuration(or){return or*this.calcSamplesPerFrame()/this.samplingRate}calcSamplesPerFrame(){return MpegFrameHeader.samplesInFrameTable[this.version===1?0:1][this.layer]}calculateSideInfoLength(){if(this.layer!==3)return 2;if(this.channelModeIndex===3){if(this.version===1)return 17;if(this.version===2||this.version===2.5)return 9}else{if(this.version===1)return 32;if(this.version===2||this.version===2.5)return 17}}calcSlotSize(){return[null,4,1,1][this.layer]}parseMpegHeader(or,lr){this.container="MPEG",this.bitrateIndex=common.getBitAllignedNumber(or,lr+2,0,4),this.sampRateFreqIndex=common.getBitAllignedNumber(or,lr+2,4,2),this.padding=common.isBitSet(or,lr+2,6),this.privateBit=common.isBitSet(or,lr+2,7),this.channelModeIndex=common.getBitAllignedNumber(or,lr+3,0,2),this.modeExtension=common.getBitAllignedNumber(or,lr+3,2,2),this.isCopyrighted=common.isBitSet(or,lr+3,4),this.isOriginalMedia=common.isBitSet(or,lr+3,5),this.emphasis=common.getBitAllignedNumber(or,lr+3,7,2),this.version=MpegFrameHeader.VersionID[this.versionIndex],this.channelMode=MpegFrameHeader.ChannelMode[this.channelModeIndex],this.codec=`MPEG ${this.version} Layer ${this.layer}`;const ur=this.calcBitrate();if(!ur)throw new Error("Cannot determine bit-rate");if(this.bitrate=ur*1e3,this.samplingRate=this.calcSamplingRate(),this.samplingRate==null)throw new Error("Cannot determine sampling-rate")}parseAdtsHeader(or,lr){debug$d("layer=0 => ADTS"),this.version=this.versionIndex===2?4:2,this.container="ADTS/MPEG-"+this.version;const ur=common.getBitAllignedNumber(or,lr+2,0,2);this.codec="AAC",this.codecProfile=MPEG4.AudioObjectTypes[ur],debug$d(`MPEG-4 audio-codec=${this.codec}`);const cr=common.getBitAllignedNumber(or,lr+2,2,4);this.samplingRate=MPEG4.SamplingFrequencies[cr],debug$d(`sampling-rate=${this.samplingRate}`);const dr=common.getBitAllignedNumber(or,lr+2,7,3);this.mp4ChannelConfig=MPEG4_ChannelConfigurations[dr],debug$d(`channel-config=${this.mp4ChannelConfig.join("+")}`),this.frameLength=common.getBitAllignedNumber(or,lr+3,6,2)<<11}calcBitrate(){if(this.bitrateIndex===0||this.bitrateIndex===15)return;const or=`${Math.floor(this.version)}${this.layer}`;return MpegFrameHeader.bitrate_index[this.bitrateIndex][or]}calcSamplingRate(){return this.sampRateFreqIndex===3?null:MpegFrameHeader.sampling_rate_freq_index[this.version][this.sampRateFreqIndex]}}MpegFrameHeader.SyncByte1=255;MpegFrameHeader.SyncByte2=224;MpegFrameHeader.VersionID=[2.5,null,2,1];MpegFrameHeader.LayerDescription=[0,3,2,1];MpegFrameHeader.ChannelMode=["stereo","joint_stereo","dual_channel","mono"];MpegFrameHeader.bitrate_index={1:{11:32,12:32,13:32,21:32,22:8,23:8},2:{11:64,12:48,13:40,21:48,22:16,23:16},3:{11:96,12:56,13:48,21:56,22:24,23:24},4:{11:128,12:64,13:56,21:64,22:32,23:32},5:{11:160,12:80,13:64,21:80,22:40,23:40},6:{11:192,12:96,13:80,21:96,22:48,23:48},7:{11:224,12:112,13:96,21:112,22:56,23:56},8:{11:256,12:128,13:112,21:128,22:64,23:64},9:{11:288,12:160,13:128,21:144,22:80,23:80},10:{11:320,12:192,13:160,21:160,22:96,23:96},11:{11:352,12:224,13:192,21:176,22:112,23:112},12:{11:384,12:256,13:224,21:192,22:128,23:128},13:{11:416,12:320,13:256,21:224,22:144,23:144},14:{11:448,12:384,13:320,21:256,22:160,23:160}};MpegFrameHeader.sampling_rate_freq_index={1:{0:44100,1:48e3,2:32e3},2:{0:22050,1:24e3,2:16e3},2.5:{0:11025,1:12e3,2:8e3}};MpegFrameHeader.samplesInFrameTable=[[0,384,1152,1152],[0,384,1152,576]];const FrameHeader={len:4,get:(ar,or)=>new MpegFrameHeader(ar,or)};function getVbrCodecProfile(ar){return"V"+Math.floor((100-ar)/10)}class MpegParser extends AbstractID3Parser_1$2.AbstractID3Parser{constructor(){super(...arguments),this.frameCount=0,this.syncFrameCount=-1,this.countSkipFrameData=0,this.totalDataLength=0,this.bitrates=[],this.calculateEofDuration=!1,this.buf_frame_header=Buffer.alloc(4),this.syncPeek={buf:Buffer.alloc(maxPeekLen),len:0}}async postId3v2Parse(){this.metadata.setFormat("lossless",!1);try{let or=!1;for(;!or;)await this.sync(),or=await this.parseCommonMpegHeader()}catch(or){if(or instanceof core_1$1.EndOfStreamError){if(debug$d("End-of-stream"),this.calculateEofDuration){const lr=this.frameCount*this.samplesPerFrame;this.metadata.setFormat("numberOfSamples",lr);const ur=lr/this.metadata.format.sampleRate;debug$d(`Calculate duration at EOF: ${ur} sec.`,ur),this.metadata.setFormat("duration",ur)}}else throw or}}finalize(){const or=this.metadata.format,lr=this.metadata.native.hasOwnProperty("ID3v1");if(or.duration&&this.tokenizer.fileInfo.size){const ur=this.tokenizer.fileInfo.size-this.mpegOffset-(lr?128:0);or.codecProfile&&or.codecProfile[0]==="V"&&this.metadata.setFormat("bitrate",ur*8/or.duration)}else if(this.tokenizer.fileInfo.size&&or.codecProfile==="CBR"){const ur=this.tokenizer.fileInfo.size-this.mpegOffset-(lr?128:0),cr=Math.round(ur/this.frame_size)*this.samplesPerFrame;this.metadata.setFormat("numberOfSamples",cr);const dr=cr/or.sampleRate;debug$d("Calculate CBR duration based on file size: %s",dr),this.metadata.setFormat("duration",dr)}}async sync(){let or=!1;for(;;){let lr=0;if(this.syncPeek.len=await this.tokenizer.peekBuffer(this.syncPeek.buf,{length:maxPeekLen,mayBeLess:!0}),this.syncPeek.len<=163)throw new core_1$1.EndOfStreamError;for(;;)if(or&&(this.syncPeek.buf[lr]&224)===224){this.buf_frame_header[0]=MpegFrameHeader.SyncByte1,this.buf_frame_header[1]=this.syncPeek.buf[lr],await this.tokenizer.ignore(lr),debug$d(`Sync at offset=${this.tokenizer.position-1}, frameCount=${this.frameCount}`),this.syncFrameCount===this.frameCount&&(debug$d(`Re-synced MPEG stream, frameCount=${this.frameCount}`),this.frameCount=0,this.frame_size=0),this.syncFrameCount=this.frameCount;return}else if(or=!1,lr=this.syncPeek.buf.indexOf(MpegFrameHeader.SyncByte1,lr),lr===-1){if(this.syncPeek.len<this.syncPeek.buf.length)throw new core_1$1.EndOfStreamError;await this.tokenizer.ignore(this.syncPeek.len);break}else++lr,or=!0}}async parseCommonMpegHeader(){this.frameCount===0&&(this.mpegOffset=this.tokenizer.position-1),await this.tokenizer.peekBuffer(this.buf_frame_header,{offset:1,length:3});let or;try{or=FrameHeader.get(this.buf_frame_header,0)}catch(lr){return await this.tokenizer.ignore(1),this.metadata.addWarning("Parse error: "+lr.message),!1}return await this.tokenizer.ignore(3),this.metadata.setFormat("container",or.container),this.metadata.setFormat("codec",or.codec),this.metadata.setFormat("lossless",!1),this.metadata.setFormat("sampleRate",or.samplingRate),this.frameCount++,or.version>=2&&or.layer===0?this.parseAdts(or):this.parseAudioFrameHeader(or)}async parseAudioFrameHeader(or){this.metadata.setFormat("numberOfChannels",or.channelMode==="mono"?1:2),this.metadata.setFormat("bitrate",or.bitrate),this.frameCount<20*1e4&&debug$d("offset=%s MP%s bitrate=%s sample-rate=%s",this.tokenizer.position-4,or.layer,or.bitrate,or.samplingRate);const lr=or.calcSlotSize();if(lr===null)throw new Error("invalid slot_size");const ur=or.calcSamplesPerFrame();debug$d(`samples_per_frame=${ur}`);const dr=ur/8*or.bitrate/or.samplingRate+(or.padding?lr:0);if(this.frame_size=Math.floor(dr),this.audioFrameHeader=or,this.bitrates.push(or.bitrate),this.frameCount===1)return this.offset=FrameHeader.len,await this.skipSideInformation(),!1;if(this.frameCount===3){if(this.areAllSame(this.bitrates)){if(this.samplesPerFrame=ur,this.metadata.setFormat("codecProfile","CBR"),this.tokenizer.fileInfo.size)return!0}else if(this.metadata.format.duration)return!0;if(!this.options.duration)return!0}return this.options.duration&&this.frameCount===4&&(this.samplesPerFrame=ur,this.calculateEofDuration=!0),this.offset=4,or.isProtectedByCRC?(await this.parseCrc(),!1):(await this.skipSideInformation(),!1)}async parseAdts(or){const lr=Buffer.alloc(3);await this.tokenizer.readBuffer(lr),or.frameLength+=common.getBitAllignedNumber(lr,0,0,11),this.totalDataLength+=or.frameLength,this.samplesPerFrame=1024;const ur=or.samplingRate/this.samplesPerFrame,dr=8*(this.frameCount===0?0:this.totalDataLength/this.frameCount)*ur+.5;if(this.metadata.setFormat("bitrate",dr),debug$d(`frame-count=${this.frameCount}, size=${or.frameLength} bytes, bit-rate=${dr}`),await this.tokenizer.ignore(or.frameLength>7?or.frameLength-7:1),this.frameCount===3)if(this.metadata.setFormat("codecProfile",or.codecProfile),or.mp4ChannelConfig&&this.metadata.setFormat("numberOfChannels",or.mp4ChannelConfig.length),this.options.duration)this.calculateEofDuration=!0;else return!0;return!1}async parseCrc(){return this.crc=await this.tokenizer.readNumber(Token$g.INT16_BE),this.offset+=2,this.skipSideInformation()}async skipSideInformation(){const or=this.audioFrameHeader.calculateSideInfoLength();await this.tokenizer.readToken(new Token$g.Uint8ArrayType(or)),this.offset+=or,await this.readXtraInfoHeader()}async readXtraInfoHeader(){const or=await this.tokenizer.readToken(XingTag_1.InfoTagHeaderTag);switch(this.offset+=XingTag_1.InfoTagHeaderTag.len,or){case"Info":return this.metadata.setFormat("codecProfile","CBR"),this.readXingInfoHeader();case"Xing":const ur=await this.readXingInfoHeader(),cr=getVbrCodecProfile(ur.vbrScale);return this.metadata.setFormat("codecProfile",cr),null;case"Xtra":break;case"LAME":const dr=await this.tokenizer.readToken(XingTag_1.LameEncoderVersion);if(this.frame_size>=this.offset+XingTag_1.LameEncoderVersion.len)return this.offset+=XingTag_1.LameEncoderVersion.len,this.metadata.setFormat("tool","LAME "+dr),await this.skipFrameData(this.frame_size-this.offset),null;this.metadata.addWarning("Corrupt LAME header");break}const lr=this.frame_size-this.offset;return lr<0?this.metadata.addWarning("Frame "+this.frameCount+"corrupt: negative frameDataLeft"):await this.skipFrameData(lr),null}async readXingInfoHeader(){const or=this.tokenizer.position,lr=await(0,XingTag_1.readXingHeader)(this.tokenizer);if(this.offset+=this.tokenizer.position-or,lr.lame&&(this.metadata.setFormat("tool","LAME "+common.stripNulls(lr.lame.version)),lr.lame.extended&&(this.metadata.setFormat("trackPeakLevel",lr.lame.extended.track_peak),lr.lame.extended.track_gain&&this.metadata.setFormat("trackGain",lr.lame.extended.track_gain.adjustment),lr.lame.extended.album_gain&&this.metadata.setFormat("albumGain",lr.lame.extended.album_gain.adjustment),this.metadata.setFormat("duration",lr.lame.extended.music_length/1e3))),lr.streamSize){const cr=this.audioFrameHeader.calcDuration(lr.numFrames);return this.metadata.setFormat("duration",cr),debug$d("Get duration from Xing header: %s",this.metadata.format.duration),lr}const ur=this.frame_size-this.offset;return await this.skipFrameData(ur),lr}async skipFrameData(or){if(or<0)throw new Error("frame-data-left cannot be negative");await this.tokenizer.ignore(or),this.countSkipFrameData+=or}areAllSame(or){const lr=or[0];return or.every(ur=>ur===lr)}}MpegParser$1.MpegParser=MpegParser;var musepack={},MpcSv8Parser$1={},StreamVersion8={};Object.defineProperty(StreamVersion8,"__esModule",{value:!0});StreamVersion8.StreamReader=void 0;const Token$f=lib$1,debug_1$c=browserExports$2,util$5=Util,debug$c=(0,debug_1$c.default)("music-metadata:parser:musepack:sv8"),PacketKey=new Token$f.StringType(2,"binary"),SH_part1={len:5,get:(ar,or)=>({crc:Token$f.UINT32_LE.get(ar,or),streamVersion:Token$f.UINT8.get(ar,or+4)})},SH_part3={len:2,get:(ar,or)=>({sampleFrequency:[44100,48e3,37800,32e3][util$5.getBitAllignedNumber(ar,or,0,3)],maxUsedBands:util$5.getBitAllignedNumber(ar,or,3,5),channelCount:util$5.getBitAllignedNumber(ar,or+1,0,4)+1,msUsed:util$5.isBitSet(ar,or+1,4),audioBlockFrames:util$5.getBitAllignedNumber(ar,or+1,5,3)})};class StreamReader{constructor(or){this.tokenizer=or}async readPacketHeader(){const or=await this.tokenizer.readToken(PacketKey),lr=await this.readVariableSizeField();return{key:or,payloadLength:lr.value-2-lr.len}}async readStreamHeader(or){const lr={};debug$c(`Reading SH at offset=${this.tokenizer.position}`);const ur=await this.tokenizer.readToken(SH_part1);or-=SH_part1.len,Object.assign(lr,ur),debug$c(`SH.streamVersion = ${ur.streamVersion}`);const cr=await this.readVariableSizeField();or-=cr.len,lr.sampleCount=cr.value;const dr=await this.readVariableSizeField();or-=dr.len,lr.beginningOfSilence=dr.value;const fr=await this.tokenizer.readToken(SH_part3);return or-=SH_part3.len,Object.assign(lr,fr),await this.tokenizer.ignore(or),lr}async readVariableSizeField(or=1,lr=0){let ur=await this.tokenizer.readNumber(Token$f.UINT8);return ur&128?(ur&=127,ur+=lr,this.readVariableSizeField(or+1,ur<<7)):{len:or,value:lr+ur}}}StreamVersion8.StreamReader=StreamReader;Object.defineProperty(MpcSv8Parser$1,"__esModule",{value:!0});MpcSv8Parser$1.MpcSv8Parser=void 0;const debug_1$b=browserExports$2,BasicParser_1$6=BasicParser$1,APEv2Parser_1$4=APEv2Parser$1,FourCC_1$6=FourCC,SV8=StreamVersion8,debug$b=(0,debug_1$b.default)("music-metadata:parser:musepack");class MpcSv8Parser extends BasicParser_1$6.BasicParser{constructor(){super(...arguments),this.audioLength=0}async parse(){if(await this.tokenizer.readToken(FourCC_1$6.FourCcToken)!=="MPCK")throw new Error("Invalid Magic number");return this.metadata.setFormat("container","Musepack, SV8"),this.parsePacket()}async parsePacket(){const or=new SV8.StreamReader(this.tokenizer);do{const lr=await or.readPacketHeader();switch(debug$b(`packet-header key=${lr.key}, payloadLength=${lr.payloadLength}`),lr.key){case"SH":const ur=await or.readStreamHeader(lr.payloadLength);this.metadata.setFormat("numberOfSamples",ur.sampleCount),this.metadata.setFormat("sampleRate",ur.sampleFrequency),this.metadata.setFormat("duration",ur.sampleCount/ur.sampleFrequency),this.metadata.setFormat("numberOfChannels",ur.channelCount);break;case"AP":this.audioLength+=lr.payloadLength,await this.tokenizer.ignore(lr.payloadLength);break;case"RG":case"EI":case"SO":case"ST":case"CT":await this.tokenizer.ignore(lr.payloadLength);break;case"SE":return this.metadata.setFormat("bitrate",this.audioLength*8/this.metadata.format.duration),APEv2Parser_1$4.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options);default:throw new Error(`Unexpected header: ${lr.key}`)}}while(!0)}}MpcSv8Parser$1.MpcSv8Parser=MpcSv8Parser;var MpcSv7Parser$1={},BitReader$1={};Object.defineProperty(BitReader$1,"__esModule",{value:!0});BitReader$1.BitReader=void 0;const Token$e=lib$1;class BitReader{constructor(or){this.tokenizer=or,this.pos=0,this.dword=void 0}async read(or){for(;this.dword===void 0;)this.dword=await this.tokenizer.readToken(Token$e.UINT32_LE);let lr=this.dword;return this.pos+=or,this.pos<32?(lr>>>=32-this.pos,lr&(1<<or)-1):(this.pos-=32,this.pos===0?(this.dword=void 0,lr&(1<<or)-1):(this.dword=await this.tokenizer.readToken(Token$e.UINT32_LE),this.pos&&(lr<<=this.pos,lr|=this.dword>>>32-this.pos),lr&(1<<or)-1))}async ignore(or){if(this.pos>0){const cr=32-this.pos;this.dword=void 0,or-=cr,this.pos=0}const lr=or%32,ur=(or-lr)/32;return await this.tokenizer.ignore(ur*4),this.read(lr)}}BitReader$1.BitReader=BitReader;var StreamVersion7={};Object.defineProperty(StreamVersion7,"__esModule",{value:!0});StreamVersion7.Header=void 0;const Token$d=lib$1,util$4=Util;StreamVersion7.Header={len:6*4,get:(ar,or)=>{const lr={signature:Buffer.from(ar).toString("latin1",or,or+3),streamMinorVersion:util$4.getBitAllignedNumber(ar,or+3,0,4),streamMajorVersion:util$4.getBitAllignedNumber(ar,or+3,4,4),frameCount:Token$d.UINT32_LE.get(ar,or+4),maxLevel:Token$d.UINT16_LE.get(ar,or+8),sampleFrequency:[44100,48e3,37800,32e3][util$4.getBitAllignedNumber(ar,or+10,0,2)],link:util$4.getBitAllignedNumber(ar,or+10,2,2),profile:util$4.getBitAllignedNumber(ar,or+10,4,4),maxBand:util$4.getBitAllignedNumber(ar,or+11,0,6),intensityStereo:util$4.isBitSet(ar,or+11,6),midSideStereo:util$4.isBitSet(ar,or+11,7),titlePeak:Token$d.UINT16_LE.get(ar,or+12),titleGain:Token$d.UINT16_LE.get(ar,or+14),albumPeak:Token$d.UINT16_LE.get(ar,or+16),albumGain:Token$d.UINT16_LE.get(ar,or+18),lastFrameLength:Token$d.UINT32_LE.get(ar,or+20)>>>20&2047,trueGapless:util$4.isBitSet(ar,or+23,0)};return lr.lastFrameLength=lr.trueGapless?Token$d.UINT32_LE.get(ar,20)>>>20&2047:0,lr}};Object.defineProperty(MpcSv7Parser$1,"__esModule",{value:!0});MpcSv7Parser$1.MpcSv7Parser=void 0;const debug_1$a=browserExports$2,BasicParser_1$5=BasicParser$1,APEv2Parser_1$3=APEv2Parser$1,BitReader_1=BitReader$1,SV7=StreamVersion7,debug$a=(0,debug_1$a.default)("music-metadata:parser:musepack");class MpcSv7Parser extends BasicParser_1$5.BasicParser{constructor(){super(...arguments),this.audioLength=0}async parse(){const or=await this.tokenizer.readToken(SV7.Header);if(or.signature!=="MP+")throw new Error("Unexpected magic number");debug$a(`stream-version=${or.streamMajorVersion}.${or.streamMinorVersion}`),this.metadata.setFormat("container","Musepack, SV7"),this.metadata.setFormat("sampleRate",or.sampleFrequency);const lr=1152*(or.frameCount-1)+or.lastFrameLength;this.metadata.setFormat("numberOfSamples",lr),this.duration=lr/or.sampleFrequency,this.metadata.setFormat("duration",this.duration),this.bitreader=new BitReader_1.BitReader(this.tokenizer),this.metadata.setFormat("numberOfChannels",or.midSideStereo||or.intensityStereo?2:1);const ur=await this.bitreader.read(8);return this.metadata.setFormat("codec",(ur/100).toFixed(2)),await this.skipAudioData(or.frameCount),debug$a(`End of audio stream, switching to APEv2, offset=${this.tokenizer.position}`),APEv2Parser_1$3.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async skipAudioData(or){for(;or-- >0;){const ur=await this.bitreader.read(20);this.audioLength+=20+ur,await this.bitreader.ignore(ur)}const lr=await this.bitreader.read(11);this.audioLength+=lr,this.metadata.setFormat("bitrate",this.audioLength/this.duration)}}MpcSv7Parser$1.MpcSv7Parser=MpcSv7Parser;Object.defineProperty(musepack,"__esModule",{value:!0});const debug_1$9=browserExports$2,Token$c=lib$1,AbstractID3Parser_1$1=AbstractID3Parser$1,MpcSv8Parser_1=MpcSv8Parser$1,MpcSv7Parser_1=MpcSv7Parser$1,debug$9=(0,debug_1$9.default)("music-metadata:parser:musepack");class MusepackParser extends AbstractID3Parser_1$1.AbstractID3Parser{async postId3v2Parse(){const or=await this.tokenizer.peekToken(new Token$c.StringType(3,"binary"));let lr;switch(or){case"MP+":{debug$9("Musepack stream-version 7"),lr=new MpcSv7Parser_1.MpcSv7Parser;break}case"MPC":{debug$9("Musepack stream-version 8"),lr=new MpcSv8Parser_1.MpcSv8Parser;break}default:throw new Error("Invalid Musepack signature prefix")}return lr.init(this.metadata,this.tokenizer,this.options),lr.parse()}}musepack.default=MusepackParser;var OggParser$1={},OpusParser$1={},Opus$1={};Object.defineProperty(Opus$1,"__esModule",{value:!0});Opus$1.IdHeader=void 0;const Token$b=lib$1;class IdHeader{constructor(or){if(this.len=or,or<19)throw new Error("ID-header-page 0 should be at least 19 bytes long")}get(or,lr){return{magicSignature:new Token$b.StringType(8,"ascii").get(or,lr+0),version:or.readUInt8(lr+8),channelCount:or.readUInt8(lr+9),preSkip:or.readInt16LE(lr+10),inputSampleRate:or.readInt32LE(lr+12),outputGain:or.readInt16LE(lr+16),channelMapping:or.readUInt8(lr+18)}}}Opus$1.IdHeader=IdHeader;Object.defineProperty(OpusParser$1,"__esModule",{value:!0});OpusParser$1.OpusParser=void 0;const Token$a=lib$1,VorbisParser_1$2=VorbisParser$1,Opus=Opus$1;class OpusParser extends VorbisParser_1$2.VorbisParser{constructor(or,lr,ur){super(or,lr),this.tokenizer=ur,this.lastPos=-1}parseFirstPage(or,lr){if(this.metadata.setFormat("codec","Opus"),this.idHeader=new Opus.IdHeader(lr.length).get(lr,0),this.idHeader.magicSignature!=="OpusHead")throw new Error("Illegal ogg/Opus magic-signature");this.metadata.setFormat("sampleRate",this.idHeader.inputSampleRate),this.metadata.setFormat("numberOfChannels",this.idHeader.channelCount)}parseFullPage(or){switch(new Token$a.StringType(8,"ascii").get(or,0)){case"OpusTags":this.parseUserCommentList(or,8),this.lastPos=this.tokenizer.position-or.length;break}}calculateDuration(or){if(this.metadata.format.sampleRate&&or.absoluteGranulePosition>=0){const lr=or.absoluteGranulePosition-this.idHeader.preSkip;if(this.metadata.setFormat("numberOfSamples",lr),this.metadata.setFormat("duration",lr/48e3),this.lastPos!==-1&&this.tokenizer.fileInfo.size&&this.metadata.format.duration){const ur=this.tokenizer.fileInfo.size-this.lastPos;this.metadata.setFormat("bitrate",8*ur/this.metadata.format.duration)}}}}OpusParser$1.OpusParser=OpusParser;var SpeexParser$1={},Speex$1={};Object.defineProperty(Speex$1,"__esModule",{value:!0});Speex$1.Header=void 0;const Token$9=lib$1,util$3=Util;Speex$1.Header={len:80,get:(ar,or)=>({speex:new Token$9.StringType(8,"ascii").get(ar,or+0),version:util$3.trimRightNull(new Token$9.StringType(20,"ascii").get(ar,or+8)),version_id:ar.readInt32LE(or+28),header_size:ar.readInt32LE(or+32),rate:ar.readInt32LE(or+36),mode:ar.readInt32LE(or+40),mode_bitstream_version:ar.readInt32LE(or+44),nb_channels:ar.readInt32LE(or+48),bitrate:ar.readInt32LE(or+52),frame_size:ar.readInt32LE(or+56),vbr:ar.readInt32LE(or+60),frames_per_packet:ar.readInt32LE(or+64),extra_headers:ar.readInt32LE(or+68),reserved1:ar.readInt32LE(or+72),reserved2:ar.readInt32LE(or+76)})};Object.defineProperty(SpeexParser$1,"__esModule",{value:!0});SpeexParser$1.SpeexParser=void 0;const debug_1$8=browserExports$2,VorbisParser_1$1=VorbisParser$1,Speex=Speex$1,debug$8=(0,debug_1$8.default)("music-metadata:parser:ogg:speex");class SpeexParser extends VorbisParser_1$1.VorbisParser{constructor(or,lr,ur){super(or,lr),this.tokenizer=ur}parseFirstPage(or,lr){debug$8("First Ogg/Speex page");const ur=Speex.Header.get(lr,0);this.metadata.setFormat("codec",`Speex ${ur.version}`),this.metadata.setFormat("numberOfChannels",ur.nb_channels),this.metadata.setFormat("sampleRate",ur.rate),ur.bitrate!==-1&&this.metadata.setFormat("bitrate",ur.bitrate)}}SpeexParser$1.SpeexParser=SpeexParser;var TheoraParser$1={},Theora={};Object.defineProperty(Theora,"__esModule",{value:!0});Theora.IdentificationHeader=void 0;const Token$8=lib$1;Theora.IdentificationHeader={len:42,get:(ar,or)=>({id:new Token$8.StringType(7,"ascii").get(ar,or),vmaj:ar.readUInt8(or+7),vmin:ar.readUInt8(or+8),vrev:ar.readUInt8(or+9),vmbw:ar.readUInt16BE(or+10),vmbh:ar.readUInt16BE(or+17),nombr:Token$8.UINT24_BE.get(ar,or+37),nqual:ar.readUInt8(or+40)})};Object.defineProperty(TheoraParser$1,"__esModule",{value:!0});TheoraParser$1.TheoraParser=void 0;const debug_1$7=browserExports$2,Theora_1=Theora,debug$7=(0,debug_1$7.default)("music-metadata:parser:ogg:theora");class TheoraParser{constructor(or,lr,ur){this.metadata=or,this.tokenizer=ur}parsePage(or,lr){or.headerType.firstPage&&this.parseFirstPage(or,lr)}flush(){debug$7("flush")}calculateDuration(or){debug$7("duration calculation not implemented")}parseFirstPage(or,lr){debug$7("First Ogg/Theora page"),this.metadata.setFormat("codec","Theora");const ur=Theora_1.IdentificationHeader.get(lr,0);this.metadata.setFormat("bitrate",ur.nombr)}}TheoraParser$1.TheoraParser=TheoraParser;Object.defineProperty(OggParser$1,"__esModule",{value:!0});OggParser$1.OggParser=OggParser$1.SegmentTable=void 0;const Token$7=lib$1,core_1=core$1,debug_1$6=browserExports$2,util$2=Util,FourCC_1$5=FourCC,BasicParser_1$4=BasicParser$1,VorbisParser_1=VorbisParser$1,OpusParser_1=OpusParser$1,SpeexParser_1=SpeexParser$1,TheoraParser_1=TheoraParser$1,debug$6=(0,debug_1$6.default)("music-metadata:parser:ogg");class SegmentTable{static sum(or,lr,ur){let cr=0;for(let dr=lr;dr<lr+ur;++dr)cr+=or[dr];return cr}constructor(or){this.len=or.page_segments}get(or,lr){return{totalPageSize:SegmentTable.sum(or,lr,this.len)}}}OggParser$1.SegmentTable=SegmentTable;class OggParser extends BasicParser_1$4.BasicParser{async parse(){debug$6("pos=%s, parsePage()",this.tokenizer.position);try{let or;do{if(or=await this.tokenizer.readToken(OggParser.Header),or.capturePattern!=="OggS")throw new Error("Invalid Ogg capture pattern");this.metadata.setFormat("container","Ogg"),this.header=or,this.pageNumber=or.pageSequenceNo,debug$6("page#=%s, Ogg.id=%s",or.pageSequenceNo,or.capturePattern);const lr=await this.tokenizer.readToken(new SegmentTable(or));debug$6("totalPageSize=%s",lr.totalPageSize);const ur=await this.tokenizer.readToken(new Token$7.Uint8ArrayType(lr.totalPageSize));if(debug$6("firstPage=%s, lastPage=%s, continued=%s",or.headerType.firstPage,or.headerType.lastPage,or.headerType.continued),or.headerType.firstPage){const cr=new Token$7.StringType(7,"ascii").get(Buffer.from(ur),0);switch(cr){case"vorbis":debug$6("Set page consumer to Ogg/Vorbis"),this.pageConsumer=new VorbisParser_1.VorbisParser(this.metadata,this.options);break;case"OpusHea":debug$6("Set page consumer to Ogg/Opus"),this.pageConsumer=new OpusParser_1.OpusParser(this.metadata,this.options,this.tokenizer);break;case"Speex  ":debug$6("Set page consumer to Ogg/Speex"),this.pageConsumer=new SpeexParser_1.SpeexParser(this.metadata,this.options,this.tokenizer);break;case"fishead":case"\0theora":debug$6("Set page consumer to Ogg/Theora"),this.pageConsumer=new TheoraParser_1.TheoraParser(this.metadata,this.options,this.tokenizer);break;default:throw new Error("gg audio-codec not recognized (id="+cr+")")}}this.pageConsumer.parsePage(or,ur)}while(!or.headerType.lastPage)}catch(or){if(or instanceof core_1.EndOfStreamError)this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),debug$6("End-of-stream"),this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),this.header&&this.pageConsumer.calculateDuration(this.header);else if(or.message.startsWith("FourCC"))this.pageNumber>0&&(this.metadata.addWarning("Invalid FourCC ID, maybe last OGG-page is not marked with last-page flag"),this.pageConsumer.flush());else throw or}}}OggParser.Header={len:27,get:(ar,or)=>({capturePattern:FourCC_1$5.FourCcToken.get(ar,or),version:Token$7.UINT8.get(ar,or+4),headerType:{continued:util$2.getBit(ar,or+5,0),firstPage:util$2.getBit(ar,or+5,1),lastPage:util$2.getBit(ar,or+5,2)},absoluteGranulePosition:Number(Token$7.UINT64_LE.get(ar,or+6)),streamSerialNumber:Token$7.UINT32_LE.get(ar,or+14),pageSequenceNo:Token$7.UINT32_LE.get(ar,or+18),pageChecksum:Token$7.UINT32_LE.get(ar,or+22),page_segments:Token$7.UINT8.get(ar,or+26)})};OggParser$1.OggParser=OggParser;var WaveParser$1={},RiffChunk={};Object.defineProperty(RiffChunk,"__esModule",{value:!0});RiffChunk.ListInfoTagValue=RiffChunk.Header=void 0;const Token$6=lib$1;RiffChunk.Header={len:8,get:(ar,or)=>({chunkID:ar.toString("binary",or,or+4),chunkSize:Token$6.UINT32_LE.get(ar,4)})};class ListInfoTagValue{constructor(or){this.tagHeader=or,this.len=or.chunkSize,this.len+=this.len&1}get(or,lr){return new Token$6.StringType(this.tagHeader.chunkSize,"ascii").get(or,lr)}}RiffChunk.ListInfoTagValue=ListInfoTagValue;var WaveChunk$1={};(function(ar){Object.defineProperty(ar,"__esModule",{value:!0}),ar.FactChunk=ar.Format=ar.WaveFormat=void 0,function(ur){ur[ur.PCM=1]="PCM",ur[ur.ADPCM=2]="ADPCM",ur[ur.IEEE_FLOAT=3]="IEEE_FLOAT",ur[ur.MPEG_ADTS_AAC=5632]="MPEG_ADTS_AAC",ur[ur.MPEG_LOAS=5634]="MPEG_LOAS",ur[ur.RAW_AAC1=255]="RAW_AAC1",ur[ur.DOLBY_AC3_SPDIF=146]="DOLBY_AC3_SPDIF",ur[ur.DVM=8192]="DVM",ur[ur.RAW_SPORT=576]="RAW_SPORT",ur[ur.ESST_AC3=577]="ESST_AC3",ur[ur.DRM=9]="DRM",ur[ur.DTS2=8193]="DTS2",ur[ur.MPEG=80]="MPEG"}(ar.WaveFormat||(ar.WaveFormat={}));class or{constructor(cr){if(cr.chunkSize<16)throw new Error("Invalid chunk size");this.len=cr.chunkSize}get(cr,dr){return{wFormatTag:cr.readUInt16LE(dr),nChannels:cr.readUInt16LE(dr+2),nSamplesPerSec:cr.readUInt32LE(dr+4),nAvgBytesPerSec:cr.readUInt32LE(dr+8),nBlockAlign:cr.readUInt16LE(dr+12),wBitsPerSample:cr.readUInt16LE(dr+14)}}}ar.Format=or;class lr{constructor(cr){if(cr.chunkSize<4)throw new Error("Invalid fact chunk size.");this.len=cr.chunkSize}get(cr,dr){return{dwSampleLength:cr.readUInt32LE(dr)}}}ar.FactChunk=lr})(WaveChunk$1);var BwfChunk={};Object.defineProperty(BwfChunk,"__esModule",{value:!0});BwfChunk.BroadcastAudioExtensionChunk=void 0;const Token$5=lib$1,Util_1=Util;BwfChunk.BroadcastAudioExtensionChunk={len:420,get:(ar,or)=>({description:(0,Util_1.stripNulls)(new Token$5.StringType(256,"ascii").get(ar,or)).trim(),originator:(0,Util_1.stripNulls)(new Token$5.StringType(32,"ascii").get(ar,or+256)).trim(),originatorReference:(0,Util_1.stripNulls)(new Token$5.StringType(32,"ascii").get(ar,or+288)).trim(),originationDate:(0,Util_1.stripNulls)(new Token$5.StringType(10,"ascii").get(ar,or+320)).trim(),originationTime:(0,Util_1.stripNulls)(new Token$5.StringType(8,"ascii").get(ar,or+330)).trim(),timeReferenceLow:Token$5.UINT32_LE.get(ar,or+338),timeReferenceHigh:Token$5.UINT32_LE.get(ar,or+342),version:Token$5.UINT16_LE.get(ar,or+346),umid:new Token$5.Uint8ArrayType(64).get(ar,or+348),loudnessValue:Token$5.UINT16_LE.get(ar,or+412),maxTruePeakLevel:Token$5.UINT16_LE.get(ar,or+414),maxMomentaryLoudness:Token$5.UINT16_LE.get(ar,or+416),maxShortTermLoudness:Token$5.UINT16_LE.get(ar,or+418)})};Object.defineProperty(WaveParser$1,"__esModule",{value:!0});WaveParser$1.WaveParser=void 0;const strtok3$2=core$1,Token$4=lib$1,debug_1$5=browserExports$2,riff=RiffChunk,WaveChunk=WaveChunk$1,ID3v2Parser_1$2=ID3v2Parser$1,util$1=Util,FourCC_1$4=FourCC,BasicParser_1$3=BasicParser$1,BwfChunk_1=BwfChunk,debug$5=(0,debug_1$5.default)("music-metadata:parser:RIFF");class WaveParser extends BasicParser_1$3.BasicParser{async parse(){const or=await this.tokenizer.readToken(riff.Header);if(debug$5(`pos=${this.tokenizer.position}, parse: chunkID=${or.chunkID}`),or.chunkID==="RIFF")return this.parseRiffChunk(or.chunkSize).catch(lr=>{if(!(lr instanceof strtok3$2.EndOfStreamError))throw lr})}async parseRiffChunk(or){const lr=await this.tokenizer.readToken(FourCC_1$4.FourCcToken);switch(this.metadata.setFormat("container",lr),lr){case"WAVE":return this.readWaveChunk(or-FourCC_1$4.FourCcToken.len);default:throw new Error(`Unsupported RIFF format: RIFF/${lr}`)}}async readWaveChunk(or){for(;or>=riff.Header.len;){const lr=await this.tokenizer.readToken(riff.Header);switch(or-=riff.Header.len+lr.chunkSize,lr.chunkSize>or&&this.metadata.addWarning("Data chunk size exceeds file size"),this.header=lr,debug$5(`pos=${this.tokenizer.position}, readChunk: chunkID=RIFF/WAVE/${lr.chunkID}`),lr.chunkID){case"LIST":await this.parseListTag(lr);break;case"fact":this.metadata.setFormat("lossless",!1),this.fact=await this.tokenizer.readToken(new WaveChunk.FactChunk(lr));break;case"fmt ":const ur=await this.tokenizer.readToken(new WaveChunk.Format(lr));let cr=WaveChunk.WaveFormat[ur.wFormatTag];cr||(debug$5("WAVE/non-PCM format="+ur.wFormatTag),cr="non-PCM ("+ur.wFormatTag+")"),this.metadata.setFormat("codec",cr),this.metadata.setFormat("bitsPerSample",ur.wBitsPerSample),this.metadata.setFormat("sampleRate",ur.nSamplesPerSec),this.metadata.setFormat("numberOfChannels",ur.nChannels),this.metadata.setFormat("bitrate",ur.nBlockAlign*ur.nSamplesPerSec*8),this.blockAlign=ur.nBlockAlign;break;case"id3 ":case"ID3 ":const dr=await this.tokenizer.readToken(new Token$4.Uint8ArrayType(lr.chunkSize)),fr=strtok3$2.fromBuffer(dr);await new ID3v2Parser_1$2.ID3v2Parser().parse(this.metadata,fr,this.options);break;case"data":this.metadata.format.lossless!==!1&&this.metadata.setFormat("lossless",!0);let pr=lr.chunkSize;if(this.tokenizer.fileInfo.size){const vr=this.tokenizer.fileInfo.size-this.tokenizer.position;vr<pr&&(this.metadata.addWarning("data chunk length exceeding file length"),pr=vr)}const mr=this.fact?this.fact.dwSampleLength:pr===4294967295?void 0:pr/this.blockAlign;mr&&(this.metadata.setFormat("numberOfSamples",mr),this.metadata.setFormat("duration",mr/this.metadata.format.sampleRate)),this.metadata.format.codec==="ADPCM"?this.metadata.setFormat("bitrate",352e3):this.metadata.setFormat("bitrate",this.blockAlign*this.metadata.format.sampleRate*8),await this.tokenizer.ignore(lr.chunkSize);break;case"bext":const hr=await this.tokenizer.readToken(BwfChunk_1.BroadcastAudioExtensionChunk);Object.keys(hr).forEach(vr=>{this.metadata.addTag("exif","bext."+vr,hr[vr])});const gr=lr.chunkSize-BwfChunk_1.BroadcastAudioExtensionChunk.len;await this.tokenizer.ignore(gr);break;case"\0\0\0\0":debug$5(`Ignore padding chunk: RIFF/${lr.chunkID} of ${lr.chunkSize} bytes`),this.metadata.addWarning("Ignore chunk: RIFF/"+lr.chunkID),await this.tokenizer.ignore(lr.chunkSize);break;default:debug$5(`Ignore chunk: RIFF/${lr.chunkID} of ${lr.chunkSize} bytes`),this.metadata.addWarning("Ignore chunk: RIFF/"+lr.chunkID),await this.tokenizer.ignore(lr.chunkSize)}this.header.chunkSize%2===1&&(debug$5("Read odd padding byte"),await this.tokenizer.ignore(1))}}async parseListTag(or){const lr=await this.tokenizer.readToken(new Token$4.StringType(4,"binary"));switch(debug$5("pos=%s, parseListTag: chunkID=RIFF/WAVE/LIST/%s",this.tokenizer.position,lr),lr){case"INFO":return this.parseRiffInfoTags(or.chunkSize-4);case"adtl":default:return this.metadata.addWarning("Ignore chunk: RIFF/WAVE/LIST/"+lr),debug$5("Ignoring chunkID=RIFF/WAVE/LIST/"+lr),this.tokenizer.ignore(or.chunkSize-4).then()}}async parseRiffInfoTags(or){for(;or>=8;){const lr=await this.tokenizer.readToken(riff.Header),ur=new riff.ListInfoTagValue(lr),cr=await this.tokenizer.readToken(ur);this.addTag(lr.chunkID,util$1.stripNulls(cr)),or-=8+ur.len}if(or!==0)throw Error("Illegal remaining size: "+or)}addTag(or,lr){this.metadata.addTag("exif",or,lr)}}WaveParser$1.WaveParser=WaveParser;var WavPackParser$1={},WavPackToken={};Object.defineProperty(WavPackToken,"__esModule",{value:!0});WavPackToken.WavPack=void 0;const Token$3=lib$1,FourCC_1$3=FourCC,SampleRates=[6e3,8e3,9600,11025,12e3,16e3,22050,24e3,32e3,44100,48e3,64e3,88200,96e3,192e3,-1];class WavPack{static isBitSet(or,lr){return WavPack.getBitAllignedNumber(or,lr,1)===1}static getBitAllignedNumber(or,lr,ur){return or>>>lr&4294967295>>>32-ur}}WavPack.BlockHeaderToken={len:32,get:(ar,or)=>{const lr=Token$3.UINT32_LE.get(ar,or+24),ur={BlockID:FourCC_1$3.FourCcToken.get(ar,or),blockSize:Token$3.UINT32_LE.get(ar,or+4),version:Token$3.UINT16_LE.get(ar,or+8),totalSamples:Token$3.UINT32_LE.get(ar,or+12),blockIndex:Token$3.UINT32_LE.get(ar,or+16),blockSamples:Token$3.UINT32_LE.get(ar,or+20),flags:{bitsPerSample:(1+WavPack.getBitAllignedNumber(lr,0,2))*8,isMono:WavPack.isBitSet(lr,2),isHybrid:WavPack.isBitSet(lr,3),isJointStereo:WavPack.isBitSet(lr,4),crossChannel:WavPack.isBitSet(lr,5),hybridNoiseShaping:WavPack.isBitSet(lr,6),floatingPoint:WavPack.isBitSet(lr,7),samplingRate:SampleRates[WavPack.getBitAllignedNumber(lr,23,4)],isDSD:WavPack.isBitSet(lr,31)},crc:new Token$3.Uint8ArrayType(4).get(ar,or+28)};return ur.flags.isDSD&&(ur.totalSamples*=8),ur}};WavPack.MetadataIdToken={len:1,get:(ar,or)=>({functionId:WavPack.getBitAllignedNumber(ar[or],0,6),isOptional:WavPack.isBitSet(ar[or],5),isOddSize:WavPack.isBitSet(ar[or],6),largeBlock:WavPack.isBitSet(ar[or],7)})};WavPackToken.WavPack=WavPack;Object.defineProperty(WavPackParser$1,"__esModule",{value:!0});WavPackParser$1.WavPackParser=void 0;const Token$2=lib$1,APEv2Parser_1$2=APEv2Parser$1,FourCC_1$2=FourCC,BasicParser_1$2=BasicParser$1,WavPackToken_1=WavPackToken,debug_1$4=browserExports$2,debug$4=(0,debug_1$4.default)("music-metadata:parser:WavPack");class WavPackParser extends BasicParser_1$2.BasicParser{async parse(){return this.audioDataSize=0,await this.parseWavPackBlocks(),APEv2Parser_1$2.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async parseWavPackBlocks(){do{if(await this.tokenizer.peekToken(FourCC_1$2.FourCcToken)!=="wvpk")break;const lr=await this.tokenizer.readToken(WavPackToken_1.WavPack.BlockHeaderToken);if(lr.BlockID!=="wvpk")throw new Error("Invalid WavPack Block-ID");debug$4(`WavPack header blockIndex=${lr.blockIndex}, len=${WavPackToken_1.WavPack.BlockHeaderToken.len}`),lr.blockIndex===0&&!this.metadata.format.container&&(this.metadata.setFormat("container","WavPack"),this.metadata.setFormat("lossless",!lr.flags.isHybrid),this.metadata.setFormat("bitsPerSample",lr.flags.bitsPerSample),lr.flags.isDSD||(this.metadata.setFormat("sampleRate",lr.flags.samplingRate),this.metadata.setFormat("duration",lr.totalSamples/lr.flags.samplingRate)),this.metadata.setFormat("numberOfChannels",lr.flags.isMono?1:2),this.metadata.setFormat("numberOfSamples",lr.totalSamples),this.metadata.setFormat("codec",lr.flags.isDSD?"DSD":"PCM"));const ur=lr.blockSize-(WavPackToken_1.WavPack.BlockHeaderToken.len-8);await(lr.blockIndex===0?this.parseMetadataSubBlock(lr,ur):this.tokenizer.ignore(ur)),lr.blockSamples>0&&(this.audioDataSize+=lr.blockSize)}while(!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=WavPackToken_1.WavPack.BlockHeaderToken.len);this.metadata.setFormat("bitrate",this.audioDataSize*8/this.metadata.format.duration)}async parseMetadataSubBlock(or,lr){for(;lr>WavPackToken_1.WavPack.MetadataIdToken.len;){const ur=await this.tokenizer.readToken(WavPackToken_1.WavPack.MetadataIdToken),cr=await this.tokenizer.readNumber(ur.largeBlock?Token$2.UINT24_LE:Token$2.UINT8),dr=Buffer.alloc(cr*2-(ur.isOddSize?1:0));switch(await this.tokenizer.readBuffer(dr),debug$4(`Metadata Sub-Blocks functionId=0x${ur.functionId.toString(16)}, id.largeBlock=${ur.largeBlock},data-size=${dr.length}`),ur.functionId){case 0:break;case 14:debug$4("ID_DSD_BLOCK");const fr=1<<dr.readUInt8(0),pr=or.flags.samplingRate*fr*8;if(!or.flags.isDSD)throw new Error("Only expect DSD block if DSD-flag is set");this.metadata.setFormat("sampleRate",pr),this.metadata.setFormat("duration",or.totalSamples/pr);break;case 36:debug$4("ID_ALT_TRAILER: trailer for non-wav files");break;case 38:this.metadata.setFormat("audioMD5",dr);break;case 47:debug$4(`ID_BLOCK_CHECKSUM: checksum=${dr.toString("hex")}`);break;default:debug$4(`Ignore unsupported meta-sub-block-id functionId=0x${ur.functionId.toString(16)}`);break}lr-=WavPackToken_1.WavPack.MetadataIdToken.len+(ur.largeBlock?Token$2.UINT24_LE.len:Token$2.UINT8.len)+cr*2,debug$4(`remainingLength=${lr}`),ur.isOddSize&&this.tokenizer.ignore(1)}if(lr!==0)throw new Error("metadata-sub-block should fit it remaining length")}}WavPackParser$1.WavPackParser=WavPackParser;var DsfParser$1={},DsfChunk={};(function(ar){Object.defineProperty(ar,"__esModule",{value:!0}),ar.FormatChunk=ar.ChannelType=ar.DsdChunk=ar.ChunkHeader=void 0;const or=lib$1,lr=FourCC;ar.ChunkHeader={len:12,get:(ur,cr)=>({id:lr.FourCcToken.get(ur,cr),size:or.UINT64_LE.get(ur,cr+4)})},ar.DsdChunk={len:16,get:(ur,cr)=>({fileSize:or.INT64_LE.get(ur,cr),metadataPointer:or.INT64_LE.get(ur,cr+8)})},function(ur){ur[ur.mono=1]="mono",ur[ur.stereo=2]="stereo",ur[ur.channels=3]="channels",ur[ur.quad=4]="quad",ur[ur["4 channels"]=5]="4 channels",ur[ur["5 channels"]=6]="5 channels",ur[ur["5.1 channels"]=7]="5.1 channels"}(ar.ChannelType||(ar.ChannelType={})),ar.FormatChunk={len:40,get:(ur,cr)=>({formatVersion:or.INT32_LE.get(ur,cr),formatID:or.INT32_LE.get(ur,cr+4),channelType:or.INT32_LE.get(ur,cr+8),channelNum:or.INT32_LE.get(ur,cr+12),samplingFrequency:or.INT32_LE.get(ur,cr+16),bitsPerSample:or.INT32_LE.get(ur,cr+20),sampleCount:or.INT64_LE.get(ur,cr+24),blockSizePerChannel:or.INT32_LE.get(ur,cr+32)})}})(DsfChunk);Object.defineProperty(DsfParser$1,"__esModule",{value:!0});DsfParser$1.DsfParser=void 0;const debug_1$3=browserExports$2,AbstractID3Parser_1=AbstractID3Parser$1,DsfChunk_1=DsfChunk,ID3v2Parser_1$1=ID3v2Parser$1,debug$3=(0,debug_1$3.default)("music-metadata:parser:DSF");class DsfParser extends AbstractID3Parser_1.AbstractID3Parser{async postId3v2Parse(){const or=this.tokenizer.position,lr=await this.tokenizer.readToken(DsfChunk_1.ChunkHeader);if(lr.id!=="DSD ")throw new Error("Invalid chunk signature");this.metadata.setFormat("container","DSF"),this.metadata.setFormat("lossless",!0);const ur=await this.tokenizer.readToken(DsfChunk_1.DsdChunk);if(ur.metadataPointer===BigInt(0))debug$3("No ID3v2 tag present");else return debug$3(`expect ID3v2 at offset=${ur.metadataPointer}`),await this.parseChunks(ur.fileSize-lr.size),await this.tokenizer.ignore(Number(ur.metadataPointer)-this.tokenizer.position-or),new ID3v2Parser_1$1.ID3v2Parser().parse(this.metadata,this.tokenizer,this.options)}async parseChunks(or){for(;or>=DsfChunk_1.ChunkHeader.len;){const lr=await this.tokenizer.readToken(DsfChunk_1.ChunkHeader);switch(debug$3(`Parsing chunk name=${lr.id} size=${lr.size}`),lr.id){case"fmt ":const ur=await this.tokenizer.readToken(DsfChunk_1.FormatChunk);this.metadata.setFormat("numberOfChannels",ur.channelNum),this.metadata.setFormat("sampleRate",ur.samplingFrequency),this.metadata.setFormat("bitsPerSample",ur.bitsPerSample),this.metadata.setFormat("numberOfSamples",ur.sampleCount),this.metadata.setFormat("duration",Number(ur.sampleCount)/ur.samplingFrequency);const cr=ur.bitsPerSample*ur.samplingFrequency*ur.channelNum;this.metadata.setFormat("bitrate",cr);return;default:this.tokenizer.ignore(Number(lr.size)-DsfChunk_1.ChunkHeader.len);break}or-=lr.size}}}DsfParser$1.DsfParser=DsfParser;var DsdiffParser$1={},DsdiffToken={};Object.defineProperty(DsdiffToken,"__esModule",{value:!0});DsdiffToken.ChunkHeader64=void 0;const Token$1=lib$1,FourCC_1$1=FourCC;DsdiffToken.ChunkHeader64={len:12,get:(ar,or)=>({chunkID:FourCC_1$1.FourCcToken.get(ar,or),chunkSize:Token$1.INT64_BE.get(ar,or+4)})};Object.defineProperty(DsdiffParser$1,"__esModule",{value:!0});DsdiffParser$1.DsdiffParser=void 0;const Token=lib$1,debug_1$2=browserExports$2,strtok3$1=core$1,FourCC_1=FourCC,BasicParser_1$1=BasicParser$1,ID3v2Parser_1=ID3v2Parser$1,DsdiffToken_1=DsdiffToken,debug$2=(0,debug_1$2.default)("music-metadata:parser:aiff");class DsdiffParser extends BasicParser_1$1.BasicParser{async parse(){const or=await this.tokenizer.readToken(DsdiffToken_1.ChunkHeader64);if(or.chunkID!=="FRM8")throw new Error("Unexpected chunk-ID");const lr=(await this.tokenizer.readToken(FourCC_1.FourCcToken)).trim();switch(lr){case"DSD":return this.metadata.setFormat("container",`DSDIFF/${lr}`),this.metadata.setFormat("lossless",!0),this.readFmt8Chunks(or.chunkSize-BigInt(FourCC_1.FourCcToken.len));default:throw Error(`Unsupported DSDIFF type: ${lr}`)}}async readFmt8Chunks(or){for(;or>=DsdiffToken_1.ChunkHeader64.len;){const lr=await this.tokenizer.readToken(DsdiffToken_1.ChunkHeader64);debug$2(`Chunk id=${lr.chunkID}`),await this.readData(lr),or-=BigInt(DsdiffToken_1.ChunkHeader64.len)+lr.chunkSize}}async readData(or){debug$2(`Reading data of chunk[ID=${or.chunkID}, size=${or.chunkSize}]`);const lr=this.tokenizer.position;switch(or.chunkID.trim()){case"FVER":const cr=await this.tokenizer.readToken(Token.UINT32_LE);debug$2(`DSDIFF version=${cr}`);break;case"PROP":if(await this.tokenizer.readToken(FourCC_1.FourCcToken)!=="SND ")throw new Error("Unexpected PROP-chunk ID");await this.handleSoundPropertyChunks(or.chunkSize-BigInt(FourCC_1.FourCcToken.len));break;case"ID3":const fr=await this.tokenizer.readToken(new Token.Uint8ArrayType(Number(or.chunkSize))),pr=strtok3$1.fromBuffer(fr);await new ID3v2Parser_1.ID3v2Parser().parse(this.metadata,pr,this.options);break;default:debug$2(`Ignore chunk[ID=${or.chunkID}, size=${or.chunkSize}]`);break;case"DSD":this.metadata.setFormat("numberOfSamples",Number(or.chunkSize*BigInt(8)/BigInt(this.metadata.format.numberOfChannels))),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate);break}const ur=or.chunkSize-BigInt(this.tokenizer.position-lr);ur>0&&(debug$2(`After Parsing chunk, remaining ${ur} bytes`),await this.tokenizer.ignore(Number(ur)))}async handleSoundPropertyChunks(or){for(debug$2(`Parsing sound-property-chunks, remainingSize=${or}`);or>0;){const lr=await this.tokenizer.readToken(DsdiffToken_1.ChunkHeader64);debug$2(`Sound-property-chunk[ID=${lr.chunkID}, size=${lr.chunkSize}]`);const ur=this.tokenizer.position;switch(lr.chunkID.trim()){case"FS":const dr=await this.tokenizer.readToken(Token.UINT32_BE);this.metadata.setFormat("sampleRate",dr);break;case"CHNL":const fr=await this.tokenizer.readToken(Token.UINT16_BE);this.metadata.setFormat("numberOfChannels",fr),await this.handleChannelChunks(lr.chunkSize-BigInt(Token.UINT16_BE.len));break;case"CMPR":const pr=(await this.tokenizer.readToken(FourCC_1.FourCcToken)).trim(),mr=await this.tokenizer.readToken(Token.UINT8),hr=await this.tokenizer.readToken(new Token.StringType(mr,"ascii"));pr==="DSD"&&(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("bitsPerSample",1)),this.metadata.setFormat("codec",`${pr} (${hr})`);break;case"ABSS":const gr=await this.tokenizer.readToken(Token.UINT16_BE),vr=await this.tokenizer.readToken(Token.UINT8),wr=await this.tokenizer.readToken(Token.UINT8),_r=await this.tokenizer.readToken(Token.UINT32_BE);debug$2(`ABSS ${gr}:${vr}:${wr}.${_r}`);break;case"LSCO":const Cr=await this.tokenizer.readToken(Token.UINT16_BE);debug$2(`LSCO lsConfig=${Cr}`);break;case"COMT":default:debug$2(`Unknown sound-property-chunk[ID=${lr.chunkID}, size=${lr.chunkSize}]`),await this.tokenizer.ignore(Number(lr.chunkSize))}const cr=lr.chunkSize-BigInt(this.tokenizer.position-ur);cr>0&&(debug$2(`After Parsing sound-property-chunk ${lr.chunkSize}, remaining ${cr} bytes`),await this.tokenizer.ignore(Number(cr))),or-=BigInt(DsdiffToken_1.ChunkHeader64.len)+lr.chunkSize,debug$2(`Parsing sound-property-chunks, remainingSize=${or}`)}if(this.metadata.format.lossless&&this.metadata.format.sampleRate&&this.metadata.format.numberOfChannels&&this.metadata.format.bitsPerSample){const lr=this.metadata.format.sampleRate*this.metadata.format.numberOfChannels*this.metadata.format.bitsPerSample;this.metadata.setFormat("bitrate",lr)}}async handleChannelChunks(or){debug$2(`Parsing channel-chunks, remainingSize=${or}`);const lr=[];for(;or>=FourCC_1.FourCcToken.len;){const ur=await this.tokenizer.readToken(FourCC_1.FourCcToken);debug$2(`Channel[ID=${ur}]`),lr.push(ur),or-=BigInt(FourCC_1.FourCcToken.len)}return debug$2(`Channels: ${lr.join(", ")}`),lr}}DsdiffParser$1.DsdiffParser=DsdiffParser;var MatroskaParser$1={},MatroskaDtd={};Object.defineProperty(MatroskaDtd,"__esModule",{value:!0});MatroskaDtd.elements=void 0;const types_1$1=types;MatroskaDtd.elements={440786851:{name:"ebml",container:{17030:{name:"ebmlVersion",value:types_1$1.DataType.uint},17143:{name:"ebmlReadVersion",value:types_1$1.DataType.uint},17138:{name:"ebmlMaxIDWidth",value:types_1$1.DataType.uint},17139:{name:"ebmlMaxSizeWidth",value:types_1$1.DataType.uint},17026:{name:"docType",value:types_1$1.DataType.string},17031:{name:"docTypeVersion",value:types_1$1.DataType.uint},17029:{name:"docTypeReadVersion",value:types_1$1.DataType.uint}}},408125543:{name:"segment",container:{290298740:{name:"seekHead",container:{19899:{name:"seek",container:{21419:{name:"seekId",value:types_1$1.DataType.binary},21420:{name:"seekPosition",value:types_1$1.DataType.uint}}}}},357149030:{name:"info",container:{29604:{name:"uid",value:types_1$1.DataType.uid},29572:{name:"filename",value:types_1$1.DataType.string},3979555:{name:"prevUID",value:types_1$1.DataType.uid},3965867:{name:"prevFilename",value:types_1$1.DataType.string},4110627:{name:"nextUID",value:types_1$1.DataType.uid},4096955:{name:"nextFilename",value:types_1$1.DataType.string},2807729:{name:"timecodeScale",value:types_1$1.DataType.uint},17545:{name:"duration",value:types_1$1.DataType.float},17505:{name:"dateUTC",value:types_1$1.DataType.uint},31657:{name:"title",value:types_1$1.DataType.string},19840:{name:"muxingApp",value:types_1$1.DataType.string},22337:{name:"writingApp",value:types_1$1.DataType.string}}},524531317:{name:"cluster",multiple:!0,container:{231:{name:"timecode",value:types_1$1.DataType.uid},163:{name:"unknown",value:types_1$1.DataType.binary},167:{name:"position",value:types_1$1.DataType.uid},171:{name:"prevSize",value:types_1$1.DataType.uid}}},374648427:{name:"tracks",container:{174:{name:"entries",multiple:!0,container:{215:{name:"trackNumber",value:types_1$1.DataType.uint},29637:{name:"uid",value:types_1$1.DataType.uid},131:{name:"trackType",value:types_1$1.DataType.uint},185:{name:"flagEnabled",value:types_1$1.DataType.bool},136:{name:"flagDefault",value:types_1$1.DataType.bool},21930:{name:"flagForced",value:types_1$1.DataType.bool},156:{name:"flagLacing",value:types_1$1.DataType.bool},28135:{name:"minCache",value:types_1$1.DataType.uint},28136:{name:"maxCache",value:types_1$1.DataType.uint},2352003:{name:"defaultDuration",value:types_1$1.DataType.uint},2306383:{name:"timecodeScale",value:types_1$1.DataType.float},21358:{name:"name",value:types_1$1.DataType.string},2274716:{name:"language",value:types_1$1.DataType.string},134:{name:"codecID",value:types_1$1.DataType.string},25506:{name:"codecPrivate",value:types_1$1.DataType.binary},2459272:{name:"codecName",value:types_1$1.DataType.string},3839639:{name:"codecSettings",value:types_1$1.DataType.string},3883072:{name:"codecInfoUrl",value:types_1$1.DataType.string},2536e3:{name:"codecDownloadUrl",value:types_1$1.DataType.string},170:{name:"codecDecodeAll",value:types_1$1.DataType.bool},28587:{name:"trackOverlay",value:types_1$1.DataType.uint},224:{name:"video",container:{154:{name:"flagInterlaced",value:types_1$1.DataType.bool},21432:{name:"stereoMode",value:types_1$1.DataType.uint},176:{name:"pixelWidth",value:types_1$1.DataType.uint},186:{name:"pixelHeight",value:types_1$1.DataType.uint},21680:{name:"displayWidth",value:types_1$1.DataType.uint},21690:{name:"displayHeight",value:types_1$1.DataType.uint},21683:{name:"aspectRatioType",value:types_1$1.DataType.uint},3061028:{name:"colourSpace",value:types_1$1.DataType.uint},3126563:{name:"gammaValue",value:types_1$1.DataType.float}}},225:{name:"audio",container:{181:{name:"samplingFrequency",value:types_1$1.DataType.float},30901:{name:"outputSamplingFrequency",value:types_1$1.DataType.float},159:{name:"channels",value:types_1$1.DataType.uint},148:{name:"channels",value:types_1$1.DataType.uint},32123:{name:"channelPositions",value:types_1$1.DataType.binary},25188:{name:"bitDepth",value:types_1$1.DataType.uint}}},28032:{name:"contentEncodings",container:{25152:{name:"contentEncoding",container:{20529:{name:"order",value:types_1$1.DataType.uint},20530:{name:"scope",value:types_1$1.DataType.bool},20531:{name:"type",value:types_1$1.DataType.uint},20532:{name:"contentEncoding",container:{16980:{name:"contentCompAlgo",value:types_1$1.DataType.uint},16981:{name:"contentCompSettings",value:types_1$1.DataType.binary}}},20533:{name:"contentEncoding",container:{18401:{name:"contentEncAlgo",value:types_1$1.DataType.uint},18402:{name:"contentEncKeyID",value:types_1$1.DataType.binary},18403:{name:"contentSignature ",value:types_1$1.DataType.binary},18404:{name:"ContentSigKeyID  ",value:types_1$1.DataType.binary},18405:{name:"contentSigAlgo ",value:types_1$1.DataType.uint},18406:{name:"contentSigHashAlgo ",value:types_1$1.DataType.uint}}},25188:{name:"bitDepth",value:types_1$1.DataType.uint}}}}}}}}},475249515:{name:"cues",container:{187:{name:"cuePoint",container:{179:{name:"cueTime",value:types_1$1.DataType.uid},183:{name:"positions",container:{247:{name:"track",value:types_1$1.DataType.uint},241:{name:"clusterPosition",value:types_1$1.DataType.uint},21368:{name:"blockNumber",value:types_1$1.DataType.uint},234:{name:"codecState",value:types_1$1.DataType.uint},219:{name:"reference",container:{150:{name:"time",value:types_1$1.DataType.uint},151:{name:"cluster",value:types_1$1.DataType.uint},21343:{name:"number",value:types_1$1.DataType.uint},235:{name:"codecState",value:types_1$1.DataType.uint}}},240:{name:"relativePosition",value:types_1$1.DataType.uint}}}}}}},423732329:{name:"attachments",container:{24999:{name:"attachedFiles",multiple:!0,container:{18046:{name:"description",value:types_1$1.DataType.string},18030:{name:"name",value:types_1$1.DataType.string},18016:{name:"mimeType",value:types_1$1.DataType.string},18012:{name:"data",value:types_1$1.DataType.binary},18094:{name:"uid",value:types_1$1.DataType.uid}}}}},272869232:{name:"chapters",container:{17849:{name:"editionEntry",container:{182:{name:"chapterAtom",container:{29636:{name:"uid",value:types_1$1.DataType.uid},145:{name:"timeStart",value:types_1$1.DataType.uint},146:{name:"timeEnd",value:types_1$1.DataType.uid},152:{name:"hidden",value:types_1$1.DataType.bool},17816:{name:"enabled",value:types_1$1.DataType.uid},143:{name:"track",container:{137:{name:"trackNumber",value:types_1$1.DataType.uid},128:{name:"display",container:{133:{name:"string",value:types_1$1.DataType.string},17276:{name:"language ",value:types_1$1.DataType.string},17278:{name:"country ",value:types_1$1.DataType.string}}}}}}}}}}},307544935:{name:"tags",container:{29555:{name:"tag",multiple:!0,container:{25536:{name:"target",container:{25541:{name:"tagTrackUID",value:types_1$1.DataType.uid},25540:{name:"tagChapterUID",value:types_1$1.DataType.uint},25542:{name:"tagAttachmentUID",value:types_1$1.DataType.uid},25546:{name:"targetType",value:types_1$1.DataType.string},26826:{name:"targetTypeValue",value:types_1$1.DataType.uint},25545:{name:"tagEditionUID",value:types_1$1.DataType.uid}}},26568:{name:"simpleTags",multiple:!0,container:{17827:{name:"name",value:types_1$1.DataType.string},17543:{name:"string",value:types_1$1.DataType.string},17541:{name:"binary",value:types_1$1.DataType.binary},17530:{name:"language",value:types_1$1.DataType.string},17531:{name:"languageIETF",value:types_1$1.DataType.string},17540:{name:"default",value:types_1$1.DataType.bool}}}}}}}}}};Object.defineProperty(MatroskaParser$1,"__esModule",{value:!0});MatroskaParser$1.MatroskaParser=void 0;const token_types_1=lib$1,debug_1$1=browserExports$2,BasicParser_1=BasicParser$1,types_1=types,matroskaDtd=MatroskaDtd,debug$1=(0,debug_1$1.default)("music-metadata:parser:matroska");class MatroskaParser extends BasicParser_1.BasicParser{constructor(){super(),this.padding=0,this.parserMap=new Map,this.ebmlMaxIDLength=4,this.ebmlMaxSizeLength=8,this.parserMap.set(types_1.DataType.uint,or=>this.readUint(or)),this.parserMap.set(types_1.DataType.string,or=>this.readString(or)),this.parserMap.set(types_1.DataType.binary,or=>this.readBuffer(or)),this.parserMap.set(types_1.DataType.uid,async or=>await this.readUint(or)===1),this.parserMap.set(types_1.DataType.bool,or=>this.readFlag(or)),this.parserMap.set(types_1.DataType.float,or=>this.readFloat(or))}init(or,lr,ur){return super.init(or,lr,ur),this}async parse(){const or=await this.parseContainer(matroskaDtd.elements,this.tokenizer.fileInfo.size,[]);if(this.metadata.setFormat("container",`EBML/${or.ebml.docType}`),or.segment){const lr=or.segment.info;if(lr){const cr=lr.timecodeScale?lr.timecodeScale:1e6;if(typeof lr.duration=="number"){const dr=lr.duration*cr/1e9;this.addTag("segment:title",lr.title),this.metadata.setFormat("duration",dr)}}const ur=or.segment.tracks;if(ur&&ur.entries){ur.entries.forEach(dr=>{const fr={codecName:dr.codecID.replace("A_","").replace("V_",""),codecSettings:dr.codecSettings,flagDefault:dr.flagDefault,flagLacing:dr.flagLacing,flagEnabled:dr.flagEnabled,language:dr.language,name:dr.name,type:dr.trackType,audio:dr.audio,video:dr.video};this.metadata.addStreamInfo(fr)});const cr=ur.entries.filter(dr=>dr.trackType===types_1.TrackType.audio.valueOf()).reduce((dr,fr)=>!dr||!dr.flagDefault&&fr.flagDefault||fr.trackNumber&&fr.trackNumber<dr.trackNumber?fr:dr,null);cr&&(this.metadata.setFormat("codec",cr.codecID.replace("A_","")),this.metadata.setFormat("sampleRate",cr.audio.samplingFrequency),this.metadata.setFormat("numberOfChannels",cr.audio.channels)),or.segment.tags&&or.segment.tags.tag.forEach(dr=>{const fr=dr.target,pr=fr!=null&&fr.targetTypeValue?types_1.TargetType[fr.targetTypeValue]:fr!=null&&fr.targetType?fr.targetType:"track";dr.simpleTags.forEach(mr=>{const hr=mr.string?mr.string:mr.binary;this.addTag(`${pr}:${mr.name}`,hr)})}),or.segment.attachments&&or.segment.attachments.attachedFiles.filter(dr=>dr.mimeType.startsWith("image/")).map(dr=>({data:dr.data,format:dr.mimeType,description:dr.description,name:dr.name})).forEach(dr=>{this.addTag("picture",dr)})}}}async parseContainer(or,lr,ur){const cr={};for(;this.tokenizer.position<lr;){let dr;try{dr=await this.readElement()}catch(pr){if(pr.message==="End-Of-Stream")break;throw pr}const fr=or[dr.id];if(fr)if(debug$1(`Element: name=${fr.name}, container=${!!fr.container}`),fr.container){const pr=await this.parseContainer(fr.container,dr.len>=0?this.tokenizer.position+dr.len:-1,ur.concat([fr.name]));fr.multiple?(cr[fr.name]||(cr[fr.name]=[]),cr[fr.name].push(pr)):cr[fr.name]=pr}else cr[fr.name]=await this.parserMap.get(fr.value)(dr);else switch(dr.id){case 236:this.padding+=dr.len,await this.tokenizer.ignore(dr.len);break;default:debug$1(`parseEbml: path=${ur.join("/")}, unknown element: id=${dr.id.toString(16)}`),this.padding+=dr.len,await this.tokenizer.ignore(dr.len)}}return cr}async readVintData(or){const lr=await this.tokenizer.peekNumber(token_types_1.UINT8);let ur=128,cr=1;for(;!(lr&ur);){if(cr>or)throw new Error("VINT value exceeding maximum size");++cr,ur>>=1}const dr=Buffer.alloc(cr);return await this.tokenizer.readBuffer(dr),dr}async readElement(){const or=await this.readVintData(this.ebmlMaxIDLength),lr=await this.readVintData(this.ebmlMaxSizeLength);lr[0]^=128>>lr.length-1;const ur=Math.min(6,lr.length);return{id:or.readUIntBE(0,or.length),len:lr.readUIntBE(lr.length-ur,ur)}}isMaxValue(or){if(or.length===this.ebmlMaxSizeLength){for(let lr=1;lr<this.ebmlMaxSizeLength;++lr)if(or[lr]!==255)return!1;return!0}return!1}async readFloat(or){switch(or.len){case 0:return 0;case 4:return this.tokenizer.readNumber(token_types_1.Float32_BE);case 8:return this.tokenizer.readNumber(token_types_1.Float64_BE);case 10:return this.tokenizer.readNumber(token_types_1.Float64_BE);default:throw new Error(`Invalid IEEE-754 float length: ${or.len}`)}}async readFlag(or){return await this.readUint(or)===1}async readUint(or){const lr=await this.readBuffer(or),ur=Math.min(6,or.len);return lr.readUIntBE(or.len-ur,ur)}async readString(or){return(await this.tokenizer.readToken(new token_types_1.StringType(or.len,"utf-8"))).replace(/\00.*$/g,"")}async readBuffer(or){const lr=Buffer.alloc(or.len);return await this.tokenizer.readBuffer(lr),lr}addTag(or,lr){this.metadata.addTag("matroska",or,lr)}}MatroskaParser$1.MatroskaParser=MatroskaParser;Object.defineProperty(ParserFactory$1,"__esModule",{value:!0});ParserFactory$1.ParserFactory=ParserFactory$1.parseHttpContentType=void 0;const FileType=core,ContentType=contentType,MimeType=mediaTyper,debug_1=browserExports$2,MetadataCollector_1=MetadataCollector$1,AiffParser_1=AiffParser,APEv2Parser_1$1=APEv2Parser$1,AsfParser_1=AsfParser$1,FlacParser_1=FlacParser$1,MP4Parser_1=MP4Parser$1,MpegParser_1=MpegParser$1,musepack_1=musepack,OggParser_1=OggParser$1,WaveParser_1=WaveParser$1,WavPackParser_1=WavPackParser$1,DsfParser_1=DsfParser$1,DsdiffParser_1=DsdiffParser$1,MatroskaParser_1=MatroskaParser$1,debug=(0,debug_1.default)("music-metadata:parser:factory");function parseHttpContentType(ar){const or=ContentType.parse(ar),lr=MimeType.parse(or.type);return{type:lr.type,subtype:lr.subtype,suffix:lr.suffix,parameters:or.parameters}}ParserFactory$1.parseHttpContentType=parseHttpContentType;async function parse(ar,or,lr={}){const ur=await ParserFactory.loadParser(or),cr=new MetadataCollector_1.MetadataCollector(lr);return await ur.init(cr,ar,lr).parse(),cr.toCommonMetadata()}class ParserFactory{static async parseOnContentType(or,lr){const{mimeType:ur,path:cr,url:dr}=await or.fileInfo,fr=ParserFactory.getParserIdForMimeType(ur)||ParserFactory.getParserIdForExtension(cr)||ParserFactory.getParserIdForExtension(dr);return fr||debug("No parser found for MIME-type / extension: "+ur),this.parse(or,fr,lr)}static async parse(or,lr,ur){if(!lr){debug("Guess parser on content...");const cr=Buffer.alloc(4100);if(await or.peekBuffer(cr,{mayBeLess:!0}),or.fileInfo.path&&(lr=this.getParserIdForExtension(or.fileInfo.path)),!lr){const dr=await FileType.fromBuffer(cr);if(!dr)throw new Error("Failed to determine audio format");if(debug(`Guessed file type is mime=${dr.mime}, extension=${dr.ext}`),lr=ParserFactory.getParserIdForMimeType(dr.mime),!lr)throw new Error("Guessed MIME-type not supported: "+dr.mime)}}return parse(or,lr,ur)}static getParserIdForExtension(or){if(!or)return;switch(this.getExtension(or).toLocaleLowerCase()||or){case".mp2":case".mp3":case".m2a":case".aac":return"mpeg";case".ape":return"apev2";case".mp4":case".m4a":case".m4b":case".m4pa":case".m4v":case".m4r":case".3gp":return"mp4";case".wma":case".wmv":case".asf":return"asf";case".flac":return"flac";case".ogg":case".ogv":case".oga":case".ogm":case".ogx":case".opus":case".spx":return"ogg";case".aif":case".aiff":case".aifc":return"aiff";case".wav":case".bwf":return"riff";case".wv":case".wvp":return"wavpack";case".mpc":return"musepack";case".dsf":return"dsf";case".dff":return"dsdiff";case".mka":case".mkv":case".mk3d":case".mks":case".webm":return"matroska"}}static async loadParser(or){switch(or){case"aiff":return new AiffParser_1.AIFFParser;case"adts":case"mpeg":return new MpegParser_1.MpegParser;case"apev2":return new APEv2Parser_1$1.APEv2Parser;case"asf":return new AsfParser_1.AsfParser;case"dsf":return new DsfParser_1.DsfParser;case"dsdiff":return new DsdiffParser_1.DsdiffParser;case"flac":return new FlacParser_1.FlacParser;case"mp4":return new MP4Parser_1.MP4Parser;case"musepack":return new musepack_1.default;case"ogg":return new OggParser_1.OggParser;case"riff":return new WaveParser_1.WaveParser;case"wavpack":return new WavPackParser_1.WavPackParser;case"matroska":return new MatroskaParser_1.MatroskaParser;default:throw new Error(`Unknown parser type: ${or}`)}}static getExtension(or){const lr=or.lastIndexOf(".");return lr===-1?"":or.slice(lr)}static getParserIdForMimeType(or){let lr;try{lr=parseHttpContentType(or)}catch{debug(`Invalid HTTP Content-Type header value: ${or}`);return}const ur=lr.subtype.indexOf("x-")===0?lr.subtype.substring(2):lr.subtype;switch(lr.type){case"audio":switch(ur){case"mp3":case"mpeg":return"mpeg";case"aac":case"aacp":return"adts";case"flac":return"flac";case"ape":case"monkeys-audio":return"apev2";case"mp4":case"m4a":return"mp4";case"ogg":case"opus":case"speex":return"ogg";case"ms-wma":case"ms-wmv":case"ms-asf":return"asf";case"aiff":case"aif":case"aifc":return"aiff";case"vnd.wave":case"wav":case"wave":return"riff";case"wavpack":return"wavpack";case"musepack":return"musepack";case"matroska":case"webm":return"matroska";case"dsf":return"dsf"}break;case"video":switch(ur){case"ms-asf":case"ms-wmv":return"asf";case"m4v":case"mp4":return"mp4";case"ogg":return"ogg";case"matroska":case"webm":return"matroska"}break;case"application":switch(ur){case"vnd.ms-asf":return"asf";case"ogg":return"ogg"}break}}}ParserFactory$1.ParserFactory=ParserFactory;var RandomUint8ArrayReader$1={};Object.defineProperty(RandomUint8ArrayReader$1,"__esModule",{value:!0});RandomUint8ArrayReader$1.RandomUint8ArrayReader=void 0;class RandomUint8ArrayReader{constructor(or){this.uint8Array=or,this.fileSize=or.length}async randomRead(or,lr,ur,cr){return or.set(this.uint8Array.subarray(cr,cr+ur),lr),ur}}RandomUint8ArrayReader$1.RandomUint8ArrayReader=RandomUint8ArrayReader;var Lyrics3={};(function(ar){Object.defineProperty(ar,"__esModule",{value:!0}),ar.getLyricsHeaderLength=ar.endTag2=void 0,ar.endTag2="LYRICS200";async function or(lr){if(lr.fileSize>=143){const ur=Buffer.alloc(15);await lr.randomRead(ur,0,ur.length,lr.fileSize-143);const cr=ur.toString("binary");if(cr.substr(6)===ar.endTag2)return parseInt(cr.substr(0,6),10)+15}return 0}ar.getLyricsHeaderLength=or})(Lyrics3);Object.defineProperty(core$2,"__esModule",{value:!0});core$2.scanAppendingHeaders=core$2.selectCover=core$2.ratingToStars=core$2.orderTags=core$2.parseFromTokenizer=core$2.parseBuffer=core$2.parseStream=void 0;const strtok3=core$1,ParserFactory_1=ParserFactory$1,RandomUint8ArrayReader_1=RandomUint8ArrayReader$1,APEv2Parser_1=APEv2Parser$1,ID3v1Parser_1=ID3v1Parser,Lyrics3_1=Lyrics3;function parseStream(ar,or,lr={}){return parseFromTokenizer(strtok3.fromStream(ar,typeof or=="string"?{mimeType:or}:or),lr)}core$2.parseStream=parseStream;async function parseBuffer(ar,or,lr={}){const ur=new RandomUint8ArrayReader_1.RandomUint8ArrayReader(ar);await scanAppendingHeaders(ur,lr);const cr=strtok3.fromBuffer(ar,typeof or=="string"?{mimeType:or}:or);return parseFromTokenizer(cr,lr)}core$2.parseBuffer=parseBuffer;function parseFromTokenizer(ar,or){return ParserFactory_1.ParserFactory.parseOnContentType(ar,or)}core$2.parseFromTokenizer=parseFromTokenizer;function orderTags(ar){const or={};for(const lr of ar)(or[lr.id]=or[lr.id]||[]).push(lr.value);return or}core$2.orderTags=orderTags;function ratingToStars(ar){return ar===void 0?0:1+Math.round(ar*4)}core$2.ratingToStars=ratingToStars;function selectCover(ar){return ar?ar.reduce((or,lr)=>lr.name&&lr.name.toLowerCase()in["front","cover","cover (front)"]?lr:or):null}core$2.selectCover=selectCover;async function scanAppendingHeaders(ar,or={}){let lr=ar.fileSize;if(await(0,ID3v1Parser_1.hasID3v1Header)(ar)){lr-=128;const ur=await(0,Lyrics3_1.getLyricsHeaderLength)(ar);lr-=ur}or.apeHeader=await APEv2Parser_1.APEv2Parser.findApeFooterOffset(ar,lr)}core$2.scanAppendingHeaders=scanAppendingHeaders;var lib={},browser$2={exports:{}},stream={exports:{}},buffer={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$1=0,len=code.length;i$1<len;++i$1)lookup[i$1]=code[i$1],revLookup[code.charCodeAt(i$1)]=i$1;revLookup[45]=62;revLookup[95]=63;function getLens(ar){var or=ar.length;if(or%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var lr=ar.indexOf("=");lr===-1&&(lr=or);var ur=lr===or?0:4-lr%4;return[lr,ur]}function byteLength(ar){var or=getLens(ar),lr=or[0],ur=or[1];return(lr+ur)*3/4-ur}function _byteLength(ar,or,lr){return(or+lr)*3/4-lr}function toByteArray(ar){var or,lr=getLens(ar),ur=lr[0],cr=lr[1],dr=new Arr(_byteLength(ar,ur,cr)),fr=0,pr=cr>0?ur-4:ur,mr;for(mr=0;mr<pr;mr+=4)or=revLookup[ar.charCodeAt(mr)]<<18|revLookup[ar.charCodeAt(mr+1)]<<12|revLookup[ar.charCodeAt(mr+2)]<<6|revLookup[ar.charCodeAt(mr+3)],dr[fr++]=or>>16&255,dr[fr++]=or>>8&255,dr[fr++]=or&255;return cr===2&&(or=revLookup[ar.charCodeAt(mr)]<<2|revLookup[ar.charCodeAt(mr+1)]>>4,dr[fr++]=or&255),cr===1&&(or=revLookup[ar.charCodeAt(mr)]<<10|revLookup[ar.charCodeAt(mr+1)]<<4|revLookup[ar.charCodeAt(mr+2)]>>2,dr[fr++]=or>>8&255,dr[fr++]=or&255),dr}function tripletToBase64(ar){return lookup[ar>>18&63]+lookup[ar>>12&63]+lookup[ar>>6&63]+lookup[ar&63]}function encodeChunk(ar,or,lr){for(var ur,cr=[],dr=or;dr<lr;dr+=3)ur=(ar[dr]<<16&16711680)+(ar[dr+1]<<8&65280)+(ar[dr+2]&255),cr.push(tripletToBase64(ur));return cr.join("")}function fromByteArray(ar){for(var or,lr=ar.length,ur=lr%3,cr=[],dr=16383,fr=0,pr=lr-ur;fr<pr;fr+=dr)cr.push(encodeChunk(ar,fr,fr+dr>pr?pr:fr+dr));return ur===1?(or=ar[lr-1],cr.push(lookup[or>>2]+lookup[or<<4&63]+"==")):ur===2&&(or=(ar[lr-2]<<8)+ar[lr-1],cr.push(lookup[or>>10]+lookup[or>>4&63]+lookup[or<<2&63]+"=")),cr.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(ar){const or=base64Js,lr=ieee754,ur=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;ar.Buffer=pr,ar.SlowBuffer=kr,ar.INSPECT_MAX_BYTES=50;const cr=2147483647;ar.kMaxLength=cr,pr.TYPED_ARRAY_SUPPORT=dr(),!pr.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function dr(){try{const $r=new Uint8Array(1),yr={foo:function(){return 42}};return Object.setPrototypeOf(yr,Uint8Array.prototype),Object.setPrototypeOf($r,yr),$r.foo()===42}catch{return!1}}Object.defineProperty(pr.prototype,"parent",{enumerable:!0,get:function(){if(pr.isBuffer(this))return this.buffer}}),Object.defineProperty(pr.prototype,"offset",{enumerable:!0,get:function(){if(pr.isBuffer(this))return this.byteOffset}});function fr($r){if($r>cr)throw new RangeError('The value "'+$r+'" is invalid for option "size"');const yr=new Uint8Array($r);return Object.setPrototypeOf(yr,pr.prototype),yr}function pr($r,yr,br){if(typeof $r=="number"){if(typeof yr=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return vr($r)}return mr($r,yr,br)}pr.poolSize=8192;function mr($r,yr,br){if(typeof $r=="string")return wr($r,yr);if(ArrayBuffer.isView($r))return Cr($r);if($r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $r);if(Yr($r,ArrayBuffer)||$r&&Yr($r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Yr($r,SharedArrayBuffer)||$r&&Yr($r.buffer,SharedArrayBuffer)))return Sr($r,yr,br);if(typeof $r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Pr=$r.valueOf&&$r.valueOf();if(Pr!=null&&Pr!==$r)return pr.from(Pr,yr,br);const Fr=Dr($r);if(Fr)return Fr;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof $r[Symbol.toPrimitive]=="function")return pr.from($r[Symbol.toPrimitive]("string"),yr,br);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $r)}pr.from=function($r,yr,br){return mr($r,yr,br)},Object.setPrototypeOf(pr.prototype,Uint8Array.prototype),Object.setPrototypeOf(pr,Uint8Array);function hr($r){if(typeof $r!="number")throw new TypeError('"size" argument must be of type number');if($r<0)throw new RangeError('The value "'+$r+'" is invalid for option "size"')}function gr($r,yr,br){return hr($r),$r<=0?fr($r):yr!==void 0?typeof br=="string"?fr($r).fill(yr,br):fr($r).fill(yr):fr($r)}pr.alloc=function($r,yr,br){return gr($r,yr,br)};function vr($r){return hr($r),fr($r<0?0:Er($r)|0)}pr.allocUnsafe=function($r){return vr($r)},pr.allocUnsafeSlow=function($r){return vr($r)};function wr($r,yr){if((typeof yr!="string"||yr==="")&&(yr="utf8"),!pr.isEncoding(yr))throw new TypeError("Unknown encoding: "+yr);const br=Ir($r,yr)|0;let Pr=fr(br);const Fr=Pr.write($r,yr);return Fr!==br&&(Pr=Pr.slice(0,Fr)),Pr}function _r($r){const yr=$r.length<0?0:Er($r.length)|0,br=fr(yr);for(let Pr=0;Pr<yr;Pr+=1)br[Pr]=$r[Pr]&255;return br}function Cr($r){if(Yr($r,Uint8Array)){const yr=new Uint8Array($r);return Sr(yr.buffer,yr.byteOffset,yr.byteLength)}return _r($r)}function Sr($r,yr,br){if(yr<0||$r.byteLength<yr)throw new RangeError('"offset" is outside of buffer bounds');if($r.byteLength<yr+(br||0))throw new RangeError('"length" is outside of buffer bounds');let Pr;return yr===void 0&&br===void 0?Pr=new Uint8Array($r):br===void 0?Pr=new Uint8Array($r,yr):Pr=new Uint8Array($r,yr,br),Object.setPrototypeOf(Pr,pr.prototype),Pr}function Dr($r){if(pr.isBuffer($r)){const yr=Er($r.length)|0,br=fr(yr);return br.length===0||$r.copy(br,0,0,yr),br}if($r.length!==void 0)return typeof $r.length!="number"||Ps($r.length)?fr(0):_r($r);if($r.type==="Buffer"&&Array.isArray($r.data))return _r($r.data)}function Er($r){if($r>=cr)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+cr.toString(16)+" bytes");return $r|0}function kr($r){return+$r!=$r&&($r=0),pr.alloc(+$r)}pr.isBuffer=function(yr){return yr!=null&&yr._isBuffer===!0&&yr!==pr.prototype},pr.compare=function(yr,br){if(Yr(yr,Uint8Array)&&(yr=pr.from(yr,yr.offset,yr.byteLength)),Yr(br,Uint8Array)&&(br=pr.from(br,br.offset,br.byteLength)),!pr.isBuffer(yr)||!pr.isBuffer(br))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(yr===br)return 0;let Pr=yr.length,Fr=br.length;for(let Ur=0,Kr=Math.min(Pr,Fr);Ur<Kr;++Ur)if(yr[Ur]!==br[Ur]){Pr=yr[Ur],Fr=br[Ur];break}return Pr<Fr?-1:Fr<Pr?1:0},pr.isEncoding=function(yr){switch(String(yr).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},pr.concat=function(yr,br){if(!Array.isArray(yr))throw new TypeError('"list" argument must be an Array of Buffers');if(yr.length===0)return pr.alloc(0);let Pr;if(br===void 0)for(br=0,Pr=0;Pr<yr.length;++Pr)br+=yr[Pr].length;const Fr=pr.allocUnsafe(br);let Ur=0;for(Pr=0;Pr<yr.length;++Pr){let Kr=yr[Pr];if(Yr(Kr,Uint8Array))Ur+Kr.length>Fr.length?(pr.isBuffer(Kr)||(Kr=pr.from(Kr)),Kr.copy(Fr,Ur)):Uint8Array.prototype.set.call(Fr,Kr,Ur);else if(pr.isBuffer(Kr))Kr.copy(Fr,Ur);else throw new TypeError('"list" argument must be an Array of Buffers');Ur+=Kr.length}return Fr};function Ir($r,yr){if(pr.isBuffer($r))return $r.length;if(ArrayBuffer.isView($r)||Yr($r,ArrayBuffer))return $r.byteLength;if(typeof $r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof $r);const br=$r.length,Pr=arguments.length>2&&arguments[2]===!0;if(!Pr&&br===0)return 0;let Fr=!1;for(;;)switch(yr){case"ascii":case"latin1":case"binary":return br;case"utf8":case"utf-8":return rs($r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return br*2;case"hex":return br>>>1;case"base64":return vs($r).length;default:if(Fr)return Pr?-1:rs($r).length;yr=(""+yr).toLowerCase(),Fr=!0}}pr.byteLength=Ir;function Br($r,yr,br){let Pr=!1;if((yr===void 0||yr<0)&&(yr=0),yr>this.length||((br===void 0||br>this.length)&&(br=this.length),br<=0)||(br>>>=0,yr>>>=0,br<=yr))return"";for($r||($r="utf8");;)switch($r){case"hex":return ba(this,yr,br);case"utf8":case"utf-8":return Gr(this,yr,br);case"ascii":return ss(this,yr,br);case"latin1":case"binary":return _i(this,yr,br);case"base64":return Wr(this,yr,br);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xa(this,yr,br);default:if(Pr)throw new TypeError("Unknown encoding: "+$r);$r=($r+"").toLowerCase(),Pr=!0}}pr.prototype._isBuffer=!0;function Nr($r,yr,br){const Pr=$r[yr];$r[yr]=$r[br],$r[br]=Pr}pr.prototype.swap16=function(){const yr=this.length;if(yr%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let br=0;br<yr;br+=2)Nr(this,br,br+1);return this},pr.prototype.swap32=function(){const yr=this.length;if(yr%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let br=0;br<yr;br+=4)Nr(this,br,br+3),Nr(this,br+1,br+2);return this},pr.prototype.swap64=function(){const yr=this.length;if(yr%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let br=0;br<yr;br+=8)Nr(this,br,br+7),Nr(this,br+1,br+6),Nr(this,br+2,br+5),Nr(this,br+3,br+4);return this},pr.prototype.toString=function(){const yr=this.length;return yr===0?"":arguments.length===0?Gr(this,0,yr):Br.apply(this,arguments)},pr.prototype.toLocaleString=pr.prototype.toString,pr.prototype.equals=function(yr){if(!pr.isBuffer(yr))throw new TypeError("Argument must be a Buffer");return this===yr?!0:pr.compare(this,yr)===0},pr.prototype.inspect=function(){let yr="";const br=ar.INSPECT_MAX_BYTES;return yr=this.toString("hex",0,br).replace(/(.{2})/g,"$1 ").trim(),this.length>br&&(yr+=" ... "),"<Buffer "+yr+">"},ur&&(pr.prototype[ur]=pr.prototype.inspect),pr.prototype.compare=function(yr,br,Pr,Fr,Ur){if(Yr(yr,Uint8Array)&&(yr=pr.from(yr,yr.offset,yr.byteLength)),!pr.isBuffer(yr))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof yr);if(br===void 0&&(br=0),Pr===void 0&&(Pr=yr?yr.length:0),Fr===void 0&&(Fr=0),Ur===void 0&&(Ur=this.length),br<0||Pr>yr.length||Fr<0||Ur>this.length)throw new RangeError("out of range index");if(Fr>=Ur&&br>=Pr)return 0;if(Fr>=Ur)return-1;if(br>=Pr)return 1;if(br>>>=0,Pr>>>=0,Fr>>>=0,Ur>>>=0,this===yr)return 0;let Kr=Ur-Fr,us=Pr-br;const ds=Math.min(Kr,us),gs=this.slice(Fr,Ur),xs=yr.slice(br,Pr);for(let bs=0;bs<ds;++bs)if(gs[bs]!==xs[bs]){Kr=gs[bs],us=xs[bs];break}return Kr<us?-1:us<Kr?1:0};function Mr($r,yr,br,Pr,Fr){if($r.length===0)return-1;if(typeof br=="string"?(Pr=br,br=0):br>2147483647?br=2147483647:br<-2147483648&&(br=-2147483648),br=+br,Ps(br)&&(br=Fr?0:$r.length-1),br<0&&(br=$r.length+br),br>=$r.length){if(Fr)return-1;br=$r.length-1}else if(br<0)if(Fr)br=0;else return-1;if(typeof yr=="string"&&(yr=pr.from(yr,Pr)),pr.isBuffer(yr))return yr.length===0?-1:xr($r,yr,br,Pr,Fr);if(typeof yr=="number")return yr=yr&255,typeof Uint8Array.prototype.indexOf=="function"?Fr?Uint8Array.prototype.indexOf.call($r,yr,br):Uint8Array.prototype.lastIndexOf.call($r,yr,br):xr($r,[yr],br,Pr,Fr);throw new TypeError("val must be string, number or Buffer")}function xr($r,yr,br,Pr,Fr){let Ur=1,Kr=$r.length,us=yr.length;if(Pr!==void 0&&(Pr=String(Pr).toLowerCase(),Pr==="ucs2"||Pr==="ucs-2"||Pr==="utf16le"||Pr==="utf-16le")){if($r.length<2||yr.length<2)return-1;Ur=2,Kr/=2,us/=2,br/=2}function ds(xs,bs){return Ur===1?xs[bs]:xs.readUInt16BE(bs*Ur)}let gs;if(Fr){let xs=-1;for(gs=br;gs<Kr;gs++)if(ds($r,gs)===ds(yr,xs===-1?0:gs-xs)){if(xs===-1&&(xs=gs),gs-xs+1===us)return xs*Ur}else xs!==-1&&(gs-=gs-xs),xs=-1}else for(br+us>Kr&&(br=Kr-us),gs=br;gs>=0;gs--){let xs=!0;for(let bs=0;bs<us;bs++)if(ds($r,gs+bs)!==ds(yr,bs)){xs=!1;break}if(xs)return gs}return-1}pr.prototype.includes=function(yr,br,Pr){return this.indexOf(yr,br,Pr)!==-1},pr.prototype.indexOf=function(yr,br,Pr){return Mr(this,yr,br,Pr,!0)},pr.prototype.lastIndexOf=function(yr,br,Pr){return Mr(this,yr,br,Pr,!1)};function Rr($r,yr,br,Pr){br=Number(br)||0;const Fr=$r.length-br;Pr?(Pr=Number(Pr),Pr>Fr&&(Pr=Fr)):Pr=Fr;const Ur=yr.length;Pr>Ur/2&&(Pr=Ur/2);let Kr;for(Kr=0;Kr<Pr;++Kr){const us=parseInt(yr.substr(Kr*2,2),16);if(Ps(us))return Kr;$r[br+Kr]=us}return Kr}function Or($r,yr,br,Pr){return _s(rs(yr,$r.length-br),$r,br,Pr)}function qr($r,yr,br,Pr){return _s(ws(yr),$r,br,Pr)}function Jr($r,yr,br,Pr){return _s(vs(yr),$r,br,Pr)}function na($r,yr,br,Pr){return _s(ys(yr,$r.length-br),$r,br,Pr)}pr.prototype.write=function(yr,br,Pr,Fr){if(br===void 0)Fr="utf8",Pr=this.length,br=0;else if(Pr===void 0&&typeof br=="string")Fr=br,Pr=this.length,br=0;else if(isFinite(br))br=br>>>0,isFinite(Pr)?(Pr=Pr>>>0,Fr===void 0&&(Fr="utf8")):(Fr=Pr,Pr=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ur=this.length-br;if((Pr===void 0||Pr>Ur)&&(Pr=Ur),yr.length>0&&(Pr<0||br<0)||br>this.length)throw new RangeError("Attempt to write outside buffer bounds");Fr||(Fr="utf8");let Kr=!1;for(;;)switch(Fr){case"hex":return Rr(this,yr,br,Pr);case"utf8":case"utf-8":return Or(this,yr,br,Pr);case"ascii":case"latin1":case"binary":return qr(this,yr,br,Pr);case"base64":return Jr(this,yr,br,Pr);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return na(this,yr,br,Pr);default:if(Kr)throw new TypeError("Unknown encoding: "+Fr);Fr=(""+Fr).toLowerCase(),Kr=!0}},pr.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Wr($r,yr,br){return yr===0&&br===$r.length?or.fromByteArray($r):or.fromByteArray($r.slice(yr,br))}function Gr($r,yr,br){br=Math.min($r.length,br);const Pr=[];let Fr=yr;for(;Fr<br;){const Ur=$r[Fr];let Kr=null,us=Ur>239?4:Ur>223?3:Ur>191?2:1;if(Fr+us<=br){let ds,gs,xs,bs;switch(us){case 1:Ur<128&&(Kr=Ur);break;case 2:ds=$r[Fr+1],(ds&192)===128&&(bs=(Ur&31)<<6|ds&63,bs>127&&(Kr=bs));break;case 3:ds=$r[Fr+1],gs=$r[Fr+2],(ds&192)===128&&(gs&192)===128&&(bs=(Ur&15)<<12|(ds&63)<<6|gs&63,bs>2047&&(bs<55296||bs>57343)&&(Kr=bs));break;case 4:ds=$r[Fr+1],gs=$r[Fr+2],xs=$r[Fr+3],(ds&192)===128&&(gs&192)===128&&(xs&192)===128&&(bs=(Ur&15)<<18|(ds&63)<<12|(gs&63)<<6|xs&63,bs>65535&&bs<1114112&&(Kr=bs))}}Kr===null?(Kr=65533,us=1):Kr>65535&&(Kr-=65536,Pr.push(Kr>>>10&1023|55296),Kr=56320|Kr&1023),Pr.push(Kr),Fr+=us}return es(Pr)}const is=4096;function es($r){const yr=$r.length;if(yr<=is)return String.fromCharCode.apply(String,$r);let br="",Pr=0;for(;Pr<yr;)br+=String.fromCharCode.apply(String,$r.slice(Pr,Pr+=is));return br}function ss($r,yr,br){let Pr="";br=Math.min($r.length,br);for(let Fr=yr;Fr<br;++Fr)Pr+=String.fromCharCode($r[Fr]&127);return Pr}function _i($r,yr,br){let Pr="";br=Math.min($r.length,br);for(let Fr=yr;Fr<br;++Fr)Pr+=String.fromCharCode($r[Fr]);return Pr}function ba($r,yr,br){const Pr=$r.length;(!yr||yr<0)&&(yr=0),(!br||br<0||br>Pr)&&(br=Pr);let Fr="";for(let Ur=yr;Ur<br;++Ur)Fr+=Ms[$r[Ur]];return Fr}function xa($r,yr,br){const Pr=$r.slice(yr,br);let Fr="";for(let Ur=0;Ur<Pr.length-1;Ur+=2)Fr+=String.fromCharCode(Pr[Ur]+Pr[Ur+1]*256);return Fr}pr.prototype.slice=function(yr,br){const Pr=this.length;yr=~~yr,br=br===void 0?Pr:~~br,yr<0?(yr+=Pr,yr<0&&(yr=0)):yr>Pr&&(yr=Pr),br<0?(br+=Pr,br<0&&(br=0)):br>Pr&&(br=Pr),br<yr&&(br=yr);const Fr=this.subarray(yr,br);return Object.setPrototypeOf(Fr,pr.prototype),Fr};function $a($r,yr,br){if($r%1!==0||$r<0)throw new RangeError("offset is not uint");if($r+yr>br)throw new RangeError("Trying to access beyond buffer length")}pr.prototype.readUintLE=pr.prototype.readUIntLE=function(yr,br,Pr){yr=yr>>>0,br=br>>>0,Pr||$a(yr,br,this.length);let Fr=this[yr],Ur=1,Kr=0;for(;++Kr<br&&(Ur*=256);)Fr+=this[yr+Kr]*Ur;return Fr},pr.prototype.readUintBE=pr.prototype.readUIntBE=function(yr,br,Pr){yr=yr>>>0,br=br>>>0,Pr||$a(yr,br,this.length);let Fr=this[yr+--br],Ur=1;for(;br>0&&(Ur*=256);)Fr+=this[yr+--br]*Ur;return Fr},pr.prototype.readUint8=pr.prototype.readUInt8=function(yr,br){return yr=yr>>>0,br||$a(yr,1,this.length),this[yr]},pr.prototype.readUint16LE=pr.prototype.readUInt16LE=function(yr,br){return yr=yr>>>0,br||$a(yr,2,this.length),this[yr]|this[yr+1]<<8},pr.prototype.readUint16BE=pr.prototype.readUInt16BE=function(yr,br){return yr=yr>>>0,br||$a(yr,2,this.length),this[yr]<<8|this[yr+1]},pr.prototype.readUint32LE=pr.prototype.readUInt32LE=function(yr,br){return yr=yr>>>0,br||$a(yr,4,this.length),(this[yr]|this[yr+1]<<8|this[yr+2]<<16)+this[yr+3]*16777216},pr.prototype.readUint32BE=pr.prototype.readUInt32BE=function(yr,br){return yr=yr>>>0,br||$a(yr,4,this.length),this[yr]*16777216+(this[yr+1]<<16|this[yr+2]<<8|this[yr+3])},pr.prototype.readBigUInt64LE=As(function(yr){yr=yr>>>0,jr(yr,"offset");const br=this[yr],Pr=this[yr+7];(br===void 0||Pr===void 0)&&Lr(yr,this.length-8);const Fr=br+this[++yr]*2**8+this[++yr]*2**16+this[++yr]*2**24,Ur=this[++yr]+this[++yr]*2**8+this[++yr]*2**16+Pr*2**24;return BigInt(Fr)+(BigInt(Ur)<<BigInt(32))}),pr.prototype.readBigUInt64BE=As(function(yr){yr=yr>>>0,jr(yr,"offset");const br=this[yr],Pr=this[yr+7];(br===void 0||Pr===void 0)&&Lr(yr,this.length-8);const Fr=br*2**24+this[++yr]*2**16+this[++yr]*2**8+this[++yr],Ur=this[++yr]*2**24+this[++yr]*2**16+this[++yr]*2**8+Pr;return(BigInt(Fr)<<BigInt(32))+BigInt(Ur)}),pr.prototype.readIntLE=function(yr,br,Pr){yr=yr>>>0,br=br>>>0,Pr||$a(yr,br,this.length);let Fr=this[yr],Ur=1,Kr=0;for(;++Kr<br&&(Ur*=256);)Fr+=this[yr+Kr]*Ur;return Ur*=128,Fr>=Ur&&(Fr-=Math.pow(2,8*br)),Fr},pr.prototype.readIntBE=function(yr,br,Pr){yr=yr>>>0,br=br>>>0,Pr||$a(yr,br,this.length);let Fr=br,Ur=1,Kr=this[yr+--Fr];for(;Fr>0&&(Ur*=256);)Kr+=this[yr+--Fr]*Ur;return Ur*=128,Kr>=Ur&&(Kr-=Math.pow(2,8*br)),Kr},pr.prototype.readInt8=function(yr,br){return yr=yr>>>0,br||$a(yr,1,this.length),this[yr]&128?(255-this[yr]+1)*-1:this[yr]},pr.prototype.readInt16LE=function(yr,br){yr=yr>>>0,br||$a(yr,2,this.length);const Pr=this[yr]|this[yr+1]<<8;return Pr&32768?Pr|4294901760:Pr},pr.prototype.readInt16BE=function(yr,br){yr=yr>>>0,br||$a(yr,2,this.length);const Pr=this[yr+1]|this[yr]<<8;return Pr&32768?Pr|4294901760:Pr},pr.prototype.readInt32LE=function(yr,br){return yr=yr>>>0,br||$a(yr,4,this.length),this[yr]|this[yr+1]<<8|this[yr+2]<<16|this[yr+3]<<24},pr.prototype.readInt32BE=function(yr,br){return yr=yr>>>0,br||$a(yr,4,this.length),this[yr]<<24|this[yr+1]<<16|this[yr+2]<<8|this[yr+3]},pr.prototype.readBigInt64LE=As(function(yr){yr=yr>>>0,jr(yr,"offset");const br=this[yr],Pr=this[yr+7];(br===void 0||Pr===void 0)&&Lr(yr,this.length-8);const Fr=this[yr+4]+this[yr+5]*2**8+this[yr+6]*2**16+(Pr<<24);return(BigInt(Fr)<<BigInt(32))+BigInt(br+this[++yr]*2**8+this[++yr]*2**16+this[++yr]*2**24)}),pr.prototype.readBigInt64BE=As(function(yr){yr=yr>>>0,jr(yr,"offset");const br=this[yr],Pr=this[yr+7];(br===void 0||Pr===void 0)&&Lr(yr,this.length-8);const Fr=(br<<24)+this[++yr]*2**16+this[++yr]*2**8+this[++yr];return(BigInt(Fr)<<BigInt(32))+BigInt(this[++yr]*2**24+this[++yr]*2**16+this[++yr]*2**8+Pr)}),pr.prototype.readFloatLE=function(yr,br){return yr=yr>>>0,br||$a(yr,4,this.length),lr.read(this,yr,!0,23,4)},pr.prototype.readFloatBE=function(yr,br){return yr=yr>>>0,br||$a(yr,4,this.length),lr.read(this,yr,!1,23,4)},pr.prototype.readDoubleLE=function(yr,br){return yr=yr>>>0,br||$a(yr,8,this.length),lr.read(this,yr,!0,52,8)},pr.prototype.readDoubleBE=function(yr,br){return yr=yr>>>0,br||$a(yr,8,this.length),lr.read(this,yr,!1,52,8)};function os($r,yr,br,Pr,Fr,Ur){if(!pr.isBuffer($r))throw new TypeError('"buffer" argument must be a Buffer instance');if(yr>Fr||yr<Ur)throw new RangeError('"value" argument is out of bounds');if(br+Pr>$r.length)throw new RangeError("Index out of range")}pr.prototype.writeUintLE=pr.prototype.writeUIntLE=function(yr,br,Pr,Fr){if(yr=+yr,br=br>>>0,Pr=Pr>>>0,!Fr){const us=Math.pow(2,8*Pr)-1;os(this,yr,br,Pr,us,0)}let Ur=1,Kr=0;for(this[br]=yr&255;++Kr<Pr&&(Ur*=256);)this[br+Kr]=yr/Ur&255;return br+Pr},pr.prototype.writeUintBE=pr.prototype.writeUIntBE=function(yr,br,Pr,Fr){if(yr=+yr,br=br>>>0,Pr=Pr>>>0,!Fr){const us=Math.pow(2,8*Pr)-1;os(this,yr,br,Pr,us,0)}let Ur=Pr-1,Kr=1;for(this[br+Ur]=yr&255;--Ur>=0&&(Kr*=256);)this[br+Ur]=yr/Kr&255;return br+Pr},pr.prototype.writeUint8=pr.prototype.writeUInt8=function(yr,br,Pr){return yr=+yr,br=br>>>0,Pr||os(this,yr,br,1,255,0),this[br]=yr&255,br+1},pr.prototype.writeUint16LE=pr.prototype.writeUInt16LE=function(yr,br,Pr){return yr=+yr,br=br>>>0,Pr||os(this,yr,br,2,65535,0),this[br]=yr&255,this[br+1]=yr>>>8,br+2},pr.prototype.writeUint16BE=pr.prototype.writeUInt16BE=function(yr,br,Pr){return yr=+yr,br=br>>>0,Pr||os(this,yr,br,2,65535,0),this[br]=yr>>>8,this[br+1]=yr&255,br+2},pr.prototype.writeUint32LE=pr.prototype.writeUInt32LE=function(yr,br,Pr){return yr=+yr,br=br>>>0,Pr||os(this,yr,br,4,4294967295,0),this[br+3]=yr>>>24,this[br+2]=yr>>>16,this[br+1]=yr>>>8,this[br]=yr&255,br+4},pr.prototype.writeUint32BE=pr.prototype.writeUInt32BE=function(yr,br,Pr){return yr=+yr,br=br>>>0,Pr||os(this,yr,br,4,4294967295,0),this[br]=yr>>>24,this[br+1]=yr>>>16,this[br+2]=yr>>>8,this[br+3]=yr&255,br+4};function ns($r,yr,br,Pr,Fr){Ds(yr,Pr,Fr,$r,br,7);let Ur=Number(yr&BigInt(4294967295));$r[br++]=Ur,Ur=Ur>>8,$r[br++]=Ur,Ur=Ur>>8,$r[br++]=Ur,Ur=Ur>>8,$r[br++]=Ur;let Kr=Number(yr>>BigInt(32)&BigInt(4294967295));return $r[br++]=Kr,Kr=Kr>>8,$r[br++]=Kr,Kr=Kr>>8,$r[br++]=Kr,Kr=Kr>>8,$r[br++]=Kr,br}function hs($r,yr,br,Pr,Fr){Ds(yr,Pr,Fr,$r,br,7);let Ur=Number(yr&BigInt(4294967295));$r[br+7]=Ur,Ur=Ur>>8,$r[br+6]=Ur,Ur=Ur>>8,$r[br+5]=Ur,Ur=Ur>>8,$r[br+4]=Ur;let Kr=Number(yr>>BigInt(32)&BigInt(4294967295));return $r[br+3]=Kr,Kr=Kr>>8,$r[br+2]=Kr,Kr=Kr>>8,$r[br+1]=Kr,Kr=Kr>>8,$r[br]=Kr,br+8}pr.prototype.writeBigUInt64LE=As(function(yr,br=0){return ns(this,yr,br,BigInt(0),BigInt("0xffffffffffffffff"))}),pr.prototype.writeBigUInt64BE=As(function(yr,br=0){return hs(this,yr,br,BigInt(0),BigInt("0xffffffffffffffff"))}),pr.prototype.writeIntLE=function(yr,br,Pr,Fr){if(yr=+yr,br=br>>>0,!Fr){const ds=Math.pow(2,8*Pr-1);os(this,yr,br,Pr,ds-1,-ds)}let Ur=0,Kr=1,us=0;for(this[br]=yr&255;++Ur<Pr&&(Kr*=256);)yr<0&&us===0&&this[br+Ur-1]!==0&&(us=1),this[br+Ur]=(yr/Kr>>0)-us&255;return br+Pr},pr.prototype.writeIntBE=function(yr,br,Pr,Fr){if(yr=+yr,br=br>>>0,!Fr){const ds=Math.pow(2,8*Pr-1);os(this,yr,br,Pr,ds-1,-ds)}let Ur=Pr-1,Kr=1,us=0;for(this[br+Ur]=yr&255;--Ur>=0&&(Kr*=256);)yr<0&&us===0&&this[br+Ur+1]!==0&&(us=1),this[br+Ur]=(yr/Kr>>0)-us&255;return br+Pr},pr.prototype.writeInt8=function(yr,br,Pr){return yr=+yr,br=br>>>0,Pr||os(this,yr,br,1,127,-128),yr<0&&(yr=255+yr+1),this[br]=yr&255,br+1},pr.prototype.writeInt16LE=function(yr,br,Pr){return yr=+yr,br=br>>>0,Pr||os(this,yr,br,2,32767,-32768),this[br]=yr&255,this[br+1]=yr>>>8,br+2},pr.prototype.writeInt16BE=function(yr,br,Pr){return yr=+yr,br=br>>>0,Pr||os(this,yr,br,2,32767,-32768),this[br]=yr>>>8,this[br+1]=yr&255,br+2},pr.prototype.writeInt32LE=function(yr,br,Pr){return yr=+yr,br=br>>>0,Pr||os(this,yr,br,4,2147483647,-2147483648),this[br]=yr&255,this[br+1]=yr>>>8,this[br+2]=yr>>>16,this[br+3]=yr>>>24,br+4},pr.prototype.writeInt32BE=function(yr,br,Pr){return yr=+yr,br=br>>>0,Pr||os(this,yr,br,4,2147483647,-2147483648),yr<0&&(yr=4294967295+yr+1),this[br]=yr>>>24,this[br+1]=yr>>>16,this[br+2]=yr>>>8,this[br+3]=yr&255,br+4},pr.prototype.writeBigInt64LE=As(function(yr,br=0){return ns(this,yr,br,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),pr.prototype.writeBigInt64BE=As(function(yr,br=0){return hs(this,yr,br,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ks($r,yr,br,Pr,Fr,Ur){if(br+Pr>$r.length)throw new RangeError("Index out of range");if(br<0)throw new RangeError("Index out of range")}function Ts($r,yr,br,Pr,Fr){return yr=+yr,br=br>>>0,Fr||ks($r,yr,br,4),lr.write($r,yr,br,Pr,23,4),br+4}pr.prototype.writeFloatLE=function(yr,br,Pr){return Ts(this,yr,br,!0,Pr)},pr.prototype.writeFloatBE=function(yr,br,Pr){return Ts(this,yr,br,!1,Pr)};function Es($r,yr,br,Pr,Fr){return yr=+yr,br=br>>>0,Fr||ks($r,yr,br,8),lr.write($r,yr,br,Pr,52,8),br+8}pr.prototype.writeDoubleLE=function(yr,br,Pr){return Es(this,yr,br,!0,Pr)},pr.prototype.writeDoubleBE=function(yr,br,Pr){return Es(this,yr,br,!1,Pr)},pr.prototype.copy=function(yr,br,Pr,Fr){if(!pr.isBuffer(yr))throw new TypeError("argument should be a Buffer");if(Pr||(Pr=0),!Fr&&Fr!==0&&(Fr=this.length),br>=yr.length&&(br=yr.length),br||(br=0),Fr>0&&Fr<Pr&&(Fr=Pr),Fr===Pr||yr.length===0||this.length===0)return 0;if(br<0)throw new RangeError("targetStart out of bounds");if(Pr<0||Pr>=this.length)throw new RangeError("Index out of range");if(Fr<0)throw new RangeError("sourceEnd out of bounds");Fr>this.length&&(Fr=this.length),yr.length-br<Fr-Pr&&(Fr=yr.length-br+Pr);const Ur=Fr-Pr;return this===yr&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(br,Pr,Fr):Uint8Array.prototype.set.call(yr,this.subarray(Pr,Fr),br),Ur},pr.prototype.fill=function(yr,br,Pr,Fr){if(typeof yr=="string"){if(typeof br=="string"?(Fr=br,br=0,Pr=this.length):typeof Pr=="string"&&(Fr=Pr,Pr=this.length),Fr!==void 0&&typeof Fr!="string")throw new TypeError("encoding must be a string");if(typeof Fr=="string"&&!pr.isEncoding(Fr))throw new TypeError("Unknown encoding: "+Fr);if(yr.length===1){const Kr=yr.charCodeAt(0);(Fr==="utf8"&&Kr<128||Fr==="latin1")&&(yr=Kr)}}else typeof yr=="number"?yr=yr&255:typeof yr=="boolean"&&(yr=Number(yr));if(br<0||this.length<br||this.length<Pr)throw new RangeError("Out of range index");if(Pr<=br)return this;br=br>>>0,Pr=Pr===void 0?this.length:Pr>>>0,yr||(yr=0);let Ur;if(typeof yr=="number")for(Ur=br;Ur<Pr;++Ur)this[Ur]=yr;else{const Kr=pr.isBuffer(yr)?yr:pr.from(yr,Fr),us=Kr.length;if(us===0)throw new TypeError('The value "'+yr+'" is invalid for argument "value"');for(Ur=0;Ur<Pr-br;++Ur)this[Ur+br]=Kr[Ur%us]}return this};const Ss={};function $s($r,yr,br){Ss[$r]=class extends br{constructor(){super(),Object.defineProperty(this,"message",{value:yr.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${$r}]`,this.stack,delete this.name}get code(){return $r}set code(Fr){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Fr,writable:!0})}toString(){return`${this.name} [${$r}]: ${this.message}`}}}$s("ERR_BUFFER_OUT_OF_BOUNDS",function($r){return $r?`${$r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),$s("ERR_INVALID_ARG_TYPE",function($r,yr){return`The "${$r}" argument must be of type number. Received type ${typeof yr}`},TypeError),$s("ERR_OUT_OF_RANGE",function($r,yr,br){let Pr=`The value of "${$r}" is out of range.`,Fr=br;return Number.isInteger(br)&&Math.abs(br)>2**32?Fr=Rs(String(br)):typeof br=="bigint"&&(Fr=String(br),(br>BigInt(2)**BigInt(32)||br<-(BigInt(2)**BigInt(32)))&&(Fr=Rs(Fr)),Fr+="n"),Pr+=` It must be ${yr}. Received ${Fr}`,Pr},RangeError);function Rs($r){let yr="",br=$r.length;const Pr=$r[0]==="-"?1:0;for(;br>=Pr+4;br-=3)yr=`_${$r.slice(br-3,br)}${yr}`;return`${$r.slice(0,br)}${yr}`}function Is($r,yr,br){jr(yr,"offset"),($r[yr]===void 0||$r[yr+br]===void 0)&&Lr(yr,$r.length-(br+1))}function Ds($r,yr,br,Pr,Fr,Ur){if($r>br||$r<yr){const Kr=typeof yr=="bigint"?"n":"";let us;throw yr===0||yr===BigInt(0)?us=`>= 0${Kr} and < 2${Kr} ** ${(Ur+1)*8}${Kr}`:us=`>= -(2${Kr} ** ${(Ur+1)*8-1}${Kr}) and < 2 ** ${(Ur+1)*8-1}${Kr}`,new Ss.ERR_OUT_OF_RANGE("value",us,$r)}Is(Pr,Fr,Ur)}function jr($r,yr){if(typeof $r!="number")throw new Ss.ERR_INVALID_ARG_TYPE(yr,"number",$r)}function Lr($r,yr,br){throw Math.floor($r)!==$r?(jr($r,br),new Ss.ERR_OUT_OF_RANGE("offset","an integer",$r)):yr<0?new Ss.ERR_BUFFER_OUT_OF_BOUNDS:new Ss.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${yr}`,$r)}const Qr=/[^+/0-9A-Za-z-_]/g;function ts($r){if($r=$r.split("=")[0],$r=$r.trim().replace(Qr,""),$r.length<2)return"";for(;$r.length%4!==0;)$r=$r+"=";return $r}function rs($r,yr){yr=yr||1/0;let br;const Pr=$r.length;let Fr=null;const Ur=[];for(let Kr=0;Kr<Pr;++Kr){if(br=$r.charCodeAt(Kr),br>55295&&br<57344){if(!Fr){if(br>56319){(yr-=3)>-1&&Ur.push(239,191,189);continue}else if(Kr+1===Pr){(yr-=3)>-1&&Ur.push(239,191,189);continue}Fr=br;continue}if(br<56320){(yr-=3)>-1&&Ur.push(239,191,189),Fr=br;continue}br=(Fr-55296<<10|br-56320)+65536}else Fr&&(yr-=3)>-1&&Ur.push(239,191,189);if(Fr=null,br<128){if((yr-=1)<0)break;Ur.push(br)}else if(br<2048){if((yr-=2)<0)break;Ur.push(br>>6|192,br&63|128)}else if(br<65536){if((yr-=3)<0)break;Ur.push(br>>12|224,br>>6&63|128,br&63|128)}else if(br<1114112){if((yr-=4)<0)break;Ur.push(br>>18|240,br>>12&63|128,br>>6&63|128,br&63|128)}else throw new Error("Invalid code point")}return Ur}function ws($r){const yr=[];for(let br=0;br<$r.length;++br)yr.push($r.charCodeAt(br)&255);return yr}function ys($r,yr){let br,Pr,Fr;const Ur=[];for(let Kr=0;Kr<$r.length&&!((yr-=2)<0);++Kr)br=$r.charCodeAt(Kr),Pr=br>>8,Fr=br%256,Ur.push(Fr),Ur.push(Pr);return Ur}function vs($r){return or.toByteArray(ts($r))}function _s($r,yr,br,Pr){let Fr;for(Fr=0;Fr<Pr&&!(Fr+br>=yr.length||Fr>=$r.length);++Fr)yr[Fr+br]=$r[Fr];return Fr}function Yr($r,yr){return $r instanceof yr||$r!=null&&$r.constructor!=null&&$r.constructor.name!=null&&$r.constructor.name===yr.name}function Ps($r){return $r!==$r}const Ms=function(){const $r="0123456789abcdef",yr=new Array(256);for(let br=0;br<16;++br){const Pr=br*16;for(let Fr=0;Fr<16;++Fr)yr[Pr+Fr]=$r[br]+$r[Fr]}return yr}();function As($r){return typeof BigInt>"u"?js:$r}function js(){throw new Error("BigInt not supported")}})(buffer);let AggregateError$2=class extends Error{constructor(or){if(!Array.isArray(or))throw new TypeError(`Expected input to be an Array, got ${typeof or}`);let lr="";for(let ur=0;ur<or.length;ur++)lr+=`    ${or[ur].stack}
`;super(lr),this.name="AggregateError",this.errors=or}};var primordials={AggregateError:AggregateError$2,ArrayIsArray(ar){return Array.isArray(ar)},ArrayPrototypeIncludes(ar,or){return ar.includes(or)},ArrayPrototypeIndexOf(ar,or){return ar.indexOf(or)},ArrayPrototypeJoin(ar,or){return ar.join(or)},ArrayPrototypeMap(ar,or){return ar.map(or)},ArrayPrototypePop(ar,or){return ar.pop(or)},ArrayPrototypePush(ar,or){return ar.push(or)},ArrayPrototypeSlice(ar,or,lr){return ar.slice(or,lr)},Error,FunctionPrototypeCall(ar,or,...lr){return ar.call(or,...lr)},FunctionPrototypeSymbolHasInstance(ar,or){return Function.prototype[Symbol.hasInstance].call(ar,or)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(ar,or){return Object.defineProperties(ar,or)},ObjectDefineProperty(ar,or,lr){return Object.defineProperty(ar,or,lr)},ObjectGetOwnPropertyDescriptor(ar,or){return Object.getOwnPropertyDescriptor(ar,or)},ObjectKeys(ar){return Object.keys(ar)},ObjectSetPrototypeOf(ar,or){return Object.setPrototypeOf(ar,or)},Promise,PromisePrototypeCatch(ar,or){return ar.catch(or)},PromisePrototypeThen(ar,or,lr){return ar.then(or,lr)},PromiseReject(ar){return Promise.reject(ar)},PromiseResolve(ar){return Promise.resolve(ar)},ReflectApply:Reflect.apply,RegExpPrototypeTest(ar,or){return ar.test(or)},SafeSet:Set,String,StringPrototypeSlice(ar,or,lr){return ar.slice(or,lr)},StringPrototypeToLowerCase(ar){return ar.toLowerCase()},StringPrototypeToUpperCase(ar){return ar.toUpperCase()},StringPrototypeTrim(ar){return ar.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(ar,or,lr){return ar.set(or,lr)},Boolean,Uint8Array},util={exports:{}},inspect$2={format(ar,...or){return ar.replace(/%([sdifj])/g,function(...[lr,ur]){const cr=or.shift();return ur==="f"?cr.toFixed(6):ur==="j"?JSON.stringify(cr):ur==="s"&&typeof cr=="object"?`${cr.constructor!==Object?cr.constructor.name:""} {}`.trim():cr.toString()})},inspect(ar){switch(typeof ar){case"string":if(ar.includes("'"))if(ar.includes('"')){if(!ar.includes("`")&&!ar.includes("${"))return`\`${ar}\``}else return`"${ar}"`;return`'${ar}'`;case"number":return isNaN(ar)?"NaN":Object.is(ar,-0)?String(ar):ar;case"bigint":return`${String(ar)}n`;case"boolean":case"undefined":return String(ar);case"object":return"{}"}}};const{format,inspect:inspect$1}=inspect$2,{AggregateError:CustomAggregateError}=primordials,AggregateError$1=globalThis.AggregateError||CustomAggregateError,kIsNodeError=Symbol("kIsNodeError"),kTypes=["string","function","number","object","Function","Object","boolean","bigint","symbol"],classRegExp=/^([A-Z][a-z0-9]*)+$/,nodeInternalPrefix="__node_internal_",codes$1={};function assert(ar,or){if(!ar)throw new codes$1.ERR_INTERNAL_ASSERTION(or)}function addNumericalSeparator(ar){let or="",lr=ar.length;const ur=ar[0]==="-"?1:0;for(;lr>=ur+4;lr-=3)or=`_${ar.slice(lr-3,lr)}${or}`;return`${ar.slice(0,lr)}${or}`}function getMessage(ar,or,lr){if(typeof or=="function")return assert(or.length<=lr.length,`Code: ${ar}; The provided arguments length (${lr.length}) does not match the required ones (${or.length}).`),or(...lr);const ur=(or.match(/%[dfijoOs]/g)||[]).length;return assert(ur===lr.length,`Code: ${ar}; The provided arguments length (${lr.length}) does not match the required ones (${ur}).`),lr.length===0?or:format(or,...lr)}function E$1(ar,or,lr){lr||(lr=Error);class ur extends lr{constructor(...dr){super(getMessage(ar,or,dr))}toString(){return`${this.name} [${ar}]: ${this.message}`}}Object.defineProperties(ur.prototype,{name:{value:lr.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${ar}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),ur.prototype.code=ar,ur.prototype[kIsNodeError]=!0,codes$1[ar]=ur}function hideStackFrames$1(ar){const or=nodeInternalPrefix+ar.name;return Object.defineProperty(ar,"name",{value:or}),ar}function aggregateTwoErrors$2(ar,or){if(ar&&or&&ar!==or){if(Array.isArray(or.errors))return or.errors.push(ar),or;const lr=new AggregateError$1([or,ar],or.message);return lr.code=or.code,lr}return ar||or}let AbortError$5=class extends Error{constructor(or="The operation was aborted",lr=void 0){if(lr!==void 0&&typeof lr!="object")throw new codes$1.ERR_INVALID_ARG_TYPE("options","Object",lr);super(or,lr),this.code="ABORT_ERR",this.name="AbortError"}};E$1("ERR_ASSERTION","%s",Error);E$1("ERR_INVALID_ARG_TYPE",(ar,or,lr)=>{assert(typeof ar=="string","'name' must be a string"),Array.isArray(or)||(or=[or]);let ur="The ";ar.endsWith(" argument")?ur+=`${ar} `:ur+=`"${ar}" ${ar.includes(".")?"property":"argument"} `,ur+="must be ";const cr=[],dr=[],fr=[];for(const mr of or)assert(typeof mr=="string","All expected entries have to be of type string"),kTypes.includes(mr)?cr.push(mr.toLowerCase()):classRegExp.test(mr)?dr.push(mr):(assert(mr!=="object",'The value "object" should be written as "Object"'),fr.push(mr));if(dr.length>0){const mr=cr.indexOf("object");mr!==-1&&(cr.splice(cr,mr,1),dr.push("Object"))}if(cr.length>0){switch(cr.length){case 1:ur+=`of type ${cr[0]}`;break;case 2:ur+=`one of type ${cr[0]} or ${cr[1]}`;break;default:{const mr=cr.pop();ur+=`one of type ${cr.join(", ")}, or ${mr}`}}(dr.length>0||fr.length>0)&&(ur+=" or ")}if(dr.length>0){switch(dr.length){case 1:ur+=`an instance of ${dr[0]}`;break;case 2:ur+=`an instance of ${dr[0]} or ${dr[1]}`;break;default:{const mr=dr.pop();ur+=`an instance of ${dr.join(", ")}, or ${mr}`}}fr.length>0&&(ur+=" or ")}switch(fr.length){case 0:break;case 1:fr[0].toLowerCase()!==fr[0]&&(ur+="an "),ur+=`${fr[0]}`;break;case 2:ur+=`one of ${fr[0]} or ${fr[1]}`;break;default:{const mr=fr.pop();ur+=`one of ${fr.join(", ")}, or ${mr}`}}if(lr==null)ur+=`. Received ${lr}`;else if(typeof lr=="function"&&lr.name)ur+=`. Received function ${lr.name}`;else if(typeof lr=="object"){var pr;if((pr=lr.constructor)!==null&&pr!==void 0&&pr.name)ur+=`. Received an instance of ${lr.constructor.name}`;else{const mr=inspect$1(lr,{depth:-1});ur+=`. Received ${mr}`}}else{let mr=inspect$1(lr,{colors:!1});mr.length>25&&(mr=`${mr.slice(0,25)}...`),ur+=`. Received type ${typeof lr} (${mr})`}return ur},TypeError);E$1("ERR_INVALID_ARG_VALUE",(ar,or,lr="is invalid")=>{let ur=inspect$1(or);return ur.length>128&&(ur=ur.slice(0,128)+"..."),`The ${ar.includes(".")?"property":"argument"} '${ar}' ${lr}. Received ${ur}`},TypeError);E$1("ERR_INVALID_RETURN_VALUE",(ar,or,lr)=>{var ur;const cr=lr!=null&&(ur=lr.constructor)!==null&&ur!==void 0&&ur.name?`instance of ${lr.constructor.name}`:`type ${typeof lr}`;return`Expected ${ar} to be returned from the "${or}" function but got ${cr}.`},TypeError);E$1("ERR_MISSING_ARGS",(...ar)=>{assert(ar.length>0,"At least one arg needs to be specified");let or;const lr=ar.length;switch(ar=(Array.isArray(ar)?ar:[ar]).map(ur=>`"${ur}"`).join(" or "),lr){case 1:or+=`The ${ar[0]} argument`;break;case 2:or+=`The ${ar[0]} and ${ar[1]} arguments`;break;default:{const ur=ar.pop();or+=`The ${ar.join(", ")}, and ${ur} arguments`}break}return`${or} must be specified`},TypeError);E$1("ERR_OUT_OF_RANGE",(ar,or,lr)=>{assert(or,'Missing "range" argument');let ur;if(Number.isInteger(lr)&&Math.abs(lr)>2**32)ur=addNumericalSeparator(String(lr));else if(typeof lr=="bigint"){ur=String(lr);const cr=BigInt(2)**BigInt(32);(lr>cr||lr<-cr)&&(ur=addNumericalSeparator(ur)),ur+="n"}else ur=inspect$1(lr);return`The value of "${ar}" is out of range. It must be ${or}. Received ${ur}`},RangeError);E$1("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);E$1("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);E$1("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);E$1("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);E$1("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);E$1("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);E$1("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);E$1("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);E$1("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);E$1("ERR_STREAM_WRITE_AFTER_END","write after end",Error);E$1("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var errors={AbortError:AbortError$5,aggregateTwoErrors:hideStackFrames$1(aggregateTwoErrors$2),hideStackFrames:hideStackFrames$1,codes:codes$1},browser$1={exports:{}},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser$1.exports;hasRequiredBrowser=1;const{AbortController:ar,AbortSignal:or}=typeof self<"u"?self:typeof window<"u"?window:void 0;return browser$1.exports=ar,browser$1.exports.AbortSignal=or,browser$1.exports.default=ar,browser$1.exports}var events={exports:{}},R$1=typeof Reflect=="object"?Reflect:null,ReflectApply=R$1&&typeof R$1.apply=="function"?R$1.apply:function ar(or,lr,ur){return Function.prototype.apply.call(or,lr,ur)},ReflectOwnKeys;R$1&&typeof R$1.ownKeys=="function"?ReflectOwnKeys=R$1.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(or){return Object.getOwnPropertyNames(or).concat(Object.getOwnPropertySymbols(or))}:ReflectOwnKeys=function(or){return Object.getOwnPropertyNames(or)};function ProcessEmitWarning(ar){console&&console.warn&&console.warn(ar)}var NumberIsNaN$2=Number.isNaN||function ar(or){return or!==or};function EventEmitter(){EventEmitter.init.call(this)}events.exports=EventEmitter;events.exports.once=once$2;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=void 0;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(ar){if(typeof ar!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ar)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(ar){if(typeof ar!="number"||ar<0||NumberIsNaN$2(ar))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ar+".");defaultMaxListeners=ar}});EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function ar(or){if(typeof or!="number"||or<0||NumberIsNaN$2(or))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+or+".");return this._maxListeners=or,this};function _getMaxListeners(ar){return ar._maxListeners===void 0?EventEmitter.defaultMaxListeners:ar._maxListeners}EventEmitter.prototype.getMaxListeners=function ar(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function ar(or){for(var lr=[],ur=1;ur<arguments.length;ur++)lr.push(arguments[ur]);var cr=or==="error",dr=this._events;if(dr!==void 0)cr=cr&&dr.error===void 0;else if(!cr)return!1;if(cr){var fr;if(lr.length>0&&(fr=lr[0]),fr instanceof Error)throw fr;var pr=new Error("Unhandled error."+(fr?" ("+fr.message+")":""));throw pr.context=fr,pr}var mr=dr[or];if(mr===void 0)return!1;if(typeof mr=="function")ReflectApply(mr,this,lr);else for(var hr=mr.length,gr=arrayClone(mr,hr),ur=0;ur<hr;++ur)ReflectApply(gr[ur],this,lr);return!0};function _addListener(ar,or,lr,ur){var cr,dr,fr;if(checkListener(lr),dr=ar._events,dr===void 0?(dr=ar._events=Object.create(null),ar._eventsCount=0):(dr.newListener!==void 0&&(ar.emit("newListener",or,lr.listener?lr.listener:lr),dr=ar._events),fr=dr[or]),fr===void 0)fr=dr[or]=lr,++ar._eventsCount;else if(typeof fr=="function"?fr=dr[or]=ur?[lr,fr]:[fr,lr]:ur?fr.unshift(lr):fr.push(lr),cr=_getMaxListeners(ar),cr>0&&fr.length>cr&&!fr.warned){fr.warned=!0;var pr=new Error("Possible EventEmitter memory leak detected. "+fr.length+" "+String(or)+" listeners added. Use emitter.setMaxListeners() to increase limit");pr.name="MaxListenersExceededWarning",pr.emitter=ar,pr.type=or,pr.count=fr.length,ProcessEmitWarning(pr)}return ar}EventEmitter.prototype.addListener=function ar(or,lr){return _addListener(this,or,lr,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function ar(or,lr){return _addListener(this,or,lr,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(ar,or,lr){var ur={fired:!1,wrapFn:void 0,target:ar,type:or,listener:lr},cr=onceWrapper.bind(ur);return cr.listener=lr,ur.wrapFn=cr,cr}EventEmitter.prototype.once=function ar(or,lr){return checkListener(lr),this.on(or,_onceWrap(this,or,lr)),this};EventEmitter.prototype.prependOnceListener=function ar(or,lr){return checkListener(lr),this.prependListener(or,_onceWrap(this,or,lr)),this};EventEmitter.prototype.removeListener=function ar(or,lr){var ur,cr,dr,fr,pr;if(checkListener(lr),cr=this._events,cr===void 0)return this;if(ur=cr[or],ur===void 0)return this;if(ur===lr||ur.listener===lr)--this._eventsCount===0?this._events=Object.create(null):(delete cr[or],cr.removeListener&&this.emit("removeListener",or,ur.listener||lr));else if(typeof ur!="function"){for(dr=-1,fr=ur.length-1;fr>=0;fr--)if(ur[fr]===lr||ur[fr].listener===lr){pr=ur[fr].listener,dr=fr;break}if(dr<0)return this;dr===0?ur.shift():spliceOne(ur,dr),ur.length===1&&(cr[or]=ur[0]),cr.removeListener!==void 0&&this.emit("removeListener",or,pr||lr)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function ar(or){var lr,ur,cr;if(ur=this._events,ur===void 0)return this;if(ur.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):ur[or]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete ur[or]),this;if(arguments.length===0){var dr=Object.keys(ur),fr;for(cr=0;cr<dr.length;++cr)fr=dr[cr],fr!=="removeListener"&&this.removeAllListeners(fr);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(lr=ur[or],typeof lr=="function")this.removeListener(or,lr);else if(lr!==void 0)for(cr=lr.length-1;cr>=0;cr--)this.removeListener(or,lr[cr]);return this};function _listeners(ar,or,lr){var ur=ar._events;if(ur===void 0)return[];var cr=ur[or];return cr===void 0?[]:typeof cr=="function"?lr?[cr.listener||cr]:[cr]:lr?unwrapListeners(cr):arrayClone(cr,cr.length)}EventEmitter.prototype.listeners=function ar(or){return _listeners(this,or,!0)};EventEmitter.prototype.rawListeners=function ar(or){return _listeners(this,or,!1)};EventEmitter.listenerCount=function(ar,or){return typeof ar.listenerCount=="function"?ar.listenerCount(or):listenerCount.call(ar,or)};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(ar){var or=this._events;if(or!==void 0){var lr=or[ar];if(typeof lr=="function")return 1;if(lr!==void 0)return lr.length}return 0}EventEmitter.prototype.eventNames=function ar(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(ar,or){for(var lr=new Array(or),ur=0;ur<or;++ur)lr[ur]=ar[ur];return lr}function spliceOne(ar,or){for(;or+1<ar.length;or++)ar[or]=ar[or+1];ar.pop()}function unwrapListeners(ar){for(var or=new Array(ar.length),lr=0;lr<or.length;++lr)or[lr]=ar[lr].listener||ar[lr];return or}function once$2(ar,or){return new Promise(function(lr,ur){function cr(fr){ar.removeListener(or,dr),ur(fr)}function dr(){typeof ar.removeListener=="function"&&ar.removeListener("error",cr),lr([].slice.call(arguments))}eventTargetAgnosticAddListener(ar,or,dr,{once:!0}),or!=="error"&&addErrorHandlerIfEventEmitter(ar,cr,{once:!0})})}function addErrorHandlerIfEventEmitter(ar,or,lr){typeof ar.on=="function"&&eventTargetAgnosticAddListener(ar,"error",or,lr)}function eventTargetAgnosticAddListener(ar,or,lr,ur){if(typeof ar.on=="function")ur.once?ar.once(or,lr):ar.on(or,lr);else if(typeof ar.addEventListener=="function")ar.addEventListener(or,function cr(dr){ur.once&&ar.removeEventListener(or,cr),lr(dr)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ar)}var eventsExports=events.exports;(function(ar){const or=buffer,{format:lr,inspect:ur}=inspect$2,{codes:{ERR_INVALID_ARG_TYPE:cr}}=errors,{kResistStopPropagation:dr,AggregateError:fr,SymbolDispose:pr}=primordials,mr=globalThis.AbortSignal||requireBrowser().AbortSignal,hr=globalThis.AbortController||requireBrowser().AbortController,gr=Object.getPrototypeOf(async function(){}).constructor,vr=globalThis.Blob||or.Blob,wr=typeof vr<"u"?function(Dr){return Dr instanceof vr}:function(Dr){return!1},_r=(Sr,Dr)=>{if(Sr!==void 0&&(Sr===null||typeof Sr!="object"||!("aborted"in Sr)))throw new cr(Dr,"AbortSignal",Sr)},Cr=(Sr,Dr)=>{if(typeof Sr!="function")throw new cr(Dr,"Function",Sr)};ar.exports={AggregateError:fr,kEmptyObject:Object.freeze({}),once(Sr){let Dr=!1;return function(...Er){Dr||(Dr=!0,Sr.apply(this,Er))}},createDeferredPromise:function(){let Sr,Dr;return{promise:new Promise((kr,Ir)=>{Sr=kr,Dr=Ir}),resolve:Sr,reject:Dr}},promisify(Sr){return new Promise((Dr,Er)=>{Sr((kr,...Ir)=>kr?Er(kr):Dr(...Ir))})},debuglog(){return function(){}},format:lr,inspect:ur,types:{isAsyncFunction(Sr){return Sr instanceof gr},isArrayBufferView(Sr){return ArrayBuffer.isView(Sr)}},isBlob:wr,deprecate(Sr,Dr){return Sr},addAbortListener:eventsExports.addAbortListener||function(Dr,Er){if(Dr===void 0)throw new cr("signal","AbortSignal",Dr);_r(Dr,"signal"),Cr(Er,"listener");let kr;return Dr.aborted?queueMicrotask(()=>Er()):(Dr.addEventListener("abort",Er,{__proto__:null,once:!0,[dr]:!0}),kr=()=>{Dr.removeEventListener("abort",Er)}),{__proto__:null,[pr](){var Ir;(Ir=kr)===null||Ir===void 0||Ir()}}},AbortSignalAny:mr.any||function(Dr){if(Dr.length===1)return Dr[0];const Er=new hr,kr=()=>Er.abort();return Dr.forEach(Ir=>{_r(Ir,"signals"),Ir.addEventListener("abort",kr,{once:!0})}),Er.signal.addEventListener("abort",()=>{Dr.forEach(Ir=>Ir.removeEventListener("abort",kr))},{once:!0}),Er.signal}},ar.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(util);var utilExports=util.exports,operators={};const{ArrayIsArray:ArrayIsArray$2,ArrayPrototypeIncludes,ArrayPrototypeJoin,ArrayPrototypeMap,NumberIsInteger:NumberIsInteger$1,NumberIsNaN:NumberIsNaN$1,NumberMAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER,NumberParseInt,ObjectPrototypeHasOwnProperty,RegExpPrototypeExec,String:String$1,StringPrototypeToUpperCase,StringPrototypeTrim}=primordials,{hideStackFrames,codes:{ERR_SOCKET_BAD_PORT,ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$4,ERR_INVALID_ARG_VALUE:ERR_INVALID_ARG_VALUE$3,ERR_OUT_OF_RANGE:ERR_OUT_OF_RANGE$1,ERR_UNKNOWN_SIGNAL}}=errors,{normalizeEncoding:normalizeEncoding$1}=utilExports,{isAsyncFunction,isArrayBufferView}=utilExports.types,validateInteger$2=hideStackFrames((ar,or,lr=NumberMIN_SAFE_INTEGER,ur=NumberMAX_SAFE_INTEGER)=>{if(typeof ar!="number")throw new ERR_INVALID_ARG_TYPE$4(or,"number",ar);if(!NumberIsInteger$1(ar))throw new ERR_OUT_OF_RANGE$1(or,"an integer",ar);if(ar<lr||ar>ur)throw new ERR_OUT_OF_RANGE$1(or,`>= ${lr} && <= ${ur}`,ar)});hideStackFrames((ar,or,lr=-2147483648,ur=2147483647)=>{if(typeof ar!="number")throw new ERR_INVALID_ARG_TYPE$4(or,"number",ar);if(!NumberIsInteger$1(ar))throw new ERR_OUT_OF_RANGE$1(or,"an integer",ar);if(ar<lr||ar>ur)throw new ERR_OUT_OF_RANGE$1(or,`>= ${lr} && <= ${ur}`,ar)});hideStackFrames((ar,or,lr=!1)=>{if(typeof ar!="number")throw new ERR_INVALID_ARG_TYPE$4(or,"number",ar);if(!NumberIsInteger$1(ar))throw new ERR_OUT_OF_RANGE$1(or,"an integer",ar);const ur=lr?1:0,cr=4294967295;if(ar<ur||ar>cr)throw new ERR_OUT_OF_RANGE$1(or,`>= ${ur} && <= ${cr}`,ar)});hideStackFrames((ar,or,lr)=>{if(!ArrayPrototypeIncludes(lr,ar)){const cr="must be one of: "+ArrayPrototypeJoin(ArrayPrototypeMap(lr,dr=>typeof dr=="string"?`'${dr}'`:String$1(dr)),", ");throw new ERR_INVALID_ARG_VALUE$3(or,ar,cr)}});function validateBoolean$1(ar,or){if(typeof ar!="boolean")throw new ERR_INVALID_ARG_TYPE$4(or,"boolean",ar)}function getOwnPropertyValueOrDefault(ar,or,lr){return ar==null||!ObjectPrototypeHasOwnProperty(ar,or)?lr:ar[or]}const validateObject$2=hideStackFrames((ar,or,lr=null)=>{const ur=getOwnPropertyValueOrDefault(lr,"allowArray",!1),cr=getOwnPropertyValueOrDefault(lr,"allowFunction",!1);if(!getOwnPropertyValueOrDefault(lr,"nullable",!1)&&ar===null||!ur&&ArrayIsArray$2(ar)||typeof ar!="object"&&(!cr||typeof ar!="function"))throw new ERR_INVALID_ARG_TYPE$4(or,"Object",ar)});hideStackFrames((ar,or)=>{if(ar!=null&&typeof ar!="object"&&typeof ar!="function")throw new ERR_INVALID_ARG_TYPE$4(or,"a dictionary",ar)});hideStackFrames((ar,or,lr=0)=>{if(!ArrayIsArray$2(ar))throw new ERR_INVALID_ARG_TYPE$4(or,"Array",ar);if(ar.length<lr){const ur=`must be longer than ${lr}`;throw new ERR_INVALID_ARG_VALUE$3(or,ar,ur)}});hideStackFrames((ar,or="buffer")=>{if(!isArrayBufferView(ar))throw new ERR_INVALID_ARG_TYPE$4(or,["Buffer","TypedArray","DataView"],ar)});const validateAbortSignal$3=hideStackFrames((ar,or)=>{if(ar!==void 0&&(ar===null||typeof ar!="object"||!("aborted"in ar)))throw new ERR_INVALID_ARG_TYPE$4(or,"AbortSignal",ar)}),validateFunction$2=hideStackFrames((ar,or)=>{if(typeof ar!="function")throw new ERR_INVALID_ARG_TYPE$4(or,"Function",ar)});hideStackFrames((ar,or)=>{if(typeof ar!="function"||isAsyncFunction(ar))throw new ERR_INVALID_ARG_TYPE$4(or,"Function",ar)});hideStackFrames((ar,or)=>{if(ar!==void 0)throw new ERR_INVALID_ARG_TYPE$4(or,"undefined",ar)});var validators={validateBoolean:validateBoolean$1,validateFunction:validateFunction$2,validateInteger:validateInteger$2,validateObject:validateObject$2,validateAbortSignal:validateAbortSignal$3},endOfStream={exports:{}},browser={exports:{}},process$5=browser.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(ar){if(cachedSetTimeout===setTimeout)return setTimeout(ar,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(ar,0);try{return cachedSetTimeout(ar,0)}catch{try{return cachedSetTimeout.call(null,ar,0)}catch{return cachedSetTimeout.call(this,ar,0)}}}function runClearTimeout(ar){if(cachedClearTimeout===clearTimeout)return clearTimeout(ar);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(ar);try{return cachedClearTimeout(ar)}catch{try{return cachedClearTimeout.call(null,ar)}catch{return cachedClearTimeout.call(this,ar)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var ar=runTimeout(cleanUpNextTick);draining=!0;for(var or=queue.length;or;){for(currentQueue=queue,queue=[];++queueIndex<or;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,or=queue.length}currentQueue=null,draining=!1,runClearTimeout(ar)}}process$5.nextTick=function(ar){var or=new Array(arguments.length-1);if(arguments.length>1)for(var lr=1;lr<arguments.length;lr++)or[lr-1]=arguments[lr];queue.push(new Item(ar,or)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(ar,or){this.fun=ar,this.array=or}Item.prototype.run=function(){this.fun.apply(null,this.array)};process$5.title="browser";process$5.browser=!0;process$5.env={};process$5.argv=[];process$5.version="";process$5.versions={};function noop(){}process$5.on=noop;process$5.addListener=noop;process$5.once=noop;process$5.off=noop;process$5.removeListener=noop;process$5.removeAllListeners=noop;process$5.emit=noop;process$5.prependListener=noop;process$5.prependOnceListener=noop;process$5.listeners=function(ar){return[]};process$5.binding=function(ar){throw new Error("process.binding is not supported")};process$5.cwd=function(){return"/"};process$5.chdir=function(ar){throw new Error("process.chdir is not supported")};process$5.umask=function(){return 0};var browserExports$1=browser.exports;const{SymbolAsyncIterator:SymbolAsyncIterator$2,SymbolIterator:SymbolIterator$2,SymbolFor}=primordials,kIsDestroyed$1=SymbolFor("nodejs.stream.destroyed"),kIsErrored=SymbolFor("nodejs.stream.errored"),kIsReadable=SymbolFor("nodejs.stream.readable"),kIsWritable=SymbolFor("nodejs.stream.writable"),kIsDisturbed=SymbolFor("nodejs.stream.disturbed"),kIsClosedPromise$1=SymbolFor("nodejs.webstream.isClosedPromise"),kControllerErrorFunction=SymbolFor("nodejs.webstream.controllerErrorFunction");function isReadableNodeStream$2(ar,or=!1){var lr;return!!(ar&&typeof ar.pipe=="function"&&typeof ar.on=="function"&&(!or||typeof ar.pause=="function"&&typeof ar.resume=="function")&&(!ar._writableState||((lr=ar._readableState)===null||lr===void 0?void 0:lr.readable)!==!1)&&(!ar._writableState||ar._readableState))}function isWritableNodeStream$1(ar){var or;return!!(ar&&typeof ar.write=="function"&&typeof ar.on=="function"&&(!ar._readableState||((or=ar._writableState)===null||or===void 0?void 0:or.writable)!==!1))}function isDuplexNodeStream(ar){return!!(ar&&typeof ar.pipe=="function"&&ar._readableState&&typeof ar.on=="function"&&typeof ar.write=="function")}function isNodeStream$4(ar){return ar&&(ar._readableState||ar._writableState||typeof ar.write=="function"&&typeof ar.on=="function"||typeof ar.pipe=="function"&&typeof ar.on=="function")}function isReadableStream$3(ar){return!!(ar&&!isNodeStream$4(ar)&&typeof ar.pipeThrough=="function"&&typeof ar.getReader=="function"&&typeof ar.cancel=="function")}function isWritableStream$2(ar){return!!(ar&&!isNodeStream$4(ar)&&typeof ar.getWriter=="function"&&typeof ar.abort=="function")}function isTransformStream$2(ar){return!!(ar&&!isNodeStream$4(ar)&&typeof ar.readable=="object"&&typeof ar.writable=="object")}function isWebStream$2(ar){return isReadableStream$3(ar)||isWritableStream$2(ar)||isTransformStream$2(ar)}function isIterable$1(ar,or){return ar==null?!1:or===!0?typeof ar[SymbolAsyncIterator$2]=="function":or===!1?typeof ar[SymbolIterator$2]=="function":typeof ar[SymbolAsyncIterator$2]=="function"||typeof ar[SymbolIterator$2]=="function"}function isDestroyed$1(ar){if(!isNodeStream$4(ar))return null;const or=ar._writableState,lr=ar._readableState,ur=or||lr;return!!(ar.destroyed||ar[kIsDestroyed$1]||ur!=null&&ur.destroyed)}function isWritableEnded(ar){if(!isWritableNodeStream$1(ar))return null;if(ar.writableEnded===!0)return!0;const or=ar._writableState;return or!=null&&or.errored?!1:typeof(or==null?void 0:or.ended)!="boolean"?null:or.ended}function isWritableFinished$1(ar,or){if(!isWritableNodeStream$1(ar))return null;if(ar.writableFinished===!0)return!0;const lr=ar._writableState;return lr!=null&&lr.errored?!1:typeof(lr==null?void 0:lr.finished)!="boolean"?null:!!(lr.finished||or===!1&&lr.ended===!0&&lr.length===0)}function isReadableFinished$2(ar,or){if(!isReadableNodeStream$2(ar))return null;const lr=ar._readableState;return lr!=null&&lr.errored?!1:typeof(lr==null?void 0:lr.endEmitted)!="boolean"?null:!!(lr.endEmitted||or===!1&&lr.ended===!0&&lr.length===0)}function isReadable$3(ar){return ar&&ar[kIsReadable]!=null?ar[kIsReadable]:typeof(ar==null?void 0:ar.readable)!="boolean"?null:isDestroyed$1(ar)?!1:isReadableNodeStream$2(ar)&&ar.readable&&!isReadableFinished$2(ar)}function isWritable$3(ar){return ar&&ar[kIsWritable]!=null?ar[kIsWritable]:typeof(ar==null?void 0:ar.writable)!="boolean"?null:isDestroyed$1(ar)?!1:isWritableNodeStream$1(ar)&&ar.writable&&!isWritableEnded(ar)}function isFinished$1(ar,or){return isNodeStream$4(ar)?isDestroyed$1(ar)?!0:!((or==null?void 0:or.readable)!==!1&&isReadable$3(ar)||(or==null?void 0:or.writable)!==!1&&isWritable$3(ar)):null}function isWritableErrored$1(ar){var or,lr;return isNodeStream$4(ar)?ar.writableErrored?ar.writableErrored:(or=(lr=ar._writableState)===null||lr===void 0?void 0:lr.errored)!==null&&or!==void 0?or:null:null}function isReadableErrored$1(ar){var or,lr;return isNodeStream$4(ar)?ar.readableErrored?ar.readableErrored:(or=(lr=ar._readableState)===null||lr===void 0?void 0:lr.errored)!==null&&or!==void 0?or:null:null}function isClosed$1(ar){if(!isNodeStream$4(ar))return null;if(typeof ar.closed=="boolean")return ar.closed;const or=ar._writableState,lr=ar._readableState;return typeof(or==null?void 0:or.closed)=="boolean"||typeof(lr==null?void 0:lr.closed)=="boolean"?(or==null?void 0:or.closed)||(lr==null?void 0:lr.closed):typeof ar._closed=="boolean"&&isOutgoingMessage(ar)?ar._closed:null}function isOutgoingMessage(ar){return typeof ar._closed=="boolean"&&typeof ar._defaultKeepAlive=="boolean"&&typeof ar._removedConnection=="boolean"&&typeof ar._removedContLen=="boolean"}function isServerResponse(ar){return typeof ar._sent100=="boolean"&&isOutgoingMessage(ar)}function isServerRequest$1(ar){var or;return typeof ar._consuming=="boolean"&&typeof ar._dumped=="boolean"&&((or=ar.req)===null||or===void 0?void 0:or.upgradeOrConnect)===void 0}function willEmitClose(ar){if(!isNodeStream$4(ar))return null;const or=ar._writableState,lr=ar._readableState,ur=or||lr;return!ur&&isServerResponse(ar)||!!(ur&&ur.autoDestroy&&ur.emitClose&&ur.closed===!1)}function isDisturbed(ar){var or;return!!(ar&&((or=ar[kIsDisturbed])!==null&&or!==void 0?or:ar.readableDidRead||ar.readableAborted))}function isErrored(ar){var or,lr,ur,cr,dr,fr,pr,mr,hr,gr;return!!(ar&&((or=(lr=(ur=(cr=(dr=(fr=ar[kIsErrored])!==null&&fr!==void 0?fr:ar.readableErrored)!==null&&dr!==void 0?dr:ar.writableErrored)!==null&&cr!==void 0?cr:(pr=ar._readableState)===null||pr===void 0?void 0:pr.errorEmitted)!==null&&ur!==void 0?ur:(mr=ar._writableState)===null||mr===void 0?void 0:mr.errorEmitted)!==null&&lr!==void 0?lr:(hr=ar._readableState)===null||hr===void 0?void 0:hr.errored)!==null&&or!==void 0?or:!((gr=ar._writableState)===null||gr===void 0)&&gr.errored))}var utils={isDestroyed:isDestroyed$1,kIsDestroyed:kIsDestroyed$1,isDisturbed,isErrored,isReadable:isReadable$3,kIsClosedPromise:kIsClosedPromise$1,kControllerErrorFunction,isClosed:isClosed$1,isDuplexNodeStream,isFinished:isFinished$1,isIterable:isIterable$1,isReadableNodeStream:isReadableNodeStream$2,isReadableStream:isReadableStream$3,isReadableFinished:isReadableFinished$2,isReadableErrored:isReadableErrored$1,isNodeStream:isNodeStream$4,isWebStream:isWebStream$2,isWritable:isWritable$3,isWritableNodeStream:isWritableNodeStream$1,isWritableStream:isWritableStream$2,isWritableFinished:isWritableFinished$1,isWritableErrored:isWritableErrored$1,isServerRequest:isServerRequest$1,willEmitClose,isTransformStream:isTransformStream$2};const process$4=browserExports$1,{AbortError:AbortError$4,codes}=errors,{ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$3,ERR_STREAM_PREMATURE_CLOSE:ERR_STREAM_PREMATURE_CLOSE$1}=codes,{kEmptyObject,once:once$1}=utilExports,{validateAbortSignal:validateAbortSignal$2,validateFunction:validateFunction$1,validateObject:validateObject$1,validateBoolean}=validators,{Promise:Promise$3,PromisePrototypeThen:PromisePrototypeThen$2,SymbolDispose:SymbolDispose$1}=primordials,{isClosed,isReadable:isReadable$2,isReadableNodeStream:isReadableNodeStream$1,isReadableStream:isReadableStream$2,isReadableFinished:isReadableFinished$1,isReadableErrored,isWritable:isWritable$2,isWritableNodeStream,isWritableStream:isWritableStream$1,isWritableFinished,isWritableErrored,isNodeStream:isNodeStream$3,willEmitClose:_willEmitClose,kIsClosedPromise}=utils;let addAbortListener$1;function isRequest$1(ar){return ar.setHeader&&typeof ar.abort=="function"}const nop=()=>{};function eos$2(ar,or,lr){var ur,cr;if(arguments.length===2?(lr=or,or=kEmptyObject):or==null?or=kEmptyObject:validateObject$1(or,"options"),validateFunction$1(lr,"callback"),validateAbortSignal$2(or.signal,"options.signal"),lr=once$1(lr),isReadableStream$2(ar)||isWritableStream$1(ar))return eosWeb(ar,or,lr);if(!isNodeStream$3(ar))throw new ERR_INVALID_ARG_TYPE$3("stream",["ReadableStream","WritableStream","Stream"],ar);const dr=(ur=or.readable)!==null&&ur!==void 0?ur:isReadableNodeStream$1(ar),fr=(cr=or.writable)!==null&&cr!==void 0?cr:isWritableNodeStream(ar),pr=ar._writableState,mr=ar._readableState,hr=()=>{ar.writable||wr()};let gr=_willEmitClose(ar)&&isReadableNodeStream$1(ar)===dr&&isWritableNodeStream(ar)===fr,vr=isWritableFinished(ar,!1);const wr=()=>{vr=!0,ar.destroyed&&(gr=!1),!(gr&&(!ar.readable||dr))&&(!dr||_r)&&lr.call(ar)};let _r=isReadableFinished$1(ar,!1);const Cr=()=>{_r=!0,ar.destroyed&&(gr=!1),!(gr&&(!ar.writable||fr))&&(!fr||vr)&&lr.call(ar)},Sr=Nr=>{lr.call(ar,Nr)};let Dr=isClosed(ar);const Er=()=>{Dr=!0;const Nr=isWritableErrored(ar)||isReadableErrored(ar);if(Nr&&typeof Nr!="boolean")return lr.call(ar,Nr);if(dr&&!_r&&isReadableNodeStream$1(ar,!0)&&!isReadableFinished$1(ar,!1))return lr.call(ar,new ERR_STREAM_PREMATURE_CLOSE$1);if(fr&&!vr&&!isWritableFinished(ar,!1))return lr.call(ar,new ERR_STREAM_PREMATURE_CLOSE$1);lr.call(ar)},kr=()=>{Dr=!0;const Nr=isWritableErrored(ar)||isReadableErrored(ar);if(Nr&&typeof Nr!="boolean")return lr.call(ar,Nr);lr.call(ar)},Ir=()=>{ar.req.on("finish",wr)};isRequest$1(ar)?(ar.on("complete",wr),gr||ar.on("abort",Er),ar.req?Ir():ar.on("request",Ir)):fr&&!pr&&(ar.on("end",hr),ar.on("close",hr)),!gr&&typeof ar.aborted=="boolean"&&ar.on("aborted",Er),ar.on("end",Cr),ar.on("finish",wr),or.error!==!1&&ar.on("error",Sr),ar.on("close",Er),Dr?process$4.nextTick(Er):pr!=null&&pr.errorEmitted||mr!=null&&mr.errorEmitted?gr||process$4.nextTick(kr):(!dr&&(!gr||isReadable$2(ar))&&(vr||isWritable$2(ar)===!1)||!fr&&(!gr||isWritable$2(ar))&&(_r||isReadable$2(ar)===!1)||mr&&ar.req&&ar.aborted)&&process$4.nextTick(kr);const Br=()=>{lr=nop,ar.removeListener("aborted",Er),ar.removeListener("complete",wr),ar.removeListener("abort",Er),ar.removeListener("request",Ir),ar.req&&ar.req.removeListener("finish",wr),ar.removeListener("end",hr),ar.removeListener("close",hr),ar.removeListener("finish",wr),ar.removeListener("end",Cr),ar.removeListener("error",Sr),ar.removeListener("close",Er)};if(or.signal&&!Dr){const Nr=()=>{const Mr=lr;Br(),Mr.call(ar,new AbortError$4(void 0,{cause:or.signal.reason}))};if(or.signal.aborted)process$4.nextTick(Nr);else{addAbortListener$1=addAbortListener$1||utilExports.addAbortListener;const Mr=addAbortListener$1(or.signal,Nr),xr=lr;lr=once$1((...Rr)=>{Mr[SymbolDispose$1](),xr.apply(ar,Rr)})}}return Br}function eosWeb(ar,or,lr){let ur=!1,cr=nop;if(or.signal)if(cr=()=>{ur=!0,lr.call(ar,new AbortError$4(void 0,{cause:or.signal.reason}))},or.signal.aborted)process$4.nextTick(cr);else{addAbortListener$1=addAbortListener$1||utilExports.addAbortListener;const fr=addAbortListener$1(or.signal,cr),pr=lr;lr=once$1((...mr)=>{fr[SymbolDispose$1](),pr.apply(ar,mr)})}const dr=(...fr)=>{ur||process$4.nextTick(()=>lr.apply(ar,fr))};return PromisePrototypeThen$2(ar[kIsClosedPromise].promise,dr,dr),nop}function finished$1(ar,or){var lr;let ur=!1;return or===null&&(or=kEmptyObject),(lr=or)!==null&&lr!==void 0&&lr.cleanup&&(validateBoolean(or.cleanup,"cleanup"),ur=or.cleanup),new Promise$3((cr,dr)=>{const fr=eos$2(ar,or,pr=>{ur&&fr(),pr?dr(pr):cr()})})}endOfStream.exports=eos$2;endOfStream.exports.finished=finished$1;var endOfStreamExports=endOfStream.exports;const process$3=browserExports$1,{aggregateTwoErrors:aggregateTwoErrors$1,codes:{ERR_MULTIPLE_CALLBACK},AbortError:AbortError$3}=errors,{Symbol:Symbol$3}=primordials,{kIsDestroyed,isDestroyed,isFinished,isServerRequest}=utils,kDestroy=Symbol$3("kDestroy"),kConstruct=Symbol$3("kConstruct");function checkError(ar,or,lr){ar&&(ar.stack,or&&!or.errored&&(or.errored=ar),lr&&!lr.errored&&(lr.errored=ar))}function destroy(ar,or){const lr=this._readableState,ur=this._writableState,cr=ur||lr;return ur!=null&&ur.destroyed||lr!=null&&lr.destroyed?(typeof or=="function"&&or(),this):(checkError(ar,ur,lr),ur&&(ur.destroyed=!0),lr&&(lr.destroyed=!0),cr.constructed?_destroy(this,ar,or):this.once(kDestroy,function(dr){_destroy(this,aggregateTwoErrors$1(dr,ar),or)}),this)}function _destroy(ar,or,lr){let ur=!1;function cr(dr){if(ur)return;ur=!0;const fr=ar._readableState,pr=ar._writableState;checkError(dr,pr,fr),pr&&(pr.closed=!0),fr&&(fr.closed=!0),typeof lr=="function"&&lr(dr),dr?process$3.nextTick(emitErrorCloseNT,ar,dr):process$3.nextTick(emitCloseNT,ar)}try{ar._destroy(or||null,cr)}catch(dr){cr(dr)}}function emitErrorCloseNT(ar,or){emitErrorNT(ar,or),emitCloseNT(ar)}function emitCloseNT(ar){const or=ar._readableState,lr=ar._writableState;lr&&(lr.closeEmitted=!0),or&&(or.closeEmitted=!0),(lr!=null&&lr.emitClose||or!=null&&or.emitClose)&&ar.emit("close")}function emitErrorNT(ar,or){const lr=ar._readableState,ur=ar._writableState;ur!=null&&ur.errorEmitted||lr!=null&&lr.errorEmitted||(ur&&(ur.errorEmitted=!0),lr&&(lr.errorEmitted=!0),ar.emit("error",or))}function undestroy(){const ar=this._readableState,or=this._writableState;ar&&(ar.constructed=!0,ar.closed=!1,ar.closeEmitted=!1,ar.destroyed=!1,ar.errored=null,ar.errorEmitted=!1,ar.reading=!1,ar.ended=ar.readable===!1,ar.endEmitted=ar.readable===!1),or&&(or.constructed=!0,or.destroyed=!1,or.closed=!1,or.closeEmitted=!1,or.errored=null,or.errorEmitted=!1,or.finalCalled=!1,or.prefinished=!1,or.ended=or.writable===!1,or.ending=or.writable===!1,or.finished=or.writable===!1)}function errorOrDestroy(ar,or,lr){const ur=ar._readableState,cr=ar._writableState;if(cr!=null&&cr.destroyed||ur!=null&&ur.destroyed)return this;ur!=null&&ur.autoDestroy||cr!=null&&cr.autoDestroy?ar.destroy(or):or&&(or.stack,cr&&!cr.errored&&(cr.errored=or),ur&&!ur.errored&&(ur.errored=or),lr?process$3.nextTick(emitErrorNT,ar,or):emitErrorNT(ar,or))}function construct(ar,or){if(typeof ar._construct!="function")return;const lr=ar._readableState,ur=ar._writableState;lr&&(lr.constructed=!1),ur&&(ur.constructed=!1),ar.once(kConstruct,or),!(ar.listenerCount(kConstruct)>1)&&process$3.nextTick(constructNT,ar)}function constructNT(ar){let or=!1;function lr(ur){if(or){errorOrDestroy(ar,ur??new ERR_MULTIPLE_CALLBACK);return}or=!0;const cr=ar._readableState,dr=ar._writableState,fr=dr||cr;cr&&(cr.constructed=!0),dr&&(dr.constructed=!0),fr.destroyed?ar.emit(kDestroy,ur):ur?errorOrDestroy(ar,ur,!0):process$3.nextTick(emitConstructNT,ar)}try{ar._construct(ur=>{process$3.nextTick(lr,ur)})}catch(ur){process$3.nextTick(lr,ur)}}function emitConstructNT(ar){ar.emit(kConstruct)}function isRequest(ar){return(ar==null?void 0:ar.setHeader)&&typeof ar.abort=="function"}function emitCloseLegacy(ar){ar.emit("close")}function emitErrorCloseLegacy(ar,or){ar.emit("error",or),process$3.nextTick(emitCloseLegacy,ar)}function destroyer$2(ar,or){!ar||isDestroyed(ar)||(!or&&!isFinished(ar)&&(or=new AbortError$3),isServerRequest(ar)?(ar.socket=null,ar.destroy(or)):isRequest(ar)?ar.abort():isRequest(ar.req)?ar.req.abort():typeof ar.destroy=="function"?ar.destroy(or):typeof ar.close=="function"?ar.close():or?process$3.nextTick(emitErrorCloseLegacy,ar,or):process$3.nextTick(emitCloseLegacy,ar),ar.destroyed||(ar[kIsDestroyed]=!0))}var destroy_1={construct,destroyer:destroyer$2,destroy,undestroy,errorOrDestroy};const{ArrayIsArray:ArrayIsArray$1,ObjectSetPrototypeOf:ObjectSetPrototypeOf$2}=primordials,{EventEmitter:EE}=eventsExports;function Stream(ar){EE.call(this,ar)}ObjectSetPrototypeOf$2(Stream.prototype,EE.prototype);ObjectSetPrototypeOf$2(Stream,EE);Stream.prototype.pipe=function(ar,or){const lr=this;function ur(gr){ar.writable&&ar.write(gr)===!1&&lr.pause&&lr.pause()}lr.on("data",ur);function cr(){lr.readable&&lr.resume&&lr.resume()}ar.on("drain",cr),!ar._isStdio&&(!or||or.end!==!1)&&(lr.on("end",fr),lr.on("close",pr));let dr=!1;function fr(){dr||(dr=!0,ar.end())}function pr(){dr||(dr=!0,typeof ar.destroy=="function"&&ar.destroy())}function mr(gr){hr(),EE.listenerCount(this,"error")===0&&this.emit("error",gr)}prependListener(lr,"error",mr),prependListener(ar,"error",mr);function hr(){lr.removeListener("data",ur),ar.removeListener("drain",cr),lr.removeListener("end",fr),lr.removeListener("close",pr),lr.removeListener("error",mr),ar.removeListener("error",mr),lr.removeListener("end",hr),lr.removeListener("close",hr),ar.removeListener("close",hr)}return lr.on("end",hr),lr.on("close",hr),ar.on("close",hr),ar.emit("pipe",lr),ar};function prependListener(ar,or,lr){if(typeof ar.prependListener=="function")return ar.prependListener(or,lr);!ar._events||!ar._events[or]?ar.on(or,lr):ArrayIsArray$1(ar._events[or])?ar._events[or].unshift(lr):ar._events[or]=[lr,ar._events[or]]}var legacy={Stream,prependListener},addAbortSignal={exports:{}};(function(ar){const{SymbolDispose:or}=primordials,{AbortError:lr,codes:ur}=errors,{isNodeStream:cr,isWebStream:dr,kControllerErrorFunction:fr}=utils,pr=endOfStreamExports,{ERR_INVALID_ARG_TYPE:mr}=ur;let hr;const gr=(vr,wr)=>{if(typeof vr!="object"||!("aborted"in vr))throw new mr(wr,"AbortSignal",vr)};ar.exports.addAbortSignal=function(wr,_r){if(gr(wr,"signal"),!cr(_r)&&!dr(_r))throw new mr("stream",["ReadableStream","WritableStream","Stream"],_r);return ar.exports.addAbortSignalNoValidate(wr,_r)},ar.exports.addAbortSignalNoValidate=function(vr,wr){if(typeof vr!="object"||!("aborted"in vr))return wr;const _r=cr(wr)?()=>{wr.destroy(new lr(void 0,{cause:vr.reason}))}:()=>{wr[fr](new lr(void 0,{cause:vr.reason}))};if(vr.aborted)_r();else{hr=hr||utilExports.addAbortListener;const Cr=hr(vr,_r);pr(wr,Cr[or])}return wr}})(addAbortSignal);var addAbortSignalExports=addAbortSignal.exports;const{StringPrototypeSlice,SymbolIterator:SymbolIterator$1,TypedArrayPrototypeSet,Uint8Array:Uint8Array$1}=primordials,{Buffer:Buffer$3}=buffer,{inspect}=utilExports;var buffer_list=class{constructor(){this.head=null,this.tail=null,this.length=0}push(or){const lr={data:or,next:null};this.length>0?this.tail.next=lr:this.head=lr,this.tail=lr,++this.length}unshift(or){const lr={data:or,next:this.head};this.length===0&&(this.tail=lr),this.head=lr,++this.length}shift(){if(this.length===0)return;const or=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,or}clear(){this.head=this.tail=null,this.length=0}join(or){if(this.length===0)return"";let lr=this.head,ur=""+lr.data;for(;(lr=lr.next)!==null;)ur+=or+lr.data;return ur}concat(or){if(this.length===0)return Buffer$3.alloc(0);const lr=Buffer$3.allocUnsafe(or>>>0);let ur=this.head,cr=0;for(;ur;)TypedArrayPrototypeSet(lr,ur.data,cr),cr+=ur.data.length,ur=ur.next;return lr}consume(or,lr){const ur=this.head.data;if(or<ur.length){const cr=ur.slice(0,or);return this.head.data=ur.slice(or),cr}return or===ur.length?this.shift():lr?this._getString(or):this._getBuffer(or)}first(){return this.head.data}*[SymbolIterator$1](){for(let or=this.head;or;or=or.next)yield or.data}_getString(or){let lr="",ur=this.head,cr=0;do{const dr=ur.data;if(or>dr.length)lr+=dr,or-=dr.length;else{or===dr.length?(lr+=dr,++cr,ur.next?this.head=ur.next:this.head=this.tail=null):(lr+=StringPrototypeSlice(dr,0,or),this.head=ur,ur.data=StringPrototypeSlice(dr,or));break}++cr}while((ur=ur.next)!==null);return this.length-=cr,lr}_getBuffer(or){const lr=Buffer$3.allocUnsafe(or),ur=or;let cr=this.head,dr=0;do{const fr=cr.data;if(or>fr.length)TypedArrayPrototypeSet(lr,fr,ur-or),or-=fr.length;else{or===fr.length?(TypedArrayPrototypeSet(lr,fr,ur-or),++dr,cr.next?this.head=cr.next:this.head=this.tail=null):(TypedArrayPrototypeSet(lr,new Uint8Array$1(fr.buffer,fr.byteOffset,or),ur-or),this.head=cr,cr.data=fr.slice(or));break}++dr}while((cr=cr.next)!==null);return this.length-=dr,lr}[Symbol.for("nodejs.util.inspect.custom")](or,lr){return inspect(this,{...lr,depth:0,customInspect:!1})}};const{MathFloor:MathFloor$1,NumberIsInteger}=primordials,{validateInteger:validateInteger$1}=validators,{ERR_INVALID_ARG_VALUE:ERR_INVALID_ARG_VALUE$2}=errors.codes;let defaultHighWaterMarkBytes=16*1024,defaultHighWaterMarkObjectMode=16;function highWaterMarkFrom(ar,or,lr){return ar.highWaterMark!=null?ar.highWaterMark:or?ar[lr]:null}function getDefaultHighWaterMark(ar){return ar?defaultHighWaterMarkObjectMode:defaultHighWaterMarkBytes}function setDefaultHighWaterMark(ar,or){validateInteger$1(or,"value",0),ar?defaultHighWaterMarkObjectMode=or:defaultHighWaterMarkBytes=or}function getHighWaterMark$1(ar,or,lr,ur){const cr=highWaterMarkFrom(or,ur,lr);if(cr!=null){if(!NumberIsInteger(cr)||cr<0){const dr=ur?`options.${lr}`:"options.highWaterMark";throw new ERR_INVALID_ARG_VALUE$2(dr,cr)}return MathFloor$1(cr)}return getDefaultHighWaterMark(ar.objectMode)}var state={getHighWaterMark:getHighWaterMark$1,getDefaultHighWaterMark,setDefaultHighWaterMark},string_decoder={},safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(ar,or){var lr=buffer,ur=lr.Buffer;function cr(fr,pr){for(var mr in fr)pr[mr]=fr[mr]}ur.from&&ur.alloc&&ur.allocUnsafe&&ur.allocUnsafeSlow?ar.exports=lr:(cr(lr,or),or.Buffer=dr);function dr(fr,pr,mr){return ur(fr,pr,mr)}dr.prototype=Object.create(ur.prototype),cr(ur,dr),dr.from=function(fr,pr,mr){if(typeof fr=="number")throw new TypeError("Argument must not be a number");return ur(fr,pr,mr)},dr.alloc=function(fr,pr,mr){if(typeof fr!="number")throw new TypeError("Argument must be a number");var hr=ur(fr);return pr!==void 0?typeof mr=="string"?hr.fill(pr,mr):hr.fill(pr):hr.fill(0),hr},dr.allocUnsafe=function(fr){if(typeof fr!="number")throw new TypeError("Argument must be a number");return ur(fr)},dr.allocUnsafeSlow=function(fr){if(typeof fr!="number")throw new TypeError("Argument must be a number");return lr.SlowBuffer(fr)}})(safeBuffer,safeBuffer.exports);var safeBufferExports=safeBuffer.exports,Buffer$2=safeBufferExports.Buffer,isEncoding=Buffer$2.isEncoding||function(ar){switch(ar=""+ar,ar&&ar.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(ar){if(!ar)return"utf8";for(var or;;)switch(ar){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return ar;default:if(or)return;ar=(""+ar).toLowerCase(),or=!0}}function normalizeEncoding(ar){var or=_normalizeEncoding(ar);if(typeof or!="string"&&(Buffer$2.isEncoding===isEncoding||!isEncoding(ar)))throw new Error("Unknown encoding: "+ar);return or||ar}string_decoder.StringDecoder=StringDecoder;function StringDecoder(ar){this.encoding=normalizeEncoding(ar);var or;switch(this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,or=4;break;case"utf8":this.fillLast=utf8FillLast,or=4;break;case"base64":this.text=base64Text,this.end=base64End,or=3;break;default:this.write=simpleWrite,this.end=simpleEnd;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer$2.allocUnsafe(or)}StringDecoder.prototype.write=function(ar){if(ar.length===0)return"";var or,lr;if(this.lastNeed){if(or=this.fillLast(ar),or===void 0)return"";lr=this.lastNeed,this.lastNeed=0}else lr=0;return lr<ar.length?or?or+this.text(ar,lr):this.text(ar,lr):or||""};StringDecoder.prototype.end=utf8End;StringDecoder.prototype.text=utf8Text;StringDecoder.prototype.fillLast=function(ar){if(this.lastNeed<=ar.length)return ar.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ar.copy(this.lastChar,this.lastTotal-this.lastNeed,0,ar.length),this.lastNeed-=ar.length};function utf8CheckByte(ar){return ar<=127?0:ar>>5===6?2:ar>>4===14?3:ar>>3===30?4:ar>>6===2?-1:-2}function utf8CheckIncomplete(ar,or,lr){var ur=or.length-1;if(ur<lr)return 0;var cr=utf8CheckByte(or[ur]);return cr>=0?(cr>0&&(ar.lastNeed=cr-1),cr):--ur<lr||cr===-2?0:(cr=utf8CheckByte(or[ur]),cr>=0?(cr>0&&(ar.lastNeed=cr-2),cr):--ur<lr||cr===-2?0:(cr=utf8CheckByte(or[ur]),cr>=0?(cr>0&&(cr===2?cr=0:ar.lastNeed=cr-3),cr):0))}function utf8CheckExtraBytes(ar,or,lr){if((or[0]&192)!==128)return ar.lastNeed=0,"";if(ar.lastNeed>1&&or.length>1){if((or[1]&192)!==128)return ar.lastNeed=1,"";if(ar.lastNeed>2&&or.length>2&&(or[2]&192)!==128)return ar.lastNeed=2,""}}function utf8FillLast(ar){var or=this.lastTotal-this.lastNeed,lr=utf8CheckExtraBytes(this,ar);if(lr!==void 0)return lr;if(this.lastNeed<=ar.length)return ar.copy(this.lastChar,or,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ar.copy(this.lastChar,or,0,ar.length),this.lastNeed-=ar.length}function utf8Text(ar,or){var lr=utf8CheckIncomplete(this,ar,or);if(!this.lastNeed)return ar.toString("utf8",or);this.lastTotal=lr;var ur=ar.length-(lr-this.lastNeed);return ar.copy(this.lastChar,0,ur),ar.toString("utf8",or,ur)}function utf8End(ar){var or=ar&&ar.length?this.write(ar):"";return this.lastNeed?or+"":or}function utf16Text(ar,or){if((ar.length-or)%2===0){var lr=ar.toString("utf16le",or);if(lr){var ur=lr.charCodeAt(lr.length-1);if(ur>=55296&&ur<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=ar[ar.length-2],this.lastChar[1]=ar[ar.length-1],lr.slice(0,-1)}return lr}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=ar[ar.length-1],ar.toString("utf16le",or,ar.length-1)}function utf16End(ar){var or=ar&&ar.length?this.write(ar):"";if(this.lastNeed){var lr=this.lastTotal-this.lastNeed;return or+this.lastChar.toString("utf16le",0,lr)}return or}function base64Text(ar,or){var lr=(ar.length-or)%3;return lr===0?ar.toString("base64",or):(this.lastNeed=3-lr,this.lastTotal=3,lr===1?this.lastChar[0]=ar[ar.length-1]:(this.lastChar[0]=ar[ar.length-2],this.lastChar[1]=ar[ar.length-1]),ar.toString("base64",or,ar.length-lr))}function base64End(ar){var or=ar&&ar.length?this.write(ar):"";return this.lastNeed?or+this.lastChar.toString("base64",0,3-this.lastNeed):or}function simpleWrite(ar){return ar.toString(this.encoding)}function simpleEnd(ar){return ar&&ar.length?this.write(ar):""}const process$2=browserExports$1,{PromisePrototypeThen:PromisePrototypeThen$1,SymbolAsyncIterator:SymbolAsyncIterator$1,SymbolIterator}=primordials,{Buffer:Buffer$1}=buffer,{ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$2,ERR_STREAM_NULL_VALUES}=errors.codes;function from(ar,or,lr){let ur;if(typeof or=="string"||or instanceof Buffer$1)return new ar({objectMode:!0,...lr,read(){this.push(or),this.push(null)}});let cr;if(or&&or[SymbolAsyncIterator$1])cr=!0,ur=or[SymbolAsyncIterator$1]();else if(or&&or[SymbolIterator])cr=!1,ur=or[SymbolIterator]();else throw new ERR_INVALID_ARG_TYPE$2("iterable",["Iterable"],or);const dr=new ar({objectMode:!0,highWaterMark:1,...lr});let fr=!1;dr._read=function(){fr||(fr=!0,mr())},dr._destroy=function(hr,gr){PromisePrototypeThen$1(pr(hr),()=>process$2.nextTick(gr,hr),vr=>process$2.nextTick(gr,vr||hr))};async function pr(hr){const gr=hr!=null,vr=typeof ur.throw=="function";if(gr&&vr){const{value:wr,done:_r}=await ur.throw(hr);if(await wr,_r)return}if(typeof ur.return=="function"){const{value:wr}=await ur.return();await wr}}async function mr(){for(;;){try{const{value:hr,done:gr}=cr?await ur.next():ur.next();if(gr)dr.push(null);else{const vr=hr&&typeof hr.then=="function"?await hr:hr;if(vr===null)throw fr=!1,new ERR_STREAM_NULL_VALUES;if(dr.push(vr))continue;fr=!1}}catch(hr){dr.destroy(hr)}break}}return dr}var from_1=from,readable,hasRequiredReadable;function requireReadable(){if(hasRequiredReadable)return readable;hasRequiredReadable=1;const ar=browserExports$1,{ArrayPrototypeIndexOf:or,NumberIsInteger:lr,NumberIsNaN:ur,NumberParseInt:cr,ObjectDefineProperties:dr,ObjectKeys:fr,ObjectSetPrototypeOf:pr,Promise:mr,SafeSet:hr,SymbolAsyncDispose:gr,SymbolAsyncIterator:vr,Symbol:wr}=primordials;readable=Yr,Yr.ReadableState=_s;const{EventEmitter:_r}=eventsExports,{Stream:Cr,prependListener:Sr}=legacy,{Buffer:Dr}=buffer,{addAbortSignal:Er}=addAbortSignalExports,kr=endOfStreamExports;let Ir=utilExports.debuglog("stream",Tr=>{Ir=Tr});const Br=buffer_list,Nr=destroy_1,{getHighWaterMark:Mr,getDefaultHighWaterMark:xr}=state,{aggregateTwoErrors:Rr,codes:{ERR_INVALID_ARG_TYPE:Or,ERR_METHOD_NOT_IMPLEMENTED:qr,ERR_OUT_OF_RANGE:Jr,ERR_STREAM_PUSH_AFTER_EOF:na,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Wr},AbortError:Gr}=errors,{validateObject:is}=validators,es=wr("kPaused"),{StringDecoder:ss}=string_decoder,_i=from_1;pr(Yr.prototype,Cr.prototype),pr(Yr,Cr);const ba=()=>{},{errorOrDestroy:xa}=Nr,$a=1,os=2,ns=4,hs=8,ks=16,Ts=32,Es=64,Ss=128,$s=256,Rs=512,Is=1024,Ds=2048,jr=4096,Lr=8192,Qr=16384,ts=32768,rs=65536,ws=1<<17,ys=1<<18;function vs(Tr){return{enumerable:!1,get(){return(this.state&Tr)!==0},set(Ar){Ar?this.state|=Tr:this.state&=~Tr}}}dr(_s.prototype,{objectMode:vs($a),ended:vs(os),endEmitted:vs(ns),reading:vs(hs),constructed:vs(ks),sync:vs(Ts),needReadable:vs(Es),emittedReadable:vs(Ss),readableListening:vs($s),resumeScheduled:vs(Rs),errorEmitted:vs(Is),emitClose:vs(Ds),autoDestroy:vs(jr),destroyed:vs(Lr),closed:vs(Qr),closeEmitted:vs(ts),multiAwaitDrain:vs(rs),readingMore:vs(ws),dataEmitted:vs(ys)});function _s(Tr,Ar,Hr){typeof Hr!="boolean"&&(Hr=Ar instanceof requireDuplex()),this.state=Ds|jr|ks|Ts,Tr&&Tr.objectMode&&(this.state|=$a),Hr&&Tr&&Tr.readableObjectMode&&(this.state|=$a),this.highWaterMark=Tr?Mr(this,Tr,"readableHighWaterMark",Hr):xr(!1),this.buffer=new Br,this.length=0,this.pipes=[],this.flowing=null,this[es]=null,Tr&&Tr.emitClose===!1&&(this.state&=~Ds),Tr&&Tr.autoDestroy===!1&&(this.state&=~jr),this.errored=null,this.defaultEncoding=Tr&&Tr.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,Tr&&Tr.encoding&&(this.decoder=new ss(Tr.encoding),this.encoding=Tr.encoding)}function Yr(Tr){if(!(this instanceof Yr))return new Yr(Tr);const Ar=this instanceof requireDuplex();this._readableState=new _s(Tr,this,Ar),Tr&&(typeof Tr.read=="function"&&(this._read=Tr.read),typeof Tr.destroy=="function"&&(this._destroy=Tr.destroy),typeof Tr.construct=="function"&&(this._construct=Tr.construct),Tr.signal&&!Ar&&Er(Tr.signal,this)),Cr.call(this,Tr),Nr.construct(this,()=>{this._readableState.needReadable&&Fr(this,this._readableState)})}Yr.prototype.destroy=Nr.destroy,Yr.prototype._undestroy=Nr.undestroy,Yr.prototype._destroy=function(Tr,Ar){Ar(Tr)},Yr.prototype[_r.captureRejectionSymbol]=function(Tr){this.destroy(Tr)},Yr.prototype[gr]=function(){let Tr;return this.destroyed||(Tr=this.readableEnded?null:new Gr,this.destroy(Tr)),new mr((Ar,Hr)=>kr(this,Zr=>Zr&&Zr!==Tr?Hr(Zr):Ar(null)))},Yr.prototype.push=function(Tr,Ar){return Ps(this,Tr,Ar,!1)},Yr.prototype.unshift=function(Tr,Ar){return Ps(this,Tr,Ar,!0)};function Ps(Tr,Ar,Hr,Zr){Ir("readableAddChunk",Ar);const ga=Tr._readableState;let as;if(ga.state&$a||(typeof Ar=="string"?(Hr=Hr||ga.defaultEncoding,ga.encoding!==Hr&&(Zr&&ga.encoding?Ar=Dr.from(Ar,Hr).toString(ga.encoding):(Ar=Dr.from(Ar,Hr),Hr=""))):Ar instanceof Dr?Hr="":Cr._isUint8Array(Ar)?(Ar=Cr._uint8ArrayToBuffer(Ar),Hr=""):Ar!=null&&(as=new Or("chunk",["string","Buffer","Uint8Array"],Ar))),as)xa(Tr,as);else if(Ar===null)ga.state&=~hs,yr(Tr,ga);else if(ga.state&$a||Ar&&Ar.length>0)if(Zr)if(ga.state&ns)xa(Tr,new Wr);else{if(ga.destroyed||ga.errored)return!1;Ms(Tr,ga,Ar,!0)}else if(ga.ended)xa(Tr,new na);else{if(ga.destroyed||ga.errored)return!1;ga.state&=~hs,ga.decoder&&!Hr?(Ar=ga.decoder.write(Ar),ga.objectMode||Ar.length!==0?Ms(Tr,ga,Ar,!1):Fr(Tr,ga)):Ms(Tr,ga,Ar,!1)}else Zr||(ga.state&=~hs,Fr(Tr,ga));return!ga.ended&&(ga.length<ga.highWaterMark||ga.length===0)}function Ms(Tr,Ar,Hr,Zr){Ar.flowing&&Ar.length===0&&!Ar.sync&&Tr.listenerCount("data")>0?(Ar.state&rs?Ar.awaitDrainWriters.clear():Ar.awaitDrainWriters=null,Ar.dataEmitted=!0,Tr.emit("data",Hr)):(Ar.length+=Ar.objectMode?1:Hr.length,Zr?Ar.buffer.unshift(Hr):Ar.buffer.push(Hr),Ar.state&Es&&br(Tr)),Fr(Tr,Ar)}Yr.prototype.isPaused=function(){const Tr=this._readableState;return Tr[es]===!0||Tr.flowing===!1},Yr.prototype.setEncoding=function(Tr){const Ar=new ss(Tr);this._readableState.decoder=Ar,this._readableState.encoding=this._readableState.decoder.encoding;const Hr=this._readableState.buffer;let Zr="";for(const ga of Hr)Zr+=Ar.write(ga);return Hr.clear(),Zr!==""&&Hr.push(Zr),this._readableState.length=Zr.length,this};const As=1073741824;function js(Tr){if(Tr>As)throw new Jr("size","<= 1GiB",Tr);return Tr--,Tr|=Tr>>>1,Tr|=Tr>>>2,Tr|=Tr>>>4,Tr|=Tr>>>8,Tr|=Tr>>>16,Tr++,Tr}function $r(Tr,Ar){return Tr<=0||Ar.length===0&&Ar.ended?0:Ar.state&$a?1:ur(Tr)?Ar.flowing&&Ar.length?Ar.buffer.first().length:Ar.length:Tr<=Ar.length?Tr:Ar.ended?Ar.length:0}Yr.prototype.read=function(Tr){Ir("read",Tr),Tr===void 0?Tr=NaN:lr(Tr)||(Tr=cr(Tr,10));const Ar=this._readableState,Hr=Tr;if(Tr>Ar.highWaterMark&&(Ar.highWaterMark=js(Tr)),Tr!==0&&(Ar.state&=~Ss),Tr===0&&Ar.needReadable&&((Ar.highWaterMark!==0?Ar.length>=Ar.highWaterMark:Ar.length>0)||Ar.ended))return Ir("read: emitReadable",Ar.length,Ar.ended),Ar.length===0&&Ar.ended?Us(this):br(this),null;if(Tr=$r(Tr,Ar),Tr===0&&Ar.ended)return Ar.length===0&&Us(this),null;let Zr=(Ar.state&Es)!==0;if(Ir("need readable",Zr),(Ar.length===0||Ar.length-Tr<Ar.highWaterMark)&&(Zr=!0,Ir("length less than watermark",Zr)),Ar.ended||Ar.reading||Ar.destroyed||Ar.errored||!Ar.constructed)Zr=!1,Ir("reading, ended or constructing",Zr);else if(Zr){Ir("do read"),Ar.state|=hs|Ts,Ar.length===0&&(Ar.state|=Es);try{this._read(Ar.highWaterMark)}catch(as){xa(this,as)}Ar.state&=~Ts,Ar.reading||(Tr=$r(Hr,Ar))}let ga;return Tr>0?ga=Vs(Tr,Ar):ga=null,ga===null?(Ar.needReadable=Ar.length<=Ar.highWaterMark,Tr=0):(Ar.length-=Tr,Ar.multiAwaitDrain?Ar.awaitDrainWriters.clear():Ar.awaitDrainWriters=null),Ar.length===0&&(Ar.ended||(Ar.needReadable=!0),Hr!==Tr&&Ar.ended&&Us(this)),ga!==null&&!Ar.errorEmitted&&!Ar.closeEmitted&&(Ar.dataEmitted=!0,this.emit("data",ga)),ga};function yr(Tr,Ar){if(Ir("onEofChunk"),!Ar.ended){if(Ar.decoder){const Hr=Ar.decoder.end();Hr&&Hr.length&&(Ar.buffer.push(Hr),Ar.length+=Ar.objectMode?1:Hr.length)}Ar.ended=!0,Ar.sync?br(Tr):(Ar.needReadable=!1,Ar.emittedReadable=!0,Pr(Tr))}}function br(Tr){const Ar=Tr._readableState;Ir("emitReadable",Ar.needReadable,Ar.emittedReadable),Ar.needReadable=!1,Ar.emittedReadable||(Ir("emitReadable",Ar.flowing),Ar.emittedReadable=!0,ar.nextTick(Pr,Tr))}function Pr(Tr){const Ar=Tr._readableState;Ir("emitReadable_",Ar.destroyed,Ar.length,Ar.ended),!Ar.destroyed&&!Ar.errored&&(Ar.length||Ar.ended)&&(Tr.emit("readable"),Ar.emittedReadable=!1),Ar.needReadable=!Ar.flowing&&!Ar.ended&&Ar.length<=Ar.highWaterMark,bs(Tr)}function Fr(Tr,Ar){!Ar.readingMore&&Ar.constructed&&(Ar.readingMore=!0,ar.nextTick(Ur,Tr,Ar))}function Ur(Tr,Ar){for(;!Ar.reading&&!Ar.ended&&(Ar.length<Ar.highWaterMark||Ar.flowing&&Ar.length===0);){const Hr=Ar.length;if(Ir("maybeReadMore read 0"),Tr.read(0),Hr===Ar.length)break}Ar.readingMore=!1}Yr.prototype._read=function(Tr){throw new qr("_read()")},Yr.prototype.pipe=function(Tr,Ar){const Hr=this,Zr=this._readableState;Zr.pipes.length===1&&(Zr.multiAwaitDrain||(Zr.multiAwaitDrain=!0,Zr.awaitDrainWriters=new hr(Zr.awaitDrainWriters?[Zr.awaitDrainWriters]:[]))),Zr.pipes.push(Tr),Ir("pipe count=%d opts=%j",Zr.pipes.length,Ar);const as=(!Ar||Ar.end!==!1)&&Tr!==ar.stdout&&Tr!==ar.stderr?zr:Ls;Zr.endEmitted?ar.nextTick(as):Hr.once("end",as),Tr.on("unpipe",fs);function fs(Os,Bs){Ir("onunpipe"),Os===Hr&&Bs&&Bs.hasUnpiped===!1&&(Bs.hasUnpiped=!0,ps())}function zr(){Ir("onend"),Tr.end()}let ls,cs=!1;function ps(){Ir("cleanup"),Tr.removeListener("close",Ws),Tr.removeListener("finish",Fs),ls&&Tr.removeListener("drain",ls),Tr.removeListener("error",Ns),Tr.removeListener("unpipe",fs),Hr.removeListener("end",zr),Hr.removeListener("end",Ls),Hr.removeListener("data",zs),cs=!0,ls&&Zr.awaitDrainWriters&&(!Tr._writableState||Tr._writableState.needDrain)&&ls()}function Cs(){cs||(Zr.pipes.length===1&&Zr.pipes[0]===Tr?(Ir("false write response, pause",0),Zr.awaitDrainWriters=Tr,Zr.multiAwaitDrain=!1):Zr.pipes.length>1&&Zr.pipes.includes(Tr)&&(Ir("false write response, pause",Zr.awaitDrainWriters.size),Zr.awaitDrainWriters.add(Tr)),Hr.pause()),ls||(ls=Kr(Hr,Tr),Tr.on("drain",ls))}Hr.on("data",zs);function zs(Os){Ir("ondata");const Bs=Tr.write(Os);Ir("dest.write",Bs),Bs===!1&&Cs()}function Ns(Os){if(Ir("onerror",Os),Ls(),Tr.removeListener("error",Ns),Tr.listenerCount("error")===0){const Bs=Tr._writableState||Tr._readableState;Bs&&!Bs.errorEmitted?xa(Tr,Os):Tr.emit("error",Os)}}Sr(Tr,"error",Ns);function Ws(){Tr.removeListener("finish",Fs),Ls()}Tr.once("close",Ws);function Fs(){Ir("onfinish"),Tr.removeListener("close",Ws),Ls()}Tr.once("finish",Fs);function Ls(){Ir("unpipe"),Hr.unpipe(Tr)}return Tr.emit("pipe",Hr),Tr.writableNeedDrain===!0?Cs():Zr.flowing||(Ir("pipe resume"),Hr.resume()),Tr};function Kr(Tr,Ar){return function(){const Zr=Tr._readableState;Zr.awaitDrainWriters===Ar?(Ir("pipeOnDrain",1),Zr.awaitDrainWriters=null):Zr.multiAwaitDrain&&(Ir("pipeOnDrain",Zr.awaitDrainWriters.size),Zr.awaitDrainWriters.delete(Ar)),(!Zr.awaitDrainWriters||Zr.awaitDrainWriters.size===0)&&Tr.listenerCount("data")&&Tr.resume()}}Yr.prototype.unpipe=function(Tr){const Ar=this._readableState,Hr={hasUnpiped:!1};if(Ar.pipes.length===0)return this;if(!Tr){const ga=Ar.pipes;Ar.pipes=[],this.pause();for(let as=0;as<ga.length;as++)ga[as].emit("unpipe",this,{hasUnpiped:!1});return this}const Zr=or(Ar.pipes,Tr);return Zr===-1?this:(Ar.pipes.splice(Zr,1),Ar.pipes.length===0&&this.pause(),Tr.emit("unpipe",this,Hr),this)},Yr.prototype.on=function(Tr,Ar){const Hr=Cr.prototype.on.call(this,Tr,Ar),Zr=this._readableState;return Tr==="data"?(Zr.readableListening=this.listenerCount("readable")>0,Zr.flowing!==!1&&this.resume()):Tr==="readable"&&!Zr.endEmitted&&!Zr.readableListening&&(Zr.readableListening=Zr.needReadable=!0,Zr.flowing=!1,Zr.emittedReadable=!1,Ir("on readable",Zr.length,Zr.reading),Zr.length?br(this):Zr.reading||ar.nextTick(ds,this)),Hr},Yr.prototype.addListener=Yr.prototype.on,Yr.prototype.removeListener=function(Tr,Ar){const Hr=Cr.prototype.removeListener.call(this,Tr,Ar);return Tr==="readable"&&ar.nextTick(us,this),Hr},Yr.prototype.off=Yr.prototype.removeListener,Yr.prototype.removeAllListeners=function(Tr){const Ar=Cr.prototype.removeAllListeners.apply(this,arguments);return(Tr==="readable"||Tr===void 0)&&ar.nextTick(us,this),Ar};function us(Tr){const Ar=Tr._readableState;Ar.readableListening=Tr.listenerCount("readable")>0,Ar.resumeScheduled&&Ar[es]===!1?Ar.flowing=!0:Tr.listenerCount("data")>0?Tr.resume():Ar.readableListening||(Ar.flowing=null)}function ds(Tr){Ir("readable nexttick read 0"),Tr.read(0)}Yr.prototype.resume=function(){const Tr=this._readableState;return Tr.flowing||(Ir("resume"),Tr.flowing=!Tr.readableListening,gs(this,Tr)),Tr[es]=!1,this};function gs(Tr,Ar){Ar.resumeScheduled||(Ar.resumeScheduled=!0,ar.nextTick(xs,Tr,Ar))}function xs(Tr,Ar){Ir("resume",Ar.reading),Ar.reading||Tr.read(0),Ar.resumeScheduled=!1,Tr.emit("resume"),bs(Tr),Ar.flowing&&!Ar.reading&&Tr.read(0)}Yr.prototype.pause=function(){return Ir("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ir("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[es]=!0,this};function bs(Tr){const Ar=Tr._readableState;for(Ir("flow",Ar.flowing);Ar.flowing&&Tr.read()!==null;);}Yr.prototype.wrap=function(Tr){let Ar=!1;Tr.on("data",Zr=>{!this.push(Zr)&&Tr.pause&&(Ar=!0,Tr.pause())}),Tr.on("end",()=>{this.push(null)}),Tr.on("error",Zr=>{xa(this,Zr)}),Tr.on("close",()=>{this.destroy()}),Tr.on("destroy",()=>{this.destroy()}),this._read=()=>{Ar&&Tr.resume&&(Ar=!1,Tr.resume())};const Hr=fr(Tr);for(let Zr=1;Zr<Hr.length;Zr++){const ga=Hr[Zr];this[ga]===void 0&&typeof Tr[ga]=="function"&&(this[ga]=Tr[ga].bind(Tr))}return this},Yr.prototype[vr]=function(){return Gs(this)},Yr.prototype.iterator=function(Tr){return Tr!==void 0&&is(Tr,"options"),Gs(this,Tr)};function Gs(Tr,Ar){typeof Tr.read!="function"&&(Tr=Yr.wrap(Tr,{objectMode:!0}));const Hr=Hs(Tr,Ar);return Hr.stream=Tr,Hr}async function*Hs(Tr,Ar){let Hr=ba;function Zr(fs){this===Tr?(Hr(),Hr=ba):Hr=fs}Tr.on("readable",Zr);let ga;const as=kr(Tr,{writable:!1},fs=>{ga=fs?Rr(ga,fs):null,Hr(),Hr=ba});try{for(;;){const fs=Tr.destroyed?null:Tr.read();if(fs!==null)yield fs;else{if(ga)throw ga;if(ga===null)return;await new mr(Zr)}}}catch(fs){throw ga=Rr(ga,fs),ga}finally{(ga||(Ar==null?void 0:Ar.destroyOnReturn)!==!1)&&(ga===void 0||Tr._readableState.autoDestroy)?Nr.destroyer(Tr,null):(Tr.off("readable",Zr),as())}}dr(Yr.prototype,{readable:{__proto__:null,get(){const Tr=this._readableState;return!!Tr&&Tr.readable!==!1&&!Tr.destroyed&&!Tr.errorEmitted&&!Tr.endEmitted},set(Tr){this._readableState&&(this._readableState.readable=!!Tr)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(Tr){this._readableState&&(this._readableState.flowing=Tr)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(Tr){this._readableState&&(this._readableState.destroyed=Tr)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),dr(_s.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[es]!==!1},set(Tr){this[es]=!!Tr}}}),Yr._fromList=Vs;function Vs(Tr,Ar){if(Ar.length===0)return null;let Hr;return Ar.objectMode?Hr=Ar.buffer.shift():!Tr||Tr>=Ar.length?(Ar.decoder?Hr=Ar.buffer.join(""):Ar.buffer.length===1?Hr=Ar.buffer.first():Hr=Ar.buffer.concat(Ar.length),Ar.buffer.clear()):Hr=Ar.buffer.consume(Tr,Ar.decoder),Hr}function Us(Tr){const Ar=Tr._readableState;Ir("endReadable",Ar.endEmitted),Ar.endEmitted||(Ar.ended=!0,ar.nextTick(Xs,Ar,Tr))}function Xs(Tr,Ar){if(Ir("endReadableNT",Tr.endEmitted,Tr.length),!Tr.errored&&!Tr.closeEmitted&&!Tr.endEmitted&&Tr.length===0){if(Tr.endEmitted=!0,Ar.emit("end"),Ar.writable&&Ar.allowHalfOpen===!1)ar.nextTick(Vr,Ar);else if(Tr.autoDestroy){const Hr=Ar._writableState;(!Hr||Hr.autoDestroy&&(Hr.finished||Hr.writable===!1))&&Ar.destroy()}}}function Vr(Tr){Tr.writable&&!Tr.writableEnded&&!Tr.destroyed&&Tr.end()}Yr.from=function(Tr,Ar){return _i(Yr,Tr,Ar)};let Xr;function _a(){return Xr===void 0&&(Xr={}),Xr}return Yr.fromWeb=function(Tr,Ar){return _a().newStreamReadableFromReadableStream(Tr,Ar)},Yr.toWeb=function(Tr,Ar){return _a().newReadableStreamFromStreamReadable(Tr,Ar)},Yr.wrap=function(Tr,Ar){var Hr,Zr;return new Yr({objectMode:(Hr=(Zr=Tr.readableObjectMode)!==null&&Zr!==void 0?Zr:Tr.objectMode)!==null&&Hr!==void 0?Hr:!0,...Ar,destroy(ga,as){Nr.destroyer(Tr,ga),as(ga)}}).wrap(Tr)},readable}var writable,hasRequiredWritable;function requireWritable(){if(hasRequiredWritable)return writable;hasRequiredWritable=1;const ar=browserExports$1,{ArrayPrototypeSlice:or,Error:lr,FunctionPrototypeSymbolHasInstance:ur,ObjectDefineProperty:cr,ObjectDefineProperties:dr,ObjectSetPrototypeOf:fr,StringPrototypeToLowerCase:pr,Symbol:mr,SymbolHasInstance:hr}=primordials;writable=is,is.WritableState=Wr;const{EventEmitter:gr}=eventsExports,vr=legacy.Stream,{Buffer:wr}=buffer,_r=destroy_1,{addAbortSignal:Cr}=addAbortSignalExports,{getHighWaterMark:Sr,getDefaultHighWaterMark:Dr}=state,{ERR_INVALID_ARG_TYPE:Er,ERR_METHOD_NOT_IMPLEMENTED:kr,ERR_MULTIPLE_CALLBACK:Ir,ERR_STREAM_CANNOT_PIPE:Br,ERR_STREAM_DESTROYED:Nr,ERR_STREAM_ALREADY_FINISHED:Mr,ERR_STREAM_NULL_VALUES:xr,ERR_STREAM_WRITE_AFTER_END:Rr,ERR_UNKNOWN_ENCODING:Or}=errors.codes,{errorOrDestroy:qr}=_r;fr(is.prototype,vr.prototype),fr(is,vr);function Jr(){}const na=mr("kOnFinished");function Wr(jr,Lr,Qr){typeof Qr!="boolean"&&(Qr=Lr instanceof requireDuplex()),this.objectMode=!!(jr&&jr.objectMode),Qr&&(this.objectMode=this.objectMode||!!(jr&&jr.writableObjectMode)),this.highWaterMark=jr?Sr(this,jr,"writableHighWaterMark",Qr):Dr(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const ts=!!(jr&&jr.decodeStrings===!1);this.decodeStrings=!ts,this.defaultEncoding=jr&&jr.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=xa.bind(void 0,Lr),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Gr(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!jr||jr.emitClose!==!1,this.autoDestroy=!jr||jr.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[na]=[]}function Gr(jr){jr.buffered=[],jr.bufferedIndex=0,jr.allBuffers=!0,jr.allNoop=!0}Wr.prototype.getBuffer=function(){return or(this.buffered,this.bufferedIndex)},cr(Wr.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function is(jr){const Lr=this instanceof requireDuplex();if(!Lr&&!ur(is,this))return new is(jr);this._writableState=new Wr(jr,this,Lr),jr&&(typeof jr.write=="function"&&(this._write=jr.write),typeof jr.writev=="function"&&(this._writev=jr.writev),typeof jr.destroy=="function"&&(this._destroy=jr.destroy),typeof jr.final=="function"&&(this._final=jr.final),typeof jr.construct=="function"&&(this._construct=jr.construct),jr.signal&&Cr(jr.signal,this)),vr.call(this,jr),_r.construct(this,()=>{const Qr=this._writableState;Qr.writing||hs(this,Qr),Ss(this,Qr)})}cr(is,hr,{__proto__:null,value:function(jr){return ur(this,jr)?!0:this!==is?!1:jr&&jr._writableState instanceof Wr}}),is.prototype.pipe=function(){qr(this,new Br)};function es(jr,Lr,Qr,ts){const rs=jr._writableState;if(typeof Qr=="function")ts=Qr,Qr=rs.defaultEncoding;else{if(!Qr)Qr=rs.defaultEncoding;else if(Qr!=="buffer"&&!wr.isEncoding(Qr))throw new Or(Qr);typeof ts!="function"&&(ts=Jr)}if(Lr===null)throw new xr;if(!rs.objectMode)if(typeof Lr=="string")rs.decodeStrings!==!1&&(Lr=wr.from(Lr,Qr),Qr="buffer");else if(Lr instanceof wr)Qr="buffer";else if(vr._isUint8Array(Lr))Lr=vr._uint8ArrayToBuffer(Lr),Qr="buffer";else throw new Er("chunk",["string","Buffer","Uint8Array"],Lr);let ws;return rs.ending?ws=new Rr:rs.destroyed&&(ws=new Nr("write")),ws?(ar.nextTick(ts,ws),qr(jr,ws,!0),ws):(rs.pendingcb++,ss(jr,rs,Lr,Qr,ts))}is.prototype.write=function(jr,Lr,Qr){return es(this,jr,Lr,Qr)===!0},is.prototype.cork=function(){this._writableState.corked++},is.prototype.uncork=function(){const jr=this._writableState;jr.corked&&(jr.corked--,jr.writing||hs(this,jr))},is.prototype.setDefaultEncoding=function(Lr){if(typeof Lr=="string"&&(Lr=pr(Lr)),!wr.isEncoding(Lr))throw new Or(Lr);return this._writableState.defaultEncoding=Lr,this};function ss(jr,Lr,Qr,ts,rs){const ws=Lr.objectMode?1:Qr.length;Lr.length+=ws;const ys=Lr.length<Lr.highWaterMark;return ys||(Lr.needDrain=!0),Lr.writing||Lr.corked||Lr.errored||!Lr.constructed?(Lr.buffered.push({chunk:Qr,encoding:ts,callback:rs}),Lr.allBuffers&&ts!=="buffer"&&(Lr.allBuffers=!1),Lr.allNoop&&rs!==Jr&&(Lr.allNoop=!1)):(Lr.writelen=ws,Lr.writecb=rs,Lr.writing=!0,Lr.sync=!0,jr._write(Qr,ts,Lr.onwrite),Lr.sync=!1),ys&&!Lr.errored&&!Lr.destroyed}function _i(jr,Lr,Qr,ts,rs,ws,ys){Lr.writelen=ts,Lr.writecb=ys,Lr.writing=!0,Lr.sync=!0,Lr.destroyed?Lr.onwrite(new Nr("write")):Qr?jr._writev(rs,Lr.onwrite):jr._write(rs,ws,Lr.onwrite),Lr.sync=!1}function ba(jr,Lr,Qr,ts){--Lr.pendingcb,ts(Qr),ns(Lr),qr(jr,Qr)}function xa(jr,Lr){const Qr=jr._writableState,ts=Qr.sync,rs=Qr.writecb;if(typeof rs!="function"){qr(jr,new Ir);return}Qr.writing=!1,Qr.writecb=null,Qr.length-=Qr.writelen,Qr.writelen=0,Lr?(Lr.stack,Qr.errored||(Qr.errored=Lr),jr._readableState&&!jr._readableState.errored&&(jr._readableState.errored=Lr),ts?ar.nextTick(ba,jr,Qr,Lr,rs):ba(jr,Qr,Lr,rs)):(Qr.buffered.length>Qr.bufferedIndex&&hs(jr,Qr),ts?Qr.afterWriteTickInfo!==null&&Qr.afterWriteTickInfo.cb===rs?Qr.afterWriteTickInfo.count++:(Qr.afterWriteTickInfo={count:1,cb:rs,stream:jr,state:Qr},ar.nextTick($a,Qr.afterWriteTickInfo)):os(jr,Qr,1,rs))}function $a({stream:jr,state:Lr,count:Qr,cb:ts}){return Lr.afterWriteTickInfo=null,os(jr,Lr,Qr,ts)}function os(jr,Lr,Qr,ts){for(!Lr.ending&&!jr.destroyed&&Lr.length===0&&Lr.needDrain&&(Lr.needDrain=!1,jr.emit("drain"));Qr-- >0;)Lr.pendingcb--,ts();Lr.destroyed&&ns(Lr),Ss(jr,Lr)}function ns(jr){if(jr.writing)return;for(let rs=jr.bufferedIndex;rs<jr.buffered.length;++rs){var Lr;const{chunk:ws,callback:ys}=jr.buffered[rs],vs=jr.objectMode?1:ws.length;jr.length-=vs,ys((Lr=jr.errored)!==null&&Lr!==void 0?Lr:new Nr("write"))}const Qr=jr[na].splice(0);for(let rs=0;rs<Qr.length;rs++){var ts;Qr[rs]((ts=jr.errored)!==null&&ts!==void 0?ts:new Nr("end"))}Gr(jr)}function hs(jr,Lr){if(Lr.corked||Lr.bufferProcessing||Lr.destroyed||!Lr.constructed)return;const{buffered:Qr,bufferedIndex:ts,objectMode:rs}=Lr,ws=Qr.length-ts;if(!ws)return;let ys=ts;if(Lr.bufferProcessing=!0,ws>1&&jr._writev){Lr.pendingcb-=ws-1;const vs=Lr.allNoop?Jr:Yr=>{for(let Ps=ys;Ps<Qr.length;++Ps)Qr[Ps].callback(Yr)},_s=Lr.allNoop&&ys===0?Qr:or(Qr,ys);_s.allBuffers=Lr.allBuffers,_i(jr,Lr,!0,Lr.length,_s,"",vs),Gr(Lr)}else{do{const{chunk:vs,encoding:_s,callback:Yr}=Qr[ys];Qr[ys++]=null;const Ps=rs?1:vs.length;_i(jr,Lr,!1,Ps,vs,_s,Yr)}while(ys<Qr.length&&!Lr.writing);ys===Qr.length?Gr(Lr):ys>256?(Qr.splice(0,ys),Lr.bufferedIndex=0):Lr.bufferedIndex=ys}Lr.bufferProcessing=!1}is.prototype._write=function(jr,Lr,Qr){if(this._writev)this._writev([{chunk:jr,encoding:Lr}],Qr);else throw new kr("_write()")},is.prototype._writev=null,is.prototype.end=function(jr,Lr,Qr){const ts=this._writableState;typeof jr=="function"?(Qr=jr,jr=null,Lr=null):typeof Lr=="function"&&(Qr=Lr,Lr=null);let rs;if(jr!=null){const ws=es(this,jr,Lr);ws instanceof lr&&(rs=ws)}return ts.corked&&(ts.corked=1,this.uncork()),rs||(!ts.errored&&!ts.ending?(ts.ending=!0,Ss(this,ts,!0),ts.ended=!0):ts.finished?rs=new Mr("end"):ts.destroyed&&(rs=new Nr("end"))),typeof Qr=="function"&&(rs||ts.finished?ar.nextTick(Qr,rs):ts[na].push(Qr)),this};function ks(jr){return jr.ending&&!jr.destroyed&&jr.constructed&&jr.length===0&&!jr.errored&&jr.buffered.length===0&&!jr.finished&&!jr.writing&&!jr.errorEmitted&&!jr.closeEmitted}function Ts(jr,Lr){let Qr=!1;function ts(rs){if(Qr){qr(jr,rs??Ir());return}if(Qr=!0,Lr.pendingcb--,rs){const ws=Lr[na].splice(0);for(let ys=0;ys<ws.length;ys++)ws[ys](rs);qr(jr,rs,Lr.sync)}else ks(Lr)&&(Lr.prefinished=!0,jr.emit("prefinish"),Lr.pendingcb++,ar.nextTick($s,jr,Lr))}Lr.sync=!0,Lr.pendingcb++;try{jr._final(ts)}catch(rs){ts(rs)}Lr.sync=!1}function Es(jr,Lr){!Lr.prefinished&&!Lr.finalCalled&&(typeof jr._final=="function"&&!Lr.destroyed?(Lr.finalCalled=!0,Ts(jr,Lr)):(Lr.prefinished=!0,jr.emit("prefinish")))}function Ss(jr,Lr,Qr){ks(Lr)&&(Es(jr,Lr),Lr.pendingcb===0&&(Qr?(Lr.pendingcb++,ar.nextTick((ts,rs)=>{ks(rs)?$s(ts,rs):rs.pendingcb--},jr,Lr)):ks(Lr)&&(Lr.pendingcb++,$s(jr,Lr))))}function $s(jr,Lr){Lr.pendingcb--,Lr.finished=!0;const Qr=Lr[na].splice(0);for(let ts=0;ts<Qr.length;ts++)Qr[ts]();if(jr.emit("finish"),Lr.autoDestroy){const ts=jr._readableState;(!ts||ts.autoDestroy&&(ts.endEmitted||ts.readable===!1))&&jr.destroy()}}dr(is.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(jr){this._writableState&&(this._writableState.destroyed=jr)}},writable:{__proto__:null,get(){const jr=this._writableState;return!!jr&&jr.writable!==!1&&!jr.destroyed&&!jr.errored&&!jr.ending&&!jr.ended},set(jr){this._writableState&&(this._writableState.writable=!!jr)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const jr=this._writableState;return jr?!jr.destroyed&&!jr.ending&&jr.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Rs=_r.destroy;is.prototype.destroy=function(jr,Lr){const Qr=this._writableState;return!Qr.destroyed&&(Qr.bufferedIndex<Qr.buffered.length||Qr[na].length)&&ar.nextTick(ns,Qr),Rs.call(this,jr,Lr),this},is.prototype._undestroy=_r.undestroy,is.prototype._destroy=function(jr,Lr){Lr(jr)},is.prototype[gr.captureRejectionSymbol]=function(jr){this.destroy(jr)};let Is;function Ds(){return Is===void 0&&(Is={}),Is}return is.fromWeb=function(jr,Lr){return Ds().newStreamWritableFromWritableStream(jr,Lr)},is.toWeb=function(jr){return Ds().newWritableStreamFromStreamWritable(jr)},writable}var duplexify,hasRequiredDuplexify;function requireDuplexify(){if(hasRequiredDuplexify)return duplexify;hasRequiredDuplexify=1;const ar=browserExports$1,or=buffer,{isReadable:lr,isWritable:ur,isIterable:cr,isNodeStream:dr,isReadableNodeStream:fr,isWritableNodeStream:pr,isDuplexNodeStream:mr,isReadableStream:hr,isWritableStream:gr}=utils,vr=endOfStreamExports,{AbortError:wr,codes:{ERR_INVALID_ARG_TYPE:_r,ERR_INVALID_RETURN_VALUE:Cr}}=errors,{destroyer:Sr}=destroy_1,Dr=requireDuplex(),Er=requireReadable(),kr=requireWritable(),{createDeferredPromise:Ir}=utilExports,Br=from_1,Nr=globalThis.Blob||or.Blob,Mr=typeof Nr<"u"?function(Wr){return Wr instanceof Nr}:function(Wr){return!1},xr=globalThis.AbortController||requireBrowser().AbortController,{FunctionPrototypeCall:Rr}=primordials;class Or extends Dr{constructor(Wr){super(Wr),(Wr==null?void 0:Wr.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(Wr==null?void 0:Wr.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}duplexify=function na(Wr,Gr){if(mr(Wr))return Wr;if(fr(Wr))return Jr({readable:Wr});if(pr(Wr))return Jr({writable:Wr});if(dr(Wr))return Jr({writable:!1,readable:!1});if(hr(Wr))return Jr({readable:Er.fromWeb(Wr)});if(gr(Wr))return Jr({writable:kr.fromWeb(Wr)});if(typeof Wr=="function"){const{value:es,write:ss,final:_i,destroy:ba}=qr(Wr);if(cr(es))return Br(Or,es,{objectMode:!0,write:ss,final:_i,destroy:ba});const xa=es==null?void 0:es.then;if(typeof xa=="function"){let $a;const os=Rr(xa,es,ns=>{if(ns!=null)throw new Cr("nully","body",ns)},ns=>{Sr($a,ns)});return $a=new Or({objectMode:!0,readable:!1,write:ss,final(ns){_i(async()=>{try{await os,ar.nextTick(ns,null)}catch(hs){ar.nextTick(ns,hs)}})},destroy:ba})}throw new Cr("Iterable, AsyncIterable or AsyncFunction",Gr,es)}if(Mr(Wr))return na(Wr.arrayBuffer());if(cr(Wr))return Br(Or,Wr,{objectMode:!0,writable:!1});if(hr(Wr==null?void 0:Wr.readable)&&gr(Wr==null?void 0:Wr.writable))return Or.fromWeb(Wr);if(typeof(Wr==null?void 0:Wr.writable)=="object"||typeof(Wr==null?void 0:Wr.readable)=="object"){const es=Wr!=null&&Wr.readable?fr(Wr==null?void 0:Wr.readable)?Wr==null?void 0:Wr.readable:na(Wr.readable):void 0,ss=Wr!=null&&Wr.writable?pr(Wr==null?void 0:Wr.writable)?Wr==null?void 0:Wr.writable:na(Wr.writable):void 0;return Jr({readable:es,writable:ss})}const is=Wr==null?void 0:Wr.then;if(typeof is=="function"){let es;return Rr(is,Wr,ss=>{ss!=null&&es.push(ss),es.push(null)},ss=>{Sr(es,ss)}),es=new Or({objectMode:!0,writable:!1,read(){}})}throw new _r(Gr,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Wr)};function qr(na){let{promise:Wr,resolve:Gr}=Ir();const is=new xr,es=is.signal;return{value:na(async function*(){for(;;){const _i=Wr;Wr=null;const{chunk:ba,done:xa,cb:$a}=await _i;if(ar.nextTick($a),xa)return;if(es.aborted)throw new wr(void 0,{cause:es.reason});({promise:Wr,resolve:Gr}=Ir()),yield ba}}(),{signal:es}),write(_i,ba,xa){const $a=Gr;Gr=null,$a({chunk:_i,done:!1,cb:xa})},final(_i){const ba=Gr;Gr=null,ba({done:!0,cb:_i})},destroy(_i,ba){is.abort(),ba(_i)}}}function Jr(na){const Wr=na.readable&&typeof na.readable.read!="function"?Er.wrap(na.readable):na.readable,Gr=na.writable;let is=!!lr(Wr),es=!!ur(Gr),ss,_i,ba,xa,$a;function os(ns){const hs=xa;xa=null,hs?hs(ns):ns&&$a.destroy(ns)}return $a=new Or({readableObjectMode:!!(Wr!=null&&Wr.readableObjectMode),writableObjectMode:!!(Gr!=null&&Gr.writableObjectMode),readable:is,writable:es}),es&&(vr(Gr,ns=>{es=!1,ns&&Sr(Wr,ns),os(ns)}),$a._write=function(ns,hs,ks){Gr.write(ns,hs)?ks():ss=ks},$a._final=function(ns){Gr.end(),_i=ns},Gr.on("drain",function(){if(ss){const ns=ss;ss=null,ns()}}),Gr.on("finish",function(){if(_i){const ns=_i;_i=null,ns()}})),is&&(vr(Wr,ns=>{is=!1,ns&&Sr(Wr,ns),os(ns)}),Wr.on("readable",function(){if(ba){const ns=ba;ba=null,ns()}}),Wr.on("end",function(){$a.push(null)}),$a._read=function(){for(;;){const ns=Wr.read();if(ns===null){ba=$a._read;return}if(!$a.push(ns))return}}),$a._destroy=function(ns,hs){!ns&&xa!==null&&(ns=new wr),ba=null,ss=null,_i=null,xa===null?hs(ns):(xa=hs,Sr(Gr,ns),Sr(Wr,ns))},$a}return duplexify}var duplex,hasRequiredDuplex;function requireDuplex(){if(hasRequiredDuplex)return duplex;hasRequiredDuplex=1;const{ObjectDefineProperties:ar,ObjectGetOwnPropertyDescriptor:or,ObjectKeys:lr,ObjectSetPrototypeOf:ur}=primordials;duplex=fr;const cr=requireReadable(),dr=requireWritable();ur(fr.prototype,cr.prototype),ur(fr,cr);{const gr=lr(dr.prototype);for(let vr=0;vr<gr.length;vr++){const wr=gr[vr];fr.prototype[wr]||(fr.prototype[wr]=dr.prototype[wr])}}function fr(gr){if(!(this instanceof fr))return new fr(gr);cr.call(this,gr),dr.call(this,gr),gr?(this.allowHalfOpen=gr.allowHalfOpen!==!1,gr.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),gr.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}ar(fr.prototype,{writable:{__proto__:null,...or(dr.prototype,"writable")},writableHighWaterMark:{__proto__:null,...or(dr.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...or(dr.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...or(dr.prototype,"writableBuffer")},writableLength:{__proto__:null,...or(dr.prototype,"writableLength")},writableFinished:{__proto__:null,...or(dr.prototype,"writableFinished")},writableCorked:{__proto__:null,...or(dr.prototype,"writableCorked")},writableEnded:{__proto__:null,...or(dr.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...or(dr.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(gr){this._readableState&&this._writableState&&(this._readableState.destroyed=gr,this._writableState.destroyed=gr)}}});let pr;function mr(){return pr===void 0&&(pr={}),pr}fr.fromWeb=function(gr,vr){return mr().newStreamDuplexFromReadableWritablePair(gr,vr)},fr.toWeb=function(gr){return mr().newReadableWritablePairFromDuplex(gr)};let hr;return fr.from=function(gr){return hr||(hr=requireDuplexify()),hr(gr,"body")},duplex}const{ObjectSetPrototypeOf:ObjectSetPrototypeOf$1,Symbol:Symbol$2}=primordials;var transform=Transform$1;const{ERR_METHOD_NOT_IMPLEMENTED}=errors.codes,Duplex$2=requireDuplex(),{getHighWaterMark}=state;ObjectSetPrototypeOf$1(Transform$1.prototype,Duplex$2.prototype);ObjectSetPrototypeOf$1(Transform$1,Duplex$2);const kCallback=Symbol$2("kCallback");function Transform$1(ar){if(!(this instanceof Transform$1))return new Transform$1(ar);const or=ar?getHighWaterMark(this,ar,"readableHighWaterMark",!0):null;or===0&&(ar={...ar,highWaterMark:null,readableHighWaterMark:or,writableHighWaterMark:ar.writableHighWaterMark||0}),Duplex$2.call(this,ar),this._readableState.sync=!1,this[kCallback]=null,ar&&(typeof ar.transform=="function"&&(this._transform=ar.transform),typeof ar.flush=="function"&&(this._flush=ar.flush)),this.on("prefinish",prefinish)}function final(ar){typeof this._flush=="function"&&!this.destroyed?this._flush((or,lr)=>{if(or){ar?ar(or):this.destroy(or);return}lr!=null&&this.push(lr),this.push(null),ar&&ar()}):(this.push(null),ar&&ar())}function prefinish(){this._final!==final&&final.call(this)}Transform$1.prototype._final=final;Transform$1.prototype._transform=function(ar,or,lr){throw new ERR_METHOD_NOT_IMPLEMENTED("_transform()")};Transform$1.prototype._write=function(ar,or,lr){const ur=this._readableState,cr=this._writableState,dr=ur.length;this._transform(ar,or,(fr,pr)=>{if(fr){lr(fr);return}pr!=null&&this.push(pr),cr.ended||dr===ur.length||ur.length<ur.highWaterMark?lr():this[kCallback]=lr})};Transform$1.prototype._read=function(){if(this[kCallback]){const ar=this[kCallback];this[kCallback]=null,ar()}};const{ObjectSetPrototypeOf}=primordials;var passthrough=PassThrough$1;const Transform=transform;ObjectSetPrototypeOf(PassThrough$1.prototype,Transform.prototype);ObjectSetPrototypeOf(PassThrough$1,Transform);function PassThrough$1(ar){if(!(this instanceof PassThrough$1))return new PassThrough$1(ar);Transform.call(this,ar)}PassThrough$1.prototype._transform=function(ar,or,lr){lr(null,ar)};const process$1=browserExports$1,{ArrayIsArray,Promise:Promise$2,SymbolAsyncIterator,SymbolDispose}=primordials,eos$1=endOfStreamExports,{once}=utilExports,destroyImpl=destroy_1,Duplex$1=requireDuplex(),{aggregateTwoErrors,codes:{ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$1,ERR_INVALID_RETURN_VALUE,ERR_MISSING_ARGS:ERR_MISSING_ARGS$2,ERR_STREAM_DESTROYED,ERR_STREAM_PREMATURE_CLOSE},AbortError:AbortError$2}=errors,{validateFunction,validateAbortSignal:validateAbortSignal$1}=validators,{isIterable,isReadable:isReadable$1,isReadableNodeStream,isNodeStream:isNodeStream$2,isTransformStream:isTransformStream$1,isWebStream:isWebStream$1,isReadableStream:isReadableStream$1,isReadableFinished}=utils,AbortController$1=globalThis.AbortController||requireBrowser().AbortController;let PassThrough,Readable,addAbortListener;function destroyer$1(ar,or,lr){let ur=!1;ar.on("close",()=>{ur=!0});const cr=eos$1(ar,{readable:or,writable:lr},dr=>{ur=!dr});return{destroy:dr=>{ur||(ur=!0,destroyImpl.destroyer(ar,dr||new ERR_STREAM_DESTROYED("pipe")))},cleanup:cr}}function popCallback(ar){return validateFunction(ar[ar.length-1],"streams[stream.length - 1]"),ar.pop()}function makeAsyncIterable(ar){if(isIterable(ar))return ar;if(isReadableNodeStream(ar))return fromReadable(ar);throw new ERR_INVALID_ARG_TYPE$1("val",["Readable","Iterable","AsyncIterable"],ar)}async function*fromReadable(ar){Readable||(Readable=requireReadable()),yield*Readable.prototype[SymbolAsyncIterator].call(ar)}async function pumpToNode(ar,or,lr,{end:ur}){let cr,dr=null;const fr=hr=>{if(hr&&(cr=hr),dr){const gr=dr;dr=null,gr()}},pr=()=>new Promise$2((hr,gr)=>{cr?gr(cr):dr=()=>{cr?gr(cr):hr()}});or.on("drain",fr);const mr=eos$1(or,{readable:!1},fr);try{or.writableNeedDrain&&await pr();for await(const hr of ar)or.write(hr)||await pr();ur&&(or.end(),await pr()),lr()}catch(hr){lr(cr!==hr?aggregateTwoErrors(cr,hr):hr)}finally{mr(),or.off("drain",fr)}}async function pumpToWeb(ar,or,lr,{end:ur}){isTransformStream$1(or)&&(or=or.writable);const cr=or.getWriter();try{for await(const dr of ar)await cr.ready,cr.write(dr).catch(()=>{});await cr.ready,ur&&await cr.close(),lr()}catch(dr){try{await cr.abort(dr),lr(dr)}catch(fr){lr(fr)}}}function pipeline$1(...ar){return pipelineImpl(ar,once(popCallback(ar)))}function pipelineImpl(ar,or,lr){if(ar.length===1&&ArrayIsArray(ar[0])&&(ar=ar[0]),ar.length<2)throw new ERR_MISSING_ARGS$2("streams");const ur=new AbortController$1,cr=ur.signal,dr=lr==null?void 0:lr.signal,fr=[];validateAbortSignal$1(dr,"options.signal");function pr(){Cr(new AbortError$2)}addAbortListener=addAbortListener||utilExports.addAbortListener;let mr;dr&&(mr=addAbortListener(dr,pr));let hr,gr;const vr=[];let wr=0;function _r(Ir){Cr(Ir,--wr===0)}function Cr(Ir,Br){var Nr;if(Ir&&(!hr||hr.code==="ERR_STREAM_PREMATURE_CLOSE")&&(hr=Ir),!(!hr&&!Br)){for(;vr.length;)vr.shift()(hr);(Nr=mr)===null||Nr===void 0||Nr[SymbolDispose](),ur.abort(),Br&&(hr||fr.forEach(Mr=>Mr()),process$1.nextTick(or,hr,gr))}}let Sr;for(let Ir=0;Ir<ar.length;Ir++){const Br=ar[Ir],Nr=Ir<ar.length-1,Mr=Ir>0,xr=Nr||(lr==null?void 0:lr.end)!==!1,Rr=Ir===ar.length-1;if(isNodeStream$2(Br)){let Or=function(qr){qr&&qr.name!=="AbortError"&&qr.code!=="ERR_STREAM_PREMATURE_CLOSE"&&_r(qr)};var kr=Or;if(xr){const{destroy:qr,cleanup:Jr}=destroyer$1(Br,Nr,Mr);vr.push(qr),isReadable$1(Br)&&Rr&&fr.push(Jr)}Br.on("error",Or),isReadable$1(Br)&&Rr&&fr.push(()=>{Br.removeListener("error",Or)})}if(Ir===0)if(typeof Br=="function"){if(Sr=Br({signal:cr}),!isIterable(Sr))throw new ERR_INVALID_RETURN_VALUE("Iterable, AsyncIterable or Stream","source",Sr)}else isIterable(Br)||isReadableNodeStream(Br)||isTransformStream$1(Br)?Sr=Br:Sr=Duplex$1.from(Br);else if(typeof Br=="function"){if(isTransformStream$1(Sr)){var Dr;Sr=makeAsyncIterable((Dr=Sr)===null||Dr===void 0?void 0:Dr.readable)}else Sr=makeAsyncIterable(Sr);if(Sr=Br(Sr,{signal:cr}),Nr){if(!isIterable(Sr,!0))throw new ERR_INVALID_RETURN_VALUE("AsyncIterable",`transform[${Ir-1}]`,Sr)}else{var Er;PassThrough||(PassThrough=passthrough);const Or=new PassThrough({objectMode:!0}),qr=(Er=Sr)===null||Er===void 0?void 0:Er.then;if(typeof qr=="function")wr++,qr.call(Sr,Wr=>{gr=Wr,Wr!=null&&Or.write(Wr),xr&&Or.end(),process$1.nextTick(_r)},Wr=>{Or.destroy(Wr),process$1.nextTick(_r,Wr)});else if(isIterable(Sr,!0))wr++,pumpToNode(Sr,Or,_r,{end:xr});else if(isReadableStream$1(Sr)||isTransformStream$1(Sr)){const Wr=Sr.readable||Sr;wr++,pumpToNode(Wr,Or,_r,{end:xr})}else throw new ERR_INVALID_RETURN_VALUE("AsyncIterable or Promise","destination",Sr);Sr=Or;const{destroy:Jr,cleanup:na}=destroyer$1(Sr,!1,!0);vr.push(Jr),Rr&&fr.push(na)}}else if(isNodeStream$2(Br)){if(isReadableNodeStream(Sr)){wr+=2;const Or=pipe(Sr,Br,_r,{end:xr});isReadable$1(Br)&&Rr&&fr.push(Or)}else if(isTransformStream$1(Sr)||isReadableStream$1(Sr)){const Or=Sr.readable||Sr;wr++,pumpToNode(Or,Br,_r,{end:xr})}else if(isIterable(Sr))wr++,pumpToNode(Sr,Br,_r,{end:xr});else throw new ERR_INVALID_ARG_TYPE$1("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Sr);Sr=Br}else if(isWebStream$1(Br)){if(isReadableNodeStream(Sr))wr++,pumpToWeb(makeAsyncIterable(Sr),Br,_r,{end:xr});else if(isReadableStream$1(Sr)||isIterable(Sr))wr++,pumpToWeb(Sr,Br,_r,{end:xr});else if(isTransformStream$1(Sr))wr++,pumpToWeb(Sr.readable,Br,_r,{end:xr});else throw new ERR_INVALID_ARG_TYPE$1("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Sr);Sr=Br}else Sr=Duplex$1.from(Br)}return(cr!=null&&cr.aborted||dr!=null&&dr.aborted)&&process$1.nextTick(pr),Sr}function pipe(ar,or,lr,{end:ur}){let cr=!1;if(or.on("close",()=>{cr||lr(new ERR_STREAM_PREMATURE_CLOSE)}),ar.pipe(or,{end:!1}),ur){let fr=function(){cr=!0,or.end()};var dr=fr;isReadableFinished(ar)?process$1.nextTick(fr):ar.once("end",fr)}else lr();return eos$1(ar,{readable:!0,writable:!1},fr=>{const pr=ar._readableState;fr&&fr.code==="ERR_STREAM_PREMATURE_CLOSE"&&pr&&pr.ended&&!pr.errored&&!pr.errorEmitted?ar.once("end",lr).once("error",lr):lr(fr)}),eos$1(or,{readable:!1,writable:!0},lr)}var pipeline_1={pipelineImpl,pipeline:pipeline$1};const{pipeline}=pipeline_1,Duplex=requireDuplex(),{destroyer}=destroy_1,{isNodeStream:isNodeStream$1,isReadable,isWritable:isWritable$1,isWebStream,isTransformStream,isWritableStream,isReadableStream}=utils,{AbortError:AbortError$1,codes:{ERR_INVALID_ARG_VALUE:ERR_INVALID_ARG_VALUE$1,ERR_MISSING_ARGS:ERR_MISSING_ARGS$1}}=errors,eos=endOfStreamExports;var compose$1=function ar(...or){if(or.length===0)throw new ERR_MISSING_ARGS$1("streams");if(or.length===1)return Duplex.from(or[0]);const lr=[...or];if(typeof or[0]=="function"&&(or[0]=Duplex.from(or[0])),typeof or[or.length-1]=="function"){const _r=or.length-1;or[_r]=Duplex.from(or[_r])}for(let _r=0;_r<or.length;++_r)if(!(!isNodeStream$1(or[_r])&&!isWebStream(or[_r]))){if(_r<or.length-1&&!(isReadable(or[_r])||isReadableStream(or[_r])||isTransformStream(or[_r])))throw new ERR_INVALID_ARG_VALUE$1(`streams[${_r}]`,lr[_r],"must be readable");if(_r>0&&!(isWritable$1(or[_r])||isWritableStream(or[_r])||isTransformStream(or[_r])))throw new ERR_INVALID_ARG_VALUE$1(`streams[${_r}]`,lr[_r],"must be writable")}let ur,cr,dr,fr,pr;function mr(_r){const Cr=fr;fr=null,Cr?Cr(_r):_r?pr.destroy(_r):!wr&&!vr&&pr.destroy()}const hr=or[0],gr=pipeline(or,mr),vr=!!(isWritable$1(hr)||isWritableStream(hr)||isTransformStream(hr)),wr=!!(isReadable(gr)||isReadableStream(gr)||isTransformStream(gr));if(pr=new Duplex({writableObjectMode:!!(hr!=null&&hr.writableObjectMode),readableObjectMode:!!(gr!=null&&gr.readableObjectMode),writable:vr,readable:wr}),vr){if(isNodeStream$1(hr))pr._write=function(Cr,Sr,Dr){hr.write(Cr,Sr)?Dr():ur=Dr},pr._final=function(Cr){hr.end(),cr=Cr},hr.on("drain",function(){if(ur){const Cr=ur;ur=null,Cr()}});else if(isWebStream(hr)){const Sr=(isTransformStream(hr)?hr.writable:hr).getWriter();pr._write=async function(Dr,Er,kr){try{await Sr.ready,Sr.write(Dr).catch(()=>{}),kr()}catch(Ir){kr(Ir)}},pr._final=async function(Dr){try{await Sr.ready,Sr.close().catch(()=>{}),cr=Dr}catch(Er){Dr(Er)}}}const _r=isTransformStream(gr)?gr.readable:gr;eos(_r,()=>{if(cr){const Cr=cr;cr=null,Cr()}})}if(wr){if(isNodeStream$1(gr))gr.on("readable",function(){if(dr){const _r=dr;dr=null,_r()}}),gr.on("end",function(){pr.push(null)}),pr._read=function(){for(;;){const _r=gr.read();if(_r===null){dr=pr._read;return}if(!pr.push(_r))return}};else if(isWebStream(gr)){const Cr=(isTransformStream(gr)?gr.readable:gr).getReader();pr._read=async function(){for(;;)try{const{value:Sr,done:Dr}=await Cr.read();if(!pr.push(Sr))return;if(Dr){pr.push(null);return}}catch{return}}}}return pr._destroy=function(_r,Cr){!_r&&fr!==null&&(_r=new AbortError$1),dr=null,ur=null,cr=null,fr===null?Cr(_r):(fr=Cr,isNodeStream$1(gr)&&destroyer(gr,_r))},pr};const AbortController=globalThis.AbortController||requireBrowser().AbortController,{codes:{ERR_INVALID_ARG_VALUE,ERR_INVALID_ARG_TYPE,ERR_MISSING_ARGS,ERR_OUT_OF_RANGE},AbortError}=errors,{validateAbortSignal,validateInteger,validateObject}=validators,kWeakHandler=primordials.Symbol("kWeak"),kResistStopPropagation=primordials.Symbol("kResistStopPropagation"),{finished}=endOfStreamExports,staticCompose=compose$1,{addAbortSignalNoValidate}=addAbortSignalExports,{isWritable,isNodeStream}=utils,{deprecate}=utilExports,{ArrayPrototypePush,Boolean:Boolean$1,MathFloor,Number:Number$1,NumberIsNaN,Promise:Promise$1,PromiseReject,PromiseResolve,PromisePrototypeThen,Symbol:Symbol$1}=primordials,kEmpty=Symbol$1("kEmpty"),kEof=Symbol$1("kEof");function compose(ar,or){if(or!=null&&validateObject(or,"options"),(or==null?void 0:or.signal)!=null&&validateAbortSignal(or.signal,"options.signal"),isNodeStream(ar)&&!isWritable(ar))throw new ERR_INVALID_ARG_VALUE("stream",ar,"must be writable");const lr=staticCompose(this,ar);return or!=null&&or.signal&&addAbortSignalNoValidate(or.signal,lr),lr}function map(ar,or){if(typeof ar!="function")throw new ERR_INVALID_ARG_TYPE("fn",["Function","AsyncFunction"],ar);or!=null&&validateObject(or,"options"),(or==null?void 0:or.signal)!=null&&validateAbortSignal(or.signal,"options.signal");let lr=1;(or==null?void 0:or.concurrency)!=null&&(lr=MathFloor(or.concurrency));let ur=lr-1;return(or==null?void 0:or.highWaterMark)!=null&&(ur=MathFloor(or.highWaterMark)),validateInteger(lr,"options.concurrency",1),validateInteger(ur,"options.highWaterMark",0),ur+=lr,(async function*(){const dr=utilExports.AbortSignalAny([or==null?void 0:or.signal].filter(Boolean$1)),fr=this,pr=[],mr={signal:dr};let hr,gr,vr=!1,wr=0;function _r(){vr=!0,Cr()}function Cr(){wr-=1,Sr()}function Sr(){gr&&!vr&&wr<lr&&pr.length<ur&&(gr(),gr=null)}async function Dr(){try{for await(let Er of fr){if(vr)return;if(dr.aborted)throw new AbortError;try{if(Er=ar(Er,mr),Er===kEmpty)continue;Er=PromiseResolve(Er)}catch(kr){Er=PromiseReject(kr)}wr+=1,PromisePrototypeThen(Er,Cr,_r),pr.push(Er),hr&&(hr(),hr=null),!vr&&(pr.length>=ur||wr>=lr)&&await new Promise$1(kr=>{gr=kr})}pr.push(kEof)}catch(Er){const kr=PromiseReject(Er);PromisePrototypeThen(kr,Cr,_r),pr.push(kr)}finally{vr=!0,hr&&(hr(),hr=null)}}Dr();try{for(;;){for(;pr.length>0;){const Er=await pr[0];if(Er===kEof)return;if(dr.aborted)throw new AbortError;Er!==kEmpty&&(yield Er),pr.shift(),Sr()}await new Promise$1(Er=>{hr=Er})}}finally{vr=!0,gr&&(gr(),gr=null)}}).call(this)}function asIndexedPairs(ar=void 0){return ar!=null&&validateObject(ar,"options"),(ar==null?void 0:ar.signal)!=null&&validateAbortSignal(ar.signal,"options.signal"),(async function*(){let lr=0;for await(const cr of this){var ur;if(ar!=null&&(ur=ar.signal)!==null&&ur!==void 0&&ur.aborted)throw new AbortError({cause:ar.signal.reason});yield[lr++,cr]}}).call(this)}async function some(ar,or=void 0){for await(const lr of filter.call(this,ar,or))return!0;return!1}async function every(ar,or=void 0){if(typeof ar!="function")throw new ERR_INVALID_ARG_TYPE("fn",["Function","AsyncFunction"],ar);return!await some.call(this,async(...lr)=>!await ar(...lr),or)}async function find(ar,or){for await(const lr of filter.call(this,ar,or))return lr}async function forEach(ar,or){if(typeof ar!="function")throw new ERR_INVALID_ARG_TYPE("fn",["Function","AsyncFunction"],ar);async function lr(ur,cr){return await ar(ur,cr),kEmpty}for await(const ur of map.call(this,lr,or));}function filter(ar,or){if(typeof ar!="function")throw new ERR_INVALID_ARG_TYPE("fn",["Function","AsyncFunction"],ar);async function lr(ur,cr){return await ar(ur,cr)?ur:kEmpty}return map.call(this,lr,or)}class ReduceAwareErrMissingArgs extends ERR_MISSING_ARGS{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function reduce(ar,or,lr){var ur;if(typeof ar!="function")throw new ERR_INVALID_ARG_TYPE("reducer",["Function","AsyncFunction"],ar);lr!=null&&validateObject(lr,"options"),(lr==null?void 0:lr.signal)!=null&&validateAbortSignal(lr.signal,"options.signal");let cr=arguments.length>1;if(lr!=null&&(ur=lr.signal)!==null&&ur!==void 0&&ur.aborted){const hr=new AbortError(void 0,{cause:lr.signal.reason});throw this.once("error",()=>{}),await finished(this.destroy(hr)),hr}const dr=new AbortController,fr=dr.signal;if(lr!=null&&lr.signal){const hr={once:!0,[kWeakHandler]:this,[kResistStopPropagation]:!0};lr.signal.addEventListener("abort",()=>dr.abort(),hr)}let pr=!1;try{for await(const hr of this){var mr;if(pr=!0,lr!=null&&(mr=lr.signal)!==null&&mr!==void 0&&mr.aborted)throw new AbortError;cr?or=await ar(or,hr,{signal:fr}):(or=hr,cr=!0)}if(!pr&&!cr)throw new ReduceAwareErrMissingArgs}finally{dr.abort()}return or}async function toArray(ar){ar!=null&&validateObject(ar,"options"),(ar==null?void 0:ar.signal)!=null&&validateAbortSignal(ar.signal,"options.signal");const or=[];for await(const ur of this){var lr;if(ar!=null&&(lr=ar.signal)!==null&&lr!==void 0&&lr.aborted)throw new AbortError(void 0,{cause:ar.signal.reason});ArrayPrototypePush(or,ur)}return or}function flatMap(ar,or){const lr=map.call(this,ar,or);return(async function*(){for await(const cr of lr)yield*cr}).call(this)}function toIntegerOrInfinity(ar){if(ar=Number$1(ar),NumberIsNaN(ar))return 0;if(ar<0)throw new ERR_OUT_OF_RANGE("number",">= 0",ar);return ar}function drop(ar,or=void 0){return or!=null&&validateObject(or,"options"),(or==null?void 0:or.signal)!=null&&validateAbortSignal(or.signal,"options.signal"),ar=toIntegerOrInfinity(ar),(async function*(){var ur;if(or!=null&&(ur=or.signal)!==null&&ur!==void 0&&ur.aborted)throw new AbortError;for await(const dr of this){var cr;if(or!=null&&(cr=or.signal)!==null&&cr!==void 0&&cr.aborted)throw new AbortError;ar--<=0&&(yield dr)}}).call(this)}function take(ar,or=void 0){return or!=null&&validateObject(or,"options"),(or==null?void 0:or.signal)!=null&&validateAbortSignal(or.signal,"options.signal"),ar=toIntegerOrInfinity(ar),(async function*(){var ur;if(or!=null&&(ur=or.signal)!==null&&ur!==void 0&&ur.aborted)throw new AbortError;for await(const dr of this){var cr;if(or!=null&&(cr=or.signal)!==null&&cr!==void 0&&cr.aborted)throw new AbortError;if(ar-- >0&&(yield dr),ar<=0)return}}).call(this)}operators.streamReturningOperators={asIndexedPairs:deprecate(asIndexedPairs,"readable.asIndexedPairs will be removed in a future version."),drop,filter,flatMap,map,take,compose};operators.promiseReturningOperators={every,forEach,reduce,toArray,some,find};var promises,hasRequiredPromises;function requirePromises(){if(hasRequiredPromises)return promises;hasRequiredPromises=1;const{ArrayPrototypePop:ar,Promise:or}=primordials,{isIterable:lr,isNodeStream:ur,isWebStream:cr}=utils,{pipelineImpl:dr}=pipeline_1,{finished:fr}=endOfStreamExports;requireStream();function pr(...mr){return new or((hr,gr)=>{let vr,wr;const _r=mr[mr.length-1];if(_r&&typeof _r=="object"&&!ur(_r)&&!lr(_r)&&!cr(_r)){const Cr=ar(mr);vr=Cr.signal,wr=Cr.end}dr(mr,(Cr,Sr)=>{Cr?gr(Cr):hr(Sr)},{signal:vr,end:wr})})}return promises={finished:fr,pipeline:pr},promises}var hasRequiredStream;function requireStream(){if(hasRequiredStream)return stream.exports;hasRequiredStream=1;const{Buffer:ar}=buffer,{ObjectDefineProperty:or,ObjectKeys:lr,ReflectApply:ur}=primordials,{promisify:{custom:cr}}=utilExports,{streamReturningOperators:dr,promiseReturningOperators:fr}=operators,{codes:{ERR_ILLEGAL_CONSTRUCTOR:pr}}=errors,mr=compose$1,{setDefaultHighWaterMark:hr,getDefaultHighWaterMark:gr}=state,{pipeline:vr}=pipeline_1,{destroyer:wr}=destroy_1,_r=endOfStreamExports,Cr=requirePromises(),Sr=utils,Dr=stream.exports=legacy.Stream;Dr.isDestroyed=Sr.isDestroyed,Dr.isDisturbed=Sr.isDisturbed,Dr.isErrored=Sr.isErrored,Dr.isReadable=Sr.isReadable,Dr.isWritable=Sr.isWritable,Dr.Readable=requireReadable();for(const Ir of lr(dr)){let Nr=function(...Mr){if(new.target)throw pr();return Dr.Readable.from(ur(Br,this,Mr))};var kr=Nr;const Br=dr[Ir];or(Nr,"name",{__proto__:null,value:Br.name}),or(Nr,"length",{__proto__:null,value:Br.length}),or(Dr.Readable.prototype,Ir,{__proto__:null,value:Nr,enumerable:!1,configurable:!0,writable:!0})}for(const Ir of lr(fr)){let Nr=function(...xr){if(new.target)throw pr();return ur(Br,this,xr)};var kr=Nr;const Br=fr[Ir];or(Nr,"name",{__proto__:null,value:Br.name}),or(Nr,"length",{__proto__:null,value:Br.length}),or(Dr.Readable.prototype,Ir,{__proto__:null,value:Nr,enumerable:!1,configurable:!0,writable:!0})}Dr.Writable=requireWritable(),Dr.Duplex=requireDuplex(),Dr.Transform=transform,Dr.PassThrough=passthrough,Dr.pipeline=vr;const{addAbortSignal:Er}=addAbortSignalExports;return Dr.addAbortSignal=Er,Dr.finished=_r,Dr.destroy=wr,Dr.compose=mr,Dr.setDefaultHighWaterMark=hr,Dr.getDefaultHighWaterMark=gr,or(Dr,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return Cr}}),or(vr,cr,{__proto__:null,enumerable:!0,get(){return Cr.pipeline}}),or(_r,cr,{__proto__:null,enumerable:!0,get(){return Cr.finished}}),Dr.Stream=Dr,Dr._isUint8Array=function(Br){return Br instanceof Uint8Array},Dr._uint8ArrayToBuffer=function(Br){return ar.from(Br.buffer,Br.byteOffset,Br.byteLength)},stream.exports}(function(ar){const or=requireStream(),lr=requirePromises(),ur=or.Readable.destroy;ar.exports=or.Readable,ar.exports._uint8ArrayToBuffer=or._uint8ArrayToBuffer,ar.exports._isUint8Array=or._isUint8Array,ar.exports.isDisturbed=or.isDisturbed,ar.exports.isErrored=or.isErrored,ar.exports.isReadable=or.isReadable,ar.exports.Readable=or.Readable,ar.exports.Writable=or.Writable,ar.exports.Duplex=or.Duplex,ar.exports.Transform=or.Transform,ar.exports.PassThrough=or.PassThrough,ar.exports.addAbortSignal=or.addAbortSignal,ar.exports.finished=or.finished,ar.exports.destroy=or.destroy,ar.exports.destroy=ur,ar.exports.pipeline=or.pipeline,ar.exports.compose=or.compose,Object.defineProperty(or,"promises",{configurable:!0,enumerable:!0,get(){return lr}}),ar.exports.Stream=or.Stream,ar.exports.default=ar.exports})(browser$2);var browserExports=browser$2.exports;Object.defineProperty(lib,"__esModule",{value:!0});lib.ReadableWebToNodeStream=void 0;const readable_stream_1=browserExports;class ReadableWebToNodeStream extends readable_stream_1.Readable{constructor(or){super(),this.bytesRead=0,this.released=!1,this.reader=or.getReader()}_read(){if(this.released){this.push(null);return}this.pendingRead=this.reader.read().then(or=>{delete this.pendingRead,or.done||this.released?this.push(null):(this.bytesRead+=or.value.length,this.push(or.value))}).catch(or=>{this.destroy(or)})}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}}lib.ReadableWebToNodeStream=ReadableWebToNodeStream;(function(ar){Object.defineProperty(ar,"__esModule",{value:!0}),ar.fetchFromUrl=ar.parseBlob=ar.parseReadableStream=ar.parseNodeStream=ar.selectCover=ar.ratingToStars=ar.orderTags=ar.parseFromTokenizer=ar.parseBuffer=void 0;const or=browserExports$2,lr=core$2,ur=lib,cr=or("music-metadata-browser:main");var dr=core$2;Object.defineProperty(ar,"parseBuffer",{enumerable:!0,get:function(){return dr.parseBuffer}}),Object.defineProperty(ar,"parseFromTokenizer",{enumerable:!0,get:function(){return dr.parseFromTokenizer}}),Object.defineProperty(ar,"orderTags",{enumerable:!0,get:function(){return dr.orderTags}}),Object.defineProperty(ar,"ratingToStars",{enumerable:!0,get:function(){return dr.ratingToStars}}),Object.defineProperty(ar,"selectCover",{enumerable:!0,get:function(){return dr.selectCover}}),ar.parseNodeStream=lr.parseStream;async function fr(gr,vr,wr){const _r=new ur.ReadableWebToNodeStream(gr),Cr=await(0,ar.parseNodeStream)(_r,typeof vr=="string"?{mimeType:vr}:vr,wr);return await _r.close(),Cr}ar.parseReadableStream=fr;async function pr(gr,vr){gr.type,gr.size,gr instanceof File&&gr.name;const wr=gr.stream?gr.stream():mr(gr);return fr(wr,{mimeType:gr.type,size:gr.size},vr)}ar.parseBlob=pr;function mr(gr){const vr=new FileReader;return new ReadableStream({start(wr){vr.onloadend=_r=>{let Cr=_r.target.result;Cr instanceof ArrayBuffer&&(Cr=new Uint8Array(Cr)),wr.enqueue(Cr),wr.close()},vr.onerror=_r=>{wr.close()},vr.onabort=_r=>{wr.close()},vr.readAsArrayBuffer(gr)}})}async function hr(gr,vr){const wr=await fetch(gr),_r={size:parseInt(wr.headers.get("Content-Length"),10),mimeType:wr.headers.get("Content-Type")};if(wr.ok)if(wr.body){const Cr=await fr(wr.body,_r,vr);return cr("Closing HTTP-readable-stream..."),wr.body.locked||await wr.body.cancel(),cr("HTTP-readable-stream closed."),Cr}else return pr(await wr.blob(),vr);else throw new Error(`HTTP error status=${wr.status}: ${wr.statusText}`)}ar.fetchFromUrl=hr})(lib$3);const e=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,t=Object.keys,n=Array.isArray;function r(ar,or){return typeof or!="object"||t(or).forEach(function(lr){ar[lr]=or[lr]}),ar}typeof Promise>"u"||e.Promise||(e.Promise=Promise);const s=Object.getPrototypeOf,i={}.hasOwnProperty;function o(ar,or){return i.call(ar,or)}function a(ar,or){typeof or=="function"&&(or=or(s(ar))),(typeof Reflect>"u"?t:Reflect.ownKeys)(or).forEach(lr=>{l(ar,lr,or[lr])})}const u=Object.defineProperty;function l(ar,or,lr,ur){u(ar,or,r(lr&&o(lr,"get")&&typeof lr.get=="function"?{get:lr.get,set:lr.set,configurable:!0}:{value:lr,configurable:!0,writable:!0},ur))}function c(ar){return{from:function(or){return ar.prototype=Object.create(or.prototype),l(ar.prototype,"constructor",ar),{extend:a.bind(null,ar.prototype)}}}}const h=Object.getOwnPropertyDescriptor;function d(ar,or){let lr;return h(ar,or)||(lr=s(ar))&&d(lr,or)}const f=[].slice;function p(ar,or,lr){return f.call(ar,or,lr)}function y(ar,or){return or(ar)}function m(ar){if(!ar)throw new Error("Assertion Failed")}function v(ar){e.setImmediate?setImmediate(ar):setTimeout(ar,0)}function g(ar,or){return ar.reduce((lr,ur,cr)=>{var dr=or(ur,cr);return dr&&(lr[dr[0]]=dr[1]),lr},{})}function b(ar,or){if(typeof or=="string"&&o(ar,or))return ar[or];if(!or)return ar;if(typeof or!="string"){for(var lr=[],ur=0,cr=or.length;ur<cr;++ur){var dr=b(ar,or[ur]);lr.push(dr)}return lr}var fr=or.indexOf(".");if(fr!==-1){var pr=ar[or.substr(0,fr)];return pr==null?void 0:b(pr,or.substr(fr+1))}}function _(ar,or,lr){if(ar&&or!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(ar)))if(typeof or!="string"&&"length"in or){m(typeof lr!="string"&&"length"in lr);for(var ur=0,cr=or.length;ur<cr;++ur)_(ar,or[ur],lr[ur])}else{var dr=or.indexOf(".");if(dr!==-1){var fr=or.substr(0,dr),pr=or.substr(dr+1);if(pr==="")lr===void 0?n(ar)&&!isNaN(parseInt(fr))?ar.splice(fr,1):delete ar[fr]:ar[fr]=lr;else{var mr=ar[fr];mr&&o(ar,fr)||(mr=ar[fr]={}),_(mr,pr,lr)}}else lr===void 0?n(ar)&&!isNaN(parseInt(or))?ar.splice(or,1):delete ar[or]:ar[or]=lr}}function w(ar){var or={};for(var lr in ar)o(ar,lr)&&(or[lr]=ar[lr]);return or}const x=[].concat;function k(ar){return x.apply([],ar)}const E="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(k([8,16,32,64].map(ar=>["Int","Uint","Float"].map(or=>or+ar+"Array")))).filter(ar=>e[ar]),P=E.map(ar=>e[ar]);g(E,ar=>[ar,!0]);let K=null;function O(ar){K=typeof WeakMap<"u"&&new WeakMap;const or=S(ar);return K=null,or}function S(ar){if(!ar||typeof ar!="object")return ar;let or=K&&K.get(ar);if(or)return or;if(n(ar)){or=[],K&&K.set(ar,or);for(var lr=0,ur=ar.length;lr<ur;++lr)or.push(S(ar[lr]))}else if(P.indexOf(ar.constructor)>=0)or=ar;else{const dr=s(ar);for(var cr in or=dr===Object.prototype?{}:Object.create(dr),K&&K.set(ar,or),ar)o(ar,cr)&&(or[cr]=S(ar[cr]))}return or}const{toString:A}={};function C(ar){return A.call(ar).slice(8,-1)}const j=typeof Symbol<"u"?Symbol.iterator:"@@iterator",D=typeof j=="symbol"?function(ar){var or;return ar!=null&&(or=ar[j])&&or.apply(ar)}:function(){return null},I={};function B(ar){var or,lr,ur,cr;if(arguments.length===1){if(n(ar))return ar.slice();if(this===I&&typeof ar=="string")return[ar];if(cr=D(ar)){for(lr=[];!(ur=cr.next()).done;)lr.push(ur.value);return lr}if(ar==null)return[ar];if(typeof(or=ar.length)=="number"){for(lr=new Array(or);or--;)lr[or]=ar[or];return lr}return[ar]}for(or=arguments.length,lr=new Array(or);or--;)lr[or]=arguments[or];return lr}const T=typeof Symbol<"u"?ar=>ar[Symbol.toStringTag]==="AsyncFunction":()=>!1;var R=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function F(ar,or){R=ar,M=or}var M=()=>!0;const N=!new Error("").stack;function q(){if(N)try{throw q.arguments,new Error}catch(ar){return ar}return new Error}function $(ar,or){var lr=ar.stack;return lr?(or=or||0,lr.indexOf(ar.name)===0&&(or+=(ar.name+ar.message).split(`
`).length),lr.split(`
`).slice(or).filter(M).map(ur=>`
`+ur).join("")):""}var U=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],L=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(U),V={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function W(ar,or){this._e=q(),this.name=ar,this.message=or}function Y(ar,or){return ar+". Errors: "+Object.keys(or).map(lr=>or[lr].toString()).filter((lr,ur,cr)=>cr.indexOf(lr)===ur).join(`
`)}function z(ar,or,lr,ur){this._e=q(),this.failures=or,this.failedKeys=ur,this.successCount=lr,this.message=Y(ar,or)}function G(ar,or){this._e=q(),this.name="BulkError",this.failures=Object.keys(or).map(lr=>or[lr]),this.failuresByPos=or,this.message=Y(ar,or)}c(W).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+$(this._e,2))}},toString:function(){return this.name+": "+this.message}}),c(z).from(W),c(G).from(W);var H=L.reduce((ar,or)=>(ar[or]=or+"Error",ar),{});const Q=W;var X=L.reduce((ar,or)=>{var lr=or+"Error";function ur(cr,dr){this._e=q(),this.name=lr,cr?typeof cr=="string"?(this.message=`${cr}${dr?`
 `+dr:""}`,this.inner=dr||null):typeof cr=="object"&&(this.message=`${cr.name} ${cr.message}`,this.inner=cr):(this.message=V[or]||lr,this.inner=null)}return c(ur).from(Q),ar[or]=ur,ar},{});X.Syntax=SyntaxError,X.Type=TypeError,X.Range=RangeError;var J=U.reduce((ar,or)=>(ar[or+"Error"]=X[or],ar),{}),Z=L.reduce((ar,or)=>(["Syntax","Type","Range"].indexOf(or)===-1&&(ar[or+"Error"]=X[or]),ar),{});function ee(){}function te(ar){return ar}function ne(ar,or){return ar==null||ar===te?or:function(lr){return or(ar(lr))}}function re(ar,or){return function(){ar.apply(this,arguments),or.apply(this,arguments)}}function se(ar,or){return ar===ee?or:function(){var lr=ar.apply(this,arguments);lr!==void 0&&(arguments[0]=lr);var ur=this.onsuccess,cr=this.onerror;this.onsuccess=null,this.onerror=null;var dr=or.apply(this,arguments);return ur&&(this.onsuccess=this.onsuccess?re(ur,this.onsuccess):ur),cr&&(this.onerror=this.onerror?re(cr,this.onerror):cr),dr!==void 0?dr:lr}}function ie(ar,or){return ar===ee?or:function(){ar.apply(this,arguments);var lr=this.onsuccess,ur=this.onerror;this.onsuccess=this.onerror=null,or.apply(this,arguments),lr&&(this.onsuccess=this.onsuccess?re(lr,this.onsuccess):lr),ur&&(this.onerror=this.onerror?re(ur,this.onerror):ur)}}function oe(ar,or){return ar===ee?or:function(lr){var ur=ar.apply(this,arguments);r(lr,ur);var cr=this.onsuccess,dr=this.onerror;this.onsuccess=null,this.onerror=null;var fr=or.apply(this,arguments);return cr&&(this.onsuccess=this.onsuccess?re(cr,this.onsuccess):cr),dr&&(this.onerror=this.onerror?re(dr,this.onerror):dr),ur===void 0?fr===void 0?void 0:fr:r(ur,fr)}}function ae(ar,or){return ar===ee?or:function(){return or.apply(this,arguments)!==!1&&ar.apply(this,arguments)}}function ue(ar,or){return ar===ee?or:function(){var lr=ar.apply(this,arguments);if(lr&&typeof lr.then=="function"){for(var ur=this,cr=arguments.length,dr=new Array(cr);cr--;)dr[cr]=arguments[cr];return lr.then(function(){return or.apply(ur,dr)})}return or.apply(this,arguments)}}Z.ModifyError=z,Z.DexieError=W,Z.BulkError=G;var le={};const ce=100,[he,de,fe]=typeof Promise>"u"?[]:(()=>{let ar=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[ar,s(ar),ar];const or=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[or,s(or),ar]})(),pe=de&&de.then,ye=he&&he.constructor,me=!!fe;var ve=!1,ge=fe?()=>{fe.then($e)}:e.setImmediate?setImmediate.bind(null,$e):e.MutationObserver?()=>{var ar=document.createElement("div");new MutationObserver(()=>{$e(),ar=null}).observe(ar,{attributes:!0}),ar.setAttribute("i","1")}:()=>{setTimeout($e,0)},be=function(ar,or){Se.push([ar,or]),we&&(ge(),we=!1)},_e=!0,we=!0,xe=[],ke=[],Ee=null,Pe=te,Ke={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:dt,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(ar=>{try{dt(ar[0],ar[1])}catch{}})}},Oe=Ke,Se=[],Ae=0,Ce=[];function je(ar){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ee,this._lib=!1;var or=this._PSD=Oe;if(R&&(this._stackHolder=q(),this._prev=null,this._numPrev=0),typeof ar!="function"){if(ar!==le)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Te(this,this._value))}this._state=null,this._value=null,++or.ref,Be(this,ar)}const De={get:function(){var ar=Oe,or=Xe;function lr(ur,cr){var dr=!ar.global&&(ar!==Oe||or!==Xe);const fr=dr&&!tt();var pr=new je((mr,hr)=>{Fe(this,new Ie(lt(ur,ar,dr,fr),lt(cr,ar,dr,fr),mr,hr,ar))});return R&&qe(pr,this),pr}return lr.prototype=le,lr},set:function(ar){l(this,"then",ar&&ar.prototype===le?De:{get:function(){return ar},set:De.set})}};function Ie(ar,or,lr,ur,cr){this.onFulfilled=typeof ar=="function"?ar:null,this.onRejected=typeof or=="function"?or:null,this.resolve=lr,this.reject=ur,this.psd=cr}function Be(ar,or){try{or(lr=>{if(ar._state===null){if(lr===ar)throw new TypeError("A promise cannot be resolved with itself.");var ur=ar._lib&&Ue();lr&&typeof lr.then=="function"?Be(ar,(cr,dr)=>{lr instanceof je?lr._then(cr,dr):lr.then(cr,dr)}):(ar._state=!0,ar._value=lr,Re(ar)),ur&&Le()}},Te.bind(null,ar))}catch(lr){Te(ar,lr)}}function Te(ar,or){if(ke.push(or),ar._state===null){var lr=ar._lib&&Ue();or=Pe(or),ar._state=!1,ar._value=or,R&&or!==null&&typeof or=="object"&&!or._promise&&function(ur,cr,dr){try{ur.apply(null,dr)}catch{}}(()=>{var ur=d(or,"stack");or._promise=ar,l(or,"stack",{get:()=>ve?ur&&(ur.get?ur.get.apply(or):ur.value):ar.stack})}),function(ur){xe.some(cr=>cr._value===ur._value)||xe.push(ur)}(ar),Re(ar),lr&&Le()}}function Re(ar){var or=ar._listeners;ar._listeners=[];for(var lr=0,ur=or.length;lr<ur;++lr)Fe(ar,or[lr]);var cr=ar._PSD;--cr.ref||cr.finalize(),Ae===0&&(++Ae,be(()=>{--Ae==0&&Ve()},[]))}function Fe(ar,or){if(ar._state!==null){var lr=ar._state?or.onFulfilled:or.onRejected;if(lr===null)return(ar._state?or.resolve:or.reject)(ar._value);++or.psd.ref,++Ae,be(Me,[lr,ar,or])}else ar._listeners.push(or)}function Me(ar,or,lr){try{Ee=or;var ur,cr=or._value;or._state?ur=ar(cr):(ke.length&&(ke=[]),ur=ar(cr),ke.indexOf(cr)===-1&&function(dr){for(var fr=xe.length;fr;)if(xe[--fr]._value===dr._value)return void xe.splice(fr,1)}(or)),lr.resolve(ur)}catch(dr){lr.reject(dr)}finally{Ee=null,--Ae==0&&Ve(),--lr.psd.ref||lr.psd.finalize()}}function Ne(ar,or,lr){if(or.length===lr)return or;var ur="";if(ar._state===!1){var cr,dr,fr=ar._value;fr!=null?(cr=fr.name||"Error",dr=fr.message||fr,ur=$(fr,0)):(cr=fr,dr=""),or.push(cr+(dr?": "+dr:"")+ur)}return R&&((ur=$(ar._stackHolder,2))&&or.indexOf(ur)===-1&&or.push(ur),ar._prev&&Ne(ar._prev,or,lr)),or}function qe(ar,or){var lr=or?or._numPrev+1:0;lr<100&&(ar._prev=or,ar._numPrev=lr)}function $e(){Ue()&&Le()}function Ue(){var ar=_e;return _e=!1,we=!1,ar}function Le(){var ar,or,lr;do for(;Se.length>0;)for(ar=Se,Se=[],lr=ar.length,or=0;or<lr;++or){var ur=ar[or];ur[0].apply(null,ur[1])}while(Se.length>0);_e=!0,we=!0}function Ve(){var ar=xe;xe=[],ar.forEach(ur=>{ur._PSD.onunhandled.call(null,ur._value,ur)});for(var or=Ce.slice(0),lr=or.length;lr;)or[--lr]()}function We(ar){return new je(le,!1,ar)}function Ye(ar,or){var lr=Oe;return function(){var ur=Ue(),cr=Oe;try{return it(lr,!0),ar.apply(this,arguments)}catch(dr){or&&or(dr)}finally{it(cr,!1),ur&&Le()}}}a(je.prototype,{then:De,_then:function(ar,or){Fe(this,new Ie(null,null,ar,or,Oe))},catch:function(ar){if(arguments.length===1)return this.then(null,ar);var or=arguments[0],lr=arguments[1];return typeof or=="function"?this.then(null,ur=>ur instanceof or?lr(ur):We(ur)):this.then(null,ur=>ur&&ur.name===or?lr(ur):We(ur))},finally:function(ar){return this.then(or=>(ar(),or),or=>(ar(),We(or)))},stack:{get:function(){if(this._stack)return this._stack;try{ve=!0;var ar=Ne(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=ar),ar}finally{ve=!1}}},timeout:function(ar,or){return ar<1/0?new je((lr,ur)=>{var cr=setTimeout(()=>ur(new X.Timeout(or)),ar);this.then(lr,ur).finally(clearTimeout.bind(null,cr))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&l(je.prototype,Symbol.toStringTag,"Dexie.Promise"),Ke.env=ot(),a(je,{all:function(){var ar=B.apply(null,arguments).map(nt);return new je(function(or,lr){ar.length===0&&or([]);var ur=ar.length;ar.forEach((cr,dr)=>je.resolve(cr).then(fr=>{ar[dr]=fr,--ur||or(ar)},lr))})},resolve:ar=>{if(ar instanceof je)return ar;if(ar&&typeof ar.then=="function")return new je((lr,ur)=>{ar.then(lr,ur)});var or=new je(le,!0,ar);return qe(or,Ee),or},reject:We,race:function(){var ar=B.apply(null,arguments).map(nt);return new je((or,lr)=>{ar.map(ur=>je.resolve(ur).then(or,lr))})},PSD:{get:()=>Oe,set:ar=>Oe=ar},totalEchoes:{get:()=>Xe},newPSD:Ze,usePSD:at,scheduler:{get:()=>be,set:ar=>{be=ar}},rejectionMapper:{get:()=>Pe,set:ar=>{Pe=ar}},follow:(ar,or)=>new je((lr,ur)=>Ze((cr,dr)=>{var fr=Oe;fr.unhandleds=[],fr.onunhandled=dr,fr.finalize=re(function(){(function(pr){function mr(){pr(),Ce.splice(Ce.indexOf(mr),1)}Ce.push(mr),++Ae,be(()=>{--Ae==0&&Ve()},[])})(()=>{this.unhandleds.length===0?cr():dr(this.unhandleds[0])})},fr.finalize),ar()},or,lr,ur))}),ye&&(ye.allSettled&&l(je,"allSettled",function(){const ar=B.apply(null,arguments).map(nt);return new je(or=>{ar.length===0&&or([]);let lr=ar.length;const ur=new Array(lr);ar.forEach((cr,dr)=>je.resolve(cr).then(fr=>ur[dr]={status:"fulfilled",value:fr},fr=>ur[dr]={status:"rejected",reason:fr}).then(()=>--lr||or(ur)))})}),ye.any&&typeof AggregateError<"u"&&l(je,"any",function(){const ar=B.apply(null,arguments).map(nt);return new je((or,lr)=>{ar.length===0&&lr(new AggregateError([]));let ur=ar.length;const cr=new Array(ur);ar.forEach((dr,fr)=>je.resolve(dr).then(pr=>or(pr),pr=>{cr[fr]=pr,--ur||lr(new AggregateError(cr))}))})}));const ze={awaits:0,echoes:0,id:0};var Ge=0,He=[],Qe=0,Xe=0,Je=0;function Ze(ar,or,lr,ur){var cr=Oe,dr=Object.create(cr);dr.parent=cr,dr.ref=0,dr.global=!1,dr.id=++Je;var fr=Ke.env;dr.env=me?{Promise:je,PromiseProp:{value:je,configurable:!0,writable:!0},all:je.all,race:je.race,allSettled:je.allSettled,any:je.any,resolve:je.resolve,reject:je.reject,nthen:ct(fr.nthen,dr),gthen:ct(fr.gthen,dr)}:{},or&&r(dr,or),++cr.ref,dr.finalize=function(){--this.parent.ref||this.parent.finalize()};var pr=at(dr,ar,lr,ur);return dr.ref===0&&dr.finalize(),pr}function et(){return ze.id||(ze.id=++Ge),++ze.awaits,ze.echoes+=ce,ze.id}function tt(){return!!ze.awaits&&(--ze.awaits==0&&(ze.id=0),ze.echoes=ze.awaits*ce,!0)}function nt(ar){return ze.echoes&&ar&&ar.constructor===ye?(et(),ar.then(or=>(tt(),or),or=>(tt(),ft(or)))):ar}function rt(ar){++Xe,ze.echoes&&--ze.echoes!=0||(ze.echoes=ze.id=0),He.push(Oe),it(ar,!0)}function st(){var ar=He[He.length-1];He.pop(),it(ar,!1)}function it(ar,or){var lr=Oe;if((or?!ze.echoes||Qe++&&ar===Oe:!Qe||--Qe&&ar===Oe)||ut(or?rt.bind(null,ar):st),ar!==Oe&&(Oe=ar,lr===Ke&&(Ke.env=ot()),me)){var ur=Ke.env.Promise,cr=ar.env;de.then=cr.nthen,ur.prototype.then=cr.gthen,(lr.global||ar.global)&&(Object.defineProperty(e,"Promise",cr.PromiseProp),ur.all=cr.all,ur.race=cr.race,ur.resolve=cr.resolve,ur.reject=cr.reject,cr.allSettled&&(ur.allSettled=cr.allSettled),cr.any&&(ur.any=cr.any))}}function ot(){var ar=e.Promise;return me?{Promise:ar,PromiseProp:Object.getOwnPropertyDescriptor(e,"Promise"),all:ar.all,race:ar.race,allSettled:ar.allSettled,any:ar.any,resolve:ar.resolve,reject:ar.reject,nthen:de.then,gthen:ar.prototype.then}:{}}function at(ar,or,lr,ur,cr){var dr=Oe;try{return it(ar,!0),or(lr,ur,cr)}finally{it(dr,!1)}}function ut(ar){pe.call(he,ar)}function lt(ar,or,lr,ur){return typeof ar!="function"?ar:function(){var cr=Oe;lr&&et(),it(or,!0);try{return ar.apply(this,arguments)}finally{it(cr,!1),ur&&ut(tt)}}}function ct(ar,or){return function(lr,ur){return ar.call(this,lt(lr,or),lt(ur,or))}}(""+pe).indexOf("[native code]")===-1&&(et=tt=ee);const ht="unhandledrejection";function dt(ar,or){var lr;try{lr=or.onuncatched(ar)}catch{}if(lr!==!1)try{var ur,cr={promise:or,reason:ar};if(e.document&&document.createEvent?((ur=document.createEvent("Event")).initEvent(ht,!0,!0),r(ur,cr)):e.CustomEvent&&r(ur=new CustomEvent(ht,{detail:cr}),cr),ur&&e.dispatchEvent&&(dispatchEvent(ur),!e.PromiseRejectionEvent&&e.onunhandledrejection))try{e.onunhandledrejection(ur)}catch{}R&&ur&&!ur.defaultPrevented&&console.warn(`Unhandled rejection: ${ar.stack||ar}`)}catch{}}var ft=je.reject;function pt(ar,or,lr,ur){if(ar.idbdb&&(ar._state.openComplete||Oe.letThrough||ar._vip)){var cr=ar._createTransaction(or,lr,ar._dbSchema);try{cr.create(),ar._state.PR1398_maxLoop=3}catch(dr){return dr.name===H.InvalidState&&ar.isOpen()&&--ar._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),ar._close(),ar.open().then(()=>pt(ar,or,lr,ur))):ft(dr)}return cr._promise(or,(dr,fr)=>Ze(()=>(Oe.trans=cr,ur(dr,fr,cr)))).then(dr=>cr._completion.then(()=>dr))}if(ar._state.openComplete)return ft(new X.DatabaseClosed(ar._state.dbOpenError));if(!ar._state.isBeingOpened){if(!ar._options.autoOpen)return ft(new X.DatabaseClosed);ar.open().catch(ee)}return ar._state.dbReadyPromise.then(()=>pt(ar,or,lr,ur))}const yt="3.2.7",mt="",vt=-1/0,gt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",bt="String expected.",_t=[],wt=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),xt=wt,kt=wt,Et=ar=>!/(dexie\.js|dexie\.min\.js)/.test(ar),Pt="__dbnames",Kt="readonly",Ot="readwrite";function St(ar,or){return ar?or?function(){return ar.apply(this,arguments)&&or.apply(this,arguments)}:ar:or}const At={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ct(ar){return typeof ar!="string"||/\./.test(ar)?or=>or:or=>(or[ar]===void 0&&ar in or&&delete(or=O(or))[ar],or)}class jt{_trans(or,lr,ur){const cr=this._tx||Oe.trans,dr=this.name;function fr(mr,hr,gr){if(!gr.schema[dr])throw new X.NotFound("Table "+dr+" not part of transaction");return lr(gr.idbtrans,gr)}const pr=Ue();try{return cr&&cr.db===this.db?cr===Oe.trans?cr._promise(or,fr,ur):Ze(()=>cr._promise(or,fr,ur),{trans:cr,transless:Oe.transless||Oe}):pt(this.db,or,[this.name],fr)}finally{pr&&Le()}}get(or,lr){return or&&or.constructor===Object?this.where(or).first(lr):this._trans("readonly",ur=>this.core.get({trans:ur,key:or}).then(cr=>this.hook.reading.fire(cr))).then(lr)}where(or){if(typeof or=="string")return new this.db.WhereClause(this,or);if(n(or))return new this.db.WhereClause(this,`[${or.join("+")}]`);const lr=t(or);if(lr.length===1)return this.where(lr[0]).equals(or[lr[0]]);const ur=this.schema.indexes.concat(this.schema.primKey).filter(hr=>{if(hr.compound&&lr.every(gr=>hr.keyPath.indexOf(gr)>=0)){for(let gr=0;gr<lr.length;++gr)if(lr.indexOf(hr.keyPath[gr])===-1)return!1;return!0}return!1}).sort((hr,gr)=>hr.keyPath.length-gr.keyPath.length)[0];if(ur&&this.db._maxKey!==mt){const hr=ur.keyPath.slice(0,lr.length);return this.where(hr).equals(hr.map(gr=>or[gr]))}!ur&&R&&console.warn(`The query ${JSON.stringify(or)} on ${this.name} would benefit of a compound index [${lr.join("+")}]`);const{idxByName:cr}=this.schema,dr=this.db._deps.indexedDB;function fr(hr,gr){try{return dr.cmp(hr,gr)===0}catch{return!1}}const[pr,mr]=lr.reduce(([hr,gr],vr)=>{const wr=cr[vr],_r=or[vr];return[hr||wr,hr||!wr?St(gr,wr&&wr.multi?Cr=>{const Sr=b(Cr,vr);return n(Sr)&&Sr.some(Dr=>fr(_r,Dr))}:Cr=>fr(_r,b(Cr,vr))):gr]},[null,null]);return pr?this.where(pr.name).equals(or[pr.keyPath]).filter(mr):ur?this.filter(mr):this.where(lr).equals("")}filter(or){return this.toCollection().and(or)}count(or){return this.toCollection().count(or)}offset(or){return this.toCollection().offset(or)}limit(or){return this.toCollection().limit(or)}each(or){return this.toCollection().each(or)}toArray(or){return this.toCollection().toArray(or)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(or){return new this.db.Collection(new this.db.WhereClause(this,n(or)?`[${or.join("+")}]`:or))}reverse(){return this.toCollection().reverse()}mapToClass(or){this.schema.mappedClass=or;const lr=ur=>{if(!ur)return ur;const cr=Object.create(or.prototype);for(var dr in ur)if(o(ur,dr))try{cr[dr]=ur[dr]}catch{}return cr};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=lr,this.hook("reading",lr),or}defineClass(){return this.mapToClass(function(or){r(this,or)})}add(or,lr){const{auto:ur,keyPath:cr}=this.schema.primKey;let dr=or;return cr&&ur&&(dr=Ct(cr)(or)),this._trans("readwrite",fr=>this.core.mutate({trans:fr,type:"add",keys:lr!=null?[lr]:null,values:[dr]})).then(fr=>fr.numFailures?je.reject(fr.failures[0]):fr.lastResult).then(fr=>{if(cr)try{_(or,cr,fr)}catch{}return fr})}update(or,lr){if(typeof or!="object"||n(or))return this.where(":id").equals(or).modify(lr);{const ur=b(or,this.schema.primKey.keyPath);if(ur===void 0)return ft(new X.InvalidArgument("Given object does not contain its primary key"));try{typeof lr!="function"?t(lr).forEach(cr=>{_(or,cr,lr[cr])}):lr(or,{value:or,primKey:ur})}catch{}return this.where(":id").equals(ur).modify(lr)}}put(or,lr){const{auto:ur,keyPath:cr}=this.schema.primKey;let dr=or;return cr&&ur&&(dr=Ct(cr)(or)),this._trans("readwrite",fr=>this.core.mutate({trans:fr,type:"put",values:[dr],keys:lr!=null?[lr]:null})).then(fr=>fr.numFailures?je.reject(fr.failures[0]):fr.lastResult).then(fr=>{if(cr)try{_(or,cr,fr)}catch{}return fr})}delete(or){return this._trans("readwrite",lr=>this.core.mutate({trans:lr,type:"delete",keys:[or]})).then(lr=>lr.numFailures?je.reject(lr.failures[0]):void 0)}clear(){return this._trans("readwrite",or=>this.core.mutate({trans:or,type:"deleteRange",range:At})).then(or=>or.numFailures?je.reject(or.failures[0]):void 0)}bulkGet(or){return this._trans("readonly",lr=>this.core.getMany({keys:or,trans:lr}).then(ur=>ur.map(cr=>this.hook.reading.fire(cr))))}bulkAdd(or,lr,ur){const cr=Array.isArray(lr)?lr:void 0,dr=(ur=ur||(cr?void 0:lr))?ur.allKeys:void 0;return this._trans("readwrite",fr=>{const{auto:pr,keyPath:mr}=this.schema.primKey;if(mr&&cr)throw new X.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(cr&&cr.length!==or.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");const hr=or.length;let gr=mr&&pr?or.map(Ct(mr)):or;return this.core.mutate({trans:fr,type:"add",keys:cr,values:gr,wantResults:dr}).then(({numFailures:vr,results:wr,lastResult:_r,failures:Cr})=>{if(vr===0)return dr?wr:_r;throw new G(`${this.name}.bulkAdd(): ${vr} of ${hr} operations failed`,Cr)})})}bulkPut(or,lr,ur){const cr=Array.isArray(lr)?lr:void 0,dr=(ur=ur||(cr?void 0:lr))?ur.allKeys:void 0;return this._trans("readwrite",fr=>{const{auto:pr,keyPath:mr}=this.schema.primKey;if(mr&&cr)throw new X.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(cr&&cr.length!==or.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");const hr=or.length;let gr=mr&&pr?or.map(Ct(mr)):or;return this.core.mutate({trans:fr,type:"put",keys:cr,values:gr,wantResults:dr}).then(({numFailures:vr,results:wr,lastResult:_r,failures:Cr})=>{if(vr===0)return dr?wr:_r;throw new G(`${this.name}.bulkPut(): ${vr} of ${hr} operations failed`,Cr)})})}bulkDelete(or){const lr=or.length;return this._trans("readwrite",ur=>this.core.mutate({trans:ur,type:"delete",keys:or})).then(({numFailures:ur,lastResult:cr,failures:dr})=>{if(ur===0)return cr;throw new G(`${this.name}.bulkDelete(): ${ur} of ${lr} operations failed`,dr)})}}function Dt(ar){var or={},lr=function(fr,pr){if(pr){for(var mr=arguments.length,hr=new Array(mr-1);--mr;)hr[mr-1]=arguments[mr];return or[fr].subscribe.apply(null,hr),ar}if(typeof fr=="string")return or[fr]};lr.addEventType=dr;for(var ur=1,cr=arguments.length;ur<cr;++ur)dr(arguments[ur]);return lr;function dr(fr,pr,mr){if(typeof fr!="object"){var hr;pr||(pr=ae),mr||(mr=ee);var gr={subscribers:[],fire:mr,subscribe:function(vr){gr.subscribers.indexOf(vr)===-1&&(gr.subscribers.push(vr),gr.fire=pr(gr.fire,vr))},unsubscribe:function(vr){gr.subscribers=gr.subscribers.filter(function(wr){return wr!==vr}),gr.fire=gr.subscribers.reduce(pr,mr)}};return or[fr]=lr[fr]=gr,gr}t(hr=fr).forEach(function(vr){var wr=hr[vr];if(n(wr))dr(vr,hr[vr][0],hr[vr][1]);else{if(wr!=="asap")throw new X.InvalidArgument("Invalid event config");var _r=dr(vr,te,function(){for(var Cr=arguments.length,Sr=new Array(Cr);Cr--;)Sr[Cr]=arguments[Cr];_r.subscribers.forEach(function(Dr){v(function(){Dr.apply(null,Sr)})})})}})}}function It(ar,or){return c(or).from({prototype:ar}),or}function Bt(ar,or){return!(ar.filter||ar.algorithm||ar.or)&&(or?ar.justLimit:!ar.replayFilter)}function Tt(ar,or){ar.filter=St(ar.filter,or)}function Rt(ar,or,lr){var ur=ar.replayFilter;ar.replayFilter=ur?()=>St(ur(),or()):or,ar.justLimit=lr&&!ur}function Ft(ar,or){if(ar.isPrimKey)return or.primaryKey;const lr=or.getIndexByKeyPath(ar.index);if(!lr)throw new X.Schema("KeyPath "+ar.index+" on object store "+or.name+" is not indexed");return lr}function Mt(ar,or,lr){const ur=Ft(ar,or.schema);return or.openCursor({trans:lr,values:!ar.keysOnly,reverse:ar.dir==="prev",unique:!!ar.unique,query:{index:ur,range:ar.range}})}function Nt(ar,or,lr,ur){const cr=ar.replayFilter?St(ar.filter,ar.replayFilter()):ar.filter;if(ar.or){const dr={},fr=(pr,mr,hr)=>{if(!cr||cr(mr,hr,wr=>mr.stop(wr),wr=>mr.fail(wr))){var gr=mr.primaryKey,vr=""+gr;vr==="[object ArrayBuffer]"&&(vr=""+new Uint8Array(gr)),o(dr,vr)||(dr[vr]=!0,or(pr,mr,hr))}};return Promise.all([ar.or._iterate(fr,lr),qt(Mt(ar,ur,lr),ar.algorithm,fr,!ar.keysOnly&&ar.valueMapper)])}return qt(Mt(ar,ur,lr),St(ar.algorithm,cr),or,!ar.keysOnly&&ar.valueMapper)}function qt(ar,or,lr,ur){var cr=Ye(ur?(dr,fr,pr)=>lr(ur(dr),fr,pr):lr);return ar.then(dr=>{if(dr)return dr.start(()=>{var fr=()=>dr.continue();or&&!or(dr,pr=>fr=pr,pr=>{dr.stop(pr),fr=ee},pr=>{dr.fail(pr),fr=ee})||cr(dr.value,dr,pr=>fr=pr),fr()})})}function $t(ar,or){try{const lr=Ut(ar),ur=Ut(or);if(lr!==ur)return lr==="Array"?1:ur==="Array"?-1:lr==="binary"?1:ur==="binary"?-1:lr==="string"?1:ur==="string"?-1:lr==="Date"?1:ur!=="Date"?NaN:-1;switch(lr){case"number":case"Date":case"string":return ar>or?1:ar<or?-1:0;case"binary":return function(cr,dr){const fr=cr.length,pr=dr.length,mr=fr<pr?fr:pr;for(let hr=0;hr<mr;++hr)if(cr[hr]!==dr[hr])return cr[hr]<dr[hr]?-1:1;return fr===pr?0:fr<pr?-1:1}(Lt(ar),Lt(or));case"Array":return function(cr,dr){const fr=cr.length,pr=dr.length,mr=fr<pr?fr:pr;for(let hr=0;hr<mr;++hr){const gr=$t(cr[hr],dr[hr]);if(gr!==0)return gr}return fr===pr?0:fr<pr?-1:1}(ar,or)}}catch{}return NaN}function Ut(ar){const or=typeof ar;if(or!=="object")return or;if(ArrayBuffer.isView(ar))return"binary";const lr=C(ar);return lr==="ArrayBuffer"?"binary":lr}function Lt(ar){return ar instanceof Uint8Array?ar:ArrayBuffer.isView(ar)?new Uint8Array(ar.buffer,ar.byteOffset,ar.byteLength):new Uint8Array(ar)}class Vt{_read(or,lr){var ur=this._ctx;return ur.error?ur.table._trans(null,ft.bind(null,ur.error)):ur.table._trans("readonly",or).then(lr)}_write(or){var lr=this._ctx;return lr.error?lr.table._trans(null,ft.bind(null,lr.error)):lr.table._trans("readwrite",or,"locked")}_addAlgorithm(or){var lr=this._ctx;lr.algorithm=St(lr.algorithm,or)}_iterate(or,lr){return Nt(this._ctx,or,lr,this._ctx.table.core)}clone(or){var lr=Object.create(this.constructor.prototype),ur=Object.create(this._ctx);return or&&r(ur,or),lr._ctx=ur,lr}raw(){return this._ctx.valueMapper=null,this}each(or){var lr=this._ctx;return this._read(ur=>Nt(lr,or,ur,lr.table.core))}count(or){return this._read(lr=>{const ur=this._ctx,cr=ur.table.core;if(Bt(ur,!0))return cr.count({trans:lr,query:{index:Ft(ur,cr.schema),range:ur.range}}).then(fr=>Math.min(fr,ur.limit));var dr=0;return Nt(ur,()=>(++dr,!1),lr,cr).then(()=>dr)}).then(or)}sortBy(or,lr){const ur=or.split(".").reverse(),cr=ur[0],dr=ur.length-1;function fr(hr,gr){return gr?fr(hr[ur[gr]],gr-1):hr[cr]}var pr=this._ctx.dir==="next"?1:-1;function mr(hr,gr){var vr=fr(hr,dr),wr=fr(gr,dr);return vr<wr?-pr:vr>wr?pr:0}return this.toArray(function(hr){return hr.sort(mr)}).then(lr)}toArray(or){return this._read(lr=>{var ur=this._ctx;if(ur.dir==="next"&&Bt(ur,!0)&&ur.limit>0){const{valueMapper:cr}=ur,dr=Ft(ur,ur.table.core.schema);return ur.table.core.query({trans:lr,limit:ur.limit,values:!0,query:{index:dr,range:ur.range}}).then(({result:fr})=>cr?fr.map(cr):fr)}{const cr=[];return Nt(ur,dr=>cr.push(dr),lr,ur.table.core).then(()=>cr)}},or)}offset(or){var lr=this._ctx;return or<=0||(lr.offset+=or,Bt(lr)?Rt(lr,()=>{var ur=or;return(cr,dr)=>ur===0||(ur===1?(--ur,!1):(dr(()=>{cr.advance(ur),ur=0}),!1))}):Rt(lr,()=>{var ur=or;return()=>--ur<0})),this}limit(or){return this._ctx.limit=Math.min(this._ctx.limit,or),Rt(this._ctx,()=>{var lr=or;return function(ur,cr,dr){return--lr<=0&&cr(dr),lr>=0}},!0),this}until(or,lr){return Tt(this._ctx,function(ur,cr,dr){return!or(ur.value)||(cr(dr),lr)}),this}first(or){return this.limit(1).toArray(function(lr){return lr[0]}).then(or)}last(or){return this.reverse().first(or)}filter(or){var lr,ur;return Tt(this._ctx,function(cr){return or(cr.value)}),lr=this._ctx,ur=or,lr.isMatch=St(lr.isMatch,ur),this}and(or){return this.filter(or)}or(or){return new this.db.WhereClause(this._ctx.table,or,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(or){var lr=this._ctx;return lr.keysOnly=!lr.isMatch,this.each(function(ur,cr){or(cr.key,cr)})}eachUniqueKey(or){return this._ctx.unique="unique",this.eachKey(or)}eachPrimaryKey(or){var lr=this._ctx;return lr.keysOnly=!lr.isMatch,this.each(function(ur,cr){or(cr.primaryKey,cr)})}keys(or){var lr=this._ctx;lr.keysOnly=!lr.isMatch;var ur=[];return this.each(function(cr,dr){ur.push(dr.key)}).then(function(){return ur}).then(or)}primaryKeys(or){var lr=this._ctx;if(lr.dir==="next"&&Bt(lr,!0)&&lr.limit>0)return this._read(cr=>{var dr=Ft(lr,lr.table.core.schema);return lr.table.core.query({trans:cr,values:!1,limit:lr.limit,query:{index:dr,range:lr.range}})}).then(({result:cr})=>cr).then(or);lr.keysOnly=!lr.isMatch;var ur=[];return this.each(function(cr,dr){ur.push(dr.primaryKey)}).then(function(){return ur}).then(or)}uniqueKeys(or){return this._ctx.unique="unique",this.keys(or)}firstKey(or){return this.limit(1).keys(function(lr){return lr[0]}).then(or)}lastKey(or){return this.reverse().firstKey(or)}distinct(){var or=this._ctx,lr=or.index&&or.table.schema.idxByName[or.index];if(!lr||!lr.multi)return this;var ur={};return Tt(this._ctx,function(cr){var dr=cr.primaryKey.toString(),fr=o(ur,dr);return ur[dr]=!0,!fr}),this}modify(or){var lr=this._ctx;return this._write(ur=>{var cr;if(typeof or=="function")cr=or;else{var dr=t(or),fr=dr.length;cr=function(Sr){for(var Dr=!1,Er=0;Er<fr;++Er){var kr=dr[Er],Ir=or[kr];b(Sr,kr)!==Ir&&(_(Sr,kr,Ir),Dr=!0)}return Dr}}const pr=lr.table.core,{outbound:mr,extractKey:hr}=pr.schema.primaryKey,gr=this.db._options.modifyChunkSize||200,vr=[];let wr=0;const _r=[],Cr=(Sr,Dr)=>{const{failures:Er,numFailures:kr}=Dr;wr+=Sr-kr;for(let Ir of t(Er))vr.push(Er[Ir])};return this.clone().primaryKeys().then(Sr=>{const Dr=Er=>{const kr=Math.min(gr,Sr.length-Er);return pr.getMany({trans:ur,keys:Sr.slice(Er,Er+kr),cache:"immutable"}).then(Ir=>{const Br=[],Nr=[],Mr=mr?[]:null,xr=[];for(let Or=0;Or<kr;++Or){const qr=Ir[Or],Jr={value:O(qr),primKey:Sr[Er+Or]};cr.call(Jr,Jr.value,Jr)!==!1&&(Jr.value==null?xr.push(Sr[Er+Or]):mr||$t(hr(qr),hr(Jr.value))===0?(Nr.push(Jr.value),mr&&Mr.push(Sr[Er+Or])):(xr.push(Sr[Er+Or]),Br.push(Jr.value)))}const Rr=Bt(lr)&&lr.limit===1/0&&(typeof or!="function"||or===Wt)&&{index:lr.index,range:lr.range};return Promise.resolve(Br.length>0&&pr.mutate({trans:ur,type:"add",values:Br}).then(Or=>{for(let qr in Or.failures)xr.splice(parseInt(qr),1);Cr(Br.length,Or)})).then(()=>(Nr.length>0||Rr&&typeof or=="object")&&pr.mutate({trans:ur,type:"put",keys:Mr,values:Nr,criteria:Rr,changeSpec:typeof or!="function"&&or}).then(Or=>Cr(Nr.length,Or))).then(()=>(xr.length>0||Rr&&or===Wt)&&pr.mutate({trans:ur,type:"delete",keys:xr,criteria:Rr}).then(Or=>Cr(xr.length,Or))).then(()=>Sr.length>Er+kr&&Dr(Er+gr))})};return Dr(0).then(()=>{if(vr.length>0)throw new z("Error modifying one or more objects",vr,wr,_r);return Sr.length})})})}delete(){var or=this._ctx,lr=or.range;return Bt(or)&&(or.isPrimKey&&!kt||lr.type===3)?this._write(ur=>{const{primaryKey:cr}=or.table.core.schema,dr=lr;return or.table.core.count({trans:ur,query:{index:cr,range:dr}}).then(fr=>or.table.core.mutate({trans:ur,type:"deleteRange",range:dr}).then(({failures:pr,lastResult:mr,results:hr,numFailures:gr})=>{if(gr)throw new z("Could not delete some values",Object.keys(pr).map(vr=>pr[vr]),fr-gr);return fr-gr}))}):this.modify(Wt)}}const Wt=(ar,or)=>or.value=null;function Yt(ar,or){return ar<or?-1:ar===or?0:1}function zt(ar,or){return ar>or?-1:ar===or?0:1}function Gt(ar,or,lr){var ur=ar instanceof en?new ar.Collection(ar):ar;return ur._ctx.error=lr?new lr(or):new TypeError(or),ur}function Ht(ar){return new ar.Collection(ar,()=>Zt("")).limit(0)}function Qt(ar,or,lr,ur,cr,dr){for(var fr=Math.min(ar.length,ur.length),pr=-1,mr=0;mr<fr;++mr){var hr=or[mr];if(hr!==ur[mr])return cr(ar[mr],lr[mr])<0?ar.substr(0,mr)+lr[mr]+lr.substr(mr+1):cr(ar[mr],ur[mr])<0?ar.substr(0,mr)+ur[mr]+lr.substr(mr+1):pr>=0?ar.substr(0,pr)+or[pr]+lr.substr(pr+1):null;cr(ar[mr],hr)<0&&(pr=mr)}return fr<ur.length&&dr==="next"?ar+lr.substr(ar.length):fr<ar.length&&dr==="prev"?ar.substr(0,lr.length):pr<0?null:ar.substr(0,pr)+ur[pr]+lr.substr(pr+1)}function Xt(ar,or,lr,ur){var cr,dr,fr,pr,mr,hr,gr,vr=lr.length;if(!lr.every(Sr=>typeof Sr=="string"))return Gt(ar,bt);function wr(Sr){cr=function(Er){return Er==="next"?kr=>kr.toUpperCase():kr=>kr.toLowerCase()}(Sr),dr=function(Er){return Er==="next"?kr=>kr.toLowerCase():kr=>kr.toUpperCase()}(Sr),fr=Sr==="next"?Yt:zt;var Dr=lr.map(function(Er){return{lower:dr(Er),upper:cr(Er)}}).sort(function(Er,kr){return fr(Er.lower,kr.lower)});pr=Dr.map(function(Er){return Er.upper}),mr=Dr.map(function(Er){return Er.lower}),hr=Sr,gr=Sr==="next"?"":ur}wr("next");var _r=new ar.Collection(ar,()=>Jt(pr[0],mr[vr-1]+ur));_r._ondirectionchange=function(Sr){wr(Sr)};var Cr=0;return _r._addAlgorithm(function(Sr,Dr,Er){var kr=Sr.key;if(typeof kr!="string")return!1;var Ir=dr(kr);if(or(Ir,mr,Cr))return!0;for(var Br=null,Nr=Cr;Nr<vr;++Nr){var Mr=Qt(kr,Ir,pr[Nr],mr[Nr],fr,hr);Mr===null&&Br===null?Cr=Nr+1:(Br===null||fr(Br,Mr)>0)&&(Br=Mr)}return Dr(Br!==null?function(){Sr.continue(Br+gr)}:Er),!1}),_r}function Jt(ar,or,lr,ur){return{type:2,lower:ar,upper:or,lowerOpen:lr,upperOpen:ur}}function Zt(ar){return{type:1,lower:ar,upper:ar}}class en{get Collection(){return this._ctx.table.db.Collection}between(or,lr,ur,cr){ur=ur!==!1,cr=cr===!0;try{return this._cmp(or,lr)>0||this._cmp(or,lr)===0&&(ur||cr)&&(!ur||!cr)?Ht(this):new this.Collection(this,()=>Jt(or,lr,!ur,!cr))}catch{return Gt(this,gt)}}equals(or){return or==null?Gt(this,gt):new this.Collection(this,()=>Zt(or))}above(or){return or==null?Gt(this,gt):new this.Collection(this,()=>Jt(or,void 0,!0))}aboveOrEqual(or){return or==null?Gt(this,gt):new this.Collection(this,()=>Jt(or,void 0,!1))}below(or){return or==null?Gt(this,gt):new this.Collection(this,()=>Jt(void 0,or,!1,!0))}belowOrEqual(or){return or==null?Gt(this,gt):new this.Collection(this,()=>Jt(void 0,or))}startsWith(or){return typeof or!="string"?Gt(this,bt):this.between(or,or+mt,!0,!0)}startsWithIgnoreCase(or){return or===""?this.startsWith(or):Xt(this,(lr,ur)=>lr.indexOf(ur[0])===0,[or],mt)}equalsIgnoreCase(or){return Xt(this,(lr,ur)=>lr===ur[0],[or],"")}anyOfIgnoreCase(){var or=B.apply(I,arguments);return or.length===0?Ht(this):Xt(this,(lr,ur)=>ur.indexOf(lr)!==-1,or,"")}startsWithAnyOfIgnoreCase(){var or=B.apply(I,arguments);return or.length===0?Ht(this):Xt(this,(lr,ur)=>ur.some(cr=>lr.indexOf(cr)===0),or,mt)}anyOf(){const or=B.apply(I,arguments);let lr=this._cmp;try{or.sort(lr)}catch{return Gt(this,gt)}if(or.length===0)return Ht(this);const ur=new this.Collection(this,()=>Jt(or[0],or[or.length-1]));ur._ondirectionchange=dr=>{lr=dr==="next"?this._ascending:this._descending,or.sort(lr)};let cr=0;return ur._addAlgorithm((dr,fr,pr)=>{const mr=dr.key;for(;lr(mr,or[cr])>0;)if(++cr,cr===or.length)return fr(pr),!1;return lr(mr,or[cr])===0||(fr(()=>{dr.continue(or[cr])}),!1)}),ur}notEqual(or){return this.inAnyRange([[vt,or],[or,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const or=B.apply(I,arguments);if(or.length===0)return new this.Collection(this);try{or.sort(this._ascending)}catch{return Gt(this,gt)}const lr=or.reduce((ur,cr)=>ur?ur.concat([[ur[ur.length-1][1],cr]]):[[vt,cr]],null);return lr.push([or[or.length-1],this.db._maxKey]),this.inAnyRange(lr,{includeLowers:!1,includeUppers:!1})}inAnyRange(or,lr){const ur=this._cmp,cr=this._ascending,dr=this._descending,fr=this._min,pr=this._max;if(or.length===0)return Ht(this);if(!or.every(kr=>kr[0]!==void 0&&kr[1]!==void 0&&cr(kr[0],kr[1])<=0))return Gt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",X.InvalidArgument);const mr=!lr||lr.includeLowers!==!1,hr=lr&&lr.includeUppers===!0;let gr,vr=cr;function wr(kr,Ir){return vr(kr[0],Ir[0])}try{gr=or.reduce(function(kr,Ir){let Br=0,Nr=kr.length;for(;Br<Nr;++Br){const Mr=kr[Br];if(ur(Ir[0],Mr[1])<0&&ur(Ir[1],Mr[0])>0){Mr[0]=fr(Mr[0],Ir[0]),Mr[1]=pr(Mr[1],Ir[1]);break}}return Br===Nr&&kr.push(Ir),kr},[]),gr.sort(wr)}catch{return Gt(this,gt)}let _r=0;const Cr=hr?kr=>cr(kr,gr[_r][1])>0:kr=>cr(kr,gr[_r][1])>=0,Sr=mr?kr=>dr(kr,gr[_r][0])>0:kr=>dr(kr,gr[_r][0])>=0;let Dr=Cr;const Er=new this.Collection(this,()=>Jt(gr[0][0],gr[gr.length-1][1],!mr,!hr));return Er._ondirectionchange=kr=>{kr==="next"?(Dr=Cr,vr=cr):(Dr=Sr,vr=dr),gr.sort(wr)},Er._addAlgorithm((kr,Ir,Br)=>{for(var Nr=kr.key;Dr(Nr);)if(++_r,_r===gr.length)return Ir(Br),!1;return!!function(Mr){return!Cr(Mr)&&!Sr(Mr)}(Nr)||(this._cmp(Nr,gr[_r][1])===0||this._cmp(Nr,gr[_r][0])===0||Ir(()=>{vr===cr?kr.continue(gr[_r][0]):kr.continue(gr[_r][1])}),!1)}),Er}startsWithAnyOf(){const or=B.apply(I,arguments);return or.every(lr=>typeof lr=="string")?or.length===0?Ht(this):this.inAnyRange(or.map(lr=>[lr,lr+mt])):Gt(this,"startsWithAnyOf() only works with strings")}}function tn(ar){return Ye(function(or){return nn(or),ar(or.target.error),!1})}function nn(ar){ar.stopPropagation&&ar.stopPropagation(),ar.preventDefault&&ar.preventDefault()}const rn="storagemutated",sn="x-storagemutated-1",on=Dt(null,rn);class an{_lock(){return m(!Oe.global),++this._reculock,this._reculock!==1||Oe.global||(Oe.lockOwnerFor=this),this}_unlock(){if(m(!Oe.global),--this._reculock==0)for(Oe.global||(Oe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var or=this._blockedFuncs.shift();try{at(or[1],or[0])}catch{}}return this}_locked(){return this._reculock&&Oe.lockOwnerFor!==this}create(or){if(!this.mode)return this;const lr=this.db.idbdb,ur=this.db._state.dbOpenError;if(m(!this.idbtrans),!or&&!lr)switch(ur&&ur.name){case"DatabaseClosedError":throw new X.DatabaseClosed(ur);case"MissingAPIError":throw new X.MissingAPI(ur.message,ur);default:throw new X.OpenFailed(ur)}if(!this.active)throw new X.TransactionInactive;return m(this._completion._state===null),(or=this.idbtrans=or||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):lr.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Ye(cr=>{nn(cr),this._reject(or.error)}),or.onabort=Ye(cr=>{nn(cr),this.active&&this._reject(new X.Abort(or.error)),this.active=!1,this.on("abort").fire(cr)}),or.oncomplete=Ye(()=>{this.active=!1,this._resolve(),"mutatedParts"in or&&on.storagemutated.fire(or.mutatedParts)}),this}_promise(or,lr,ur){if(or==="readwrite"&&this.mode!=="readwrite")return ft(new X.ReadOnly("Transaction is readonly"));if(!this.active)return ft(new X.TransactionInactive);if(this._locked())return new je((dr,fr)=>{this._blockedFuncs.push([()=>{this._promise(or,lr,ur).then(dr,fr)},Oe])});if(ur)return Ze(()=>{var dr=new je((fr,pr)=>{this._lock();const mr=lr(fr,pr,this);mr&&mr.then&&mr.then(fr,pr)});return dr.finally(()=>this._unlock()),dr._lib=!0,dr});var cr=new je((dr,fr)=>{var pr=lr(dr,fr,this);pr&&pr.then&&pr.then(dr,fr)});return cr._lib=!0,cr}_root(){return this.parent?this.parent._root():this}waitFor(or){var lr=this._root();const ur=je.resolve(or);if(lr._waitingFor)lr._waitingFor=lr._waitingFor.then(()=>ur);else{lr._waitingFor=ur,lr._waitingQueue=[];var cr=lr.idbtrans.objectStore(lr.storeNames[0]);(function fr(){for(++lr._spinCount;lr._waitingQueue.length;)lr._waitingQueue.shift()();lr._waitingFor&&(cr.get(-1/0).onsuccess=fr)})()}var dr=lr._waitingFor;return new je((fr,pr)=>{ur.then(mr=>lr._waitingQueue.push(Ye(fr.bind(null,mr))),mr=>lr._waitingQueue.push(Ye(pr.bind(null,mr)))).finally(()=>{lr._waitingFor===dr&&(lr._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new X.Abort))}table(or){const lr=this._memoizedTables||(this._memoizedTables={});if(o(lr,or))return lr[or];const ur=this.schema[or];if(!ur)throw new X.NotFound("Table "+or+" not part of transaction");const cr=new this.db.Table(or,ur,this);return cr.core=this.db.core.table(or),lr[or]=cr,cr}}function un(ar,or,lr,ur,cr,dr,fr){return{name:ar,keyPath:or,unique:lr,multi:ur,auto:cr,compound:dr,src:(lr&&!fr?"&":"")+(ur?"*":"")+(cr?"++":"")+ln(or)}}function ln(ar){return typeof ar=="string"?ar:ar?"["+[].join.call(ar,"+")+"]":""}function cn(ar,or,lr){return{name:ar,primKey:or,indexes:lr,mappedClass:null,idxByName:g(lr,ur=>[ur.name,ur])}}let hn=ar=>{try{return ar.only([[]]),hn=()=>[[]],[[]]}catch{return hn=()=>mt,mt}};function dn(ar){return ar==null?()=>{}:typeof ar=="string"?function(or){return or.split(".").length===1?ur=>ur[or]:ur=>b(ur,or)}(ar):or=>b(or,ar)}function fn(ar){return[].slice.call(ar)}let pn=0;function yn(ar){return ar==null?":id":typeof ar=="string"?ar:`[${ar.join("+")}]`}function mn(ar,or,lr){function ur(mr){if(mr.type===3)return null;if(mr.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:hr,upper:gr,lowerOpen:vr,upperOpen:wr}=mr;return hr===void 0?gr===void 0?null:or.upperBound(gr,!!wr):gr===void 0?or.lowerBound(hr,!!vr):or.bound(hr,gr,!!vr,!!wr)}const{schema:cr,hasGetAll:dr}=function(mr,hr){const gr=fn(mr.objectStoreNames);return{schema:{name:mr.name,tables:gr.map(vr=>hr.objectStore(vr)).map(vr=>{const{keyPath:wr,autoIncrement:_r}=vr,Cr=n(wr),Sr=wr==null,Dr={},Er={name:vr.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Sr,compound:Cr,keyPath:wr,autoIncrement:_r,unique:!0,extractKey:dn(wr)},indexes:fn(vr.indexNames).map(kr=>vr.index(kr)).map(kr=>{const{name:Ir,unique:Br,multiEntry:Nr,keyPath:Mr}=kr,xr={name:Ir,compound:n(Mr),keyPath:Mr,unique:Br,multiEntry:Nr,extractKey:dn(Mr)};return Dr[yn(Mr)]=xr,xr}),getIndexByKeyPath:kr=>Dr[yn(kr)]};return Dr[":id"]=Er.primaryKey,wr!=null&&(Dr[yn(wr)]=Er.primaryKey),Er})},hasGetAll:gr.length>0&&"getAll"in hr.objectStore(gr[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(ar,lr),fr=cr.tables.map(mr=>function(hr){const gr=hr.name;return{name:gr,schema:hr,mutate:function({trans:vr,type:wr,keys:_r,values:Cr,range:Sr}){return new Promise((Dr,Er)=>{Dr=Ye(Dr);const kr=vr.objectStore(gr),Ir=kr.keyPath==null,Br=wr==="put"||wr==="add";if(!Br&&wr!=="delete"&&wr!=="deleteRange")throw new Error("Invalid operation type: "+wr);const{length:Nr}=_r||Cr||{length:1};if(_r&&Cr&&_r.length!==Cr.length)throw new Error("Given keys array must have same length as given values array.");if(Nr===0)return Dr({numFailures:0,failures:{},results:[],lastResult:void 0});let Mr;const xr=[],Rr=[];let Or=0;const qr=na=>{++Or,nn(na)};if(wr==="deleteRange"){if(Sr.type===4)return Dr({numFailures:Or,failures:Rr,results:[],lastResult:void 0});Sr.type===3?xr.push(Mr=kr.clear()):xr.push(Mr=kr.delete(ur(Sr)))}else{const[na,Wr]=Br?Ir?[Cr,_r]:[Cr,null]:[_r,null];if(Br)for(let Gr=0;Gr<Nr;++Gr)xr.push(Mr=Wr&&Wr[Gr]!==void 0?kr[wr](na[Gr],Wr[Gr]):kr[wr](na[Gr])),Mr.onerror=qr;else for(let Gr=0;Gr<Nr;++Gr)xr.push(Mr=kr[wr](na[Gr])),Mr.onerror=qr}const Jr=na=>{const Wr=na.target.result;xr.forEach((Gr,is)=>Gr.error!=null&&(Rr[is]=Gr.error)),Dr({numFailures:Or,failures:Rr,results:wr==="delete"?_r:xr.map(Gr=>Gr.result),lastResult:Wr})};Mr.onerror=na=>{qr(na),Jr(na)},Mr.onsuccess=Jr})},getMany:({trans:vr,keys:wr})=>new Promise((_r,Cr)=>{_r=Ye(_r);const Sr=vr.objectStore(gr),Dr=wr.length,Er=new Array(Dr);let kr,Ir=0,Br=0;const Nr=xr=>{const Rr=xr.target;Er[Rr._pos]=Rr.result,++Br===Ir&&_r(Er)},Mr=tn(Cr);for(let xr=0;xr<Dr;++xr)wr[xr]!=null&&(kr=Sr.get(wr[xr]),kr._pos=xr,kr.onsuccess=Nr,kr.onerror=Mr,++Ir);Ir===0&&_r(Er)}),get:({trans:vr,key:wr})=>new Promise((_r,Cr)=>{_r=Ye(_r);const Sr=vr.objectStore(gr).get(wr);Sr.onsuccess=Dr=>_r(Dr.target.result),Sr.onerror=tn(Cr)}),query:function(vr){return wr=>new Promise((_r,Cr)=>{_r=Ye(_r);const{trans:Sr,values:Dr,limit:Er,query:kr}=wr,Ir=Er===1/0?void 0:Er,{index:Br,range:Nr}=kr,Mr=Sr.objectStore(gr),xr=Br.isPrimaryKey?Mr:Mr.index(Br.name),Rr=ur(Nr);if(Er===0)return _r({result:[]});if(vr){const Or=Dr?xr.getAll(Rr,Ir):xr.getAllKeys(Rr,Ir);Or.onsuccess=qr=>_r({result:qr.target.result}),Or.onerror=tn(Cr)}else{let Or=0;const qr=Dr||!("openKeyCursor"in xr)?xr.openCursor(Rr):xr.openKeyCursor(Rr),Jr=[];qr.onsuccess=na=>{const Wr=qr.result;return Wr?(Jr.push(Dr?Wr.value:Wr.primaryKey),++Or===Er?_r({result:Jr}):void Wr.continue()):_r({result:Jr})},qr.onerror=tn(Cr)}})}(dr),openCursor:function({trans:vr,values:wr,query:_r,reverse:Cr,unique:Sr}){return new Promise((Dr,Er)=>{Dr=Ye(Dr);const{index:kr,range:Ir}=_r,Br=vr.objectStore(gr),Nr=kr.isPrimaryKey?Br:Br.index(kr.name),Mr=Cr?Sr?"prevunique":"prev":Sr?"nextunique":"next",xr=wr||!("openKeyCursor"in Nr)?Nr.openCursor(ur(Ir),Mr):Nr.openKeyCursor(ur(Ir),Mr);xr.onerror=tn(Er),xr.onsuccess=Ye(Rr=>{const Or=xr.result;if(!Or)return void Dr(null);Or.___id=++pn,Or.done=!1;const qr=Or.continue.bind(Or);let Jr=Or.continuePrimaryKey;Jr&&(Jr=Jr.bind(Or));const na=Or.advance.bind(Or),Wr=()=>{throw new Error("Cursor not stopped")};Or.trans=vr,Or.stop=Or.continue=Or.continuePrimaryKey=Or.advance=()=>{throw new Error("Cursor not started")},Or.fail=Ye(Er),Or.next=function(){let Gr=1;return this.start(()=>Gr--?this.continue():this.stop()).then(()=>this)},Or.start=Gr=>{const is=new Promise((ss,_i)=>{ss=Ye(ss),xr.onerror=tn(_i),Or.fail=_i,Or.stop=ba=>{Or.stop=Or.continue=Or.continuePrimaryKey=Or.advance=Wr,ss(ba)}}),es=()=>{if(xr.result)try{Gr()}catch(ss){Or.fail(ss)}else Or.done=!0,Or.start=()=>{throw new Error("Cursor behind last entry")},Or.stop()};return xr.onsuccess=Ye(ss=>{xr.onsuccess=es,es()}),Or.continue=qr,Or.continuePrimaryKey=Jr,Or.advance=na,es(),is},Dr(Or)},Er)})},count({query:vr,trans:wr}){const{index:_r,range:Cr}=vr;return new Promise((Sr,Dr)=>{const Er=wr.objectStore(gr),kr=_r.isPrimaryKey?Er:Er.index(_r.name),Ir=ur(Cr),Br=Ir?kr.count(Ir):kr.count();Br.onsuccess=Ye(Nr=>Sr(Nr.target.result)),Br.onerror=tn(Dr)})}}}(mr)),pr={};return fr.forEach(mr=>pr[mr.name]=mr),{stack:"dbcore",transaction:ar.transaction.bind(ar),table(mr){if(!pr[mr])throw new Error(`Table '${mr}' not found`);return pr[mr]},MIN_KEY:-1/0,MAX_KEY:hn(or),schema:cr}}function vn({_novip:ar},or){const lr=or.db,ur=function(cr,dr,{IDBKeyRange:fr,indexedDB:pr},mr){return{dbcore:function(gr,vr){return vr.reduce((wr,{create:_r})=>({...wr,..._r(wr)}),gr)}(mn(dr,fr,mr),cr.dbcore)}}(ar._middlewares,lr,ar._deps,or);ar.core=ur.dbcore,ar.tables.forEach(cr=>{const dr=cr.name;ar.core.schema.tables.some(fr=>fr.name===dr)&&(cr.core=ar.core.table(dr),ar[dr]instanceof ar.Table&&(ar[dr].core=cr.core))})}function gn({_novip:ar},or,lr,ur){lr.forEach(cr=>{const dr=ur[cr];or.forEach(fr=>{const pr=d(fr,cr);(!pr||"value"in pr&&pr.value===void 0)&&(fr===ar.Transaction.prototype||fr instanceof ar.Transaction?l(fr,cr,{get(){return this.table(cr)},set(mr){u(this,cr,{value:mr,writable:!0,configurable:!0,enumerable:!0})}}):fr[cr]=new ar.Table(cr,dr))})})}function bn({_novip:ar},or){or.forEach(lr=>{for(let ur in lr)lr[ur]instanceof ar.Table&&delete lr[ur]})}function _n(ar,or){return ar._cfg.version-or._cfg.version}function wn(ar,or,lr,ur){const cr=ar._dbSchema,dr=ar._createTransaction("readwrite",ar._storeNames,cr);dr.create(lr),dr._completion.catch(ur);const fr=dr._reject.bind(dr),pr=Oe.transless||Oe;Ze(()=>{Oe.trans=dr,Oe.transless=pr,or===0?(t(cr).forEach(mr=>{kn(lr,mr,cr[mr].primKey,cr[mr].indexes)}),vn(ar,lr),je.follow(()=>ar.on.populate.fire(dr)).catch(fr)):function({_novip:mr},hr,gr,vr){const wr=[],_r=mr._versions;let Cr=mr._dbSchema=Pn(mr,mr.idbdb,vr),Sr=!1;const Dr=_r.filter(kr=>kr._cfg.version>=hr);function Er(){return wr.length?je.resolve(wr.shift()(gr.idbtrans)).then(Er):je.resolve()}return Dr.forEach(kr=>{wr.push(()=>{const Ir=Cr,Br=kr._cfg.dbschema;Kn(mr,Ir,vr),Kn(mr,Br,vr),Cr=mr._dbSchema=Br;const Nr=xn(Ir,Br);Nr.add.forEach(xr=>{kn(vr,xr[0],xr[1].primKey,xr[1].indexes)}),Nr.change.forEach(xr=>{if(xr.recreate)throw new X.Upgrade("Not yet support for changing primary key");{const Rr=vr.objectStore(xr.name);xr.add.forEach(Or=>En(Rr,Or)),xr.change.forEach(Or=>{Rr.deleteIndex(Or.name),En(Rr,Or)}),xr.del.forEach(Or=>Rr.deleteIndex(Or))}});const Mr=kr._cfg.contentUpgrade;if(Mr&&kr._cfg.version>hr){vn(mr,vr),gr._memoizedTables={},Sr=!0;let xr=w(Br);Nr.del.forEach(Jr=>{xr[Jr]=Ir[Jr]}),bn(mr,[mr.Transaction.prototype]),gn(mr,[mr.Transaction.prototype],t(xr),xr),gr.schema=xr;const Rr=T(Mr);let Or;Rr&&et();const qr=je.follow(()=>{if(Or=Mr(gr),Or&&Rr){var Jr=tt.bind(null,null);Or.then(Jr,Jr)}});return Or&&typeof Or.then=="function"?je.resolve(Or):qr.then(()=>Or)}}),wr.push(Ir=>{(!Sr||!xt)&&function(Br,Nr){[].slice.call(Nr.db.objectStoreNames).forEach(Mr=>Br[Mr]==null&&Nr.db.deleteObjectStore(Mr))}(kr._cfg.dbschema,Ir),bn(mr,[mr.Transaction.prototype]),gn(mr,[mr.Transaction.prototype],mr._storeNames,mr._dbSchema),gr.schema=mr._dbSchema})}),Er().then(()=>{var kr,Ir;Ir=vr,t(kr=Cr).forEach(Br=>{Ir.db.objectStoreNames.contains(Br)||kn(Ir,Br,kr[Br].primKey,kr[Br].indexes)})})}(ar,or,dr,lr).catch(fr)})}function xn(ar,or){const lr={del:[],add:[],change:[]};let ur;for(ur in ar)or[ur]||lr.del.push(ur);for(ur in or){const cr=ar[ur],dr=or[ur];if(cr){const fr={name:ur,def:dr,recreate:!1,del:[],add:[],change:[]};if(""+(cr.primKey.keyPath||"")!=""+(dr.primKey.keyPath||"")||cr.primKey.auto!==dr.primKey.auto&&!wt)fr.recreate=!0,lr.change.push(fr);else{const pr=cr.idxByName,mr=dr.idxByName;let hr;for(hr in pr)mr[hr]||fr.del.push(hr);for(hr in mr){const gr=pr[hr],vr=mr[hr];gr?gr.src!==vr.src&&fr.change.push(vr):fr.add.push(vr)}(fr.del.length>0||fr.add.length>0||fr.change.length>0)&&lr.change.push(fr)}}else lr.add.push([ur,dr])}return lr}function kn(ar,or,lr,ur){const cr=ar.db.createObjectStore(or,lr.keyPath?{keyPath:lr.keyPath,autoIncrement:lr.auto}:{autoIncrement:lr.auto});return ur.forEach(dr=>En(cr,dr)),cr}function En(ar,or){ar.createIndex(or.name,or.keyPath,{unique:or.unique,multiEntry:or.multi})}function Pn(ar,or,lr){const ur={};return p(or.objectStoreNames,0).forEach(cr=>{const dr=lr.objectStore(cr);let fr=dr.keyPath;const pr=un(ln(fr),fr||"",!1,!1,!!dr.autoIncrement,fr&&typeof fr!="string",!0),mr=[];for(let gr=0;gr<dr.indexNames.length;++gr){const vr=dr.index(dr.indexNames[gr]);fr=vr.keyPath;var hr=un(vr.name,fr,!!vr.unique,!!vr.multiEntry,!1,fr&&typeof fr!="string",!1);mr.push(hr)}ur[cr]=cn(cr,pr,mr)}),ur}function Kn({_novip:ar},or,lr){const ur=lr.db.objectStoreNames;for(let cr=0;cr<ur.length;++cr){const dr=ur[cr],fr=lr.objectStore(dr);ar._hasGetAll="getAll"in fr;for(let pr=0;pr<fr.indexNames.length;++pr){const mr=fr.indexNames[pr],hr=fr.index(mr).keyPath,gr=typeof hr=="string"?hr:"["+p(hr).join("+")+"]";if(or[dr]){const vr=or[dr].idxByName[gr];vr&&(vr.name=mr,delete or[dr].idxByName[gr],or[dr].idxByName[mr]=vr)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&e.WorkerGlobalScope&&e instanceof e.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(ar._hasGetAll=!1)}class On{_parseStoresSpec(or,lr){t(or).forEach(ur=>{if(or[ur]!==null){var cr=or[ur].split(",").map((fr,pr)=>{const mr=(fr=fr.trim()).replace(/([&*]|\+\+)/g,""),hr=/^\[/.test(mr)?mr.match(/^\[(.*)\]$/)[1].split("+"):mr;return un(mr,hr||null,/\&/.test(fr),/\*/.test(fr),/\+\+/.test(fr),n(hr),pr===0)}),dr=cr.shift();if(dr.multi)throw new X.Schema("Primary key cannot be multi-valued");cr.forEach(fr=>{if(fr.auto)throw new X.Schema("Only primary key can be marked as autoIncrement (++)");if(!fr.keyPath)throw new X.Schema("Index must have a name and cannot be an empty string")}),lr[ur]=cn(ur,dr,cr)}})}stores(or){const lr=this.db;this._cfg.storesSource=this._cfg.storesSource?r(this._cfg.storesSource,or):or;const ur=lr._versions,cr={};let dr={};return ur.forEach(fr=>{r(cr,fr._cfg.storesSource),dr=fr._cfg.dbschema={},fr._parseStoresSpec(cr,dr)}),lr._dbSchema=dr,bn(lr,[lr._allTables,lr,lr.Transaction.prototype]),gn(lr,[lr._allTables,lr,lr.Transaction.prototype,this._cfg.tables],t(dr),dr),lr._storeNames=t(dr),this}upgrade(or){return this._cfg.contentUpgrade=ue(this._cfg.contentUpgrade||ee,or),this}}function Sn(ar,or){let lr=ar._dbNamesDB;return lr||(lr=ar._dbNamesDB=new Xn(Pt,{addons:[],indexedDB:ar,IDBKeyRange:or}),lr.version(1).stores({dbnames:"name"})),lr.table("dbnames")}function An(ar){return ar&&typeof ar.databases=="function"}function Cn(ar){return Ze(function(){return Oe.letThrough=!0,ar()})}function jn(){var ar;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(or){var lr=function(){return indexedDB.databases().finally(or)};ar=setInterval(lr,100),lr()}).finally(function(){return clearInterval(ar)}):Promise.resolve()}function Dn(ar){const or=ar._state,{indexedDB:lr}=ar._deps;if(or.isBeingOpened||ar.idbdb)return or.dbReadyPromise.then(()=>or.dbOpenError?ft(or.dbOpenError):ar);R&&(or.openCanceller._stackHolder=q()),or.isBeingOpened=!0,or.dbOpenError=null,or.openComplete=!1;const ur=or.openCanceller;function cr(){if(or.openCanceller!==ur)throw new X.DatabaseClosed("db.open() was cancelled")}let dr=or.dbReadyResolve,fr=null,pr=!1;const mr=()=>new je((hr,gr)=>{if(cr(),!lr)throw new X.MissingAPI;const vr=ar.name,wr=or.autoSchema?lr.open(vr):lr.open(vr,Math.round(10*ar.verno));if(!wr)throw new X.MissingAPI;wr.onerror=tn(gr),wr.onblocked=Ye(ar._fireOnBlocked),wr.onupgradeneeded=Ye(_r=>{if(fr=wr.transaction,or.autoSchema&&!ar._options.allowEmptyDB){wr.onerror=nn,fr.abort(),wr.result.close();const Sr=lr.deleteDatabase(vr);Sr.onsuccess=Sr.onerror=Ye(()=>{gr(new X.NoSuchDatabase(`Database ${vr} doesnt exist`))})}else{fr.onerror=tn(gr);var Cr=_r.oldVersion>Math.pow(2,62)?0:_r.oldVersion;pr=Cr<1,ar._novip.idbdb=wr.result,wn(ar,Cr/10,fr,gr)}},gr),wr.onsuccess=Ye(()=>{fr=null;const _r=ar._novip.idbdb=wr.result,Cr=p(_r.objectStoreNames);if(Cr.length>0)try{const Dr=_r.transaction((Sr=Cr).length===1?Sr[0]:Sr,"readonly");or.autoSchema?function({_novip:Er},kr,Ir){Er.verno=kr.version/10;const Br=Er._dbSchema=Pn(0,kr,Ir);Er._storeNames=p(kr.objectStoreNames,0),gn(Er,[Er._allTables],t(Br),Br)}(ar,_r,Dr):(Kn(ar,ar._dbSchema,Dr),function(Er,kr){const Ir=xn(Pn(0,Er.idbdb,kr),Er._dbSchema);return!(Ir.add.length||Ir.change.some(Br=>Br.add.length||Br.change.length))}(ar,Dr)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),vn(ar,Dr)}catch{}var Sr;_t.push(ar),_r.onversionchange=Ye(Dr=>{or.vcFired=!0,ar.on("versionchange").fire(Dr)}),_r.onclose=Ye(Dr=>{ar.on("close").fire(Dr)}),pr&&function({indexedDB:Dr,IDBKeyRange:Er},kr){!An(Dr)&&kr!==Pt&&Sn(Dr,Er).put({name:kr}).catch(ee)}(ar._deps,vr),hr()},gr)}).catch(hr=>hr&&hr.name==="UnknownError"&&or.PR1398_maxLoop>0?(or.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),mr()):je.reject(hr));return je.race([ur,(typeof navigator>"u"?je.resolve():jn()).then(mr)]).then(()=>(cr(),or.onReadyBeingFired=[],je.resolve(Cn(()=>ar.on.ready.fire(ar.vip))).then(function hr(){if(or.onReadyBeingFired.length>0){let gr=or.onReadyBeingFired.reduce(ue,ee);return or.onReadyBeingFired=[],je.resolve(Cn(()=>gr(ar.vip))).then(hr)}}))).finally(()=>{or.onReadyBeingFired=null,or.isBeingOpened=!1}).then(()=>ar).catch(hr=>{or.dbOpenError=hr;try{fr&&fr.abort()}catch{}return ur===or.openCanceller&&ar._close(),ft(hr)}).finally(()=>{or.openComplete=!0,dr()})}function In(ar){var or=dr=>ar.next(dr),lr=cr(or),ur=cr(dr=>ar.throw(dr));function cr(dr){return fr=>{var pr=dr(fr),mr=pr.value;return pr.done?mr:mr&&typeof mr.then=="function"?mr.then(lr,ur):n(mr)?Promise.all(mr).then(lr,ur):lr(mr)}}return cr(or)()}function Bn(ar,or,lr){var ur=arguments.length;if(ur<2)throw new X.InvalidArgument("Too few arguments");for(var cr=new Array(ur-1);--ur;)cr[ur-1]=arguments[ur];return lr=cr.pop(),[ar,k(cr),lr]}function Tn(ar,or,lr,ur,cr){return je.resolve().then(()=>{const dr=Oe.transless||Oe,fr=ar._createTransaction(or,lr,ar._dbSchema,ur),pr={trans:fr,transless:dr};if(ur)fr.idbtrans=ur.idbtrans;else try{fr.create(),ar._state.PR1398_maxLoop=3}catch(vr){return vr.name===H.InvalidState&&ar.isOpen()&&--ar._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),ar._close(),ar.open().then(()=>Tn(ar,or,lr,null,cr))):ft(vr)}const mr=T(cr);let hr;mr&&et();const gr=je.follow(()=>{if(hr=cr.call(fr,fr),hr)if(mr){var vr=tt.bind(null,null);hr.then(vr,vr)}else typeof hr.next=="function"&&typeof hr.throw=="function"&&(hr=In(hr))},pr);return(hr&&typeof hr.then=="function"?je.resolve(hr).then(vr=>fr.active?vr:ft(new X.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):gr.then(()=>hr)).then(vr=>(ur&&fr._resolve(),fr._completion.then(()=>vr))).catch(vr=>(fr._reject(vr),ft(vr)))})}function Rn(ar,or,lr){const ur=n(ar)?ar.slice():[ar];for(let cr=0;cr<lr;++cr)ur.push(or);return ur}const Fn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(ar){return{...ar,table(or){const lr=ar.table(or),{schema:ur}=lr,cr={},dr=[];function fr(gr,vr,wr){const _r=yn(gr),Cr=cr[_r]=cr[_r]||[],Sr=gr==null?0:typeof gr=="string"?1:gr.length,Dr=vr>0,Er={...wr,isVirtual:Dr,keyTail:vr,keyLength:Sr,extractKey:dn(gr),unique:!Dr&&wr.unique};return Cr.push(Er),Er.isPrimaryKey||dr.push(Er),Sr>1&&fr(Sr===2?gr[0]:gr.slice(0,Sr-1),vr+1,wr),Cr.sort((kr,Ir)=>kr.keyTail-Ir.keyTail),Er}const pr=fr(ur.primaryKey.keyPath,0,ur.primaryKey);cr[":id"]=[pr];for(const gr of ur.indexes)fr(gr.keyPath,0,gr);function mr(gr){const vr=gr.query.index;return vr.isVirtual?{...gr,query:{index:vr,range:(wr=gr.query.range,_r=vr.keyTail,{type:wr.type===1?2:wr.type,lower:Rn(wr.lower,wr.lowerOpen?ar.MAX_KEY:ar.MIN_KEY,_r),lowerOpen:!0,upper:Rn(wr.upper,wr.upperOpen?ar.MIN_KEY:ar.MAX_KEY,_r),upperOpen:!0})}}:gr;var wr,_r}return{...lr,schema:{...ur,primaryKey:pr,indexes:dr,getIndexByKeyPath:function(gr){const vr=cr[yn(gr)];return vr&&vr[0]}},count:gr=>lr.count(mr(gr)),query:gr=>lr.query(mr(gr)),openCursor(gr){const{keyTail:vr,isVirtual:wr,keyLength:_r}=gr.query.index;return wr?lr.openCursor(mr(gr)).then(Cr=>Cr&&function(Sr){return Object.create(Sr,{continue:{value:function(Er){Er!=null?Sr.continue(Rn(Er,gr.reverse?ar.MAX_KEY:ar.MIN_KEY,vr)):gr.unique?Sr.continue(Sr.key.slice(0,_r).concat(gr.reverse?ar.MIN_KEY:ar.MAX_KEY,vr)):Sr.continue()}},continuePrimaryKey:{value(Er,kr){Sr.continuePrimaryKey(Rn(Er,ar.MAX_KEY,vr),kr)}},primaryKey:{get:()=>Sr.primaryKey},key:{get(){const Er=Sr.key;return _r===1?Er[0]:Er.slice(0,_r)}},value:{get:()=>Sr.value}})}(Cr)):lr.openCursor(gr)}}}}}};function Mn(ar,or,lr,ur){return lr=lr||{},ur=ur||"",t(ar).forEach(cr=>{if(o(or,cr)){var dr=ar[cr],fr=or[cr];if(typeof dr=="object"&&typeof fr=="object"&&dr&&fr){const pr=C(dr);pr!==C(fr)?lr[ur+cr]=or[cr]:pr==="Object"?Mn(dr,fr,lr,ur+cr+"."):dr!==fr&&(lr[ur+cr]=or[cr])}else dr!==fr&&(lr[ur+cr]=or[cr])}else lr[ur+cr]=void 0}),t(or).forEach(cr=>{o(ar,cr)||(lr[ur+cr]=or[cr])}),lr}const Nn={stack:"dbcore",name:"HooksMiddleware",level:2,create:ar=>({...ar,table(or){const lr=ar.table(or),{primaryKey:ur}=lr.schema;return{...lr,mutate(dr){const fr=Oe.trans,{deleting:pr,creating:mr,updating:hr}=fr.table(or).hook;switch(dr.type){case"add":if(mr.fire===ee)break;return fr._promise("readwrite",()=>gr(dr),!0);case"put":if(mr.fire===ee&&hr.fire===ee)break;return fr._promise("readwrite",()=>gr(dr),!0);case"delete":if(pr.fire===ee)break;return fr._promise("readwrite",()=>gr(dr),!0);case"deleteRange":if(pr.fire===ee)break;return fr._promise("readwrite",()=>function(wr){return vr(wr.trans,wr.range,1e4)}(dr),!0)}return lr.mutate(dr);function gr(wr){const _r=Oe.trans,Cr=wr.keys||function(Sr,Dr){return Dr.type==="delete"?Dr.keys:Dr.keys||Dr.values.map(Sr.extractKey)}(ur,wr);if(!Cr)throw new Error("Keys missing");return(wr=wr.type==="add"||wr.type==="put"?{...wr,keys:Cr}:{...wr}).type!=="delete"&&(wr.values=[...wr.values]),wr.keys&&(wr.keys=[...wr.keys]),function(Sr,Dr,Er){return Dr.type==="add"?Promise.resolve([]):Sr.getMany({trans:Dr.trans,keys:Er,cache:"immutable"})}(lr,wr,Cr).then(Sr=>{const Dr=Cr.map((Er,kr)=>{const Ir=Sr[kr],Br={onerror:null,onsuccess:null};if(wr.type==="delete")pr.fire.call(Br,Er,Ir,_r);else if(wr.type==="add"||Ir===void 0){const Nr=mr.fire.call(Br,Er,wr.values[kr],_r);Er==null&&Nr!=null&&(Er=Nr,wr.keys[kr]=Er,ur.outbound||_(wr.values[kr],ur.keyPath,Er))}else{const Nr=Mn(Ir,wr.values[kr]),Mr=hr.fire.call(Br,Nr,Er,Ir,_r);if(Mr){const xr=wr.values[kr];Object.keys(Mr).forEach(Rr=>{o(xr,Rr)?xr[Rr]=Mr[Rr]:_(xr,Rr,Mr[Rr])})}}return Br});return lr.mutate(wr).then(({failures:Er,results:kr,numFailures:Ir,lastResult:Br})=>{for(let Nr=0;Nr<Cr.length;++Nr){const Mr=kr?kr[Nr]:Cr[Nr],xr=Dr[Nr];Mr==null?xr.onerror&&xr.onerror(Er[Nr]):xr.onsuccess&&xr.onsuccess(wr.type==="put"&&Sr[Nr]?wr.values[Nr]:Mr)}return{failures:Er,results:kr,numFailures:Ir,lastResult:Br}}).catch(Er=>(Dr.forEach(kr=>kr.onerror&&kr.onerror(Er)),Promise.reject(Er)))})}function vr(wr,_r,Cr){return lr.query({trans:wr,values:!1,query:{index:ur,range:_r},limit:Cr}).then(({result:Sr})=>gr({type:"delete",keys:Sr,trans:wr}).then(Dr=>Dr.numFailures>0?Promise.reject(Dr.failures[0]):Sr.length<Cr?{failures:[],numFailures:0,lastResult:void 0}:vr(wr,{..._r,lower:Sr[Sr.length-1],lowerOpen:!0},Cr)))}}}}})};function qn(ar,or,lr){try{if(!or||or.keys.length<ar.length)return null;const ur=[];for(let cr=0,dr=0;cr<or.keys.length&&dr<ar.length;++cr)$t(or.keys[cr],ar[dr])===0&&(ur.push(lr?O(or.values[cr]):or.values[cr]),++dr);return ur.length===ar.length?ur:null}catch{return null}}const $n={stack:"dbcore",level:-1,create:ar=>({table:or=>{const lr=ar.table(or);return{...lr,getMany:ur=>{if(!ur.cache)return lr.getMany(ur);const cr=qn(ur.keys,ur.trans._cache,ur.cache==="clone");return cr?je.resolve(cr):lr.getMany(ur).then(dr=>(ur.trans._cache={keys:ur.keys,values:ur.cache==="clone"?O(dr):dr},dr))},mutate:ur=>(ur.type!=="add"&&(ur.trans._cache=null),lr.mutate(ur))}}})};function Un(ar){return!("from"in ar)}const Ln=function(ar,or){if(!this){const lr=new Ln;return ar&&"d"in ar&&r(lr,ar),lr}r(this,arguments.length?{d:1,from:ar,to:arguments.length>1?or:ar}:{d:0})};function Vn(ar,or,lr){const ur=$t(or,lr);if(isNaN(ur))return;if(ur>0)throw RangeError();if(Un(ar))return r(ar,{from:or,to:lr,d:1});const cr=ar.l,dr=ar.r;if($t(lr,ar.from)<0)return cr?Vn(cr,or,lr):ar.l={from:or,to:lr,d:1,l:null,r:null},Gn(ar);if($t(or,ar.to)>0)return dr?Vn(dr,or,lr):ar.r={from:or,to:lr,d:1,l:null,r:null},Gn(ar);$t(or,ar.from)<0&&(ar.from=or,ar.l=null,ar.d=dr?dr.d+1:1),$t(lr,ar.to)>0&&(ar.to=lr,ar.r=null,ar.d=ar.l?ar.l.d+1:1);const fr=!ar.r;cr&&!ar.l&&Wn(ar,cr),dr&&fr&&Wn(ar,dr)}function Wn(ar,or){Un(or)||function lr(ur,{from:cr,to:dr,l:fr,r:pr}){Vn(ur,cr,dr),fr&&lr(ur,fr),pr&&lr(ur,pr)}(ar,or)}function Yn(ar,or){const lr=zn(or);let ur=lr.next();if(ur.done)return!1;let cr=ur.value;const dr=zn(ar);let fr=dr.next(cr.from),pr=fr.value;for(;!ur.done&&!fr.done;){if($t(pr.from,cr.to)<=0&&$t(pr.to,cr.from)>=0)return!0;$t(cr.from,pr.from)<0?cr=(ur=lr.next(pr.from)).value:pr=(fr=dr.next(cr.from)).value}return!1}function zn(ar){let or=Un(ar)?null:{s:0,n:ar};return{next(lr){const ur=arguments.length>0;for(;or;)switch(or.s){case 0:if(or.s=1,ur)for(;or.n.l&&$t(lr,or.n.from)<0;)or={up:or,n:or.n.l,s:1};else for(;or.n.l;)or={up:or,n:or.n.l,s:1};case 1:if(or.s=2,!ur||$t(lr,or.n.to)<=0)return{value:or.n,done:!1};case 2:if(or.n.r){or.s=3,or={up:or,n:or.n.r,s:0};continue}case 3:or=or.up}return{done:!0}}}}function Gn(ar){var or,lr;const ur=(((or=ar.r)===null||or===void 0?void 0:or.d)||0)-(((lr=ar.l)===null||lr===void 0?void 0:lr.d)||0),cr=ur>1?"r":ur<-1?"l":"";if(cr){const dr=cr==="r"?"l":"r",fr={...ar},pr=ar[cr];ar.from=pr.from,ar.to=pr.to,ar[cr]=pr[cr],fr[cr]=pr[dr],ar[dr]=fr,fr.d=Hn(fr)}ar.d=Hn(ar)}function Hn({r:ar,l:or}){return(ar?or?Math.max(ar.d,or.d):ar.d:or?or.d:0)+1}a(Ln.prototype,{add(ar){return Wn(this,ar),this},addKey(ar){return Vn(this,ar,ar),this},addKeys(ar){return ar.forEach(or=>Vn(this,or,or)),this},[j](){return zn(this)}});const Qn={stack:"dbcore",level:0,create:ar=>{const or=ar.schema.name,lr=new Ln(ar.MIN_KEY,ar.MAX_KEY);return{...ar,table:ur=>{const cr=ar.table(ur),{schema:dr}=cr,{primaryKey:fr}=dr,{extractKey:pr,outbound:mr}=fr,hr={...cr,mutate:wr=>{const _r=wr.trans,Cr=_r.mutatedParts||(_r.mutatedParts={}),Sr=Mr=>{const xr=`idb://${or}/${ur}/${Mr}`;return Cr[xr]||(Cr[xr]=new Ln)},Dr=Sr(""),Er=Sr(":dels"),{type:kr}=wr;let[Ir,Br]=wr.type==="deleteRange"?[wr.range]:wr.type==="delete"?[wr.keys]:wr.values.length<50?[[],wr.values]:[];const Nr=wr.trans._cache;return cr.mutate(wr).then(Mr=>{if(n(Ir)){kr!=="delete"&&(Ir=Mr.results),Dr.addKeys(Ir);const xr=qn(Ir,Nr);xr||kr==="add"||Er.addKeys(Ir),(xr||Br)&&function(Rr,Or,qr,Jr){function na(Wr){const Gr=Rr(Wr.name||"");function is(ss){return ss!=null?Wr.extractKey(ss):null}const es=ss=>Wr.multiEntry&&n(ss)?ss.forEach(_i=>Gr.addKey(_i)):Gr.addKey(ss);(qr||Jr).forEach((ss,_i)=>{const ba=qr&&is(qr[_i]),xa=Jr&&is(Jr[_i]);$t(ba,xa)!==0&&(ba!=null&&es(ba),xa!=null&&es(xa))})}Or.indexes.forEach(na)}(Sr,dr,xr,Br)}else if(Ir){const xr={from:Ir.lower,to:Ir.upper};Er.add(xr),Dr.add(xr)}else Dr.add(lr),Er.add(lr),dr.indexes.forEach(xr=>Sr(xr.name).add(lr));return Mr})}},gr=({query:{index:wr,range:_r}})=>{var Cr,Sr;return[wr,new Ln((Cr=_r.lower)!==null&&Cr!==void 0?Cr:ar.MIN_KEY,(Sr=_r.upper)!==null&&Sr!==void 0?Sr:ar.MAX_KEY)]},vr={get:wr=>[fr,new Ln(wr.key)],getMany:wr=>[fr,new Ln().addKeys(wr.keys)],count:gr,query:gr,openCursor:gr};return t(vr).forEach(wr=>{hr[wr]=function(_r){const{subscr:Cr}=Oe;if(Cr){const Sr=Br=>{const Nr=`idb://${or}/${ur}/${Br}`;return Cr[Nr]||(Cr[Nr]=new Ln)},Dr=Sr(""),Er=Sr(":dels"),[kr,Ir]=vr[wr](_r);if(Sr(kr.name||"").add(Ir),!kr.isPrimaryKey){if(wr!=="count"){const Br=wr==="query"&&mr&&_r.values&&cr.query({..._r,values:!1});return cr[wr].apply(this,arguments).then(Nr=>{if(wr==="query"){if(mr&&_r.values)return Br.then(({result:xr})=>(Dr.addKeys(xr),Nr));const Mr=_r.values?Nr.result.map(pr):Nr.result;_r.values?Dr.addKeys(Mr):Er.addKeys(Mr)}else if(wr==="openCursor"){const Mr=Nr,xr=_r.values;return Mr&&Object.create(Mr,{key:{get:()=>(Er.addKey(Mr.primaryKey),Mr.key)},primaryKey:{get(){const Rr=Mr.primaryKey;return Er.addKey(Rr),Rr}},value:{get:()=>(xr&&Dr.addKey(Mr.primaryKey),Mr.value)}})}return Nr})}Er.add(lr)}}return cr[wr].apply(this,arguments)}}),hr}}}};class Xn{constructor(or,lr){this._middlewares={},this.verno=0;const ur=Xn.dependencies;this._options=lr={addons:Xn.addons,autoOpen:!0,indexedDB:ur.indexedDB,IDBKeyRange:ur.IDBKeyRange,...lr},this._deps={indexedDB:lr.indexedDB,IDBKeyRange:lr.IDBKeyRange};const{addons:cr}=lr;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const dr={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ee,dbReadyPromise:null,cancelOpen:ee,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var fr;dr.dbReadyPromise=new je(pr=>{dr.dbReadyResolve=pr}),dr.openCanceller=new je((pr,mr)=>{dr.cancelOpen=mr}),this._state=dr,this.name=or,this.on=Dt(this,"populate","blocked","versionchange","close",{ready:[ue,ee]}),this.on.ready.subscribe=y(this.on.ready.subscribe,pr=>(mr,hr)=>{Xn.vip(()=>{const gr=this._state;if(gr.openComplete)gr.dbOpenError||je.resolve().then(mr),hr&&pr(mr);else if(gr.onReadyBeingFired)gr.onReadyBeingFired.push(mr),hr&&pr(mr);else{pr(mr);const vr=this;hr||pr(function wr(){vr.on.ready.unsubscribe(mr),vr.on.ready.unsubscribe(wr)})}})}),this.Collection=(fr=this,It(Vt.prototype,function(pr,mr){this.db=fr;let hr=At,gr=null;if(mr)try{hr=mr()}catch(Cr){gr=Cr}const vr=pr._ctx,wr=vr.table,_r=wr.hook.reading.fire;this._ctx={table:wr,index:vr.index,isPrimKey:!vr.index||wr.schema.primKey.keyPath&&vr.index===wr.schema.primKey.name,range:hr,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:gr,or:vr.or,valueMapper:_r!==te?_r:null}})),this.Table=function(pr){return It(jt.prototype,function(mr,hr,gr){this.db=pr,this._tx=gr,this.name=mr,this.schema=hr,this.hook=pr._allTables[mr]?pr._allTables[mr].hook:Dt(null,{creating:[se,ee],reading:[ne,te],updating:[oe,ee],deleting:[ie,ee]})})}(this),this.Transaction=function(pr){return It(an.prototype,function(mr,hr,gr,vr,wr){this.db=pr,this.mode=mr,this.storeNames=hr,this.schema=gr,this.chromeTransactionDurability=vr,this.idbtrans=null,this.on=Dt(this,"complete","error","abort"),this.parent=wr||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new je((_r,Cr)=>{this._resolve=_r,this._reject=Cr}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},_r=>{var Cr=this.active;return this.active=!1,this.on.error.fire(_r),this.parent?this.parent._reject(_r):Cr&&this.idbtrans&&this.idbtrans.abort(),ft(_r)})})}(this),this.Version=function(pr){return It(On.prototype,function(mr){this.db=pr,this._cfg={version:mr,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(pr){return It(en.prototype,function(mr,hr,gr){this.db=pr,this._ctx={table:mr,index:hr===":id"?null:hr,or:gr};const vr=pr._deps.indexedDB;if(!vr)throw new X.MissingAPI;this._cmp=this._ascending=vr.cmp.bind(vr),this._descending=(wr,_r)=>vr.cmp(_r,wr),this._max=(wr,_r)=>vr.cmp(wr,_r)>0?wr:_r,this._min=(wr,_r)=>vr.cmp(wr,_r)<0?wr:_r,this._IDBKeyRange=pr._deps.IDBKeyRange})}(this),this.on("versionchange",pr=>{pr.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",pr=>{!pr.newVersion||pr.newVersion<pr.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${pr.oldVersion/10}`)}),this._maxKey=hn(lr.IDBKeyRange),this._createTransaction=(pr,mr,hr,gr)=>new this.Transaction(pr,mr,hr,this._options.chromeTransactionDurability,gr),this._fireOnBlocked=pr=>{this.on("blocked").fire(pr),_t.filter(mr=>mr.name===this.name&&mr!==this&&!mr._state.vcFired).map(mr=>mr.on("versionchange").fire(pr))},this.use(Fn),this.use(Nn),this.use(Qn),this.use($n),this.vip=Object.create(this,{_vip:{value:!0}}),cr.forEach(pr=>pr(this))}version(or){if(isNaN(or)||or<.1)throw new X.Type("Given version is not a positive number");if(or=Math.round(10*or)/10,this.idbdb||this._state.isBeingOpened)throw new X.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,or);const lr=this._versions;var ur=lr.filter(cr=>cr._cfg.version===or)[0];return ur||(ur=new this.Version(or),lr.push(ur),lr.sort(_n),ur.stores({}),this._state.autoSchema=!1,ur)}_whenReady(or){return this.idbdb&&(this._state.openComplete||Oe.letThrough||this._vip)?or():new je((lr,ur)=>{if(this._state.openComplete)return ur(new X.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void ur(new X.DatabaseClosed);this.open().catch(ee)}this._state.dbReadyPromise.then(lr,ur)}).then(or)}use({stack:or,create:lr,level:ur,name:cr}){cr&&this.unuse({stack:or,name:cr});const dr=this._middlewares[or]||(this._middlewares[or]=[]);return dr.push({stack:or,create:lr,level:ur??10,name:cr}),dr.sort((fr,pr)=>fr.level-pr.level),this}unuse({stack:or,name:lr,create:ur}){return or&&this._middlewares[or]&&(this._middlewares[or]=this._middlewares[or].filter(cr=>ur?cr.create!==ur:!!lr&&cr.name!==lr)),this}open(){return Dn(this)}_close(){const or=this._state,lr=_t.indexOf(this);if(lr>=0&&_t.splice(lr,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}or.dbReadyPromise=new je(ur=>{or.dbReadyResolve=ur}),or.openCanceller=new je((ur,cr)=>{or.cancelOpen=cr})}close(){this._close();const or=this._state;this._options.autoOpen=!1,or.dbOpenError=new X.DatabaseClosed,or.isBeingOpened&&or.cancelOpen(or.dbOpenError)}delete(){const or=arguments.length>0,lr=this._state;return new je((ur,cr)=>{const dr=()=>{this.close();var fr=this._deps.indexedDB.deleteDatabase(this.name);fr.onsuccess=Ye(()=>{(function({indexedDB:pr,IDBKeyRange:mr},hr){!An(pr)&&hr!==Pt&&Sn(pr,mr).delete(hr).catch(ee)})(this._deps,this.name),ur()}),fr.onerror=tn(cr),fr.onblocked=this._fireOnBlocked};if(or)throw new X.InvalidArgument("Arguments not allowed in db.delete()");lr.isBeingOpened?lr.dbReadyPromise.then(dr):dr()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const or=this._state.dbOpenError;return or&&or.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return t(this._allTables).map(or=>this._allTables[or])}transaction(){const or=Bn.apply(this,arguments);return this._transaction.apply(this,or)}_transaction(or,lr,ur){let cr=Oe.trans;cr&&cr.db===this&&or.indexOf("!")===-1||(cr=null);const dr=or.indexOf("?")!==-1;let fr,pr;or=or.replace("!","").replace("?","");try{if(pr=lr.map(hr=>{var gr=hr instanceof this.Table?hr.name:hr;if(typeof gr!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return gr}),or=="r"||or===Kt)fr=Kt;else{if(or!="rw"&&or!=Ot)throw new X.InvalidArgument("Invalid transaction mode: "+or);fr=Ot}if(cr){if(cr.mode===Kt&&fr===Ot){if(!dr)throw new X.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");cr=null}cr&&pr.forEach(hr=>{if(cr&&cr.storeNames.indexOf(hr)===-1){if(!dr)throw new X.SubTransaction("Table "+hr+" not included in parent transaction.");cr=null}}),dr&&cr&&!cr.active&&(cr=null)}}catch(hr){return cr?cr._promise(null,(gr,vr)=>{vr(hr)}):ft(hr)}const mr=Tn.bind(null,this,fr,pr,cr,ur);return cr?cr._promise(fr,mr,"lock"):Oe.trans?at(Oe.transless,()=>this._whenReady(mr)):this._whenReady(mr)}table(or){if(!o(this._allTables,or))throw new X.InvalidTable(`Table ${or} does not exist`);return this._allTables[or]}}const Jn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class Zn{constructor(or){this._subscribe=or}subscribe(or,lr,ur){return this._subscribe(or&&typeof or!="function"?or:{next:or,error:lr,complete:ur})}[Jn](){return this}}function er(ar,or){return t(or).forEach(lr=>{Wn(ar[lr]||(ar[lr]=new Ln),or[lr])}),ar}function tr(ar){let or,lr=!1;const ur=new Zn(cr=>{const dr=T(ar);let fr=!1,pr={},mr={};const hr={get closed(){return fr},unsubscribe:()=>{fr=!0,on.storagemutated.unsubscribe(_r)}};cr.start&&cr.start(hr);let gr=!1,vr=!1;function wr(){return t(mr).some(Sr=>pr[Sr]&&Yn(pr[Sr],mr[Sr]))}const _r=Sr=>{er(pr,Sr),wr()&&Cr()},Cr=()=>{if(gr||fr)return;pr={};const Sr={},Dr=function(Er){dr&&et();const kr=()=>Ze(ar,{subscr:Er,trans:null}),Ir=Oe.trans?at(Oe.transless,kr):kr();return dr&&Ir.then(tt,tt),Ir}(Sr);vr||(on(rn,_r),vr=!0),gr=!0,Promise.resolve(Dr).then(Er=>{lr=!0,or=Er,gr=!1,fr||(wr()?Cr():(pr={},mr=Sr,cr.next&&cr.next(Er)))},Er=>{gr=!1,lr=!1,cr.error&&cr.error(Er),hr.unsubscribe()})};return Cr(),hr});return ur.hasValue=()=>lr,ur.getValue=()=>or,ur}let nr;try{nr={indexedDB:e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,IDBKeyRange:e.IDBKeyRange||e.webkitIDBKeyRange}}catch(ar){nr={indexedDB:null,IDBKeyRange:null}}const rr=Xn;function sr(ar){let or=ir;try{ir=!0,on.storagemutated.fire(ar)}finally{ir=or}}a(rr,{...Z,delete:ar=>new rr(ar,{addons:[]}).delete(),exists:ar=>new rr(ar,{addons:[]}).open().then(or=>(or.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(ar){try{return function({indexedDB:or,IDBKeyRange:lr}){return An(or)?Promise.resolve(or.databases()).then(ur=>ur.map(cr=>cr.name).filter(cr=>cr!==Pt)):Sn(or,lr).toCollection().primaryKeys()}(rr.dependencies).then(ar)}catch{return ft(new X.MissingAPI)}},defineClass:()=>function(ar){r(this,ar)},ignoreTransaction:ar=>Oe.trans?at(Oe.transless,ar):ar(),vip:Cn,async:function(ar){return function(){try{var or=In(ar.apply(this,arguments));return or&&typeof or.then=="function"?or:je.resolve(or)}catch(lr){return ft(lr)}}},spawn:function(ar,or,lr){try{var ur=In(ar.apply(lr,or||[]));return ur&&typeof ur.then=="function"?ur:je.resolve(ur)}catch(cr){return ft(cr)}},currentTransaction:{get:()=>Oe.trans||null},waitFor:function(ar,or){const lr=je.resolve(typeof ar=="function"?rr.ignoreTransaction(ar):ar).timeout(or||6e4);return Oe.trans?Oe.trans.waitFor(lr):lr},Promise:je,debug:{get:()=>R,set:ar=>{F(ar,ar==="dexie"?()=>!0:Et)}},derive:c,extend:r,props:a,override:y,Events:Dt,on,liveQuery:tr,extendObservabilitySet:er,getByKeyPath:b,setByKeyPath:_,delByKeyPath:function(ar,or){typeof or=="string"?_(ar,or,void 0):"length"in or&&[].map.call(or,function(lr){_(ar,lr,void 0)})},shallowClone:w,deepClone:O,getObjectDiff:Mn,cmp:$t,asap:v,minKey:vt,addons:[],connections:_t,errnames:H,dependencies:nr,semVer:yt,version:yt.split(".").map(ar=>parseInt(ar)).reduce((ar,or,lr)=>ar+or/Math.pow(10,2*lr))}),rr.maxKey=hn(rr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(on(rn,ar=>{if(!ir){let or;wt?(or=document.createEvent("CustomEvent"),or.initCustomEvent(sn,!0,!0,ar)):or=new CustomEvent(sn,{detail:ar}),ir=!0,dispatchEvent(or),ir=!1}}),addEventListener(sn,({detail:ar})=>{ir||sr(ar)}));let ir=!1;if(typeof BroadcastChannel<"u"){const ar=new BroadcastChannel(sn);typeof ar.unref=="function"&&ar.unref(),on(rn,or=>{ir||ar.postMessage(or)}),ar.onmessage=or=>{or.data&&sr(or.data)}}else if(typeof self<"u"&&typeof navigator<"u"){on(rn,or=>{try{ir||(typeof localStorage<"u"&&localStorage.setItem(sn,JSON.stringify({trig:Math.random(),changedParts:or})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(lr=>lr.postMessage({type:sn,changedParts:or})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",or=>{if(or.key===sn){const lr=JSON.parse(or.newValue);lr&&sr(lr.changedParts)}});const ar=self.document&&navigator.serviceWorker;ar&&ar.addEventListener("message",function({data:or}){or&&or.type===sn&&sr(or.changedParts)})}je.rejectionMapper=function(ar,or){if(!ar||ar instanceof W||ar instanceof TypeError||ar instanceof SyntaxError||!ar.name||!J[ar.name])return ar;var lr=new J[ar.name](or||ar.message,ar);return"stack"in ar&&l(lr,"stack",{get:function(){return this.inner.stack}}),lr},F(R,Et);function useObservable(ar,or,lr){var ur,cr;typeof ar=="function"?(ur=or||[],cr=lr):(ur=[],cr=or);var dr=React.useRef({hasResult:!1,result:cr,error:null}),fr=React.useReducer(function(hr){return hr+1},0);fr[0];var pr=fr[1],mr=React.useMemo(function(){var hr=typeof ar=="function"?ar():ar;if(!hr||typeof hr.subscribe!="function")throw ar===hr?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!dr.current.hasResult&&typeof window<"u"&&(typeof hr.hasValue!="function"||hr.hasValue()))if(typeof hr.getValue=="function")dr.current.result=hr.getValue(),dr.current.hasResult=!0;else{var gr=hr.subscribe(function(vr){dr.current.result=vr,dr.current.hasResult=!0});typeof gr=="function"?gr():gr.unsubscribe()}return hr},ur);if(React.useDebugValue(dr.current.result),React.useEffect(function(){var hr=mr.subscribe(function(gr){var vr=dr.current;(vr.error!==null||vr.result!==gr)&&(vr.error=null,vr.result=gr,vr.hasResult=!0,pr())},function(gr){var vr=dr.current;vr.error!==gr&&(vr.error=gr,pr())});return typeof hr=="function"?hr:hr.unsubscribe.bind(hr)},ur),dr.current.error)throw dr.current.error;return dr.current.result}function useLiveQuery(ar,or,lr){return useObservable(function(){return tr(ar)},or||[],lr)}const db=new Xn("ReactPodDatabase");db.version(1).stores({songs:"++id, title, artist, album, rating",playlists:"++id, &name"});db.version(2).stores({songs:"++id, title, artist, album, rating",playlists:"++id, &name",focusSessions:"++id, endTimestamp",focusSettings:"id"}).upgrade(ar=>{});const PlayIcon=()=>jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.647c1.295.742 1.295 2.545 0 3.286L7.279 20.99c-1.25.72-2.779-.217-2.779-1.643V5.653Z",clipRule:"evenodd"})}),PauseIcon=()=>jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M6.75 5.25a.75.75 0 0 1 .75.75v12a.75.75 0 0 1-1.5 0V6a.75.75 0 0 1 .75-.75Zm9 0a.75.75 0 0 1 .75.75v12a.75.75 0 0 1-1.5 0V6a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}),NextIcon=()=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:[jsxRuntimeExports.jsx("path",{d:"M5.25 5.653c0-1.426 1.529-2.33 2.779-1.643l7.58 4.347a2.25 2.25 0 0 1 0 3.286l-7.58 4.347c-1.25.72-2.779-.217-2.779-1.643V5.653Z"}),jsxRuntimeExports.jsx("path",{d:"M18.75 5.25a.75.75 0 0 0-.75.75v12a.75.75 0 0 0 1.5 0V6a.75.75 0 0 0-.75-.75Z"})]}),PrevIcon=()=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:[jsxRuntimeExports.jsx("path",{d:"M18.75 18.347c0 1.426-1.529 2.33-2.779 1.643l-7.58-4.347a2.25 2.25 0 0 1 0-3.286l7.58-4.347c1.25-.72 2.779.217 2.779 1.643v10.694Z"}),jsxRuntimeExports.jsx("path",{d:"M5.25 18.75a.75.75 0 0 1 .75-.75v-12a.75.75 0 0 1-1.5 0v12a.75.75 0 0 1 .75-.75Z"})]}),SUPPORTED_EXTENSIONS=[".mp3",".m4a",".flac",".wav",".aac",".ogg"],BODY_COLORS=[{name:"White",class:"bg-gradient-to-b from-gray-100 to-gray-300"},{name:"Black",class:"bg-gradient-to-b from-gray-800 to-black"},{name:"Silver",class:"bg-gradient-to-b from-gray-400 to-gray-600"},{name:"Blue",class:"bg-gradient-to-b from-blue-300 to-blue-500"},{name:"Gold",class:"bg-gradient-to-b from-yellow-300 to-yellow-500"},{name:"Green",class:"bg-gradient-to-b from-green-300 to-green-500"},{name:"Lime",class:"bg-gradient-to-b from-lime-300 to-lime-500"},{name:"Pink",class:"bg-gradient-to-b from-pink-300 to-pink-500"},{name:"Purple",class:"bg-gradient-to-b from-purple-300 to-purple-500"},{name:"Red",class:"bg-gradient-to-b from-red-400 to-red-600"}],WHEEL_COLORS=[{name:"Gray",class:"bg-gray-800"},{name:"Black",class:"bg-black"},{name:"Blue",class:"bg-blue-800"},{name:"Green",class:"bg-green-700"},{name:"Orange",class:"bg-orange-700"},{name:"Purple",class:"bg-purple-800"},{name:"Red",class:"bg-red-700"}],DEFAULT_COLORS={body:BODY_COLORS[0].class,wheel:WHEEL_COLORS[0].class},DEFAULT_FOCUS_SETTINGS={id:0,workMinutes:25,shortBreakMinutes:5,longBreakMinutes:15,longBreakInterval:4,tickingSound:!1,fullscreenBreak:!0,autoStart:!0},formatTime=ar=>{const or=Math.floor(ar);if(isNaN(or)||or<0)return"0:00";const lr=Math.floor(or/60),ur=or%60;return`${lr}:${ur.toString().padStart(2,"0")}`},getInitialBallVelocity=ar=>{const or=Math.random()*2*Math.PI;return{x:0,y:0,dx:Math.cos(or)*ar,dy:Math.sin(or)*ar}},usePlayback=({onTrackEnd:ar,repeatMode:or})=>{const lr=reactExports.useRef(new Audio),ur=reactExports.useRef(null),[cr,dr]=reactExports.useState(!1),[fr,pr]=reactExports.useState(0),[mr,hr]=reactExports.useState(0);reactExports.useEffect(()=>{const Dr=lr.current;Dr.loop=or==="one"},[or]),reactExports.useEffect(()=>{const Dr=lr.current,Er=()=>pr(Dr.currentTime),kr=()=>hr(Dr.duration),Ir=()=>ar();return Dr.addEventListener("timeupdate",Er),Dr.addEventListener("loadedmetadata",kr),Dr.addEventListener("ended",Ir),()=>{Dr.removeEventListener("timeupdate",Er),Dr.removeEventListener("loadedmetadata",kr),Dr.removeEventListener("ended",Ir)}},[ar]);const gr=reactExports.useCallback(Dr=>{ur.current=Dr,lr.current.src=Dr,lr.current.play().then(()=>dr(!0)).catch(Er=>console.error("Playback failed",Er))},[]),vr=reactExports.useCallback(()=>{lr.current.pause(),dr(!1)},[]),wr=reactExports.useCallback(()=>{lr.current.currentSrc?lr.current.play().then(()=>dr(!0)).catch(Dr=>console.error("Resume failed",Dr)):ur.current&&gr(ur.current)},[gr]),_r=reactExports.useCallback(Dr=>{lr.current.volume=Dr},[]),Cr=reactExports.useCallback(Dr=>{lr.current.currentTime=Dr},[]),Sr=reactExports.useCallback(()=>{const Dr=lr.current;Dr.pause(),Dr.src="",dr(!1),pr(0),hr(0)},[]);return{isPlaying:cr,currentTime:fr,duration:mr,play:gr,pause:vr,resume:wr,setVolume:_r,seek:Cr,stop:Sr}},useMediaSession=({song:ar,isPlaying:or,onPlay:lr,onPause:ur,onNext:cr,onPrev:dr})=>{reactExports.useEffect(()=>{if(!("mediaSession"in navigator))return;const fr=navigator.mediaSession;if(ar){let pr;if(ar.artwork){const mr=new Blob([ar.artwork.data],{type:ar.artwork.format});pr=URL.createObjectURL(mr)}return fr.metadata=new MediaMetadata({title:ar.title,artist:ar.artist,album:ar.album,artwork:pr?[{src:pr,type:ar.artwork.format}]:[]}),()=>{pr&&URL.revokeObjectURL(pr)}}else fr.metadata=null},[ar]),reactExports.useEffect(()=>{"mediaSession"in navigator&&(navigator.mediaSession.playbackState=or?"playing":"paused")},[or]),reactExports.useEffect(()=>{if(!("mediaSession"in navigator))return;const fr=navigator.mediaSession;try{fr.setActionHandler("play",lr),fr.setActionHandler("pause",ur),fr.setActionHandler("nexttrack",cr),fr.setActionHandler("previoustrack",dr)}catch(pr){console.error("Failed to set media session handlers:",pr)}return()=>{try{fr.setActionHandler("play",null),fr.setActionHandler("pause",null),fr.setActionHandler("nexttrack",null),fr.setActionHandler("previoustrack",null)}catch(pr){console.error("Failed to clear media session handlers:",pr)}}},[lr,ur,cr,dr])},Screen=reactExports.memo(({children:ar,title:or,isFlashing:lr})=>jsxRuntimeExports.jsxs("div",{className:"w-full h-1/2 bg-gray-900 rounded-t-lg p-1.5 shadow-inner shadow-black relative",children:[jsxRuntimeExports.jsxs("div",{className:"h-full w-full bg-gradient-to-b from-[#d7e5f4] to-white rounded-sm overflow-hidden flex flex-col",children:[jsxRuntimeExports.jsxs("header",{className:"w-full bg-gradient-to-b from-gray-200 to-gray-400 border-b border-gray-500 py-0.5 px-2 flex justify-between items-center shrink-0",children:[jsxRuntimeExports.jsx("span",{className:"font-bold text-sm text-gray-800 truncate pr-2",children:or}),jsxRuntimeExports.jsx("div",{className:"w-6 h-3 border-2 border-gray-800 rounded-sm flex items-center p-px flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"w-full h-full bg-green-400 rounded-xs"})})]}),jsxRuntimeExports.jsx("main",{className:"flex-grow overflow-y-auto",children:ar})]}),lr&&jsxRuntimeExports.jsx("div",{className:"absolute inset-1.5 rounded-sm bg-blue-400 pointer-events-none animate-flash-overlay"})]})),ClickWheel=reactExports.memo(({onScroll:ar,onMenuClick:or,onPlayPauseClick:lr,onNextClick:ur,onPrevClick:cr,onSelectClick:dr,onSelectLongPress:fr,isPlaying:pr,wheelClass:mr})=>{const hr=reactExports.useRef(null),gr=reactExports.useRef(null),vr=reactExports.useRef(ar);vr.current=ar;const wr=Cr=>{Cr.preventDefault(),fr&&(gr.current=window.setTimeout(()=>{fr(),gr.current=null},500))},_r=Cr=>{Cr.preventDefault(),gr.current&&(clearTimeout(gr.current),gr.current=null,dr())};return reactExports.useEffect(()=>{const Cr=hr.current;if(!Cr)return;let Sr=!1,Dr=0,Er=0;const kr=10,Ir=xr=>{const Rr=Cr.getBoundingClientRect(),Or=Rr.left+Rr.width/2,qr=Rr.top+Rr.height/2,Jr="touches"in xr?xr.touches[0].clientX:xr.clientX,na="touches"in xr?xr.touches[0].clientY:xr.clientY;return Math.atan2(na-qr,Jr-Or)*(180/Math.PI)},Br=xr=>{if(!Sr)return;xr.preventDefault();const Rr=Ir(xr);let Or=Rr-Dr;if(Or>180&&(Or-=360),Or<-180&&(Or+=360),Dr=Rr,Er+=Or,Math.abs(Er)>=kr){const qr=Math.sign(Er);vr.current(qr),Er-=kr*qr}},Nr=xr=>{xr.preventDefault(),Sr=!1,document.removeEventListener("mousemove",Br),document.removeEventListener("mouseup",Nr),document.removeEventListener("touchmove",Br),document.removeEventListener("touchend",Nr)},Mr=xr=>{xr.target.closest("button")||(xr.preventDefault(),Sr=!0,Dr=Ir(xr),Er=0,document.addEventListener("mousemove",Br,{passive:!1}),document.addEventListener("mouseup",Nr,{passive:!1}),document.addEventListener("touchmove",Br,{passive:!1}),document.addEventListener("touchend",Nr,{passive:!1}))};return Cr.addEventListener("mousedown",Mr),Cr.addEventListener("touchstart",Mr,{passive:!1}),()=>{Cr.removeEventListener("mousedown",Mr),Cr.removeEventListener("touchstart",Mr)}},[]),jsxRuntimeExports.jsx("div",{className:"w-full h-1/2 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{ref:hr,className:`w-56 h-56 ${mr} rounded-full relative shadow-lg border-2 border-black flex items-center justify-center select-none touch-none`,children:[jsxRuntimeExports.jsx("button",{onClick:or,className:"absolute top-4 text-gray-100 font-bold text-sm tracking-wider",children:"BACK"}),jsxRuntimeExports.jsx("button",{onClick:ur,className:"absolute right-4 text-gray-100",children:jsxRuntimeExports.jsx(NextIcon,{})}),jsxRuntimeExports.jsx("button",{onClick:cr,className:"absolute left-4 text-gray-100",children:jsxRuntimeExports.jsx(PrevIcon,{})}),jsxRuntimeExports.jsx("button",{onClick:lr,className:"absolute bottom-4 text-gray-100",children:pr?jsxRuntimeExports.jsx(PauseIcon,{}):jsxRuntimeExports.jsx(PlayIcon,{})}),jsxRuntimeExports.jsx("button",{"aria-label":"Select",onMouseDown:wr,onMouseUp:_r,onTouchStart:wr,onTouchEnd:_r,className:"w-20 h-20 bg-gray-500 rounded-full flex items-center justify-center shadow-inner"})]})})}),StarDisplay=reactExports.memo(({rating:ar,active:or})=>!ar||ar<1?null:jsxRuntimeExports.jsx("div",{className:"flex items-center space-x-0.5",children:Array.from({length:5}).map((lr,ur)=>jsxRuntimeExports.jsx("span",{className:`block w-1.5 h-1.5 rounded-full ${ur<ar?or?"bg-white":"bg-gray-700":or?"bg-blue-300":"bg-gray-400"}`},ur))})),MenuView=reactExports.memo(({items:ar,activeIndex:or})=>{const lr=reactExports.useRef(null);return reactExports.useEffect(()=>{var cr;const ur=(cr=lr.current)==null?void 0:cr.children[or];ur&&ur.scrollIntoView({block:"nearest",behavior:"instant"})},[or]),jsxRuntimeExports.jsx("ul",{ref:lr,className:"w-full h-full text-gray-800 font-bold text-base overflow-y-hidden",children:ar.map((ur,cr)=>jsxRuntimeExports.jsxs("li",{className:`px-2 py-0.5 flex justify-between items-center ${cr===or?"bg-blue-500 text-white rounded-sm":""}`,children:[jsxRuntimeExports.jsx("span",{className:"truncate",children:ur.label}),jsxRuntimeExports.jsxs("div",{className:"flex items-center shrink-0 space-x-2",children:[ur.ratingDisplay,ur.subtext&&jsxRuntimeExports.jsx("span",{className:`text-sm font-normal ${cr===or?"text-blue-100":"text-gray-600"}`,children:ur.subtext}),ur.hasArrow&&jsxRuntimeExports.jsx("span",{className:`font-sans font-bold ${cr===or?"text-white":"text-gray-500"}`,children:">"})]})]},`${ur.label}-${ur.songId??cr}`))})}),StarRating=reactExports.memo(({rating:ar,active:or})=>jsxRuntimeExports.jsx("div",{className:`w-full flex justify-center items-center my-0.5 p-1 rounded ${or?"border border-blue-500":""}`,children:Array.from({length:5}).map((lr,ur)=>jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:`w-6 h-6 ${ur<ar?"text-blue-500":"text-gray-400"}`,children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.007z",clipRule:"evenodd"})},ur))})),NowPlayingView=reactExports.memo(({song:ar,currentTime:or,duration:lr,volume:ur,mode:cr,trackNumber:dr,totalTracks:fr})=>{const pr=lr>0?or/lr*100:0,[mr,hr]=reactExports.useState();return reactExports.useEffect(()=>{if(ar.artwork){const gr=new Blob([ar.artwork.data],{type:ar.artwork.format}),vr=URL.createObjectURL(gr);return hr(vr),()=>URL.revokeObjectURL(vr)}else hr(void 0)},[ar.artwork]),jsxRuntimeExports.jsxs("div",{className:"px-2 pt-2 pb-[calc(0.5rem+env(safe-area-inset-bottom))] h-full flex flex-col text-gray-800",children:[jsxRuntimeExports.jsxs("div",{className:"flex-grow flex items-start space-x-2 min-h-0",children:[jsxRuntimeExports.jsx("div",{className:"w-2/5 aspect-square bg-gray-300 rounded-sm shadow-md flex-shrink-0",children:mr?jsxRuntimeExports.jsx("img",{src:mr,alt:ar.album,className:"w-full h-full object-cover rounded-sm"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center",children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM6.75 9.25a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-4.5z",clipRule:"evenodd"})})})}),jsxRuntimeExports.jsxs("div",{className:"w-3/5 flex flex-col space-y-1 overflow-hidden pt-1",children:[jsxRuntimeExports.jsx("p",{className:"font-bold truncate",children:ar.title}),jsxRuntimeExports.jsx("p",{className:"text-sm truncate",children:ar.artist}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 truncate",children:ar.album})]})]}),fr>0&&jsxRuntimeExports.jsxs("p",{className:"text-center text-xs font-semibold text-gray-600 shrink-0",children:[dr," of ",fr]}),jsxRuntimeExports.jsxs("div",{className:"shrink-0 space-y-2 pt-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs font-semibold",children:[jsxRuntimeExports.jsx("span",{children:formatTime(or)}),jsxRuntimeExports.jsxs("span",{children:["-",formatTime(lr-or)]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-400 rounded-full h-2 my-0.5",children:jsxRuntimeExports.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${pr}%`}})})]}),jsxRuntimeExports.jsxs("div",{className:"pt-1",children:[jsxRuntimeExports.jsx("p",{className:"text-center text-xs font-semibold",children:cr==="rating"?"Rating":"Volume"}),cr==="rating"?jsxRuntimeExports.jsx(StarRating,{rating:ar.rating||0,active:!0}):jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-400 rounded-full h-2 my-0.5",children:jsxRuntimeExports.jsx("div",{className:"bg-gray-700 h-2 rounded-full",style:{width:`${ur*100}%`}})})]})]})]})}),FileLoadView=reactExports.memo(({isLoading:ar,loadingProgress:or,onLoad:lr,isInitialLoad:ur})=>jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-800 p-4",children:ar?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 border-4 border-gray-400 border-t-gray-800 rounded-full animate-spin mb-4"}),jsxRuntimeExports.jsx("p",{className:"font-bold",children:"Importing Library..."}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:or})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-bold",children:ur?"ReactPod":"Add Music"}),jsxRuntimeExports.jsx("p",{className:"mt-2 mb-4",children:ur?"A Classic Music Experience":"Add more songs to your library."}),jsxRuntimeExports.jsx("button",{onClick:lr,className:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg shadow",children:ur?"Load Music":"Select Music Folder"}),jsxRuntimeExports.jsx("p",{className:"text-xs mt-4 text-gray-500",children:ur?"Select your music folder to build your library. This is a one-time setup.":"New songs will be added. Duplicates will be ignored."})]})})),ClearingLibraryView=reactExports.memo(({isClearing:ar,message:or})=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-800 p-4",children:[ar&&jsxRuntimeExports.jsx("div",{className:"w-8 h-8 border-4 border-gray-400 border-t-gray-800 rounded-full animate-spin mb-4"}),jsxRuntimeExports.jsx("p",{className:"font-bold",children:or})]})),CoverFlowItemDisplay=reactExports.memo(({item:ar,isReflected:or})=>{const[lr,ur]=reactExports.useState();reactExports.useEffect(()=>{if(ar.artwork){const dr=new Blob([ar.artwork.data],{type:ar.artwork.format}),fr=URL.createObjectURL(dr);return ur(fr),()=>URL.revokeObjectURL(fr)}else ur(void 0)},[ar.artwork]);const cr=or?"[-webkit-box-reflect:below_1px_linear-gradient(transparent,transparent_80%,rgba(255,255,255,0.4))]":"";return jsxRuntimeExports.jsx("div",{className:`w-full h-full bg-gray-300 rounded-sm shadow-md flex items-center justify-center ${cr}`,children:lr?jsxRuntimeExports.jsx("img",{src:lr,alt:ar.album,className:"w-full h-full object-cover rounded-sm"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200 rounded-sm",children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM6.75 9.25a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-4.5z",clipRule:"evenodd"})})})})}),CoverFlowView=reactExports.memo(({items:ar,activeIndex:or})=>{if(ar.length===0)return jsxRuntimeExports.jsx("div",{className:"p-4 text-center font-bold text-gray-600",children:"No Albums Found"});const lr=ar[or];return jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col justify-center items-center overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"w-full h-full relative flex items-center justify-center",style:{perspective:"600px"},children:jsxRuntimeExports.jsx("div",{className:"absolute transition-transform duration-500 ease-out",style:{transformStyle:"preserve-3d",transform:`translateX(calc(50% - ${or*75}px - 50px))`},children:ar.map((ur,cr)=>{const dr=cr-or;if(!(Math.abs(dr)<6))return null;const pr=ar.length-Math.abs(dr);let mr;return dr===0?mr="rotateY(0deg) translateZ(50px)":dr>0?mr="rotateY(-50deg) translateX(30px)":mr="rotateY(50deg) translateX(-30px)",jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 transition-all duration-500 ease-out",style:{width:"100px",height:"100px",left:`${cr*75}px`,transform:mr,zIndex:pr},children:jsxRuntimeExports.jsx(CoverFlowItemDisplay,{item:ur,isReflected:dr===0})},`${ur.album}-${cr}`)})})}),jsxRuntimeExports.jsxs("div",{className:"relative shrink-0 w-full text-center pb-2 pt-4 px-2 z-20 bg-gradient-to-t from-white via-white to-transparent",children:[jsxRuntimeExports.jsx("p",{className:"font-bold truncate text-sm text-gray-800",children:(lr==null?void 0:lr.album)??""}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 truncate text-xs",children:(lr==null?void 0:lr.artist)??""})]})]})}),SearchView=reactExports.memo(({query:ar,items:or,activeIndex:lr})=>jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"shrink-0 px-2 py-0.5 bg-gray-300 border-b border-gray-400",children:jsxRuntimeExports.jsx("p",{className:"font-bold text-gray-800 truncate h-5 flex items-center",children:ar||jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"Type to search..."})})}),jsxRuntimeExports.jsx("div",{className:"flex-grow overflow-hidden",children:jsxRuntimeExports.jsx(MenuView,{items:or,activeIndex:lr})})]})),PADDLE_ARC_ANGLE=45,polarToCartesian=(ar,or,lr,ur)=>{const cr=(ur-90)*Math.PI/180;return{x:ar+lr*Math.cos(cr),y:or+lr*Math.sin(cr)}},describeArc=(ar,or,lr,ur,cr)=>{const dr=polarToCartesian(ar,or,lr,cr),fr=polarToCartesian(ar,or,lr,ur),pr=cr-ur<=180?"0":"1";return`M ${dr.x} ${dr.y} A ${lr} ${lr} 0 ${pr} 0 ${fr.x} ${fr.y}`},BounceGameView=ar=>{const{gameState:or,score:lr,highScore:ur,paddleAngle:cr,ball:dr,ballRef:fr,paddleRef:pr}=ar,mr=reactExports.useMemo(()=>{const hr=cr-PADDLE_ARC_ANGLE/2,gr=cr+PADDLE_ARC_ANGLE/2;return describeArc(50,50,48,hr,gr)},[cr]);return jsxRuntimeExports.jsxs("div",{className:"w-full h-full bg-gray-900 relative flex items-center justify-center text-white font-mono overflow-hidden select-none p-2",children:[jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("radialGradient",{id:"arenaGradient",children:[jsxRuntimeExports.jsx("stop",{offset:"80%",stopColor:"#1a202c"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#2d3748"})]})}),jsxRuntimeExports.jsx("circle",{cx:"50",cy:"50",r:"50",fill:"url(#arenaGradient)"}),jsxRuntimeExports.jsx("circle",{cx:"50",cy:"50",r:"49.5",stroke:"white",strokeWidth:"0.5",fill:"none",opacity:"0.5"}),or==="playing"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("path",{ref:pr,d:mr,stroke:"#38bdf8",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),jsxRuntimeExports.jsx("circle",{ref:fr,cx:50+dr.x,cy:50+dr.y,r:"2.5",fill:"white"})]})]}),jsxRuntimeExports.jsxs("div",{className:"absolute top-2 left-3 font-bold",children:["Score: ",lr]}),jsxRuntimeExports.jsxs("div",{className:"absolute top-2 right-3 font-bold",children:["Best: ",ur]}),(or==="paused"||or==="idle")&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:jsxRuntimeExports.jsx("p",{className:"text-xl font-bold tracking-widest",children:or==="paused"?"PAUSED":""})})]})},FocusTimerView=reactExports.memo(({state:ar,settings:or,stats:lr})=>{const ur=(ar.sessionType==="work"?or.workMinutes:ar.sessionType==="shortBreak"?or.shortBreakMinutes:ar.sessionType==="longBreak"?or.longBreakMinutes:1)*60,cr=ur>0?(ur-ar.timeRemaining)/ur*100:0,dr=ar.sessionType.replace(/([A-Z])/g," $1");return jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col justify-between items-center text-center p-4 text-gray-800",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-bold text-lg capitalize",children:dr}),jsxRuntimeExports.jsx("p",{className:"text-5xl font-mono tracking-tighter my-2",children:formatTime(ar.timeRemaining)}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-400 rounded-full h-2 my-2",children:jsxRuntimeExports.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${cr}%`}})})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center space-x-2",children:Array.from({length:or.longBreakInterval}).map((fr,pr)=>jsxRuntimeExports.jsx("span",{className:`block w-4 h-4 rounded-full ${pr<ar.workIntervalsInCycle?"bg-blue-500":"bg-gray-400"}`},pr))}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-semibold",children:"Today's Focus"}),jsxRuntimeExports.jsxs("p",{className:"text-sm",children:["Intervals: ",lr.workIntervals," | Time: ",lr.totalTime,"m"]})]})]})}),FullscreenBreakView=reactExports.memo(({state:ar})=>jsxRuntimeExports.jsxs("div",{className:"h-full w-full bg-blue-900 text-white flex flex-col items-center justify-center p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold mb-4",children:ar.sessionType==="shortBreak"?"Short Break":"Long Break"}),jsxRuntimeExports.jsx("p",{className:"text-6xl font-mono tracking-tighter",children:formatTime(ar.timeRemaining)}),jsxRuntimeExports.jsx("p",{className:"mt-4 animate-pulse",children:"Relax..."})]})),FocusStatsView=reactExports.memo(()=>{const[ar,or]=reactExports.useState(null);if(reactExports.useEffect(()=>{db.focusSessions.orderBy("endTimestamp").reverse().toArray().then(or)},[]),ar===null)return jsxRuntimeExports.jsx("div",{className:"p-4 text-center font-bold text-gray-600",children:"Loading stats..."});if(ar.length===0)return jsxRuntimeExports.jsx("div",{className:"p-4 text-center font-bold text-gray-600",children:"No focus sessions completed yet."});const lr=new Date;lr.setHours(0,0,0,0);const ur=ar.filter(vr=>vr.endTimestamp>=lr.getTime()&&vr.type==="work"),cr=ur.reduce((vr,wr)=>vr+wr.durationMinutes,0),dr=new Date;dr.setDate(dr.getDate()-dr.getDay()),dr.setHours(0,0,0,0);const fr=ar.filter(vr=>vr.endTimestamp>=dr.getTime()&&vr.type==="work"),pr=fr.reduce((vr,wr)=>vr+wr.durationMinutes,0),mr=new Date;mr.setDate(1),mr.setHours(0,0,0,0);const hr=ar.filter(vr=>vr.endTimestamp>=mr.getTime()&&vr.type==="work"),gr=hr.reduce((vr,wr)=>vr+wr.durationMinutes,0);return jsxRuntimeExports.jsxs("div",{className:"p-4 text-gray-800 font-semibold space-y-2",children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-lg text-center border-b pb-1 mb-2",children:"Focus Stats"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{children:"Today"}),jsxRuntimeExports.jsxs("p",{className:"text-sm font-normal pl-2",children:["Intervals: ",ur.length]}),jsxRuntimeExports.jsxs("p",{className:"text-sm font-normal pl-2",children:["Time: ",Math.floor(cr/60),"h ",cr%60,"m"]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{children:"This Week"}),jsxRuntimeExports.jsxs("p",{className:"text-sm font-normal pl-2",children:["Intervals: ",fr.length]}),jsxRuntimeExports.jsxs("p",{className:"text-sm font-normal pl-2",children:["Time: ",Math.floor(pr/60),"h ",pr%60,"m"]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{children:"This Month"}),jsxRuntimeExports.jsxs("p",{className:"text-sm font-normal pl-2",children:["Intervals: ",hr.length]}),jsxRuntimeExports.jsxs("p",{className:"text-sm font-normal pl-2",children:["Time: ",Math.floor(gr/60),"h ",gr%60,"m"]})]})]})}),App=()=>{const[ar,or]=reactExports.useState([]),[lr,ur]=reactExports.useState(!0),[cr,dr]=reactExports.useState(""),[fr,pr]=reactExports.useState([{id:"load",activeIndex:0}]),[mr,hr]=reactExports.useState(!1),[gr,vr]=reactExports.useState(null),[wr,_r]=reactExports.useState([]),[Cr,Sr]=reactExports.useState(!1),[Dr,Er]=reactExports.useState("off"),[kr,Ir]=reactExports.useState(.75),[Br,Nr]=reactExports.useState("volume"),[Mr,xr]=reactExports.useState(""),[Rr,Or]=reactExports.useState({isClearing:!1,message:""}),[qr,Jr]=reactExports.useState(0),[na,Wr]=reactExports.useState(()=>({gameState:"idle",score:0,highScore:parseInt(localStorage.getItem("bounceHighScore")||"0",10),paddleAngle:0,ball:{x:0,y:0,dx:0,dy:0},ballSpeed:.8})),[Gr,is]=reactExports.useState(null),[es,ss]=reactExports.useState({isActive:!1,sessionType:"idle",timeRemaining:((Gr==null?void 0:Gr.workMinutes)??25)*60,workIntervalsInCycle:0}),[_i,ba]=reactExports.useState({workIntervals:0,totalTime:0}),[xa,$a]=reactExports.useState(()=>{try{const Vr=localStorage.getItem("ipodColors");return Vr?JSON.parse(Vr):DEFAULT_COLORS}catch(Vr){return console.error("Could not load ipod colors",Vr),DEFAULT_COLORS}}),os=reactExports.useRef(null),ns=reactExports.useRef(null),hs=reactExports.useRef(),ks=reactExports.useRef(null),Ts=reactExports.useRef(null),Es=reactExports.useRef(na),Ss=reactExports.useRef(null);reactExports.useEffect(()=>{Es.current=na},[na]);const $s=useLiveQuery(()=>db.playlists.orderBy("name").toArray(),[qr]),Rs=reactExports.useCallback(()=>{if(wr.length===0||gr===null)return;const Vr=wr.indexOf(gr);Vr!==-1&&(Vr===wr.length-1?Dr==="all"&&vr(wr[0]):vr(wr[Vr+1]))},[wr,gr,Dr]),{isPlaying:Is,currentTime:Ds,duration:jr,play:Lr,pause:Qr,resume:ts,setVolume:rs,seek:ws,stop:ys}=usePlayback({onTrackEnd:Rs,repeatMode:Dr}),vs=reactExports.useCallback(()=>{if(Ds>3){ws(0);return}if(wr.length===0||gr===null)return;const Vr=wr.indexOf(gr);Vr!==-1&&(Vr===0?Dr==="all"&&vr(wr[wr.length-1]):vr(wr[Vr-1]))},[wr,gr,Ds,Dr,ws]),_s=reactExports.useMemo(()=>ar.find(Vr=>Vr.id===gr),[ar,gr]),Yr=fr[fr.length-1],Ps=reactExports.useCallback(()=>{gr?ts():wr.length>0&&vr(wr[0])},[gr,wr,ts]);useMediaSession({song:_s,isPlaying:Is,onPlay:Ps,onPause:Qr,onNext:Rs,onPrev:vs}),reactExports.useEffect(()=>{rs(kr)},[kr,rs]),reactExports.useEffect(()=>{ns.current&&(URL.revokeObjectURL(ns.current),ns.current=null),gr!==null?db.songs.get(gr).then(Vr=>{if(Vr!=null&&Vr.fileBlob){const Xr=URL.createObjectURL(Vr.fileBlob);ns.current=Xr,Lr(Xr)}else Vr===void 0&&(console.warn(`Song with id ${gr} not found. Skipping.`),Rs())}).catch(Vr=>{console.error(`Error loading song with id ${gr}:`,Vr),Rs()}):ys()},[gr,Lr,ys,Rs]);const Ms=reactExports.useCallback((Vr=523.25,Xr=150,_a=20)=>{try{Ss.current||(Ss.current=new(window.AudioContext||window.webkitAudioContext));const Tr=Ss.current;Tr.state==="suspended"&&Tr.resume();const Ar=Tr.createOscillator(),Hr=Tr.createGain();Ar.connect(Hr),Ar.frequency.value=Vr,Ar.type="sine",Hr.connect(Tr.destination),Hr.gain.value=_a*.01,Ar.start(Tr.currentTime),Ar.stop(Tr.currentTime+Xr*.001)}catch(Tr){console.warn("Could not play sound",Tr)}},[]),As=reactExports.useCallback(async()=>{const Vr=new Date;Vr.setHours(0,0,0,0);const Xr=await db.focusSessions.where("endTimestamp").above(Vr.getTime()).filter(Tr=>Tr.type==="work").toArray(),_a=Xr.reduce((Tr,Ar)=>Tr+Ar.durationMinutes,0);ba({workIntervals:Xr.length,totalTime:_a})},[]),js=reactExports.useCallback(async()=>{if(!Gr)return;Ms(880,500);const Vr=es.sessionType;if(Vr!=="idle"){const Ar=Vr==="work"?Gr.workMinutes:Vr==="shortBreak"?Gr.shortBreakMinutes:Gr.longBreakMinutes;await db.focusSessions.add({endTimestamp:Date.now(),durationMinutes:Ar,type:Vr}),Vr==="work"&&await As()}let Xr="work",_a=es.workIntervalsInCycle;Vr==="work"?(_a++,_a>=Gr.longBreakInterval?(Xr="longBreak",_a=0):Xr="shortBreak"):Xr="work";const Tr=(Xr==="work"?Gr.workMinutes:Xr==="shortBreak"?Gr.shortBreakMinutes:Gr.longBreakMinutes)*60;ss({isActive:Gr.autoStart,sessionType:Xr,timeRemaining:Tr,workIntervalsInCycle:_a}),Gr.autoStart&&Ms(440,200)},[es,Gr,Ms,As]);reactExports.useEffect(()=>{if(!es.isActive||es.sessionType==="idle")return;const Vr=setInterval(()=>{ss(Xr=>Xr.timeRemaining<=1?(clearInterval(Vr),js(),{...Xr,isActive:!1,timeRemaining:0}):{...Xr,timeRemaining:Xr.timeRemaining-1})},1e3);return()=>clearInterval(Vr)},[es.isActive,es.sessionType,js]),reactExports.useEffect(()=>{(async()=>{ur(!0);try{await db.open(),await db.transaction("rw",db.playlists,db.focusSettings,async()=>{await db.playlists.get({name:"On-The-Go"})||await db.playlists.add({name:"On-The-Go",songIds:[]}),await db.focusSettings.get(0)||await db.focusSettings.put(DEFAULT_FOCUS_SETTINGS)}).catch(Tr=>{console.warn("Initialization transaction failed, likely because items already exist.",Tr)});const Xr=await db.focusSettings.get(0)||DEFAULT_FOCUS_SETTINGS;if(is(Xr),ss(Tr=>({...Tr,timeRemaining:Xr.workMinutes*60,sessionType:"work"})),await As(),await db.songs.count()>0){const Tr=await db.songs.toArray();or(Tr),pr([{id:"main",activeIndex:0}])}else pr([{id:"load",activeIndex:0}])}catch(Xr){console.error("Failed to initialize the application database:",Xr)}finally{ur(!1)}})()},[As]);const $r=async Vr=>{var Ar;const Xr=Vr.target.files;if(!Xr||Xr.length===0)return;ur(!0),dr("Parsing files...");const _a=[],Tr=Xr.length;for(let Hr=0;Hr<Tr;Hr++){const Zr=Xr[Hr],ga=Zr.name.toLowerCase();if(SUPPORTED_EXTENSIONS.some(as=>ga.endsWith(as)))try{const as=await lib$3.parseBlob(Zr),{common:fs,format:zr}=as,ls=(Ar=fs.picture)!=null&&Ar[0]?{data:fs.picture[0].data,format:fs.picture[0].format}:void 0,cs=Zr.webkitRelativePath.split("/"),ps=cs.length>1?cs[cs.length-2]:void 0;_a.push({fileBlob:Zr,title:fs.title||Zr.name.replace(/\.[^/.]+$/,""),artist:fs.artist||"Unknown Artist",album:fs.album||"Unknown Album",duration:zr.duration||0,artwork:ls,folderName:ps})}catch(as){console.error(`Skipping file ${Zr.name}:`,as)}Hr%20===0&&(dr(`Processing ${Hr+1} of ${Tr}...`),await new Promise(as=>setTimeout(as,0)))}dr("Checking for duplicates..."),await new Promise(Hr=>setTimeout(Hr,0));try{const Hr=await db.songs.toArray(),Zr=new Set(Hr.map(fs=>`${fs.title.trim().toLowerCase()}|${fs.artist.trim().toLowerCase()}|${fs.album.trim().toLowerCase()}`)),ga=_a.filter(fs=>{const zr=`${fs.title.trim().toLowerCase()}|${fs.artist.trim().toLowerCase()}|${fs.album.trim().toLowerCase()}`;return!Zr.has(zr)});if(ga.length>0){dr(`Adding ${ga.length} new songs...`);const fs=ga.map(({folderName:cs,...ps})=>ps),zr=await db.songs.bulkAdd(fs,{allKeys:!0}),ls=new Map;ga.forEach((cs,ps)=>{cs.folderName&&(ls.has(cs.folderName)||ls.set(cs.folderName,[]),ls.get(cs.folderName).push(zr[ps]))}),ls.size>0&&(dr("Creating playlists..."),await db.transaction("rw",db.playlists,async()=>{for(const[cs,ps]of ls.entries()){const Cs=await db.playlists.get({name:cs});if(Cs){const zs=[...new Set([...Cs.songIds,...ps])];await db.playlists.update(Cs.id,{songIds:zs})}else await db.playlists.add({name:cs,songIds:ps})}}),Jr(cs=>cs+1))}else dr("No new songs to add."),await new Promise(fs=>setTimeout(fs,1500));const as=await db.songs.toArray();or(as),await db.transaction("rw",db.playlists,async()=>{await db.playlists.get({name:"On-The-Go"})||await db.playlists.add({name:"On-The-Go",songIds:[]})}).catch(fs=>{console.warn("Could not create On-The-Go playlist after file change, it likely already exists.",fs)}),pr([{id:"main",activeIndex:0}])}catch(Hr){console.error("Failed to save songs:",Hr),alert("An error occurred while adding music. Please try again.")}finally{ur(!1),dr("")}},yr=reactExports.useCallback(async(Vr,Xr)=>{const _a=Math.max(0,Math.min(5,Math.round(Xr)));try{await db.songs.update(Vr,{rating:_a}),or(Tr=>Tr.map(Ar=>Ar.id===Vr?{...Ar,rating:_a}:Ar))}catch(Tr){console.error(`Failed to update rating for song ${Vr}:`,Tr)}},[]),br=reactExports.useCallback(async(Vr,Xr)=>{if(!Gr)return;const _a={...Gr,[Vr]:Xr};await db.focusSettings.put(_a),is(_a)},[Gr]),Pr=reactExports.useCallback((Vr,Xr)=>{$a(_a=>{const Tr={..._a,[Vr]:Xr};return localStorage.setItem("ipodColors",JSON.stringify(Tr)),Tr})},[]),Fr=reactExports.useCallback(()=>{$a(DEFAULT_COLORS),localStorage.removeItem("ipodColors")},[]),Ur=reactExports.useCallback(()=>{if(Yr.id.startsWith("focus-setting-edit/")){const Xr=Yr.id.split("/")[1],_a=Yr.activeIndex;br(Xr,_a)}fr[fr.length-1].id==="bounce-game"&&Wr(Xr=>({...Xr,gameState:"idle",score:0,ball:getInitialBallVelocity(.5),ballSpeed:.8})),Nr("volume"),fr.length>1&&pr(Xr=>Xr.slice(0,-1))},[fr,br,Yr]),Kr=reactExports.useCallback(async()=>{pr(Vr=>[...Vr,{id:"clearing-library",activeIndex:0}]),Or({isClearing:!0,message:"Calculating..."});try{const Vr=await db.songs.toCollection().keys(),Xr=Vr.length;if(Xr===0){Or({isClearing:!1,message:"Library is already empty."}),setTimeout(()=>{pr(Hr=>Hr.slice(0,-1))},2e3);return}let _a=0;const Tr=50;for(let Hr=0;Hr<Xr;Hr+=Tr){const Zr=Vr.slice(Hr,Hr+Tr);await db.songs.bulkDelete(Zr),_a+=Zr.length,Or({isClearing:!0,message:`Deleting... ${_a} songs removed`}),await new Promise(ga=>setTimeout(ga,50))}const Ar=await db.playlists.get({name:"On-The-Go"});Ar&&Ar.id&&await db.playlists.update(Ar.id,{songIds:[]}),Or({isClearing:!1,message:`Library cleared. ${Xr} items removed.`}),ys(),or([]),_r([]),vr(null),setTimeout(()=>{pr([{id:"load",activeIndex:0}]),Or({isClearing:!1,message:""})},2500)}catch(Vr){console.error("Failed to clear library:",Vr),Or({isClearing:!1,message:"An error occurred."}),setTimeout(()=>{pr(Xr=>Xr.slice(0,-1))},2e3)}},[ys]),us=reactExports.useCallback(()=>{Ss.current&&Ss.current.state==="suspended"&&Ss.current.resume(),es.isActive?Ms(330,200):(Is&&Qr(),Ms(440,200)),ss(Vr=>({...Vr,isActive:!Vr.isActive}))},[es.isActive,Is,Qr,Ms]),ds=reactExports.useMemo(()=>{const Vr=(Tr,Ar)=>()=>{let Hr=[...Ar];if(Cr){const Zr=Hr.filter(ga=>ga!==Tr);for(let ga=Zr.length-1;ga>0;ga--){const as=Math.floor(Math.random()*(ga+1));[Zr[ga],Zr[as]]=[Zr[as],Zr[ga]]}Hr=[Tr,...Zr]}_r(Hr),vr(Tr)},Xr=Yr.id,_a=Xr.includes("/")?Xr.split("/")[1]:void 0;switch(!0){case Xr==="main":return[{label:"Now Playing",action:()=>{gr!==null&&pr(zr=>[...zr,{id:"now-playing",activeIndex:0}])},hasArrow:gr!==null},{label:"Music",action:()=>pr(zr=>[...zr,{id:"music",activeIndex:0}]),hasArrow:!0},{label:"Playlists",action:()=>pr(zr=>[...zr,{id:"playlists",activeIndex:0}]),hasArrow:!0},{label:"Focus",action:()=>{Is&&Qr(),pr(zr=>[...zr,{id:"focus",activeIndex:0}])},hasArrow:!0},{label:"Bounce",action:()=>{ys(),Wr(zr=>({...zr,gameState:"idle",score:0,ball:getInitialBallVelocity(.5),ballSpeed:.8})),pr(zr=>[...zr,{id:"bounce-game",activeIndex:0}])},hasArrow:!0},{label:"Settings",action:()=>pr(zr=>[...zr,{id:"settings",activeIndex:0}]),hasArrow:!0}];case Xr==="focus":return[{label:es.isActive?"Pause":"Start",action:us},{label:"Skip Session",action:()=>js()},{label:"Stats",action:()=>pr(zr=>[...zr,{id:"focus-stats",activeIndex:0}]),hasArrow:!0},{label:"Settings",action:()=>pr(zr=>[...zr,{id:"focus-settings",activeIndex:0}]),hasArrow:!0}];case Xr==="focus-settings":return[{label:"Work Duration",subtext:`${Gr==null?void 0:Gr.workMinutes} min`,action:()=>pr(zr=>[...zr,{id:"focus-setting-edit/workMinutes",activeIndex:(Gr==null?void 0:Gr.workMinutes)??25}]),hasArrow:!0},{label:"Short Break",subtext:`${Gr==null?void 0:Gr.shortBreakMinutes} min`,action:()=>pr(zr=>[...zr,{id:"focus-setting-edit/shortBreakMinutes",activeIndex:(Gr==null?void 0:Gr.shortBreakMinutes)??5}]),hasArrow:!0},{label:"Long Break",subtext:`${Gr==null?void 0:Gr.longBreakMinutes} min`,action:()=>pr(zr=>[...zr,{id:"focus-setting-edit/longBreakMinutes",activeIndex:(Gr==null?void 0:Gr.longBreakMinutes)??15}]),hasArrow:!0},{label:"Intervals",subtext:`${Gr==null?void 0:Gr.longBreakInterval}`,action:()=>pr(zr=>[...zr,{id:"focus-setting-edit/longBreakInterval",activeIndex:(Gr==null?void 0:Gr.longBreakInterval)??4}]),hasArrow:!0},{label:`Auto Start: ${Gr!=null&&Gr.autoStart?"On":"Off"}`,action:()=>br("autoStart",!(Gr!=null&&Gr.autoStart))},{label:`Fullscreen Break: ${Gr!=null&&Gr.fullscreenBreak?"On":"Off"}`,action:()=>br("fullscreenBreak",!(Gr!=null&&Gr.fullscreenBreak))},{label:"Reset Stats",action:()=>pr(zr=>[...zr,{id:"focus-reset-confirm",activeIndex:0}]),hasArrow:!0}];case Xr==="focus-reset-confirm":return[{label:"No, Cancel",action:Ur},{label:"Yes, Reset All Stats",action:async()=>{await db.focusSessions.clear(),await As(),pr(zr=>zr.slice(0,-2))}}];case Xr==="bounce-game":return na.gameState==="idle"?[{label:"Start Game",action:()=>Wr(zr=>({...zr,gameState:"playing",score:0,ballSpeed:.8,ball:getInitialBallVelocity(.5)}))}]:na.gameState==="game-over"?[{label:"Play Again",action:()=>{Wr(zr=>({...zr,gameState:"playing",score:0,ball:getInitialBallVelocity(.5),ballSpeed:.8}))}},{label:"Exit",action:Ur}]:[];case Xr==="music":return[{label:"Cover Flow",action:()=>pr(zr=>[...zr,{id:"cover-flow",activeIndex:0}]),hasArrow:!0},{label:"Songs",action:()=>pr(zr=>[...zr,{id:"songs",activeIndex:0}]),hasArrow:!0},{label:"Artists",action:()=>pr(zr=>[...zr,{id:"artists",activeIndex:0}]),hasArrow:!0},{label:"Albums",action:()=>pr(zr=>[...zr,{id:"albums",activeIndex:0}]),hasArrow:!0},{label:"Ratings",action:()=>pr(zr=>[...zr,{id:"ratings",activeIndex:0}]),hasArrow:!0},{label:"Search",action:()=>{xr(""),pr(zr=>[...zr,{id:"search",activeIndex:0}])},hasArrow:!0}];case Xr==="playlists":{if(!$s)return[];const zr=$s.find(ps=>ps.name==="On-The-Go"),ls=$s.filter(ps=>ps.name!=="On-The-Go"),cs=[];return zr&&cs.push({label:"On-The-Go",action:()=>pr(ps=>[...ps,{id:`playlist-songs/${zr.id}`,activeIndex:0}]),hasArrow:!0,subtext:`${zr.songIds.length}`}),ls.forEach(ps=>{cs.push({label:ps.name,action:()=>pr(Cs=>[...Cs,{id:`playlist-songs/${ps.id}`,activeIndex:0}]),hasArrow:!0,subtext:`${ps.songIds.length}`})}),cs}case Xr.startsWith("playlist-songs/"):{if(!$s)return[];const zr=parseInt(_a,10),ls=$s.find(ps=>ps.id===zr);if(!ls)return[];const cs=(ls.songIds??[]).map(ps=>ar.find(Cs=>Cs.id===ps)).filter(ps=>!!ps);return cs.map(ps=>({label:ps.title,action:Vr(ps.id,cs.map(Cs=>Cs.id)),ratingDisplay:jsxRuntimeExports.jsx(StarDisplay,{rating:ps.rating,active:!1}),songId:ps.id}))}case Xr==="songs":return ar.sort((zr,ls)=>zr.title.localeCompare(ls.title)).map(zr=>({label:zr.title,action:Vr(zr.id,ar.map(ls=>ls.id)),ratingDisplay:jsxRuntimeExports.jsx(StarDisplay,{rating:zr.rating,active:!1}),songId:zr.id}));case Xr==="search-results":const Tr=Mr.toLowerCase().trim(),Ar=Tr===""?[]:ar.filter(zr=>zr.title.toLowerCase().includes(Tr)||zr.artist.toLowerCase().includes(Tr)||zr.album.toLowerCase().includes(Tr));return Ar.map(zr=>({label:zr.title,action:Vr(zr.id,Ar.map(ls=>ls.id)),ratingDisplay:jsxRuntimeExports.jsx(StarDisplay,{rating:zr.rating,active:!1}),songId:zr.id}));case Xr.startsWith("rated-songs/"):{const zr=parseInt(_a,10),ls=ar.filter(cs=>(cs.rating??0)>=zr);return ls.map(cs=>({label:cs.title,action:Vr(cs.id,ls.map(ps=>ps.id)),ratingDisplay:jsxRuntimeExports.jsx(StarDisplay,{rating:cs.rating,active:!1}),songId:cs.id}))}case Xr.startsWith("album-songs/"):{const zr=ar.filter(ls=>ls.album===_a);return zr.map(ls=>({label:ls.title,action:Vr(ls.id,zr.map(cs=>cs.id)),ratingDisplay:jsxRuntimeExports.jsx(StarDisplay,{rating:ls.rating,active:!1}),songId:ls.id}))}case Xr==="artists":return[...new Set(ar.map(zr=>zr.artist))].sort().map(zr=>({label:zr,action:()=>pr(ls=>[...ls,{id:`artist-albums/${zr}`,activeIndex:0}]),hasArrow:!0}));case Xr.startsWith("artist-albums/"):const Zr=ar.filter(zr=>zr.artist===_a);return[...new Set(Zr.map(zr=>zr.album))].sort().map(zr=>({label:zr,action:()=>pr(ls=>[...ls,{id:`album-songs/${zr}`,activeIndex:0}]),hasArrow:!0}));case Xr==="albums":return[...new Set(ar.map(zr=>zr.album))].sort().map(zr=>({label:zr,action:()=>pr(ls=>[...ls,{id:`album-songs/${zr}`,activeIndex:0}]),hasArrow:!0}));case Xr==="ratings":return[5,4,3,2,1].map(zr=>({label:"".repeat(zr)+"".repeat(5-zr),action:()=>pr(ls=>[...ls,{id:`rated-songs/${zr}`,activeIndex:0}]),hasArrow:!0}));case Xr==="settings":return[{label:`Shuffle: ${Cr?"On":"Off"}`,action:()=>Sr(zr=>!zr)},{label:`Repeat: ${Dr.charAt(0).toUpperCase()+Dr.slice(1)}`,action:()=>Er(zr=>zr==="off"?"all":zr==="all"?"one":"off")},{label:"Appearance",action:()=>pr(zr=>[...zr,{id:"appearance",activeIndex:0}]),hasArrow:!0},{label:"Library Management",action:()=>pr(zr=>[...zr,{id:"library-management",activeIndex:0}]),hasArrow:!0},{label:"About",action:()=>pr(zr=>[...zr,{id:"about",activeIndex:0}]),hasArrow:!0}];case Xr==="library-management":return[{label:"Add Music",action:()=>pr(zr=>[...zr,{id:"load",activeIndex:0}]),hasArrow:!0},{label:"Clear Library",action:Kr,hasArrow:!0}];case Xr==="appearance":return[{label:"iPod Body",action:()=>pr(zr=>[...zr,{id:"body-color",activeIndex:0}]),hasArrow:!0},{label:"Click Wheel",action:()=>pr(zr=>[...zr,{id:"wheel-color",activeIndex:0}]),hasArrow:!0},{label:"Reset to Default",action:Fr}];case Xr==="body-color":return BODY_COLORS.map(zr=>({label:zr.name,action:()=>Pr("body",zr.class),hasArrow:xa.body===zr.class?!1:void 0,subtext:xa.body===zr.class?"":""}));case Xr==="wheel-color":return WHEEL_COLORS.map(zr=>({label:zr.name,action:()=>Pr("wheel",zr.class),hasArrow:xa.wheel===zr.class?!1:void 0,subtext:xa.wheel===zr.class?"":""}));case Xr==="search":return[..."ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".split("").map(zr=>({label:zr,action:()=>xr(ls=>ls+zr)})),{label:"Space",action:()=>xr(zr=>zr+" ")},{label:"Delete",action:()=>xr(zr=>zr.slice(0,-1))},{label:"Done",action:()=>pr(zr=>[...zr,{id:"search-results",activeIndex:0}]),hasArrow:!0}];default:return[]}},[ar,Yr,Cr,Dr,gr,$s,Mr,na,Ur,ys,xa,Fr,Pr,Kr,es,Gr,us,js,br,As,Is,Qr]),gs=reactExports.useMemo(()=>{if(ar.length===0)return[];const Vr=new Map;return ar.forEach(Xr=>{if(!Vr.has(Xr.album))Vr.set(Xr.album,{artist:Xr.artist,artwork:Xr.artwork});else{const _a=Vr.get(Xr.album);!_a.artwork&&Xr.artwork&&(_a.artwork=Xr.artwork)}}),Array.from(Vr.entries()).map(([Xr,{artist:_a,artwork:Tr}])=>({album:Xr,artist:_a,artwork:Tr})).sort((Xr,_a)=>Xr.album.localeCompare(_a.album))},[ar]);reactExports.useEffect(()=>{const Vr=()=>{const Xr=Es.current;if(Yr.id==="bounce-game"&&Xr.gameState==="playing"){const{ball:Tr,paddleAngle:Ar,score:Hr,ballSpeed:Zr,highScore:ga}=Xr;let as={...Tr};as.x+=as.dx*Zr,as.y+=as.dy*Zr;const fs=Math.sqrt(as.x*as.x+as.y*as.y);let zr={};if(fs>47.5){const cs=(Math.atan2(as.y,as.x)*(180/Math.PI)+90+360)%360,ps=(Ar-PADDLE_ARC_ANGLE/2+360)%360,Cs=(Ar+PADDLE_ARC_ANGLE/2+360)%360;if(ps<Cs?cs>=ps&&cs<=Cs:cs>=ps||cs<=Cs){const Ns=Hr+1,Ws=Math.min(2.5,Zr*1.03);zr={score:Ns,ballSpeed:Ws};let Fs=cs-Ar;Fs>180&&(Fs-=360),Fs<-180&&(Fs+=360);const Ls=Fs/(PADDLE_ARC_ANGLE/2),Os=Math.atan2(-as.y,-as.x),Bs=Math.PI/3.5,Ys=Ls*Bs,Ks=Os+Ys;as.dx=Math.cos(Ks),as.dy=Math.sin(Ks);const qs=Math.atan2(as.y,as.x);as.x=47.4*Math.cos(qs),as.y=47.4*Math.sin(qs)}else{let Ns=ga;Hr>ga&&(Ns=Hr,localStorage.setItem("bounceHighScore",Ns.toString())),zr={gameState:"game-over",highScore:Ns}}}Es.current={...Xr,...zr,ball:as},ks.current&&(ks.current.setAttribute("cx",`${50+as.x}`),ks.current.setAttribute("cy",`${50+as.y}`)),Object.keys(zr).length>0&&Wr(Es.current)}hs.current=requestAnimationFrame(Vr)};return hs.current=requestAnimationFrame(Vr),()=>{hs.current&&cancelAnimationFrame(hs.current)}},[Yr.id]);const xs=reactExports.useCallback(()=>{if(Yr.id.startsWith("focus")){us();return}if(Yr.id==="bounce-game"){na.gameState==="playing"?Wr(Vr=>({...Vr,gameState:"paused"})):na.gameState==="paused"&&Wr(Vr=>({...Vr,gameState:"playing"}));return}Is?Qr():gr?ts():wr.length>0&&vr(wr[0])},[Is,gr,wr,Qr,ts,Yr.id,na.gameState,us]),bs=reactExports.useCallback(Vr=>{if(Yr.id.startsWith("focus-setting-edit/")){const _a=Yr.id.split("/")[1];pr(Tr=>{const Ar=Tr[Tr.length-1];let Hr=Ar.activeIndex+Vr;return _a==="longBreakInterval"?Hr=Math.max(1,Math.min(10,Hr)):Hr=Math.max(1,Math.min(90,Hr)),[...Tr.slice(0,-1),{...Ar,activeIndex:Hr}]});return}if(Yr.id==="bounce-game"&&Es.current.gameState==="playing"){const _a=(Es.current.paddleAngle+Vr*10+360)%360;if(Es.current.paddleAngle=_a,Ts.current){const Tr=describeArc(50,50,48,_a-PADDLE_ARC_ANGLE/2,_a+PADDLE_ARC_ANGLE/2);Ts.current.setAttribute("d",Tr)}return}if(Yr.id==="now-playing"&&(_s!=null&&_s.id)){if(Br==="rating"){const _a=_s.rating||0,Tr=Math.max(0,Math.min(5,_a+Vr));Tr!==_a&&yr(_s.id,Tr)}else Ir(_a=>Math.max(0,Math.min(1,_a+Vr*.05)));return}const Xr=Yr.id==="cover-flow"?gs:ds;!Xr||Xr.length===0||pr(_a=>{const Tr=_a[_a.length-1],Ar=(Tr.activeIndex+Vr+Xr.length)%Xr.length;return[..._a.slice(0,-1),{...Tr,activeIndex:Ar}]})},[Yr,Br,_s,ds,gs,yr]),Gs=reactExports.useCallback(()=>{var Vr,Xr,_a;if(Yr.id.startsWith("focus-setting-edit/")){const Tr=Yr.id.split("/")[1],Ar=Yr.activeIndex;br(Tr,Ar),pr(Hr=>Hr.slice(0,-1));return}if(Yr.id==="bounce-game")["idle","game-over"].includes(na.gameState)&&((Vr=ds[Yr.activeIndex])==null||Vr.action());else if(Yr.id==="now-playing")Nr(Tr=>Tr==="volume"?"rating":"volume");else if(Yr.id==="load")(Xr=os.current)==null||Xr.click();else if(Yr.id==="cover-flow"&&gs.length>0){const Tr=gs[Yr.activeIndex].album;pr(Ar=>[...Ar,{id:`album-songs/${Tr}`,activeIndex:0}])}else(_a=ds[Yr.activeIndex])==null||_a.action()},[Yr,ds,gs,na.gameState,br]),Hs=reactExports.useCallback(async()=>{const Vr=ds[Yr.activeIndex],Xr=Vr==null?void 0:Vr.songId;if(Xr)try{let _a=!1;await db.transaction("rw",db.playlists,async()=>{const Tr=await db.playlists.get({name:"On-The-Go"});Tr?Tr.songIds.includes(Xr)||(await db.playlists.update(Tr.id,{songIds:[...Tr.songIds,Xr]}),_a=!0):(await db.playlists.add({name:"On-The-Go",songIds:[Xr]}),_a=!0)}),_a&&(hr(!0),setTimeout(()=>hr(!1),300))}catch(_a){console.error("Failed to add song to On-The-Go playlist:",_a)}},[ds,Yr.activeIndex]),Vs=()=>{const Vr=Yr.id,Xr=Vr.includes("/")?Vr.split("/")[1]:void 0;if(Vr==="main")return"ReactPod";if(Vr==="now-playing")return"Now Playing";if(Vr==="cover-flow")return"Cover Flow";if(Vr==="search")return"Search";if(Vr==="playlists")return"Playlists";if(Vr.startsWith("playlist-songs/")){if(!$s)return"Playlist";const _a=parseInt(Xr,10),Tr=$s.find(Ar=>Ar.id===_a);return Tr?Tr.name:"Playlist"}return Vr==="ratings"?"Ratings":Vr==="about"?"About":Vr==="appearance"?"Appearance":Vr==="body-color"?"iPod Body Color":Vr==="wheel-color"?"Click Wheel Color":Vr==="library-management"?"Library Management":Vr==="clearing-library"?"Clearing Library":Vr==="focus"?"Focus Timer":Vr==="focus-settings"?"Focus Settings":Vr==="focus-stats"?"Focus Stats":Vr==="focus-reset-confirm"?"Reset Stats?":Vr.startsWith("focus-setting-edit/")?(Xr==null?void 0:Xr.replace(/([A-Z])/g," $1").replace("Minutes"," Duration").replace("Interval"," Length").split(" ").map(_a=>_a.charAt(0).toUpperCase()+_a.slice(1)).join(" "))||"Edit":Vr==="bounce-game"?na.gameState==="game-over"?`Game Over | Score: ${na.score}`:`Bounce | Score: ${na.score}`:Vr.startsWith("rated-songs/")?"".repeat(Number(Xr))+"".repeat(5-Number(Xr)):Vr==="search-results"?`Results: ${Mr}`:Vr.startsWith("artist-albums/")||Vr.startsWith("album-songs/")?decodeURIComponent(Xr):Vr.charAt(0).toUpperCase()+Vr.slice(1)},Us=Yr.id.startsWith("focus")?es.isActive:Yr.id==="bounce-game"?na.gameState==="playing":Is,Xs=()=>{const Vr=ar.length===0&&!Gr;if(Yr.id==="load"||lr&&Vr)return jsxRuntimeExports.jsx(FileLoadView,{isLoading:lr,loadingProgress:cr,onLoad:()=>{var Xr;return(Xr=os.current)==null?void 0:Xr.click()},isInitialLoad:ar.length===0});if(Yr.id==="clearing-library")return jsxRuntimeExports.jsx(ClearingLibraryView,{isClearing:Rr.isClearing,message:Rr.message});if(Yr.id==="now-playing"&&_s){const Xr=gr!==null?wr.indexOf(gr):-1,_a=wr.length;return jsxRuntimeExports.jsx(NowPlayingView,{song:_s,isPlaying:Is,currentTime:Ds,duration:jr||_s.duration,volume:kr,mode:Br,trackNumber:Xr+1,totalTracks:_a})}if(Yr.id==="cover-flow")return jsxRuntimeExports.jsx(CoverFlowView,{items:gs,activeIndex:Yr.activeIndex});if(Yr.id==="search")return jsxRuntimeExports.jsx(SearchView,{query:Mr,items:ds,activeIndex:Yr.activeIndex});if(Yr.id==="about")return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-800 p-4 space-y-2",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-bold",children:"ReactPod"}),jsxRuntimeExports.jsx("p",{children:"Developed by Revanth Atmakuri"})]});if(Yr.id==="bounce-game")return["playing","paused","idle"].includes(na.gameState)?jsxRuntimeExports.jsx(BounceGameView,{...na,ballRef:ks,paddleRef:Ts}):jsxRuntimeExports.jsx(MenuView,{items:ds,activeIndex:Yr.activeIndex});if(Yr.id==="focus"&&Gr)return Gr.fullscreenBreak&&es.isActive&&es.sessionType.includes("Break")?jsxRuntimeExports.jsx(FullscreenBreakView,{state:es}):jsxRuntimeExports.jsx(FocusTimerView,{state:es,settings:Gr,stats:_i});if(Yr.id==="focus-stats")return jsxRuntimeExports.jsx(FocusStatsView,{});if(Yr.id.startsWith("focus-setting-edit/")){const Xr=Yr.id.split("/")[1],_a=Yr.activeIndex,Tr=Xr.replace(/([A-Z])/g," $1").replace("Minutes","(min)");return jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col justify-center items-center text-center p-4 text-gray-800",children:[jsxRuntimeExports.jsx("p",{className:"font-bold text-lg capitalize",children:Tr}),jsxRuntimeExports.jsx("p",{className:"text-6xl font-mono tracking-tighter my-4",children:_a}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:"Scroll to change"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Press Menu or Select to save"})]})}return Yr.id==="search-results"&&ds.length===0&&Mr?jsxRuntimeExports.jsx("div",{className:"p-4 text-center font-bold text-gray-600",children:"No Results Found"}):ds.length===0&&!["about","load","main","cover-flow","search","focus-stats"].includes(Yr.id)&&!Yr.id.startsWith("focus-setting-edit")?jsxRuntimeExports.jsx("div",{className:"p-4 text-center font-bold text-gray-600",children:"No Items"}):jsxRuntimeExports.jsx(MenuView,{items:ds,activeIndex:Yr.activeIndex})};return jsxRuntimeExports.jsxs("div",{className:`w-[320px] h-[520px] ${xa.body} rounded-[40px] shadow-2xl p-4 flex flex-col border-2 border-gray-400 select-none`,children:[jsxRuntimeExports.jsx("input",{type:"file",ref:os,onChange:$r,multiple:!0,directory:"",webkitdirectory:"",accept:SUPPORTED_EXTENSIONS.join(","),className:"hidden"}),jsxRuntimeExports.jsx(Screen,{title:Vs(),isFlashing:mr,children:Xs()}),jsxRuntimeExports.jsx(ClickWheel,{onScroll:bs,onMenuClick:Ur,onPlayPauseClick:xs,onNextClick:Rs,onPrevClick:vs,onSelectClick:Gs,onSelectLongPress:Hs,isPlaying:Us,wheelClass:xa.wheel})]})},rootElement=document.getElementById("root");if(!rootElement)throw new Error("Could not find root element to mount to");const root=client.createRoot(rootElement);root.render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
